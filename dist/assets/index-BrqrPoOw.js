function C2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function A2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sy={exports:{}},Wc={},Iy={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=Symbol.for("react.element"),P2=Symbol.for("react.portal"),R2=Symbol.for("react.fragment"),M2=Symbol.for("react.strict_mode"),D2=Symbol.for("react.profiler"),O2=Symbol.for("react.provider"),L2=Symbol.for("react.context"),V2=Symbol.for("react.forward_ref"),F2=Symbol.for("react.suspense"),z2=Symbol.for("react.memo"),U2=Symbol.for("react.lazy"),gg=Symbol.iterator;function $2(t){return t===null||typeof t!="object"?null:(t=gg&&t[gg]||t["@@iterator"],typeof t=="function"?t:null)}var ky={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cy=Object.assign,Ay={};function Oi(t,e,n){this.props=t,this.context=e,this.refs=Ay,this.updater=n||ky}Oi.prototype.isReactComponent={};Oi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Py(){}Py.prototype=Oi.prototype;function bf(t,e,n){this.props=t,this.context=e,this.refs=Ay,this.updater=n||ky}var _f=bf.prototype=new Py;_f.constructor=bf;Cy(_f,Oi.prototype);_f.isPureReactComponent=!0;var xg=Array.isArray,Ry=Object.prototype.hasOwnProperty,Nf={current:null},My={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Ry.call(e,r)&&!My.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:bo,type:t,key:a,ref:o,props:s,_owner:Nf.current}}function B2(t,e){return{$$typeof:bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jf(t){return typeof t=="object"&&t!==null&&t.$$typeof===bo}function q2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yg=/\/+/g;function rd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?q2(""+t.key):e.toString(36)}function Il(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bo:case P2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+rd(o,0):r,xg(s)?(n="",t!=null&&(n=t.replace(yg,"$&/")+"/"),Il(s,e,n,"",function(d){return d})):s!=null&&(jf(s)&&(s=B2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",xg(t))for(var l=0;l<t.length;l++){a=t[l];var u=r+rd(a,l);o+=Il(a,e,n,u,s)}else if(u=$2(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=r+rd(a,l++),o+=Il(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sl(t,e,n){if(t==null)return t;var r=[],s=0;return Il(t,r,"","",function(a){return e.call(n,a,s++)}),r}function H2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},kl={transition:null},W2={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:kl,ReactCurrentOwner:Nf};function Oy(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:sl,forEach:function(t,e,n){sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sl(t,function(){e++}),e},toArray:function(t){return sl(t,function(e){return e})||[]},only:function(t){if(!jf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Oi;re.Fragment=R2;re.Profiler=D2;re.PureComponent=bf;re.StrictMode=M2;re.Suspense=F2;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W2;re.act=Oy;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Cy({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Nf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ry.call(e,u)&&!My.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:bo,type:t.type,key:s,ref:a,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:L2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O2,_context:t},t.Consumer=t};re.createElement=Dy;re.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:V2,render:t}};re.isValidElement=jf;re.lazy=function(t){return{$$typeof:U2,_payload:{_status:-1,_result:t},_init:H2}};re.memo=function(t,e){return{$$typeof:z2,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=kl.transition;kl.transition={};try{t()}finally{kl.transition=e}};re.unstable_act=Oy;re.useCallback=function(t,e){return gt.current.useCallback(t,e)};re.useContext=function(t){return gt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};re.useEffect=function(t,e){return gt.current.useEffect(t,e)};re.useId=function(){return gt.current.useId()};re.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return gt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};re.useRef=function(t){return gt.current.useRef(t)};re.useState=function(t){return gt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return gt.current.useTransition()};re.version="18.3.1";Iy.exports=re;var D=Iy.exports;const G2=A2(D),K2=C2({__proto__:null,default:G2},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2=D,Y2=Symbol.for("react.element"),J2=Symbol.for("react.fragment"),X2=Object.prototype.hasOwnProperty,Z2=Q2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eN={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)X2.call(e,r)&&!eN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Y2,type:t,key:a,ref:o,props:s,_owner:Z2.current}}Wc.Fragment=J2;Wc.jsx=Ly;Wc.jsxs=Ly;Sy.exports=Wc;var i=Sy.exports,Vy={exports:{}},Lt={},Fy={exports:{}},zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var pe=Z-1>>>1,de=B[pe];if(0<s(de,Y))B[pe]=Y,B[Z]=de,Z=pe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var pe=0,de=B.length,je=de>>>1;pe<je;){var Kt=2*(pe+1)-1,Ft=B[Kt],yt=Kt+1,F=B[yt];if(0>s(Ft,Z))yt<de&&0>s(F,Ft)?(B[pe]=F,B[yt]=Z,pe=yt):(B[pe]=Ft,B[Kt]=Z,pe=Kt);else if(yt<de&&0>s(F,Z))B[pe]=F,B[yt]=Z,pe=yt;else break e}}return Y}function s(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,N=!1,k=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function R(B){if(C=!1,v(B),!k)if(n(u)!==null)k=!0,dt(A);else{var Y=n(d);Y!==null&&xe(R,Y.startTime-B)}}function A(B,Y){k=!1,C&&(C=!1,y(w),w=-1),N=!0;var Z=g;try{for(v(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!P());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,g=m.priorityLevel;var de=pe(m.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),v(Y)}else r(u);m=n(u)}if(m!==null)var je=!0;else{var Kt=n(d);Kt!==null&&xe(R,Kt.startTime-Y),je=!1}return je}finally{m=null,g=Z,N=!1}}var M=!1,j=null,w=-1,S=5,b=-1;function P(){return!(t.unstable_now()-b<S)}function E(){if(j!==null){var B=t.unstable_now();b=B;var Y=!0;try{Y=j(!0,B)}finally{Y?T():(M=!1,j=null)}}else M=!1}var T;if(typeof x=="function")T=function(){x(E)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ne=V.port2;V.port1.onmessage=E,T=function(){ne.postMessage(null)}}else T=function(){I(E,0)};function dt(B){j=B,M||(M=!0,T())}function xe(B,Y){w=I(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,dt(A))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Z=g;g=Y;try{return B()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=g;g=B;try{return Y()}finally{g=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var pe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Z+de,B={id:f++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:de,sortIndex:-1},Z>pe?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(C?(y(w),w=-1):C=!0,xe(R,Z-pe))):(B.sortIndex=de,e(u,B),k||N||(k=!0,dt(A))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var Y=g;return function(){var Z=g;g=Y;try{return B.apply(this,arguments)}finally{g=Z}}}})(zy);Fy.exports=zy;var tN=Fy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=D,Ot=tN;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Uy=new Set,$a={};function Es(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for($a[t]=e,t=0;t<e.length;t++)Uy.add(e[t])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wd=Object.prototype.hasOwnProperty,rN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vg={},wg={};function sN(t){return Wd.call(wg,t)?!0:Wd.call(vg,t)?!1:rN.test(t)?wg[t]=!0:(vg[t]=!0,!1)}function iN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aN(t,e,n,r){if(e===null||typeof e>"u"||iN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ef=/[\-:]([a-z])/g;function Tf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ef,Tf);Xe[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ef,Tf);Xe[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ef,Tf);Xe[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aN(e,n,s,r)&&(n=null),r||s===null?sN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=nN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),Gd=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),By=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Kd=Symbol.for("react.suspense"),Qd=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),qy=Symbol.for("react.offscreen"),bg=Symbol.iterator;function oa(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,sd;function ga(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var id=!1;function ad(t,e){if(!t||id)return"";id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{id=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ga(t):""}function oN(t){switch(t.tag){case 5:return ga(t.type);case 16:return ga("Lazy");case 13:return ga("Suspense");case 19:return ga("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function Yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gs:return"Fragment";case Ws:return"Portal";case Gd:return"Profiler";case If:return"StrictMode";case Kd:return"Suspense";case Qd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case By:return(t.displayName||"Context")+".Consumer";case $y:return(t._context.displayName||"Context")+".Provider";case kf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cf:return e=t.displayName||null,e!==null?e:Yd(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Yd(t(e))}catch{}}return null}function lN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yd(e);case 8:return e===If?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cN(t){var e=Hy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function al(t){t._valueTracker||(t._valueTracker=cN(t))}function Wy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Hy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _g(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gy(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function Xd(t,e){Gy(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zd(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ng(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zd(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xa=Array.isArray;function ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function eh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(xa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function Ky(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Eg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ol,Yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ba(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uN=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(t){uN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sa[e]=Sa[t]})});function Jy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sa.hasOwnProperty(t)&&Sa[t]?(""+e).trim():e+"px"}function Xy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Jy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dN=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nh(t,e){if(e){if(dN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=null;function Af(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ih=null,ai=null,oi=null;function Tg(t){if(t=jo(t)){if(typeof ih!="function")throw Error($(280));var e=t.stateNode;e&&(e=Jc(e),ih(t.stateNode,t.type,e))}}function Zy(t){ai?oi?oi.push(t):oi=[t]:ai=t}function ev(){if(ai){var t=ai,e=oi;if(oi=ai=null,Tg(t),e)for(t=0;t<e.length;t++)Tg(e[t])}}function tv(t,e){return t(e)}function nv(){}var od=!1;function rv(t,e,n){if(od)return t(e,n);od=!0;try{return tv(t,e,n)}finally{od=!1,(ai!==null||oi!==null)&&(nv(),ev())}}function qa(t,e){var n=t.stateNode;if(n===null)return null;var r=Jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ah=!1;if(Bn)try{var la={};Object.defineProperty(la,"passive",{get:function(){ah=!0}}),window.addEventListener("test",la,la),window.removeEventListener("test",la,la)}catch{ah=!1}function hN(t,e,n,r,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ia=!1,Xl=null,Zl=!1,oh=null,fN={onError:function(t){Ia=!0,Xl=t}};function mN(t,e,n,r,s,a,o,l,u){Ia=!1,Xl=null,hN.apply(fN,arguments)}function pN(t,e,n,r,s,a,o,l,u){if(mN.apply(this,arguments),Ia){if(Ia){var d=Xl;Ia=!1,Xl=null}else throw Error($(198));Zl||(Zl=!0,oh=d)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sg(t){if(Ts(t)!==t)throw Error($(188))}function gN(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Sg(s),t;if(a===r)return Sg(s),e;a=a.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function iv(t){return t=gN(t),t!==null?av(t):null}function av(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=av(t);if(e!==null)return e;t=t.sibling}return null}var ov=Ot.unstable_scheduleCallback,Ig=Ot.unstable_cancelCallback,xN=Ot.unstable_shouldYield,yN=Ot.unstable_requestPaint,Me=Ot.unstable_now,vN=Ot.unstable_getCurrentPriorityLevel,Pf=Ot.unstable_ImmediatePriority,lv=Ot.unstable_UserBlockingPriority,ec=Ot.unstable_NormalPriority,wN=Ot.unstable_LowPriority,cv=Ot.unstable_IdlePriority,Gc=null,vn=null;function bN(t){if(vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Gc,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:jN,_N=Math.log,NN=Math.LN2;function jN(t){return t>>>=0,t===0?32:31-(_N(t)/NN|0)|0}var ll=64,cl=4194304;function ya(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ya(l):(a&=o,a!==0&&(r=ya(a)))}else o=n&~s,o!==0?r=ya(o):a!==0&&(r=ya(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function EN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-tn(a),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=EN(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function lh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uv(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function ld(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _o(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function SN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Rf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function dv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hv,Mf,fv,mv,pv,ch=!1,ul=[],vr=null,wr=null,br=null,Ha=new Map,Wa=new Map,lr=[],IN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Ha.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(e.pointerId)}}function ca(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=jo(e),e!==null&&Mf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kN(t,e,n,r,s){switch(e){case"focusin":return vr=ca(vr,t,e,n,r,s),!0;case"dragenter":return wr=ca(wr,t,e,n,r,s),!0;case"mouseover":return br=ca(br,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ha.set(a,ca(Ha.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Wa.set(a,ca(Wa.get(a)||null,t,e,n,r,s)),!0}return!1}function gv(t){var e=ts(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=sv(n),e!==null){t.blockedOn=e,pv(t.priority,function(){fv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sh=r,n.target.dispatchEvent(r),sh=null}else return e=jo(n),e!==null&&Mf(e),t.blockedOn=n,!1;e.shift()}return!0}function Cg(t,e,n){Cl(t)&&n.delete(e)}function CN(){ch=!1,vr!==null&&Cl(vr)&&(vr=null),wr!==null&&Cl(wr)&&(wr=null),br!==null&&Cl(br)&&(br=null),Ha.forEach(Cg),Wa.forEach(Cg)}function ua(t,e){t.blockedOn===e&&(t.blockedOn=null,ch||(ch=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,CN)))}function Ga(t){function e(s){return ua(s,t)}if(0<ul.length){ua(ul[0],t);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&ua(vr,t),wr!==null&&ua(wr,t),br!==null&&ua(br,t),Ha.forEach(e),Wa.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)gv(n),n.blockedOn===null&&lr.shift()}var li=Jn.ReactCurrentBatchConfig,nc=!0;function AN(t,e,n,r){var s=fe,a=li.transition;li.transition=null;try{fe=1,Df(t,e,n,r)}finally{fe=s,li.transition=a}}function PN(t,e,n,r){var s=fe,a=li.transition;li.transition=null;try{fe=4,Df(t,e,n,r)}finally{fe=s,li.transition=a}}function Df(t,e,n,r){if(nc){var s=uh(t,e,n,r);if(s===null)yd(t,e,r,rc,n),kg(t,r);else if(kN(s,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<IN.indexOf(t)){for(;s!==null;){var a=jo(s);if(a!==null&&hv(a),a=uh(t,e,n,r),a===null&&yd(t,e,r,rc,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else yd(t,e,r,null,n)}}var rc=null;function uh(t,e,n,r){if(rc=null,t=Af(r),t=ts(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rc=t,null}function xv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vN()){case Pf:return 1;case lv:return 4;case ec:case wN:return 16;case cv:return 536870912;default:return 16}default:return 16}}var pr=null,Of=null,Al=null;function yv(){if(Al)return Al;var t,e=Of,n=e.length,r,s="value"in pr?pr.value:pr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Al=s.slice(t,1<r?1-r:void 0)}function Pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dl(){return!0}function Ag(){return!1}function Vt(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?dl:Ag,this.isPropagationStopped=Ag,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=Vt(Li),No=Ie({},Li,{view:0,detail:0}),RN=Vt(No),cd,ud,da,Kc=Ie({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(cd=t.screenX-da.screenX,ud=t.screenY-da.screenY):ud=cd=0,da=t),cd)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),Pg=Vt(Kc),MN=Ie({},Kc,{dataTransfer:0}),DN=Vt(MN),ON=Ie({},No,{relatedTarget:0}),dd=Vt(ON),LN=Ie({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),VN=Vt(LN),FN=Ie({},Li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zN=Vt(FN),UN=Ie({},Li,{data:0}),Rg=Vt(UN),$N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qN[t])?!!e[t]:!1}function Vf(){return HN}var WN=Ie({},No,{key:function(t){if(t.key){var e=$N[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?BN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GN=Vt(WN),KN=Ie({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mg=Vt(KN),QN=Ie({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),YN=Vt(QN),JN=Ie({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),XN=Vt(JN),ZN=Ie({},Kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ej=Vt(ZN),tj=[9,13,27,32],Ff=Bn&&"CompositionEvent"in window,ka=null;Bn&&"documentMode"in document&&(ka=document.documentMode);var nj=Bn&&"TextEvent"in window&&!ka,vv=Bn&&(!Ff||ka&&8<ka&&11>=ka),Dg=" ",Og=!1;function wv(t,e){switch(t){case"keyup":return tj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ks=!1;function rj(t,e){switch(t){case"compositionend":return bv(e);case"keypress":return e.which!==32?null:(Og=!0,Dg);case"textInput":return t=e.data,t===Dg&&Og?null:t;default:return null}}function sj(t,e){if(Ks)return t==="compositionend"||!Ff&&wv(t,e)?(t=yv(),Al=Of=pr=null,Ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vv&&e.locale!=="ko"?null:e.data;default:return null}}var ij={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ij[t.type]:e==="textarea"}function _v(t,e,n,r){Zy(r),e=sc(e,"onChange"),0<e.length&&(n=new Lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ca=null,Ka=null;function aj(t){Rv(t,0)}function Qc(t){var e=Js(t);if(Wy(e))return t}function oj(t,e){if(t==="change")return e}var Nv=!1;if(Bn){var hd;if(Bn){var fd="oninput"in document;if(!fd){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),fd=typeof Vg.oninput=="function"}hd=fd}else hd=!1;Nv=hd&&(!document.documentMode||9<document.documentMode)}function Fg(){Ca&&(Ca.detachEvent("onpropertychange",jv),Ka=Ca=null)}function jv(t){if(t.propertyName==="value"&&Qc(Ka)){var e=[];_v(e,Ka,t,Af(t)),rv(aj,e)}}function lj(t,e,n){t==="focusin"?(Fg(),Ca=e,Ka=n,Ca.attachEvent("onpropertychange",jv)):t==="focusout"&&Fg()}function cj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(Ka)}function uj(t,e){if(t==="click")return Qc(e)}function dj(t,e){if(t==="input"||t==="change")return Qc(e)}function hj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:hj;function Qa(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wd.call(e,s)||!an(t[s],e[s]))return!1}return!0}function zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,e){var n=zg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zg(n)}}function Ev(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ev(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tv(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function zf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fj(t){var e=Tv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ev(n.ownerDocument.documentElement,n)){if(r!==null&&zf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=Ug(n,a);var o=Ug(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mj=Bn&&"documentMode"in document&&11>=document.documentMode,Qs=null,dh=null,Aa=null,hh=!1;function $g(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hh||Qs==null||Qs!==Jl(r)||(r=Qs,"selectionStart"in r&&zf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Aa&&Qa(Aa,r)||(Aa=r,r=sc(dh,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qs)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ys={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},md={},Sv={};Bn&&(Sv=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Yc(t){if(md[t])return md[t];if(!Ys[t])return t;var e=Ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sv)return md[t]=e[n];return t}var Iv=Yc("animationend"),kv=Yc("animationiteration"),Cv=Yc("animationstart"),Av=Yc("transitionend"),Pv=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){Pv.set(t,e),Es(e,[t])}for(var pd=0;pd<Bg.length;pd++){var gd=Bg[pd],pj=gd.toLowerCase(),gj=gd[0].toUpperCase()+gd.slice(1);Vr(pj,"on"+gj)}Vr(Iv,"onAnimationEnd");Vr(kv,"onAnimationIteration");Vr(Cv,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(Av,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var va="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xj=new Set("cancel close invalid load scroll toggle".split(" ").concat(va));function qg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pN(r,e,void 0,t),t.currentTarget=null}function Rv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;qg(s,l,d),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;qg(s,l,d),a=u}}}if(Zl)throw t=oh,Zl=!1,oh=null,t}function we(t,e){var n=e[xh];n===void 0&&(n=e[xh]=new Set);var r=t+"__bubble";n.has(r)||(Mv(e,t,2,!1),n.add(r))}function xd(t,e,n){var r=0;e&&(r|=4),Mv(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Ya(t){if(!t[fl]){t[fl]=!0,Uy.forEach(function(n){n!=="selectionchange"&&(xj.has(n)||xd(n,!1,t),xd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,xd("selectionchange",!1,e))}}function Mv(t,e,n,r){switch(xv(e)){case 1:var s=AN;break;case 4:s=PN;break;default:s=Df}n=s.bind(null,e,n,t),s=void 0,!ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function yd(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ts(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}rv(function(){var d=a,f=Af(n),m=[];e:{var g=Pv.get(t);if(g!==void 0){var N=Lf,k=t;switch(t){case"keypress":if(Pl(n)===0)break e;case"keydown":case"keyup":N=GN;break;case"focusin":k="focus",N=dd;break;case"focusout":k="blur",N=dd;break;case"beforeblur":case"afterblur":N=dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Pg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=DN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=YN;break;case Iv:case kv:case Cv:N=VN;break;case Av:N=XN;break;case"scroll":N=RN;break;case"wheel":N=ej;break;case"copy":case"cut":case"paste":N=zN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Mg}var C=(e&4)!==0,I=!C&&t==="scroll",y=C?g!==null?g+"Capture":null:g;C=[];for(var x=d,v;x!==null;){v=x;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,y!==null&&(R=qa(x,y),R!=null&&C.push(Ja(x,R,v)))),I)break;x=x.return}0<C.length&&(g=new N(g,k,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==sh&&(k=n.relatedTarget||n.fromElement)&&(ts(k)||k[qn]))break e;if((N||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=d,k=k?ts(k):null,k!==null&&(I=Ts(k),k!==I||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=d),N!==k)){if(C=Pg,R="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=Mg,R="onPointerLeave",y="onPointerEnter",x="pointer"),I=N==null?g:Js(N),v=k==null?g:Js(k),g=new C(R,x+"leave",N,n,f),g.target=I,g.relatedTarget=v,R=null,ts(f)===d&&(C=new C(y,x+"enter",k,n,f),C.target=v,C.relatedTarget=I,R=C),I=R,N&&k)t:{for(C=N,y=k,x=0,v=C;v;v=zs(v))x++;for(v=0,R=y;R;R=zs(R))v++;for(;0<x-v;)C=zs(C),x--;for(;0<v-x;)y=zs(y),v--;for(;x--;){if(C===y||y!==null&&C===y.alternate)break t;C=zs(C),y=zs(y)}C=null}else C=null;N!==null&&Hg(m,g,N,C,!1),k!==null&&I!==null&&Hg(m,I,k,C,!0)}}e:{if(g=d?Js(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var A=oj;else if(Lg(g))if(Nv)A=dj;else{A=cj;var M=lj}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(A=uj);if(A&&(A=A(t,d))){_v(m,A,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Zd(g,"number",g.value)}switch(M=d?Js(d):window,t){case"focusin":(Lg(M)||M.contentEditable==="true")&&(Qs=M,dh=d,Aa=null);break;case"focusout":Aa=dh=Qs=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,$g(m,n,f);break;case"selectionchange":if(mj)break;case"keydown":case"keyup":$g(m,n,f)}var j;if(Ff)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ks?wv(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(vv&&n.locale!=="ko"&&(Ks||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ks&&(j=yv()):(pr=f,Of="value"in pr?pr.value:pr.textContent,Ks=!0)),M=sc(d,w),0<M.length&&(w=new Rg(w,t,null,n,f),m.push({event:w,listeners:M}),j?w.data=j:(j=bv(n),j!==null&&(w.data=j)))),(j=nj?rj(t,n):sj(t,n))&&(d=sc(d,"onBeforeInput"),0<d.length&&(f=new Rg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}Rv(m,e)})}function Ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=qa(t,n),a!=null&&r.unshift(Ja(t,a,s)),a=qa(t,e),a!=null&&r.push(Ja(t,a,s))),t=t.return}return r}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hg(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=qa(n,a),u!=null&&o.unshift(Ja(n,u,l))):s||(u=qa(n,a),u!=null&&o.push(Ja(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yj=/\r\n?/g,vj=/\u0000|\uFFFD/g;function Wg(t){return(typeof t=="string"?t:""+t).replace(yj,`
`).replace(vj,"")}function ml(t,e,n){if(e=Wg(e),Wg(t)!==e&&n)throw Error($(425))}function ic(){}var fh=null,mh=null;function ph(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gh=typeof setTimeout=="function"?setTimeout:void 0,wj=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,bj=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(_j)}:gh;function _j(t){setTimeout(function(){throw t})}function vd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ga(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Vi=Math.random().toString(36).slice(2),pn="__reactFiber$"+Vi,Xa="__reactProps$"+Vi,qn="__reactContainer$"+Vi,xh="__reactEvents$"+Vi,Nj="__reactListeners$"+Vi,jj="__reactHandles$"+Vi;function ts(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[pn])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function jo(t){return t=t[pn]||t[qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Jc(t){return t[Xa]||null}var yh=[],Xs=-1;function Fr(t){return{current:t}}function _e(t){0>Xs||(t.current=yh[Xs],yh[Xs]=null,Xs--)}function ye(t,e){Xs++,yh[Xs]=t.current,t.current=e}var Rr={},ct=Fr(Rr),Nt=Fr(!1),hs=Rr;function yi(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function ac(){_e(Nt),_e(ct)}function Qg(t,e,n){if(ct.current!==Rr)throw Error($(168));ye(ct,e),ye(Nt,n)}function Dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,lN(t)||"Unknown",s));return Ie({},n,r)}function oc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,hs=ct.current,ye(ct,t),ye(Nt,Nt.current),!0}function Yg(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Dv(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,_e(Nt),_e(ct),ye(ct,t)):_e(Nt),ye(Nt,n)}var Rn=null,Xc=!1,wd=!1;function Ov(t){Rn===null?Rn=[t]:Rn.push(t)}function Ej(t){Xc=!0,Ov(t)}function zr(){if(!wd&&Rn!==null){wd=!0;var t=0,e=fe;try{var n=Rn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,Xc=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),ov(Pf,zr),s}finally{fe=e,wd=!1}}return null}var Zs=[],ei=0,lc=null,cc=0,zt=[],Ut=0,fs=null,Mn=1,Dn="";function Jr(t,e){Zs[ei++]=cc,Zs[ei++]=lc,lc=t,cc=e}function Lv(t,e,n){zt[Ut++]=Mn,zt[Ut++]=Dn,zt[Ut++]=fs,fs=t;var r=Mn;t=Dn;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var a=32-tn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-tn(e)+s|n<<s|r,Dn=a+t}else Mn=1<<a|n<<s|r,Dn=t}function Uf(t){t.return!==null&&(Jr(t,1),Lv(t,1,0))}function $f(t){for(;t===lc;)lc=Zs[--ei],Zs[ei]=null,cc=Zs[--ei],Zs[ei]=null;for(;t===fs;)fs=zt[--Ut],zt[Ut]=null,Dn=zt[--Ut],zt[Ut]=null,Mn=zt[--Ut],zt[Ut]=null}var Mt=null,Pt=null,Ne=!1,Zt=null;function Vv(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Pt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fs!==null?{id:Mn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Pt=null,!0):!1;default:return!1}}function vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wh(t){if(Ne){var e=Pt;if(e){var n=e;if(!Jg(t,e)){if(vh(t))throw Error($(418));e=_r(n.nextSibling);var r=Mt;e&&Jg(t,e)?Vv(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Mt=t)}}else{if(vh(t))throw Error($(418));t.flags=t.flags&-4097|2,Ne=!1,Mt=t}}}function Xg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function pl(t){if(t!==Mt)return!1;if(!Ne)return Xg(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ph(t.type,t.memoizedProps)),e&&(e=Pt)){if(vh(t))throw Fv(),Error($(418));for(;e;)Vv(t,e),e=_r(e.nextSibling)}if(Xg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=Mt?_r(t.stateNode.nextSibling):null;return!0}function Fv(){for(var t=Pt;t;)t=_r(t.nextSibling)}function vi(){Pt=Mt=null,Ne=!1}function Bf(t){Zt===null?Zt=[t]:Zt.push(t)}var Tj=Jn.ReactCurrentBatchConfig;function ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zg(t){var e=t._init;return e(t._payload)}function zv(t){function e(y,x){if(t){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=Tr(y,x),y.index=0,y.sibling=null,y}function a(y,x,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,v,R){return x===null||x.tag!==6?(x=Sd(v,y.mode,R),x.return=y,x):(x=s(x,v),x.return=y,x)}function u(y,x,v,R){var A=v.type;return A===Gs?f(y,x,v.props.children,R,v.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ar&&Zg(A)===x.type)?(R=s(x,v.props),R.ref=ha(y,x,v),R.return=y,R):(R=Fl(v.type,v.key,v.props,null,y.mode,R),R.ref=ha(y,x,v),R.return=y,R)}function d(y,x,v,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Id(v,y.mode,R),x.return=y,x):(x=s(x,v.children||[]),x.return=y,x)}function f(y,x,v,R,A){return x===null||x.tag!==7?(x=cs(v,y.mode,R,A),x.return=y,x):(x=s(x,v),x.return=y,x)}function m(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sd(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case il:return v=Fl(x.type,x.key,x.props,null,y.mode,v),v.ref=ha(y,null,x),v.return=y,v;case Ws:return x=Id(x,y.mode,v),x.return=y,x;case ar:var R=x._init;return m(y,R(x._payload),v)}if(xa(x)||oa(x))return x=cs(x,y.mode,v,null),x.return=y,x;gl(y,x)}return null}function g(y,x,v,R){var A=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return A!==null?null:l(y,x,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case il:return v.key===A?u(y,x,v,R):null;case Ws:return v.key===A?d(y,x,v,R):null;case ar:return A=v._init,g(y,x,A(v._payload),R)}if(xa(v)||oa(v))return A!==null?null:f(y,x,v,R,null);gl(y,v)}return null}function N(y,x,v,R,A){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(v)||null,l(x,y,""+R,A);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case il:return y=y.get(R.key===null?v:R.key)||null,u(x,y,R,A);case Ws:return y=y.get(R.key===null?v:R.key)||null,d(x,y,R,A);case ar:var M=R._init;return N(y,x,v,M(R._payload),A)}if(xa(R)||oa(R))return y=y.get(v)||null,f(x,y,R,A,null);gl(x,R)}return null}function k(y,x,v,R){for(var A=null,M=null,j=x,w=x=0,S=null;j!==null&&w<v.length;w++){j.index>w?(S=j,j=null):S=j.sibling;var b=g(y,j,v[w],R);if(b===null){j===null&&(j=S);break}t&&j&&b.alternate===null&&e(y,j),x=a(b,x,w),M===null?A=b:M.sibling=b,M=b,j=S}if(w===v.length)return n(y,j),Ne&&Jr(y,w),A;if(j===null){for(;w<v.length;w++)j=m(y,v[w],R),j!==null&&(x=a(j,x,w),M===null?A=j:M.sibling=j,M=j);return Ne&&Jr(y,w),A}for(j=r(y,j);w<v.length;w++)S=N(j,y,w,v[w],R),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?w:S.key),x=a(S,x,w),M===null?A=S:M.sibling=S,M=S);return t&&j.forEach(function(P){return e(y,P)}),Ne&&Jr(y,w),A}function C(y,x,v,R){var A=oa(v);if(typeof A!="function")throw Error($(150));if(v=A.call(v),v==null)throw Error($(151));for(var M=A=null,j=x,w=x=0,S=null,b=v.next();j!==null&&!b.done;w++,b=v.next()){j.index>w?(S=j,j=null):S=j.sibling;var P=g(y,j,b.value,R);if(P===null){j===null&&(j=S);break}t&&j&&P.alternate===null&&e(y,j),x=a(P,x,w),M===null?A=P:M.sibling=P,M=P,j=S}if(b.done)return n(y,j),Ne&&Jr(y,w),A;if(j===null){for(;!b.done;w++,b=v.next())b=m(y,b.value,R),b!==null&&(x=a(b,x,w),M===null?A=b:M.sibling=b,M=b);return Ne&&Jr(y,w),A}for(j=r(y,j);!b.done;w++,b=v.next())b=N(j,y,w,b.value,R),b!==null&&(t&&b.alternate!==null&&j.delete(b.key===null?w:b.key),x=a(b,x,w),M===null?A=b:M.sibling=b,M=b);return t&&j.forEach(function(E){return e(y,E)}),Ne&&Jr(y,w),A}function I(y,x,v,R){if(typeof v=="object"&&v!==null&&v.type===Gs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case il:e:{for(var A=v.key,M=x;M!==null;){if(M.key===A){if(A=v.type,A===Gs){if(M.tag===7){n(y,M.sibling),x=s(M,v.props.children),x.return=y,y=x;break e}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ar&&Zg(A)===M.type){n(y,M.sibling),x=s(M,v.props),x.ref=ha(y,M,v),x.return=y,y=x;break e}n(y,M);break}else e(y,M);M=M.sibling}v.type===Gs?(x=cs(v.props.children,y.mode,R,v.key),x.return=y,y=x):(R=Fl(v.type,v.key,v.props,null,y.mode,R),R.ref=ha(y,x,v),R.return=y,y=R)}return o(y);case Ws:e:{for(M=v.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(y,x.sibling),x=s(x,v.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Id(v,y.mode,R),x.return=y,y=x}return o(y);case ar:return M=v._init,I(y,x,M(v._payload),R)}if(xa(v))return k(y,x,v,R);if(oa(v))return C(y,x,v,R);gl(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,v),x.return=y,y=x):(n(y,x),x=Sd(v,y.mode,R),x.return=y,y=x),o(y)):n(y,x)}return I}var wi=zv(!0),Uv=zv(!1),uc=Fr(null),dc=null,ti=null,qf=null;function Hf(){qf=ti=dc=null}function Wf(t){var e=uc.current;_e(uc),t._currentValue=e}function bh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ci(t,e){dc=t,qf=ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(qf!==t)if(t={context:t,memoizedValue:e,next:null},ti===null){if(dc===null)throw Error($(308));ti=t,dc.dependencies={lanes:0,firstContext:t}}else ti=ti.next=t;return e}var ns=null;function Gf(t){ns===null?ns=[t]:ns.push(t)}function $v(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function Kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Gf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function Rl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rf(t,n)}}function e0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hc(t,e,n,r){var s=t.updateQueue;or=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,f=d=u=null,l=a;do{var g=l.lane,N=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,C=l;switch(g=e,N=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){m=k.call(N,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,g=typeof k=="function"?k.call(N,m,g):k,g==null)break e;m=Ie({},m,g);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else N={eventTime:N,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=N,u=m):f=f.next=N,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);ps|=o,t.lanes=o,t.memoizedState=m}}function t0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Eo={},wn=Fr(Eo),Za=Fr(Eo),eo=Fr(Eo);function rs(t){if(t===Eo)throw Error($(174));return t}function Qf(t,e){switch(ye(eo,e),ye(Za,t),ye(wn,Eo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=th(e,t)}_e(wn),ye(wn,e)}function bi(){_e(wn),_e(Za),_e(eo)}function qv(t){rs(eo.current);var e=rs(wn.current),n=th(e,t.type);e!==n&&(ye(Za,t),ye(wn,n))}function Yf(t){Za.current===t&&(_e(wn),_e(Za))}var Ee=Fr(0);function fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bd=[];function Jf(){for(var t=0;t<bd.length;t++)bd[t]._workInProgressVersionPrimary=null;bd.length=0}var Ml=Jn.ReactCurrentDispatcher,_d=Jn.ReactCurrentBatchConfig,ms=0,Se=null,Fe=null,Be=null,mc=!1,Pa=!1,to=0,Sj=0;function rt(){throw Error($(321))}function Xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function Zf(t,e,n,r,s,a){if(ms=a,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?Aj:Pj,t=n(r,s),Pa){a=0;do{if(Pa=!1,to=0,25<=a)throw Error($(301));a+=1,Be=Fe=null,e.updateQueue=null,Ml.current=Rj,t=n(r,s)}while(Pa)}if(Ml.current=pc,e=Fe!==null&&Fe.next!==null,ms=0,Be=Fe=Se=null,mc=!1,e)throw Error($(300));return t}function em(){var t=to!==0;return to=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Se.memoizedState=Be=t:Be=Be.next=t,Be}function Ht(){if(Fe===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=Be===null?Se.memoizedState:Be.next;if(e!==null)Be=e,Fe=t;else{if(t===null)throw Error($(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Be===null?Se.memoizedState=Be=t:Be=Be.next=t}return Be}function no(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=Ht(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,u=null,d=a;do{var f=d.lane;if((ms&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Se.lanes|=f,ps|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=l,an(r,e.memoizedState)||(bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Se.lanes|=a,ps|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jd(t){var e=Ht(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);an(a,e.memoizedState)||(bt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Hv(){}function Wv(t,e){var n=Se,r=Ht(),s=e(),a=!an(r.memoizedState,s);if(a&&(r.memoizedState=s,bt=!0),r=r.queue,tm(Qv.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,ro(9,Kv.bind(null,n,r,s,e),void 0,null),He===null)throw Error($(349));ms&30||Gv(n,e,s)}return s}function Gv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kv(t,e,n,r){e.value=n,e.getSnapshot=r,Yv(e)&&Jv(t)}function Qv(t,e,n){return n(function(){Yv(e)&&Jv(t)})}function Yv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function Jv(t){var e=Hn(t,1);e!==null&&nn(e,t,1,-1)}function n0(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:t},e.queue=t,t=t.dispatch=Cj.bind(null,Se,t),[e.memoizedState,t]}function ro(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xv(){return Ht().memoizedState}function Dl(t,e,n,r){var s=fn();Se.flags|=t,s.memoizedState=ro(1|e,n,void 0,r===void 0?null:r)}function Zc(t,e,n,r){var s=Ht();r=r===void 0?null:r;var a=void 0;if(Fe!==null){var o=Fe.memoizedState;if(a=o.destroy,r!==null&&Xf(r,o.deps)){s.memoizedState=ro(e,n,a,r);return}}Se.flags|=t,s.memoizedState=ro(1|e,n,a,r)}function r0(t,e){return Dl(8390656,8,t,e)}function tm(t,e){return Zc(2048,8,t,e)}function Zv(t,e){return Zc(4,2,t,e)}function ew(t,e){return Zc(4,4,t,e)}function tw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nw(t,e,n){return n=n!=null?n.concat([t]):null,Zc(4,4,tw.bind(null,e,t),n)}function nm(){}function rw(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sw(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function iw(t,e,n){return ms&21?(an(n,e)||(n=uv(),Se.lanes|=n,ps|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=n)}function Ij(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=_d.transition;_d.transition={};try{t(!1),e()}finally{fe=n,_d.transition=r}}function aw(){return Ht().memoizedState}function kj(t,e,n){var r=Er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ow(t))lw(e,n);else if(n=$v(t,e,n,r),n!==null){var s=pt();nn(n,t,r,s),cw(n,e,r)}}function Cj(t,e,n){var r=Er(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ow(t))lw(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,an(l,o)){var u=e.interleaved;u===null?(s.next=s,Gf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=$v(t,e,s,r),n!==null&&(s=pt(),nn(n,t,r,s),cw(n,e,r))}}function ow(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function lw(t,e){Pa=mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rf(t,n)}}var pc={readContext:qt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Aj={readContext:qt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:r0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,tw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kj.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:n0,useDebugValue:nm,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=n0(!1),e=t[0];return t=Ij.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=fn();if(Ne){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),He===null)throw Error($(349));ms&30||Gv(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,r0(Qv.bind(null,r,a,t),[t]),r.flags|=2048,ro(9,Kv.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=fn(),e=He.identifierPrefix;if(Ne){var n=Dn,r=Mn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=to++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Pj={readContext:qt,useCallback:rw,useContext:qt,useEffect:tm,useImperativeHandle:nw,useInsertionEffect:Zv,useLayoutEffect:ew,useMemo:sw,useReducer:Nd,useRef:Xv,useState:function(){return Nd(no)},useDebugValue:nm,useDeferredValue:function(t){var e=Ht();return iw(e,Fe.memoizedState,t)},useTransition:function(){var t=Nd(no)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:Wv,useId:aw,unstable_isNewReconciler:!1},Rj={readContext:qt,useCallback:rw,useContext:qt,useEffect:tm,useImperativeHandle:nw,useInsertionEffect:Zv,useLayoutEffect:ew,useMemo:sw,useReducer:jd,useRef:Xv,useState:function(){return jd(no)},useDebugValue:nm,useDeferredValue:function(t){var e=Ht();return Fe===null?e.memoizedState=t:iw(e,Fe.memoizedState,t)},useTransition:function(){var t=jd(no)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:Hv,useSyncExternalStore:Wv,useId:aw,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eu={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Er(t),a=zn(r,s);a.payload=e,n!=null&&(a.callback=n),e=Nr(t,a,s),e!==null&&(nn(e,t,s,r),Rl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=Er(t),a=zn(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Nr(t,a,s),e!==null&&(nn(e,t,s,r),Rl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=Er(t),s=zn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Nr(t,s,r),e!==null&&(nn(e,t,r,n),Rl(e,t,r))}};function s0(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Qa(n,r)||!Qa(s,a):!0}function uw(t,e,n){var r=!1,s=Rr,a=e.contextType;return typeof a=="object"&&a!==null?a=qt(a):(s=jt(e)?hs:ct.current,r=e.contextTypes,a=(r=r!=null)?yi(t,s):Rr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function i0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eu.enqueueReplaceState(e,e.state,null)}function Nh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kf(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=qt(a):(a=jt(e)?hs:ct.current,s.context=yi(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(_h(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&eu.enqueueReplaceState(s,s.state,null),hc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _i(t,e){try{var n="",r=e;do n+=oN(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Ed(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Mj=typeof WeakMap=="function"?WeakMap:Map;function dw(t,e,n){n=zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xc||(xc=!0,Mh=r),jh(t,e)},n}function hw(t,e,n){n=zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jh(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){jh(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Mj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Kj.bind(null,t,e,n),e.then(t,t))}function o0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zn(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var Dj=Jn.ReactCurrentOwner,bt=!1;function mt(t,e,n,r){e.child=t===null?Uv(e,null,n,r):wi(e,t.child,n,r)}function c0(t,e,n,r,s){n=n.render;var a=e.ref;return ci(e,s),r=Zf(t,e,n,r,a,s),n=em(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ne&&n&&Uf(e),e.flags|=1,mt(t,e,r,s),e.child)}function u0(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!um(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,fw(t,e,a,r,s)):(t=Fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Qa,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Tr(a,r),t.ref=e.ref,t.return=e,e.child=t}function fw(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Qa(a,r)&&t.ref===e.ref)if(bt=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return Eh(t,e,n,r,s)}function mw(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(ri,At),At|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(ri,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ye(ri,At),At|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ye(ri,At),At|=r;return mt(t,e,s,n),e.child}function pw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eh(t,e,n,r,s){var a=jt(n)?hs:ct.current;return a=yi(e,a),ci(e,s),n=Zf(t,e,n,r,a,s),r=em(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ne&&r&&Uf(e),e.flags|=1,mt(t,e,n,s),e.child)}function d0(t,e,n,r,s){if(jt(n)){var a=!0;oc(e)}else a=!1;if(ci(e,s),e.stateNode===null)Ol(t,e),uw(e,n,r),Nh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=jt(n)?hs:ct.current,d=yi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&i0(e,o,r,d),or=!1;var g=e.memoizedState;o.state=g,hc(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Nt.current||or?(typeof f=="function"&&(_h(e,n,f,r),u=e.memoizedState),(l=or||s0(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Jt(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=jt(n)?hs:ct.current,u=yi(e,u));var N=n.getDerivedStateFromProps;(f=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&i0(e,o,r,u),or=!1,g=e.memoizedState,o.state=g,hc(e,r,o,s);var k=e.memoizedState;l!==m||g!==k||Nt.current||or?(typeof N=="function"&&(_h(e,n,N,r),k=e.memoizedState),(d=or||s0(e,n,d,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Th(t,e,n,r,a,s)}function Th(t,e,n,r,s,a){pw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Yg(e,n,!1),Wn(t,e,a);r=e.stateNode,Dj.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wi(e,t.child,null,a),e.child=wi(e,null,l,a)):mt(t,e,l,a),e.memoizedState=r.state,s&&Yg(e,n,!0),e.child}function gw(t){var e=t.stateNode;e.pendingContext?Qg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qg(t,e.context,!1),Qf(t,e.containerInfo)}function h0(t,e,n,r,s){return vi(),Bf(s),e.flags|=256,mt(t,e,n,r),e.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function Ih(t){return{baseLanes:t,cachePool:null,transitions:null}}function xw(t,e,n){var r=e.pendingProps,s=Ee.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(Ee,s&1),t===null)return wh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ru(o,r,0,null),t=cs(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ih(n),e.memoizedState=Sh,t):rm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Oj(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Tr(l,a):(a=cs(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Ih(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Sh,r}return a=t.child,t=a.sibling,r=Tr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xl(t,e,n,r){return r!==null&&Bf(r),wi(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Oj(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Ed(Error($(422))),xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=ru({mode:"visible",children:r.children},s,0,null),a=cs(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&wi(e,t.child,null,o),e.child.memoizedState=Ih(o),e.memoizedState=Sh,a);if(!(e.mode&1))return xl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error($(419)),r=Ed(a,r,void 0),xl(t,e,o,r)}if(l=(o&t.childLanes)!==0,bt||l){if(r=He,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Hn(t,s),nn(r,t,s,-1))}return cm(),r=Ed(Error($(421))),xl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Qj.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Pt=_r(s.nextSibling),Mt=e,Ne=!0,Zt=null,t!==null&&(zt[Ut++]=Mn,zt[Ut++]=Dn,zt[Ut++]=fs,Mn=t.id,Dn=t.overflow,fs=e),e=rm(e,r.children),e.flags|=4096,e)}function f0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bh(t.return,e,n)}function Td(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function yw(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(mt(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,n,e);else if(t.tag===19)f0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Td(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Td(e,!0,n,null,a);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ps|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Lj(t,e,n){switch(e.tag){case 3:gw(e),vi();break;case 5:qv(e);break;case 1:jt(e.type)&&oc(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(uc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?xw(t,e,n):(ye(Ee,Ee.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);ye(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return yw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,mw(t,e,n)}return Wn(t,e,n)}var vw,kh,ww,bw;vw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kh=function(){};ww=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,rs(wn.current);var a=null;switch(n){case"input":s=Jd(t,s),r=Jd(t,r),a=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),a=[];break;case"textarea":s=eh(t,s),r=eh(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ic)}nh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($a.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($a.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&we("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};bw=function(t,e,n,r){n!==r&&(e.flags|=4)};function fa(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Vj(t,e,n){var r=e.pendingProps;switch($f(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return jt(e.type)&&ac(),st(e),null;case 3:return r=e.stateNode,bi(),_e(Nt),_e(ct),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zt!==null&&(Lh(Zt),Zt=null))),kh(t,e),st(e),null;case 5:Yf(e);var s=rs(eo.current);if(n=e.type,t!==null&&e.stateNode!=null)ww(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return st(e),null}if(t=rs(wn.current),pl(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[pn]=e,r[Xa]=a,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<va.length;s++)we(va[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":_g(r,a),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},we("invalid",r);break;case"textarea":jg(r,a),we("invalid",r)}nh(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),s=["children",""+l]):$a.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":al(r),Ng(r,a,!0);break;case"textarea":al(r),Eg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ic)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[Xa]=r,vw(t,e,!1,!1),e.stateNode=t;e:{switch(o=rh(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<va.length;s++)we(va[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":_g(t,r),s=Jd(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),we("invalid",t);break;case"textarea":jg(t,r),s=eh(t,r),we("invalid",t);break;default:s=r}nh(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?Xy(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yy(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ba(t,u):typeof u=="number"&&Ba(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($a.hasOwnProperty(a)?u!=null&&a==="onScroll"&&we("scroll",t):u!=null&&Sf(t,a,u,o))}switch(n){case"input":al(t),Ng(t,r,!1);break;case"textarea":al(t),Eg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?ii(t,!!r.multiple,a,!1):r.defaultValue!=null&&ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)bw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=rs(eo.current),rs(wn.current),pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(a=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return st(e),null;case 13:if(_e(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Pt!==null&&e.mode&1&&!(e.flags&128))Fv(),vi(),e.flags|=98560,a=!1;else if(a=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error($(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($(317));a[pn]=e}else vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),a=!1}else Zt!==null&&(Lh(Zt),Zt=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?ze===0&&(ze=3):cm())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return bi(),kh(t,e),t===null&&Ya(e.stateNode.containerInfo),st(e),null;case 10:return Wf(e.type._context),st(e),null;case 17:return jt(e.type)&&ac(),st(e),null;case 19:if(_e(Ee),a=e.memoizedState,a===null)return st(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)fa(a,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fc(t),o!==null){for(e.flags|=128,fa(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(Ee,Ee.current&1|2),e.child}t=t.sibling}a.tail!==null&&Me()>Ni&&(e.flags|=128,r=!0,fa(a,!1),e.lanes=4194304)}else{if(!r)if(t=fc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ne)return st(e),null}else 2*Me()-a.renderingStartTime>Ni&&n!==1073741824&&(e.flags|=128,r=!0,fa(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Me(),e.sibling=null,n=Ee.current,ye(Ee,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Fj(t,e){switch($f(e),e.tag){case 1:return jt(e.type)&&ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),_e(Nt),_e(ct),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yf(e),null;case 13:if(_e(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Ee),null;case 4:return bi(),null;case 10:return Wf(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var yl=!1,ot=!1,zj=typeof WeakSet=="function"?WeakSet:Set,H=null;function ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Ch(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var m0=!1;function Uj(t,e){if(fh=nc,t=Tv(),zf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var N;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(N=m.firstChild)!==null;)g=m,m=N;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===a&&++f===r&&(u=o),(N=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=N}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:t,selectionRange:n},nc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,I=k.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:Jt(e.type,C),I);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){Pe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=m0,m0=!1,k}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ch(e,n,a)}s=s.next}while(s!==r)}}function tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ah(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _w(t){var e=t.alternate;e!==null&&(t.alternate=null,_w(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Xa],delete e[xh],delete e[Nj],delete e[jj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Nw(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Nw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ic));else if(r!==4&&(t=t.child,t!==null))for(Ph(t,e,n),t=t.sibling;t!==null;)Ph(t,e,n),t=t.sibling}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}var Ge=null,Xt=!1;function rr(t,e,n){for(n=n.child;n!==null;)jw(t,e,n),n=n.sibling}function jw(t,e,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 5:ot||ni(n,e);case 6:var r=Ge,s=Xt;Ge=null,rr(t,e,n),Ge=r,Xt=s,Ge!==null&&(Xt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Xt?(t=Ge,n=n.stateNode,t.nodeType===8?vd(t.parentNode,n):t.nodeType===1&&vd(t,n),Ga(t)):vd(Ge,n.stateNode));break;case 4:r=Ge,s=Xt,Ge=n.stateNode.containerInfo,Xt=!0,rr(t,e,n),Ge=r,Xt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ch(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!ot&&(ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,rr(t,e,n),ot=r):rr(t,e,n);break;default:rr(t,e,n)}}function g0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zj),e.forEach(function(r){var s=Yj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ge=l.stateNode,Xt=!1;break e;case 3:Ge=l.stateNode.containerInfo,Xt=!0;break e;case 4:Ge=l.stateNode.containerInfo,Xt=!0;break e}l=l.return}if(Ge===null)throw Error($(160));jw(a,o,s),Ge=null,Xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Pe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ew(e,t),e=e.sibling}function Ew(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),hn(t),r&4){try{Ra(3,t,t.return),tu(3,t)}catch(C){Pe(t,t.return,C)}try{Ra(5,t,t.return)}catch(C){Pe(t,t.return,C)}}break;case 1:Yt(e,t),hn(t),r&512&&n!==null&&ni(n,n.return);break;case 5:if(Yt(e,t),hn(t),r&512&&n!==null&&ni(n,n.return),t.flags&32){var s=t.stateNode;try{Ba(s,"")}catch(C){Pe(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Gy(s,a),rh(l,o);var d=rh(l,a);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?Xy(s,m):f==="dangerouslySetInnerHTML"?Yy(s,m):f==="children"?Ba(s,m):Sf(s,f,m,d)}switch(l){case"input":Xd(s,a);break;case"textarea":Ky(s,a);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var N=a.value;N!=null?ii(s,!!a.multiple,N,!1):g!==!!a.multiple&&(a.defaultValue!=null?ii(s,!!a.multiple,a.defaultValue,!0):ii(s,!!a.multiple,a.multiple?[]:"",!1))}s[Xa]=a}catch(C){Pe(t,t.return,C)}}break;case 6:if(Yt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(C){Pe(t,t.return,C)}}break;case 3:if(Yt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ga(e.containerInfo)}catch(C){Pe(t,t.return,C)}break;case 4:Yt(e,t),hn(t);break;case 13:Yt(e,t),hn(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(am=Me())),r&4&&g0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(d=ot)||f,Yt(e,t),ot=d):Yt(e,t),hn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(m=H=f;H!==null;){switch(g=H,N=g.child,g.tag){case 0:case 11:case 14:case 15:Ra(4,g,g.return);break;case 1:ni(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){Pe(r,n,C)}}break;case 5:ni(g,g.return);break;case 22:if(g.memoizedState!==null){y0(m);continue}}N!==null?(N.return=g,H=N):y0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Jy("display",o))}catch(C){Pe(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Pe(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Yt(e,t),hn(t),r&4&&g0(t);break;case 21:break;default:Yt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Nw(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ba(s,""),r.flags&=-33);var a=p0(t);Rh(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=p0(t);Ph(t,l,o);break;default:throw Error($(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $j(t,e,n){H=t,Tw(t)}function Tw(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||yl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ot;l=yl;var d=ot;if(yl=o,(ot=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?v0(s):u!==null?(u.return=o,H=u):v0(s);for(;a!==null;)H=a,Tw(a),a=a.sibling;H=s,yl=l,ot=d}x0(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,H=a):x0(t)}}function x0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&t0(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t0(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ga(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}ot||e.flags&512&&Ah(e)}catch(g){Pe(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function y0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function v0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tu(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var a=e.return;try{Ah(e)}catch(u){Pe(e,a,u)}break;case 5:var o=e.return;try{Ah(e)}catch(u){Pe(e,o,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var Bj=Math.ceil,gc=Jn.ReactCurrentDispatcher,sm=Jn.ReactCurrentOwner,Bt=Jn.ReactCurrentBatchConfig,oe=0,He=null,Le=null,Ye=0,At=0,ri=Fr(0),ze=0,so=null,ps=0,nu=0,im=0,Ma=null,vt=null,am=0,Ni=1/0,Pn=null,xc=!1,Mh=null,jr=null,vl=!1,gr=null,yc=0,Da=0,Dh=null,Ll=-1,Vl=0;function pt(){return oe&6?Me():Ll!==-1?Ll:Ll=Me()}function Er(t){return t.mode&1?oe&2&&Ye!==0?Ye&-Ye:Tj.transition!==null?(Vl===0&&(Vl=uv()),Vl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:xv(t.type)),t):1}function nn(t,e,n,r){if(50<Da)throw Da=0,Dh=null,Error($(185));_o(t,n,r),(!(oe&2)||t!==He)&&(t===He&&(!(oe&2)&&(nu|=n),ze===4&&cr(t,Ye)),Et(t,r),n===1&&oe===0&&!(e.mode&1)&&(Ni=Me()+500,Xc&&zr()))}function Et(t,e){var n=t.callbackNode;TN(t,e);var r=tc(t,t===He?Ye:0);if(r===0)n!==null&&Ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ig(n),e===1)t.tag===0?Ej(w0.bind(null,t)):Ov(w0.bind(null,t)),bj(function(){!(oe&6)&&zr()}),n=null;else{switch(dv(r)){case 1:n=Pf;break;case 4:n=lv;break;case 16:n=ec;break;case 536870912:n=cv;break;default:n=ec}n=Mw(n,Sw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sw(t,e){if(Ll=-1,Vl=0,oe&6)throw Error($(327));var n=t.callbackNode;if(ui()&&t.callbackNode!==n)return null;var r=tc(t,t===He?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vc(t,r);else{e=r;var s=oe;oe|=2;var a=kw();(He!==t||Ye!==e)&&(Pn=null,Ni=Me()+500,ls(t,e));do try{Wj();break}catch(l){Iw(t,l)}while(!0);Hf(),gc.current=a,oe=s,Le!==null?e=0:(He=null,Ye=0,e=ze)}if(e!==0){if(e===2&&(s=lh(t),s!==0&&(r=s,e=Oh(t,s))),e===1)throw n=so,ls(t,0),cr(t,r),Et(t,Me()),n;if(e===6)cr(t,r);else{if(s=t.current.alternate,!(r&30)&&!qj(s)&&(e=vc(t,r),e===2&&(a=lh(t),a!==0&&(r=a,e=Oh(t,a))),e===1))throw n=so,ls(t,0),cr(t,r),Et(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Xr(t,vt,Pn);break;case 3:if(cr(t,r),(r&130023424)===r&&(e=am+500-Me(),10<e)){if(tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gh(Xr.bind(null,t,vt,Pn),e);break}Xr(t,vt,Pn);break;case 4:if(cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bj(r/1960))-r,10<r){t.timeoutHandle=gh(Xr.bind(null,t,vt,Pn),r);break}Xr(t,vt,Pn);break;case 5:Xr(t,vt,Pn);break;default:throw Error($(329))}}}return Et(t,Me()),t.callbackNode===n?Sw.bind(null,t):null}function Oh(t,e){var n=Ma;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=vc(t,e),t!==2&&(e=vt,vt=n,e!==null&&Lh(e)),t}function Lh(t){vt===null?vt=t:vt.push.apply(vt,t)}function qj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!an(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function cr(t,e){for(e&=~im,e&=~nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function w0(t){if(oe&6)throw Error($(327));ui();var e=tc(t,0);if(!(e&1))return Et(t,Me()),null;var n=vc(t,e);if(t.tag!==0&&n===2){var r=lh(t);r!==0&&(e=r,n=Oh(t,r))}if(n===1)throw n=so,ls(t,0),cr(t,e),Et(t,Me()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,vt,Pn),Et(t,Me()),null}function om(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Ni=Me()+500,Xc&&zr())}}function gs(t){gr!==null&&gr.tag===0&&!(oe&6)&&ui();var e=oe;oe|=1;var n=Bt.transition,r=fe;try{if(Bt.transition=null,fe=1,t)return t()}finally{fe=r,Bt.transition=n,oe=e,!(oe&6)&&zr()}}function lm(){At=ri.current,_e(ri)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wj(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch($f(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ac();break;case 3:bi(),_e(Nt),_e(ct),Jf();break;case 5:Yf(r);break;case 4:bi();break;case 13:_e(Ee);break;case 19:_e(Ee);break;case 10:Wf(r.type._context);break;case 22:case 23:lm()}n=n.return}if(He=t,Le=t=Tr(t.current,null),Ye=At=e,ze=0,so=null,im=nu=ps=0,vt=Ma=null,ns!==null){for(e=0;e<ns.length;e++)if(n=ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}ns=null}return t}function Iw(t,e){do{var n=Le;try{if(Hf(),Ml.current=pc,mc){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mc=!1}if(ms=0,Be=Fe=Se=null,Pa=!1,to=0,sm.current=null,n===null||n.return===null){ze=1,so=e,Le=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=Ye,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var N=o0(o);if(N!==null){N.flags&=-257,l0(N,o,l,a,e),N.mode&1&&a0(a,d,e),e=N,u=d;var k=e.updateQueue;if(k===null){var C=new Set;C.add(u),e.updateQueue=C}else k.add(u);break e}else{if(!(e&1)){a0(a,d,e),cm();break e}u=Error($(426))}}else if(Ne&&l.mode&1){var I=o0(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),l0(I,o,l,a,e),Bf(_i(u,l));break e}}a=u=_i(u,l),ze!==4&&(ze=2),Ma===null?Ma=[a]:Ma.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=dw(a,u,e);e0(a,y);break e;case 1:l=u;var x=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(jr===null||!jr.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=hw(a,l,e);e0(a,R);break e}}a=a.return}while(a!==null)}Aw(n)}catch(A){e=A,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function kw(){var t=gc.current;return gc.current=pc,t===null?pc:t}function cm(){(ze===0||ze===3||ze===2)&&(ze=4),He===null||!(ps&268435455)&&!(nu&268435455)||cr(He,Ye)}function vc(t,e){var n=oe;oe|=2;var r=kw();(He!==t||Ye!==e)&&(Pn=null,ls(t,e));do try{Hj();break}catch(s){Iw(t,s)}while(!0);if(Hf(),oe=n,gc.current=r,Le!==null)throw Error($(261));return He=null,Ye=0,ze}function Hj(){for(;Le!==null;)Cw(Le)}function Wj(){for(;Le!==null&&!xN();)Cw(Le)}function Cw(t){var e=Rw(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?Aw(t):Le=e,sm.current=null}function Aw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Fj(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,Le=null;return}}else if(n=Vj(n,e,At),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);ze===0&&(ze=5)}function Xr(t,e,n){var r=fe,s=Bt.transition;try{Bt.transition=null,fe=1,Gj(t,e,n,r)}finally{Bt.transition=s,fe=r}return null}function Gj(t,e,n,r){do ui();while(gr!==null);if(oe&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(SN(t,a),t===He&&(Le=He=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,Mw(ec,function(){return ui(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Bt.transition,Bt.transition=null;var o=fe;fe=1;var l=oe;oe|=4,sm.current=null,Uj(t,n),Ew(n,t),fj(mh),nc=!!fh,mh=fh=null,t.current=n,$j(n),yN(),oe=l,fe=o,Bt.transition=a}else t.current=n;if(vl&&(vl=!1,gr=t,yc=s),a=t.pendingLanes,a===0&&(jr=null),bN(n.stateNode),Et(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(xc)throw xc=!1,t=Mh,Mh=null,t;return yc&1&&t.tag!==0&&ui(),a=t.pendingLanes,a&1?t===Dh?Da++:(Da=0,Dh=t):Da=0,zr(),null}function ui(){if(gr!==null){var t=dv(yc),e=Bt.transition,n=fe;try{if(Bt.transition=null,fe=16>t?16:t,gr===null)var r=!1;else{if(t=gr,gr=null,yc=0,oe&6)throw Error($(331));var s=oe;for(oe|=4,H=t.current;H!==null;){var a=H,o=a.child;if(H.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Ra(8,f,a)}var m=f.child;if(m!==null)m.return=f,H=m;else for(;H!==null;){f=H;var g=f.sibling,N=f.return;if(_w(f),f===d){H=null;break}if(g!==null){g.return=N,H=g;break}H=N}}}var k=a.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}H=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,H=o;else e:for(;H!==null;){if(a=H,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ra(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,H=y;break e}H=a.return}}var x=t.current;for(H=x;H!==null;){o=H;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,H=v;else e:for(o=x;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tu(9,l)}}catch(A){Pe(l,l.return,A)}if(l===o){H=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,H=R;break e}H=l.return}}if(oe=s,zr(),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Gc,t)}catch{}r=!0}return r}finally{fe=n,Bt.transition=e}}return!1}function b0(t,e,n){e=_i(n,e),e=dw(t,e,1),t=Nr(t,e,1),e=pt(),t!==null&&(_o(t,1,e),Et(t,e))}function Pe(t,e,n){if(t.tag===3)b0(t,t,n);else for(;e!==null;){if(e.tag===3){b0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=_i(n,t),t=hw(e,t,1),e=Nr(e,t,1),t=pt(),e!==null&&(_o(e,1,t),Et(e,t));break}}e=e.return}}function Kj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Ye&n)===n&&(ze===4||ze===3&&(Ye&130023424)===Ye&&500>Me()-am?ls(t,0):im|=n),Et(t,e)}function Pw(t,e){e===0&&(t.mode&1?(e=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):e=1);var n=pt();t=Hn(t,e),t!==null&&(_o(t,e,n),Et(t,n))}function Qj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pw(t,n)}function Yj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Pw(t,n)}var Rw;Rw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nt.current)bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bt=!1,Lj(t,e,n);bt=!!(t.flags&131072)}else bt=!1,Ne&&e.flags&1048576&&Lv(e,cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ol(t,e),t=e.pendingProps;var s=yi(e,ct.current);ci(e,n),s=Zf(null,e,r,t,s,n);var a=em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(a=!0,oc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kf(e),s.updater=eu,e.stateNode=s,s._reactInternals=e,Nh(e,r,t,n),e=Th(null,e,r,!0,a,n)):(e.tag=0,Ne&&a&&Uf(e),mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ol(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Xj(r),t=Jt(r,t),s){case 0:e=Eh(null,e,r,t,n);break e;case 1:e=d0(null,e,r,t,n);break e;case 11:e=c0(null,e,r,t,n);break e;case 14:e=u0(null,e,r,Jt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Eh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),d0(t,e,r,s,n);case 3:e:{if(gw(e),t===null)throw Error($(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Bv(t,e),hc(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=_i(Error($(423)),e),e=h0(t,e,r,n,s);break e}else if(r!==s){s=_i(Error($(424)),e),e=h0(t,e,r,n,s);break e}else for(Pt=_r(e.stateNode.containerInfo.firstChild),Mt=e,Ne=!0,Zt=null,n=Uv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vi(),r===s){e=Wn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return qv(e),t===null&&wh(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,ph(r,s)?o=null:a!==null&&ph(r,a)&&(e.flags|=32),pw(t,e),mt(t,e,o,n),e.child;case 6:return t===null&&wh(e),null;case 13:return xw(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wi(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),c0(t,e,r,s,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,ye(uc,r._currentValue),r._currentValue=o,a!==null)if(an(a.value,o)){if(a.children===s.children&&!Nt.current){e=Wn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=zn(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),bh(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bh(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ci(e,n),s=qt(s),r=r(s),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,s=Jt(r,e.pendingProps),s=Jt(r.type,s),u0(t,e,r,s,n);case 15:return fw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Ol(t,e),e.tag=1,jt(r)?(t=!0,oc(e)):t=!1,ci(e,n),uw(e,r,s),Nh(e,r,s,n),Th(null,e,r,!0,t,n);case 19:return yw(t,e,n);case 22:return mw(t,e,n)}throw Error($(156,e.tag))};function Mw(t,e){return ov(t,e)}function Jj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new Jj(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xj(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kf)return 11;if(t===Cf)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")um(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gs:return cs(n.children,s,a,e);case If:o=8,s|=8;break;case Gd:return t=$t(12,n,e,s|2),t.elementType=Gd,t.lanes=a,t;case Kd:return t=$t(13,n,e,s),t.elementType=Kd,t.lanes=a,t;case Qd:return t=$t(19,n,e,s),t.elementType=Qd,t.lanes=a,t;case qy:return ru(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $y:o=10;break e;case By:o=9;break e;case kf:o=11;break e;case Cf:o=14;break e;case ar:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=$t(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function cs(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function ru(t,e,n,r){return t=$t(22,t,r,e),t.elementType=qy,t.lanes=n,t.stateNode={isHidden:!1},t}function Sd(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function Id(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ld(0),this.expirationTimes=ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ld(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,s,a,o,l,u){return t=new Zj(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=$t(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kf(a),t}function eE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dw(t){if(!t)return Rr;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(jt(n))return Dv(t,n,e)}return e}function Ow(t,e,n,r,s,a,o,l,u){return t=dm(n,r,!0,t,s,a,o,l,u),t.context=Dw(null),n=t.current,r=pt(),s=Er(n),a=zn(r,s),a.callback=e??null,Nr(n,a,s),t.current.lanes=s,_o(t,s,r),Et(t,r),t}function su(t,e,n,r){var s=e.current,a=pt(),o=Er(s);return n=Dw(n),e.context===null?e.context=n:e.pendingContext=n,e=zn(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(s,e,o),t!==null&&(nn(t,s,o,a),Rl(t,s,o)),o}function wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){_0(t,e),(t=t.alternate)&&_0(t,e)}function tE(){return null}var Lw=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}iu.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));su(t,e,null,null)};iu.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gs(function(){su(null,t,null,null)}),e[qn]=null}};function iu(t){this._internalRoot=t}iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=mv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&gv(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N0(){}function nE(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=wc(o);a.call(d)}}var o=Ow(e,r,t,0,null,!1,!1,"",N0);return t._reactRootContainer=o,t[qn]=o.current,Ya(t.nodeType===8?t.parentNode:t),gs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=wc(u);l.call(d)}}var u=dm(t,0,!1,null,null,!1,!1,"",N0);return t._reactRootContainer=u,t[qn]=u.current,Ya(t.nodeType===8?t.parentNode:t),gs(function(){su(e,u,n,r)}),u}function ou(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=wc(o);l.call(u)}}su(e,o,t,s)}else o=nE(n,e,t,s,r);return wc(o)}hv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ya(e.pendingLanes);n!==0&&(Rf(e,n|1),Et(e,Me()),!(oe&6)&&(Ni=Me()+500,zr()))}break;case 13:gs(function(){var r=Hn(t,1);if(r!==null){var s=pt();nn(r,t,1,s)}}),hm(t,1)}};Mf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=pt();nn(e,t,134217728,n)}hm(t,134217728)}};fv=function(t){if(t.tag===13){var e=Er(t),n=Hn(t,e);if(n!==null){var r=pt();nn(n,t,e,r)}hm(t,e)}};mv=function(){return fe};pv=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};ih=function(t,e,n){switch(e){case"input":if(Xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Jc(r);if(!s)throw Error($(90));Wy(r),Xd(r,s)}}}break;case"textarea":Ky(t,n);break;case"select":e=n.value,e!=null&&ii(t,!!n.multiple,e,!1)}};tv=om;nv=gs;var rE={usingClientEntryPoint:!1,Events:[jo,Js,Jc,Zy,ev,om]},ma={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sE={bundleType:ma.bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iv(t),t===null?null:t.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||tE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Gc=wl.inject(sE),vn=wl}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error($(200));return eE(t,e,null,n)};Lt.createRoot=function(t,e){if(!mm(t))throw Error($(299));var n=!1,r="",s=Lw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,s),t[qn]=e.current,Ya(t.nodeType===8?t.parentNode:t),new fm(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=iv(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return gs(t)};Lt.hydrate=function(t,e,n){if(!au(e))throw Error($(200));return ou(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!mm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Lw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ow(e,null,t,1,n??null,s,!1,a,o),t[qn]=e.current,Ya(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new iu(e)};Lt.render=function(t,e,n){if(!au(e))throw Error($(200));return ou(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!au(t))throw Error($(40));return t._reactRootContainer?(gs(function(){ou(null,null,t,!1,function(){t._reactRootContainer=null,t[qn]=null})}),!0):!1};Lt.unstable_batchedUpdates=om;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!au(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return ou(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function Vw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vw)}catch(t){console.error(t)}}Vw(),Vy.exports=Lt;var iE=Vy.exports,Fw,j0=iE;Fw=j0.createRoot,j0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function io(){return io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},io.apply(this,arguments)}var xr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xr||(xr={}));const E0="popstate";function aE(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return Vh("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:bc(s)}return lE(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oE(){return Math.random().toString(36).substr(2,8)}function T0(t,e){return{usr:t.state,key:t.key,idx:e}}function Vh(t,e,n,r){return n===void 0&&(n=null),io({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:n,key:e&&e.key||r||oE()})}function bc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=xr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(io({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=xr.Pop;let I=f(),y=I==null?null:I-d;d=I,u&&u({action:l,location:C.location,delta:y})}function g(I,y){l=xr.Push;let x=Vh(C.location,I,y);d=f()+1;let v=T0(x,d),R=C.createHref(x);try{o.pushState(v,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(R)}a&&u&&u({action:l,location:C.location,delta:1})}function N(I,y){l=xr.Replace;let x=Vh(C.location,I,y);d=f();let v=T0(x,d),R=C.createHref(x);o.replaceState(v,"",R),a&&u&&u({action:l,location:C.location,delta:0})}function k(I){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof I=="string"?I:bc(I);return x=x.replace(/ $/,"%20"),De(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let C={get action(){return l},get location(){return t(s,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(E0,m),u=I,()=>{s.removeEventListener(E0,m),u=null}},createHref(I){return e(s,I)},createURL:k,encodeLocation(I){let y=k(I);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:N,go(I){return o.go(I)}};return C}var S0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(S0||(S0={}));function cE(t,e,n){return n===void 0&&(n="/"),uE(t,e,n,!1)}function uE(t,e,n,r){let s=typeof e=="string"?Fi(e):e,a=pm(s.pathname||"/",n);if(a==null)return null;let o=Uw(t);dE(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=_E(a);l=wE(o[u],d,r)}return l}function Uw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Sr([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(De(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Uw(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:yE(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of $w(a.path))s(a,o,u)}),e}function $w(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=$w(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function dE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hE=/^:[\w-]+$/,fE=3,mE=2,pE=1,gE=10,xE=-2,I0=t=>t==="*";function yE(t,e){let n=t.split("/"),r=n.length;return n.some(I0)&&(r+=xE),e&&(r+=mE),n.filter(s=>!I0(s)).reduce((s,a)=>s+(hE.test(a)?fE:a===""?pE:gE),r)}function vE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function wE(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=k0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=k0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Sr([a,m.pathname]),pathnameBase:TE(Sr([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=Sr([a,m.pathnameBase]))}return o}function k0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bE(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:N}=f;if(g==="*"){let C=l[m]||"";o=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const k=l[m];return N&&!k?d[g]=void 0:d[g]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function bE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _E(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NE(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fi(t):t;return{pathname:n?n.startsWith("/")?n:jE(n,e):e,search:SE(r),hash:IE(s)}}function jE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gm(t,e){let n=EE(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fi(t):(s=io({},t),De(!s.pathname||!s.pathname.includes("?"),kd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),kd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),kd("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=NE(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),TE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Bw=["post","put","patch","delete"];new Set(Bw);const CE=["get",...Bw];new Set(CE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ao(){return ao=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ao.apply(this,arguments)}const ym=D.createContext(null),AE=D.createContext(null),Ur=D.createContext(null),lu=D.createContext(null),Xn=D.createContext({outlet:null,matches:[],isDataRoute:!1}),qw=D.createContext(null);function PE(t,e){let{relative:n}=e===void 0?{}:e;zi()||De(!1);let{basename:r,navigator:s}=D.useContext(Ur),{hash:a,pathname:o,search:l}=Ww(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Sr([r,o])),s.createHref({pathname:u,search:l,hash:a})}function zi(){return D.useContext(lu)!=null}function To(){return zi()||De(!1),D.useContext(lu).location}function Hw(t){D.useContext(Ur).static||D.useLayoutEffect(t)}function So(){let{isDataRoute:t}=D.useContext(Xn);return t?WE():RE()}function RE(){zi()||De(!1);let t=D.useContext(ym),{basename:e,future:n,navigator:r}=D.useContext(Ur),{matches:s}=D.useContext(Xn),{pathname:a}=To(),o=JSON.stringify(gm(s,n.v7_relativeSplatPath)),l=D.useRef(!1);return Hw(()=>{l.current=!0}),D.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=xm(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Sr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,a,t])}function ME(){let{matches:t}=D.useContext(Xn),e=t[t.length-1];return e?e.params:{}}function Ww(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Ur),{matches:s}=D.useContext(Xn),{pathname:a}=To(),o=JSON.stringify(gm(s,r.v7_relativeSplatPath));return D.useMemo(()=>xm(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function DE(t,e){return OE(t,e)}function OE(t,e,n,r){zi()||De(!1);let{navigator:s}=D.useContext(Ur),{matches:a}=D.useContext(Xn),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=To(),f;if(e){var m;let I=typeof e=="string"?Fi(e):e;u==="/"||(m=I.pathname)!=null&&m.startsWith(u)||De(!1),f=I}else f=d;let g=f.pathname||"/",N=g;if(u!=="/"){let I=u.replace(/^\//,"").split("/");N="/"+g.replace(/^\//,"").split("/").slice(I.length).join("/")}let k=cE(t,{pathname:N}),C=UE(k&&k.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:Sr([u,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?u:Sr([u,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,n,r);return e&&C?D.createElement(lu.Provider,{value:{location:ao({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:xr.Pop}},C):C}function LE(){let t=HE(),e=kE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const VE=D.createElement(LE,null);class FE extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Xn.Provider,{value:this.props.routeContext},D.createElement(qw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zE(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(ym);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Xn.Provider,{value:e},r)}function UE(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||De(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:N}=n,k=m.route.loader&&g[m.route.id]===void 0&&(!N||N[m.route.id]===void 0);if(m.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let N,k=!1,C=null,I=null;n&&(N=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||VE,u&&(d<0&&g===0?(k=!0,I=null):d===g&&(k=!0,I=m.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),x=()=>{let v;return N?v=C:k?v=I:m.route.Component?v=D.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=f,D.createElement(zE,{match:m,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:v})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?D.createElement(FE,{location:n.location,revalidation:n.revalidation,component:C,error:N,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var Gw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Gw||{}),_c=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_c||{});function $E(t){let e=D.useContext(ym);return e||De(!1),e}function BE(t){let e=D.useContext(AE);return e||De(!1),e}function qE(t){let e=D.useContext(Xn);return e||De(!1),e}function Kw(t){let e=qE(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function HE(){var t;let e=D.useContext(qw),n=BE(_c.UseRouteError),r=Kw(_c.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WE(){let{router:t}=$E(Gw.UseNavigateStable),e=Kw(_c.UseNavigateStable),n=D.useRef(!1);return Hw(()=>{n.current=!0}),D.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ao({fromRouteId:e},a)))},[t,e])}function GE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function KE(t){let{to:e,replace:n,state:r,relative:s}=t;zi()||De(!1);let{future:a,static:o}=D.useContext(Ur),{matches:l}=D.useContext(Xn),{pathname:u}=To(),d=So(),f=xm(e,gm(l,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return D.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function wa(t){De(!1)}function QE(t){let{basename:e="/",children:n=null,location:r,navigationType:s=xr.Pop,navigator:a,static:o=!1,future:l}=t;zi()&&De(!1);let u=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:a,static:o,future:ao({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof r=="string"&&(r=Fi(r));let{pathname:f="/",search:m="",hash:g="",state:N=null,key:k="default"}=r,C=D.useMemo(()=>{let I=pm(f,u);return I==null?null:{location:{pathname:I,search:m,hash:g,state:N,key:k},navigationType:s}},[u,f,m,g,N,k,s]);return C==null?null:D.createElement(Ur.Provider,{value:d},D.createElement(lu.Provider,{children:n,value:C}))}function YE(t){let{children:e,location:n}=t;return DE(Fh(e),n)}new Promise(()=>{});function Fh(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let a=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Fh(r.props.children,a));return}r.type!==wa&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fh(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zh(){return zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zh.apply(this,arguments)}function JE(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZE(t,e){return t.button===0&&(!e||e==="_self")&&!XE(t)}const eT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tT="6";try{window.__reactRouterVersion=tT}catch{}const nT="startTransition",C0=K2[nT];function rT(t){let{basename:e,children:n,future:r,window:s}=t,a=D.useRef();a.current==null&&(a.current=aE({window:s,v5Compat:!0}));let o=a.current,[l,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=D.useCallback(m=>{d&&C0?C0(()=>u(m)):u(m)},[u,d]);return D.useLayoutEffect(()=>o.listen(f),[o,f]),D.useEffect(()=>GE(r),[r]),D.createElement(QE,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const sT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A0=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=JE(e,eT),{basename:N}=D.useContext(Ur),k,C=!1;if(typeof d=="string"&&iT.test(d)&&(k=d,sT))try{let v=new URL(window.location.href),R=d.startsWith("//")?new URL(v.protocol+d):new URL(d),A=pm(R.pathname,N);R.origin===v.origin&&A!=null?d=A+R.search+R.hash:C=!0}catch{}let I=PE(d,{relative:s}),y=aT(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function x(v){r&&r(v),v.defaultPrevented||y(v)}return D.createElement("a",zh({},g,{href:k||I,onClick:C||a?r:x,ref:n,target:u}))});var P0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(P0||(P0={}));var R0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R0||(R0={}));function aT(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=So(),d=To(),f=Ww(t,{relative:o});return D.useCallback(m=>{if(ZE(m,n)){m.preventDefault();let g=r!==void 0?r:bc(d)===bc(f);u(t,{replace:g,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,a,o,l])}var M0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},oT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Yw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=a>>2,m=(a&3)<<4|l>>4;let g=(l&15)<<2|d>>6,N=d&63;u||(N=64,o||(g=64)),r.push(n[f],n[m],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||m==null)throw new lT;const g=a<<2|l>>4;if(r.push(g),d!==64){const N=l<<4&240|d>>2;if(r.push(N),m!==64){const k=d<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cT=function(t){const e=Qw(t);return Yw.encodeByteArray(e,!0)},Nc=function(t){return cT(t).replace(/\./g,"")},Jw=function(t){try{return Yw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=()=>uT().__FIREBASE_DEFAULTS__,hT=()=>{if(typeof process>"u"||typeof M0>"u")return;const t=M0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jw(t[1]);return e&&JSON.parse(e)},cu=()=>{try{return dT()||hT()||fT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xw=t=>{var e,n;return(n=(e=cu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zw=t=>{const e=Xw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},e1=()=>{var t;return(t=cu())===null||t===void 0?void 0:t.config},t1=t=>{var e;return(e=cu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Nc(JSON.stringify(n)),Nc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function gT(){var t;const e=(t=cu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function r1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vT(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wT(){return!gT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function s1(){try{return typeof indexedDB=="object"}catch{return!1}}function i1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function bT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="FirebaseError";class Gt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_T,Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ss.prototype.create)}}class Ss{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?NT(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Gt(s,l,r)}}function NT(t,e){return t.replace(jT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jT=/\{\$([^}]+)}/g;function ET(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(D0(a)&&D0(o)){if(!oo(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function D0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ba(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function _a(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TT(t,e){const n=new ST(t,e);return n.subscribe.bind(n)}class ST{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cd),s.error===void 0&&(s.error=Cd),s.complete===void 0&&(s.complete=Cd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=1e3,CT=2,AT=4*60*60*1e3,PT=.5;function O0(t,e=kT,n=CT){const r=e*Math.pow(n,t),s=Math.round(PT*r*(Math.random()-.5)*2);return Math.min(AT,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){return t&&t._delegate?t._delegate:t}class Wt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DT(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MT(t){return t===Zr?void 0:t}function DT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const LT={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},VT=ie.INFO,FT={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},zT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=FT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uu{constructor(e){this.name=e,this._logLevel=VT,this._logHandler=zT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const UT=(t,e)=>e.some(n=>t instanceof n);let L0,V0;function $T(){return L0||(L0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BT(){return V0||(V0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a1=new WeakMap,Uh=new WeakMap,o1=new WeakMap,Ad=new WeakMap,vm=new WeakMap;function qT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Ir(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&a1.set(n,t)}).catch(()=>{}),vm.set(e,t),e}function HT(t){if(Uh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Uh.set(t,e)}let $h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||o1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WT(t){$h=t($h)}function GT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Pd(this),e,...n);return o1.set(r,e.sort?e.sort():[e]),Ir(r)}:BT().includes(t)?function(...e){return t.apply(Pd(this),e),Ir(a1.get(this))}:function(...e){return Ir(t.apply(Pd(this),e))}}function KT(t){return typeof t=="function"?GT(t):(t instanceof IDBTransaction&&HT(t),UT(t,$T())?new Proxy(t,$h):t)}function Ir(t){if(t instanceof IDBRequest)return qT(t);if(Ad.has(t))return Ad.get(t);const e=KT(t);return e!==t&&(Ad.set(t,e),vm.set(e,t)),e}const Pd=t=>vm.get(t);function l1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=Ir(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ir(o.result),u.oldVersion,u.newVersion,Ir(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const QT=["get","getKey","getAll","getAllKeys","count"],YT=["put","add","delete","clear"],Rd=new Map;function F0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rd.get(e))return Rd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=YT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||QT.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Rd.set(e,a),a}WT(t=>({...t,get:(e,n,r)=>F0(e,n)||t.get(e,n,r),has:(e,n)=>!!F0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bh="@firebase/app",z0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new uu("@firebase/app"),ZT="@firebase/app-compat",eS="@firebase/analytics-compat",tS="@firebase/analytics",nS="@firebase/app-check-compat",rS="@firebase/app-check",sS="@firebase/auth",iS="@firebase/auth-compat",aS="@firebase/database",oS="@firebase/data-connect",lS="@firebase/database-compat",cS="@firebase/functions",uS="@firebase/functions-compat",dS="@firebase/installations",hS="@firebase/installations-compat",fS="@firebase/messaging",mS="@firebase/messaging-compat",pS="@firebase/performance",gS="@firebase/performance-compat",xS="@firebase/remote-config",yS="@firebase/remote-config-compat",vS="@firebase/storage",wS="@firebase/storage-compat",bS="@firebase/firestore",_S="@firebase/vertexai-preview",NS="@firebase/firestore-compat",jS="firebase",ES="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="[DEFAULT]",TS={[Bh]:"fire-core",[ZT]:"fire-core-compat",[tS]:"fire-analytics",[eS]:"fire-analytics-compat",[rS]:"fire-app-check",[nS]:"fire-app-check-compat",[sS]:"fire-auth",[iS]:"fire-auth-compat",[aS]:"fire-rtdb",[oS]:"fire-data-connect",[lS]:"fire-rtdb-compat",[cS]:"fire-fn",[uS]:"fire-fn-compat",[dS]:"fire-iid",[hS]:"fire-iid-compat",[fS]:"fire-fcm",[mS]:"fire-fcm-compat",[pS]:"fire-perf",[gS]:"fire-perf-compat",[xS]:"fire-rc",[yS]:"fire-rc-compat",[vS]:"fire-gcs",[wS]:"fire-gcs-compat",[bS]:"fire-fst",[NS]:"fire-fst-compat",[_S]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,SS=new Map,Hh=new Map;function U0(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function on(t){const e=t.name;if(Hh.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Hh.set(e,t);for(const n of jc.values())U0(n,t);for(const n of SS.values())U0(n,t);return!0}function $r(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new Ss("app","Firebase",IS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=ES;function c1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=e1()),!n)throw kr.create("no-options");const a=jc.get(s);if(a){if(oo(n,a.options)&&oo(r,a.config))return a;throw kr.create("duplicate-app",{appName:s})}const o=new OT(s);for(const u of Hh.values())o.addComponent(u);const l=new kS(n,r,o);return jc.set(s,l),l}function du(t=qh){const e=jc.get(t);if(!e&&t===qh&&e1())return c1();if(!e)throw kr.create("no-app",{appName:t});return e}function Tt(t,e,n){var r;let s=(r=TS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(l.join(" "));return}on(new Wt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",AS=1,lo="firebase-heartbeat-store";let Md=null;function u1(){return Md||(Md=l1(CS,AS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),Md}async function PS(t){try{const n=(await u1()).transaction(lo),r=await n.objectStore(lo).get(d1(t));return await n.done,r}catch(e){if(e instanceof Gt)Gn.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gn.warn(n.message)}}}async function $0(t,e){try{const r=(await u1()).transaction(lo,"readwrite");await r.objectStore(lo).put(e,d1(t)),await r.done}catch(n){if(n instanceof Gt)Gn.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function d1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1024,MS=30*24*60*60*1e3;class DS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=MS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B0(),{heartbeatsToSend:r,unsentEntries:s}=OS(this._heartbeatsCache.heartbeats),a=Nc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Gn.warn(n),""}}}function B0(){return new Date().toISOString().substring(0,10)}function OS(t,e=RS){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),q0(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),q0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return s1()?i1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function q0(t){return Nc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){on(new Wt("platform-logger",e=>new JT(e),"PRIVATE")),on(new Wt("heartbeat",e=>new DS(e),"PRIVATE")),Tt(Bh,z0,t),Tt(Bh,z0,"esm2017"),Tt("fire-js","")}VS("");function wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function h1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FS=h1,f1=new Ss("auth","Firebase",h1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new uu("@firebase/auth");function zS(t,...e){Ec.logLevel<=ie.WARN&&Ec.warn(`Auth (${Is}): ${t}`,...e)}function zl(t,...e){Ec.logLevel<=ie.ERROR&&Ec.error(`Auth (${Is}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw bm(t,...e)}function bn(t,...e){return bm(t,...e)}function m1(t,e,n){const r=Object.assign(Object.assign({},FS()),{[e]:n});return new Ss("auth","Firebase",r).create(e,{appName:t.name})}function Un(t){return m1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return f1.create(t,...e)}function J(t,e,...n){if(!t)throw bm(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zl(e),new Error(e)}function Kn(t,e){t||On(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function US(){return H0()==="http:"||H0()==="https:"}function H0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(US()||r1()||"connection"in navigator)?navigator.onLine:!0}function BS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=pT()||yT()}get(){return $S()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new ko(3e4,6e4);function Br(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zn(t,e,n,r,s={}){return g1(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Io(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return xT()||(d.referrerPolicy="no-referrer"),p1.fetch()(x1(t,t.config.apiHost,n,l),d)})}async function g1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},qS),e);try{const s=new GS(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw bl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw bl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw bl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw m1(t,f,d);ln(t,f)}}catch(s){if(s instanceof Gt)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function Co(t,e,n,r,s={}){const a=await Zn(t,e,n,r,s);return"mfaPendingCredential"in a&&ln(t,"multi-factor-auth-required",{_serverResponse:a}),a}function x1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?_m(t.config,s):`${t.config.apiScheme}://${s}`}function WS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bn(this.auth,"network-request-failed")),HS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=bn(t,e,r);return s.customData._tokenResponse=n,s}function W0(t){return t!==void 0&&t.enterprise!==void 0}class KS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function QS(t,e){return Zn(t,"GET","/v2/recaptchaConfig",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e){return Zn(t,"POST","/v1/accounts:delete",e)}async function y1(t,e){return Zn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JS(t,e=!1){const n=ke(t),r=await n.getIdToken(e),s=Nm(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Oa(Dd(s.auth_time)),issuedAtTime:Oa(Dd(s.iat)),expirationTime:Oa(Dd(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Dd(t){return Number(t)*1e3}function Nm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jw(n);return s?JSON.parse(s):(zl("Failed to decode base64 JWT payload"),null)}catch(s){return zl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function G0(t){const e=Nm(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gt&&XS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ji(t,y1(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?v1(a.providerUserInfo):[],l=tI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Gh(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function eI(t){const e=ke(t);await Tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function v1(t){return t.map(e=>{var{providerId:n}=e,r=wm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t,e){const n=await g1(t,{},async()=>{const r=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=x1(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",p1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rI(t,e){return Zn(t,"POST","/v2/accounts:revokeToken",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=G0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await nI(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new di;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(J(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gh(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await ji(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JS(this,e)}reload(){return eI(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await ji(this,YS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,N=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:R,isAnonymous:A,providerData:M,stsTokenManager:j}=n;J(v&&j,e,"internal-error");const w=di.fromJSON(this.name,j);J(typeof v=="string",e,"internal-error"),sr(m,e.name),sr(g,e.name),J(typeof R=="boolean",e,"internal-error"),J(typeof A=="boolean",e,"internal-error"),sr(N,e.name),sr(k,e.name),sr(C,e.name),sr(I,e.name),sr(y,e.name),sr(x,e.name);const S=new Ln({uid:v,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:A,photoURL:k,phoneNumber:N,tenantId:C,stsTokenManager:w,createdAt:y,lastLoginAt:x});return M&&Array.isArray(M)&&(S.providerData=M.map(b=>Object.assign({},b))),I&&(S._redirectEventId=I),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new di;s.updateFromServerResponse(n);const a=new Ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Tc(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?v1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new di;l.updateFromIdToken(r);const u=new Ln({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map;function Vn(t){Kn(t instanceof Function,"Expected a class definition");let e=K0.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,K0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}w1.type="NONE";const Q0=w1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e,n){return`firebase:${t}:${e}:${n}`}class hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Ul(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ul("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ln._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hi(Vn(Q0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Vn(Q0);const o=Ul(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const m=Ln._fromJSON(e,f);d!==a&&(l=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new hi(a,e,r):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new hi(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T1(e))return"Blackberry";if(S1(e))return"Webos";if(_1(e))return"Safari";if((e.includes("chrome/")||N1(e))&&!e.includes("edge/"))return"Chrome";if(E1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b1(t=ut()){return/firefox\//i.test(t)}function _1(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N1(t=ut()){return/crios\//i.test(t)}function j1(t=ut()){return/iemobile/i.test(t)}function E1(t=ut()){return/android/i.test(t)}function T1(t=ut()){return/blackberry/i.test(t)}function S1(t=ut()){return/webos/i.test(t)}function jm(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sI(t=ut()){var e;return jm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iI(){return vT()&&document.documentMode===10}function I1(t=ut()){return jm(t)||E1(t)||S1(t)||T1(t)||/windows phone/i.test(t)||j1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e=[]){let n;switch(t){case"Browser":n=Y0(ut());break;case"Worker":n=`${Y0(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Is}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e={}){return Zn(t,"GET","/v2/passwordPolicy",Br(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=6;class cI{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J0(this),this.idTokenSubscription=new J0(this),this.beforeStateQueue=new aI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await hi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await y1(this,{idToken:e}),r=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Un(this));const n=e?ke(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oI(this),n=new cI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ss("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ks(t){return ke(t)}class J0{constructor(e){this.auth=e,this.observer=null,this.addObserver=TT(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dI(t){hu=t}function C1(t){return hu.loadJS(t)}function hI(){return hu.recaptchaEnterpriseScript}function fI(){return hu.gapiScript}function mI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pI="recaptcha-enterprise",gI="NO_RECAPTCHA";class xI{constructor(e){this.type=pI,this.auth=ks(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{QS(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new KS(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;W0(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(gI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&W0(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hI();u.length!==0&&(u+=l),C1(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function X0(t,e,n,r=!1){const s=new xI(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Kh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await X0(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await X0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e){const n=$r(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(oo(a,e??{}))return s;ln(s,"already-initialized")}return n.initialize({options:e})}function vI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wI(t,e,n){const r=ks(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=A1(e),{host:o,port:l}=bI(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),_I()}function A1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bI(t){const e=A1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Z0(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Z0(o)}}}function Z0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _I(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}async function NI(t,e){return Zn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t,e){return Co(t,"POST","/v1/accounts:signInWithPassword",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e){return Co(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}async function TI(t,e){return Co(t,"POST","/v1/accounts:signInWithEmailLink",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co extends Em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new co(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new co(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kh(e,n,"signInWithPassword",jI);case"emailLink":return EI(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Kh(e,r,"signUpPassword",NI);case"emailLink":return TI(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e){return Co(t,"POST","/v1/accounts:signInWithIdp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="http://localhost";class xs extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=wm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new xs(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fi(e,n)}buildRequest(){const e={requestUri:SI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Io(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kI(t){const e=ba(_a(t)).link,n=e?ba(_a(e)).deep_link_id:null,r=ba(_a(t)).deep_link_id;return(r?ba(_a(r)).link:null)||r||n||e||t}class Tm{constructor(e){var n,r,s,a,o,l;const u=ba(_a(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=II((s=u.mode)!==null&&s!==void 0?s:null);J(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=kI(e);try{return new Tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.providerId=Ui.PROVIDER_ID}static credential(e,n){return co._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tm.parseLink(n);return J(r,"argument-error"),co._fromEmailAndCode(e,r.code,r.tenantId)}}Ui.PROVIDER_ID="password";Ui.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ui.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao extends P1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Ao{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ao{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Ao{constructor(){super("twitter.com")}static credential(e,n){return xs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(t,e){return Co(t,"POST","/v1/accounts:signUp",Br(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Ln._fromIdTokenResponse(e,r,s),o=ex(r);return new ys({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ex(r);return new ys({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ex(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Gt{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Sc(e,n,r,s)}}function R1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(t,a,e,r):a})}async function AI(t,e,n=!1){const r=await ji(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ys._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t,e,n=!1){const{auth:r}=t;if(yn(r.app))return Promise.reject(Un(r));const s="reauthenticate";try{const a=await ji(t,R1(r,s,e,t),n);J(a.idToken,r,"internal-error");const o=Nm(a.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),ys._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ln(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t,e,n=!1){if(yn(t.app))return Promise.reject(Un(t));const r="signIn",s=await R1(t,r,e),a=await ys._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function RI(t,e){return M1(ks(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(t){const e=ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MI(t,e,n){if(yn(t.app))return Promise.reject(Un(t));const r=ks(t),o=await Kh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CI).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&D1(t),u}),l=await ys._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function DI(t,e,n){return yn(t.app)?Promise.reject(Un(t)):RI(ke(t),Ui.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t,e){return Zn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ke(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ji(r,OI(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function VI(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function FI(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}function zI(t,e,n,r){return ke(t).onAuthStateChanged(e,n,r)}function UI(t){return ke(t).signOut()}const Ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ic,"1"),this.storage.removeItem(Ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1e3,BI=10;class L1 extends O1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=I1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);iI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,BI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}L1.type="LOCAL";const qI=L1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1 extends O1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}V1.type="SESSION";const F1=V1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new fu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,a)),u=await HI(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Sm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(g.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return window}function GI(t){_n().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){return typeof _n().WorkerGlobalScope<"u"&&typeof _n().importScripts=="function"}async function KI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YI(){return z1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="firebaseLocalStorageDb",JI=1,kc="firebaseLocalStorage",$1="fbase_key";class Po{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mu(t,e){return t.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function XI(){const t=indexedDB.deleteDatabase(U1);return new Po(t).toPromise()}function Qh(){const t=indexedDB.open(U1,JI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kc,{keyPath:$1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kc)?e(r):(r.close(),await XI(),e(await Qh()))})})}async function tx(t,e,n){const r=mu(t,!0).put({[$1]:e,value:n});return new Po(r).toPromise()}async function ZI(t,e){const n=mu(t,!1).get(e),r=await new Po(n).toPromise();return r===void 0?null:r.value}function nx(t,e){const n=mu(t,!0).delete(e);return new Po(n).toPromise()}const ek=800,tk=3;class B1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fu._getInstance(YI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await KI(),!this.activeServiceWorker)return;this.sender=new WI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qh();return await tx(e,Ic,"1"),await nx(e,Ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZI(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=mu(s,!1).getAll();return new Po(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B1.type="LOCAL";const nk=B1;new ko(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t,e){return e?Vn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function sk(t){return M1(t.auth,new Im(t),t.bypassAuthState)}function ik(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),PI(n,new Im(t),t.bypassAuthState)}async function ak(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),AI(n,new Im(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sk;case"linkViaPopup":case"linkViaRedirect":return ak;case"reauthViaPopup":case"reauthViaRedirect":return ik;default:ln(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=new ko(2e3,1e4);class si extends q1{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,si.currentPopupAction&&si.currentPopupAction.cancel(),si.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=Sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,si.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ok.get())};e()}}si.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="pendingRedirect",$l=new Map;class ck extends q1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$l.get(this.auth._key());if(!e){try{const r=await uk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$l.set(this.auth._key(),e)}return this.bypassAuthState||$l.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uk(t,e){const n=fk(e),r=hk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function dk(t,e){$l.set(t._key(),e)}function hk(t){return Vn(t._redirectPersistence)}function fk(t){return Ul(lk,t.config.apiKey,t.name)}async function mk(t,e,n=!1){if(yn(t.app))return Promise.reject(Un(t));const r=ks(t),s=rk(r,e),o=await new ck(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=10*60*1e3;class gk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!H1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pk&&this.cachedEventUids.clear(),this.cachedEventUids.has(rx(e))}saveEventToCache(e){this.cachedEventUids.add(rx(e)),this.lastProcessedEventTime=Date.now()}}function rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e={}){return Zn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wk=/^https?/;async function bk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yk(t);for(const n of e)try{if(_k(n))return}catch{}ln(t,"unauthorized-domain")}function _k(t){const e=Wh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!wk.test(n))return!1;if(vk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new ko(3e4,6e4);function sx(){const t=_n().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jk(t){return new Promise((e,n)=>{var r,s,a;function o(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),n(bn(t,"network-request-failed"))},timeout:Nk.get()})}if(!((s=(r=_n().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=_n().gapi)===null||a===void 0)&&a.load)o();else{const l=mI("iframefcb");return _n()[l]=()=>{gapi.load?o():n(bn(t,"network-request-failed"))},C1(`${fI()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Bl=null,e})}let Bl=null;function Ek(t){return Bl=Bl||jk(t),Bl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new ko(5e3,15e3),Sk="__/auth/iframe",Ik="emulator/auth/iframe",kk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ck=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ak(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_m(e,Ik):`https://${t.config.authDomain}/${Sk}`,r={apiKey:e.apiKey,appName:t.name,v:Is},s=Ck.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Io(r).slice(1)}`}async function Pk(t){const e=await Ek(t),n=_n().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:Ak(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=bn(t,"network-request-failed"),l=_n().setTimeout(()=>{a(o)},Tk.get());function u(){_n().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mk=500,Dk=600,Ok="_blank",Lk="http://localhost";class ix{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vk(t,e,n,r=Mk,s=Dk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Rk),{width:r.toString(),height:s.toString(),top:a,left:o}),d=ut().toLowerCase();n&&(l=N1(d)?Ok:n),b1(d)&&(e=e||Lk,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[N,k])=>`${g}${N}=${k},`,"");if(sI(d)&&l!=="_self")return Fk(e||"",l),new ix(null);const m=window.open(e||"",l,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new ix(m)}function Fk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="__/auth/handler",Uk="emulator/auth/handler",$k=encodeURIComponent("fac");async function ax(t,e,n,r,s,a){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Is,eventId:s};if(e instanceof P1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ET(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ao){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${$k}=${encodeURIComponent(u)}`:"";return`${Bk(t)}?${Io(l).slice(1)}${d}`}function Bk({config:t}){return t.emulator?_m(t,Uk):`https://${t.authDomain}/${zk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="webStorageSupport";class qk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=F1,this._completeRedirectFn=mk,this._overrideRedirectResult=dk}async _openPopup(e,n,r,s){var a;Kn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await ax(e,n,r,Wh(),s);return Vk(e,o,Sm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await ax(e,n,r,Wh(),s);return GI(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Pk(e),r=new gk(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Od,{type:Od},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Od];o!==void 0&&n(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=bk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return I1()||_1()||jm()}}const Hk=qk;var ox="@firebase/auth",lx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kk(t){on(new Wt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k1(t)},d=new uI(r,s,a,u);return vI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),on(new Wt("auth-internal",e=>{const n=ks(e.getProvider("auth").getImmediate());return(r=>new Wk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tt(ox,lx,Gk(t)),Tt(ox,lx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=5*60,Yk=t1("authIdTokenMaxAge")||Qk;let cx=null;const Jk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Yk)return;const s=n==null?void 0:n.token;cx!==s&&(cx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Xk(t=du()){const e=$r(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yI(t,{popupRedirectResolver:Hk,persistence:[nk,qI,F1]}),r=t1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=Jk(a.toString());FI(n,o,()=>o(n.currentUser)),VI(n,l=>o(l))}}const s=Xw("auth");return s&&wI(n,`http://${s}`),n}function Zk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=bn("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",Zk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kk("Browser");var eC="firebase",tC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt(eC,tC,"app");const W1="@firebase/installations",km="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=1e4,K1=`w:${km}`,Q1="FIS_v2",nC="https://firebaseinstallations.googleapis.com/v1",rC=60*60*1e3,sC="installations",iC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vs=new Ss(sC,iC,aC);function Y1(t){return t instanceof Gt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1({projectId:t}){return`${nC}/projects/${t}/installations`}function X1(t){return{token:t.token,requestStatus:2,expiresIn:lC(t.expiresIn),creationTime:Date.now()}}async function Z1(t,e){const r=(await e.json()).error;return vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function eb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function oC(t,{refreshToken:e}){const n=eb(t);return n.append("Authorization",cC(e)),n}async function tb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function lC(t){return Number(t.replace("s","000"))}function cC(t){return`${Q1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=J1(t),s=eb(t),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:Q1,appId:t.appId,sdkVersion:K1},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await tb(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:X1(d.authToken)}}else throw await Z1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=/^[cdef][\w-]{21}$/,Yh="";function fC(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=mC(t);return hC.test(n)?n:Yh}catch{return Yh}}function mC(t){return dC(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new Map;function sb(t,e){const n=pu(t);ib(n,e),pC(n,e)}function ib(t,e){const n=rb.get(t);if(n)for(const r of n)r(e)}function pC(t,e){const n=gC();n&&n.postMessage({key:t,fid:e}),xC()}let ss=null;function gC(){return!ss&&"BroadcastChannel"in self&&(ss=new BroadcastChannel("[Firebase] FID Change"),ss.onmessage=t=>{ib(t.data.key,t.data.fid)}),ss}function xC(){rb.size===0&&ss&&(ss.close(),ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="firebase-installations-database",vC=1,ws="firebase-installations-store";let Ld=null;function Cm(){return Ld||(Ld=l1(yC,vC,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ws)}}})),Ld}async function Cc(t,e){const n=pu(t),s=(await Cm()).transaction(ws,"readwrite"),a=s.objectStore(ws),o=await a.get(n);return await a.put(e,n),await s.done,(!o||o.fid!==e.fid)&&sb(t,e.fid),e}async function ab(t){const e=pu(t),r=(await Cm()).transaction(ws,"readwrite");await r.objectStore(ws).delete(e),await r.done}async function gu(t,e){const n=pu(t),s=(await Cm()).transaction(ws,"readwrite"),a=s.objectStore(ws),o=await a.get(n),l=e(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&sb(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Am(t){let e;const n=await gu(t.appConfig,r=>{const s=wC(r),a=bC(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===Yh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function wC(t){const e=t||{fid:fC(),registrationStatus:0};return ob(e)}function bC(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=_C(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:NC(t)}:{installationEntry:e}}async function _C(t,e){try{const n=await uC(t,e);return Cc(t.appConfig,n)}catch(n){throw Y1(n)&&n.customData.serverCode===409?await ab(t.appConfig):await Cc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function NC(t){let e=await ux(t.appConfig);for(;e.registrationStatus===1;)await nb(100),e=await ux(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Am(t);return r||n}return e}function ux(t){return gu(t,e=>{if(!e)throw vs.create("installation-not-found");return ob(e)})}function ob(t){return jC(t)?{fid:t.fid,registrationStatus:0}:t}function jC(t){return t.registrationStatus===1&&t.registrationTime+G1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC({appConfig:t,heartbeatServiceProvider:e},n){const r=TC(t,n),s=oC(t,n),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:K1,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await tb(()=>fetch(r,l));if(u.ok){const d=await u.json();return X1(d)}else throw await Z1("Generate Auth Token",u)}function TC(t,{fid:e}){return`${J1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t,e=!1){let n;const r=await gu(t.appConfig,a=>{if(!lb(a))throw vs.create("not-registered");const o=a.authToken;if(!e&&kC(o))return a;if(o.requestStatus===1)return n=SC(t,e),a;{if(!navigator.onLine)throw vs.create("app-offline");const l=AC(a);return n=IC(t,l),l}});return n?await n:r.authToken}async function SC(t,e){let n=await dx(t.appConfig);for(;n.authToken.requestStatus===1;)await nb(100),n=await dx(t.appConfig);const r=n.authToken;return r.requestStatus===0?Pm(t,e):r}function dx(t){return gu(t,e=>{if(!lb(e))throw vs.create("not-registered");const n=e.authToken;return PC(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function IC(t,e){try{const n=await EC(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Cc(t.appConfig,r),n}catch(n){if(Y1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ab(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Cc(t.appConfig,r)}throw n}}function lb(t){return t!==void 0&&t.registrationStatus===2}function kC(t){return t.requestStatus===2&&!CC(t)}function CC(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+rC}function AC(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function PC(t){return t.requestStatus===1&&t.requestTime+G1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t){const e=t,{installationEntry:n,registrationPromise:r}=await Am(e);return r?r.catch(console.error):Pm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(t,e=!1){const n=t;return await DC(n),(await Pm(n,e)).token}async function DC(t){const{registrationPromise:e}=await Am(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t){if(!t||!t.options)throw Vd("App Configuration");if(!t.name)throw Vd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Vd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Vd(t){return vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="installations",LC="installations-internal",VC=t=>{const e=t.getProvider("app").getImmediate(),n=OC(e),r=$r(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},FC=t=>{const e=t.getProvider("app").getImmediate(),n=$r(e,cb).getImmediate();return{getId:()=>RC(n),getToken:s=>MC(n,s)}};function zC(){on(new Wt(cb,VC,"PUBLIC")),on(new Wt(LC,FC,"PRIVATE"))}zC();Tt(W1,km);Tt(W1,km,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="analytics",UC="firebase_id",$C="origin",BC=60*1e3,qC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Rm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new uu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dt=new Ss("analytics","Analytics",HC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){if(!t.startsWith(Rm)){const e=Dt.create("invalid-gtag-resource",{gtagURL:t});return St.warn(e.message),""}return t}function ub(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function GC(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function KC(t,e){const n=GC("firebase-js-sdk-policy",{createScriptURL:WC}),r=document.createElement("script"),s=`${Rm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function QC(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function YC(t,e,n,r,s,a){const o=r[s];try{if(o)await e[o];else{const u=(await ub(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(l){St.error(l)}t("config",s,a)}async function JC(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await ub(n);for(const u of o){const d=l.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)a.push(f);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){St.error(a)}}function XC(t,e,n,r){async function s(a,...o){try{if(a==="event"){const[l,u]=o;await JC(t,e,n,l,u)}else if(a==="config"){const[l,u]=o;await YC(t,e,n,r,l,u)}else if(a==="consent"){const[l,u]=o;t("consent",l,u)}else if(a==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){St.error(l)}}return s}function ZC(t,e,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=XC(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function eA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Rm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=30,nA=1e3;class rA{constructor(e={},n=nA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const db=new rA;function sA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function iA(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:sA(r)},a=qC.replace("{app-id}",n),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Dt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function aA(t,e=db,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw Dt.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Dt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new cA;return setTimeout(async()=>{l.abort()},BC),hb({appId:r,apiKey:s,measurementId:a},o,l,e)}async function hb(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=db){var a;const{appId:o,measurementId:l}=t;try{await oA(r,e)}catch(u){if(l)return St.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await iA(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!lA(d)){if(s.deleteThrottleMetadata(o),l)return St.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const f=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?O0(n,s.intervalMillis,tA):O0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,m),St.debug(`Calling attemptFetch again in ${f} millis`),hb(t,m,r,s)}}function oA(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(Dt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function lA(t){if(!(t instanceof Gt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class cA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function uA(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(){if(s1())try{await i1()}catch(t){return St.warn(Dt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return St.warn(Dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function hA(t,e,n,r,s,a,o){var l;const u=aA(t);u.then(N=>{n[N.measurementId]=N.appId,t.options.measurementId&&N.measurementId!==t.options.measurementId&&St.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>St.error(N)),e.push(u);const d=dA().then(N=>{if(N)return r.getId()}),[f,m]=await Promise.all([u,d]);eA(a)||KC(a,f.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[$C]="firebase",g.update=!0,m!=null&&(g[UC]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},hx=[];const fx={};let Fd="dataLayer",mA="gtag",mx,fb,px=!1;function pA(){const t=[];if(r1()&&t.push("This is a browser extension environment."),bT()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Dt.create("invalid-analytics-context",{errorInfo:e});St.warn(n.message)}}function gA(t,e,n){pA();const r=t.options.appId;if(!r)throw Dt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)St.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dt.create("no-api-key");if(La[r]!=null)throw Dt.create("already-exists",{id:r});if(!px){QC(Fd);const{wrappedGtag:a,gtagCore:o}=ZC(La,hx,fx,Fd,mA);fb=a,mx=o,px=!0}return La[r]=hA(t,hx,fx,e,mx,Fd,n),new fA(t)}function xA(t=du()){t=ke(t);const e=$r(t,Ac);return e.isInitialized()?e.getImmediate():yA(t)}function yA(t,e={}){const n=$r(t,Ac);if(n.isInitialized()){const s=n.getImmediate();if(oo(e,n.getOptions()))return s;throw Dt.create("already-initialized")}return n.initialize({options:e})}function vA(t,e,n,r){t=ke(t),uA(fb,La[t.app.options.appId],e,n,r).catch(s=>St.error(s))}const gx="@firebase/analytics",xx="0.10.8";function wA(){on(new Wt(Ac,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return gA(r,s,n)},"PUBLIC")),on(new Wt("analytics-internal",t,"PRIVATE")),Tt(gx,xx),Tt(gx,xx,"esm2017");function t(e){try{const n=e.getProvider(Ac).getImmediate();return{logEvent:(r,s,a)=>vA(n,r,s,a)}}catch(n){throw Dt.create("interop-component-reg-failed",{reason:n})}}}wA();var yx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,mb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,w){function S(){}S.prototype=w.prototype,j.D=w.prototype,j.prototype=new S,j.prototype.constructor=j,j.C=function(b,P,E){for(var T=Array(arguments.length-2),V=2;V<arguments.length;V++)T[V-2]=arguments[V];return w.prototype[P].apply(b,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,w,S){S||(S=0);var b=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)b[P]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(P=0;16>P;++P)b[P]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=j.g[0],S=j.g[1],P=j.g[2];var E=j.g[3],T=w+(E^S&(P^E))+b[0]+3614090360&4294967295;w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[1]+3905402710&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[2]+606105819&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[3]+3250441966&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(E^S&(P^E))+b[4]+4118548399&4294967295,w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[5]+1200080426&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[6]+2821735955&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[7]+4249261313&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(E^S&(P^E))+b[8]+1770035416&4294967295,w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[9]+2336552879&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[10]+4294925233&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[11]+2304563134&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(E^S&(P^E))+b[12]+1804603682&4294967295,w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[13]+4254626195&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[14]+2792965006&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[15]+1236535329&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(P^E&(S^P))+b[1]+4129170786&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[6]+3225465664&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[11]+643717713&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[0]+3921069994&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(P^E&(S^P))+b[5]+3593408605&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[10]+38016083&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[15]+3634488961&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[4]+3889429448&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(P^E&(S^P))+b[9]+568446438&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[14]+3275163606&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[3]+4107603335&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[8]+1163531501&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(P^E&(S^P))+b[13]+2850285829&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[2]+4243563512&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[7]+1735328473&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[12]+2368359562&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(S^P^E)+b[5]+4294588738&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[8]+2272392833&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[11]+1839030562&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[14]+4259657740&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(S^P^E)+b[1]+2763975236&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[4]+1272893353&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[7]+4139469664&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[10]+3200236656&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(S^P^E)+b[13]+681279174&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[0]+3936430074&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[3]+3572445317&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[6]+76029189&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(S^P^E)+b[9]+3654602809&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[12]+3873151461&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[15]+530742520&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[2]+3299628645&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(P^(S|~E))+b[0]+4096336452&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[7]+1126891415&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[14]+2878612391&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[5]+4237533241&4294967295,S=P+(T<<21&4294967295|T>>>11),T=w+(P^(S|~E))+b[12]+1700485571&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[3]+2399980690&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[10]+4293915773&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[1]+2240044497&4294967295,S=P+(T<<21&4294967295|T>>>11),T=w+(P^(S|~E))+b[8]+1873313359&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[15]+4264355552&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[6]+2734768916&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[13]+1309151649&4294967295,S=P+(T<<21&4294967295|T>>>11),T=w+(P^(S|~E))+b[4]+4149444226&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[11]+3174756917&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[2]+718787259&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[9]+3951481745&4294967295,j.g[0]=j.g[0]+w&4294967295,j.g[1]=j.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,j.g[2]=j.g[2]+P&4294967295,j.g[3]=j.g[3]+E&4294967295}r.prototype.u=function(j,w){w===void 0&&(w=j.length);for(var S=w-this.blockSize,b=this.B,P=this.h,E=0;E<w;){if(P==0)for(;E<=S;)s(this,j,E),E+=this.blockSize;if(typeof j=="string"){for(;E<w;)if(b[P++]=j.charCodeAt(E++),P==this.blockSize){s(this,b),P=0;break}}else for(;E<w;)if(b[P++]=j[E++],P==this.blockSize){s(this,b),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var w=1;w<j.length-8;++w)j[w]=0;var S=8*this.o;for(w=j.length-8;w<j.length;++w)j[w]=S&255,S/=256;for(this.u(j),j=Array(16),w=S=0;4>w;++w)for(var b=0;32>b;b+=8)j[S++]=this.g[w]>>>b&255;return j};function a(j,w){var S=l;return Object.prototype.hasOwnProperty.call(S,j)?S[j]:S[j]=w(j)}function o(j,w){this.h=w;for(var S=[],b=!0,P=j.length-1;0<=P;P--){var E=j[P]|0;b&&E==w||(S[P]=E,b=!1)}this.g=S}var l={};function u(j){return-128<=j&&128>j?a(j,function(w){return new o([w|0],0>w?-1:0)}):new o([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return I(d(-j));for(var w=[],S=1,b=0;j>=S;b++)w[b]=j/S|0,S*=4294967296;return new o(w,0)}function f(j,w){if(j.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(j.charAt(0)=="-")return I(f(j.substring(1),w));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(w,8)),b=m,P=0;P<j.length;P+=8){var E=Math.min(8,j.length-P),T=parseInt(j.substring(P,P+E),w);8>E?(E=d(Math.pow(w,E)),b=b.j(E).add(d(T))):(b=b.j(S),b=b.add(d(T)))}return b}var m=u(0),g=u(1),N=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-I(this).m();for(var j=0,w=1,S=0;S<this.g.length;S++){var b=this.i(S);j+=(0<=b?b:4294967296+b)*w,w*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(k(this))return"0";if(C(this))return"-"+I(this).toString(j);for(var w=d(Math.pow(j,6)),S=this,b="";;){var P=R(S,w).g;S=y(S,P.j(w));var E=((0<S.g.length?S.g[0]:S.h)>>>0).toString(j);if(S=P,k(S))return E+b;for(;6>E.length;)E="0"+E;b=E+b}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function k(j){if(j.h!=0)return!1;for(var w=0;w<j.g.length;w++)if(j.g[w]!=0)return!1;return!0}function C(j){return j.h==-1}t.l=function(j){return j=y(this,j),C(j)?-1:k(j)?0:1};function I(j){for(var w=j.g.length,S=[],b=0;b<w;b++)S[b]=~j.g[b];return new o(S,~j.h).add(g)}t.abs=function(){return C(this)?I(this):this},t.add=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0,P=0;P<=w;P++){var E=b+(this.i(P)&65535)+(j.i(P)&65535),T=(E>>>16)+(this.i(P)>>>16)+(j.i(P)>>>16);b=T>>>16,E&=65535,T&=65535,S[P]=T<<16|E}return new o(S,S[S.length-1]&-2147483648?-1:0)};function y(j,w){return j.add(I(w))}t.j=function(j){if(k(this)||k(j))return m;if(C(this))return C(j)?I(this).j(I(j)):I(I(this).j(j));if(C(j))return I(this.j(I(j)));if(0>this.l(N)&&0>j.l(N))return d(this.m()*j.m());for(var w=this.g.length+j.g.length,S=[],b=0;b<2*w;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<j.g.length;P++){var E=this.i(b)>>>16,T=this.i(b)&65535,V=j.i(P)>>>16,ne=j.i(P)&65535;S[2*b+2*P]+=T*ne,x(S,2*b+2*P),S[2*b+2*P+1]+=E*ne,x(S,2*b+2*P+1),S[2*b+2*P+1]+=T*V,x(S,2*b+2*P+1),S[2*b+2*P+2]+=E*V,x(S,2*b+2*P+2)}for(b=0;b<w;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=w;b<2*w;b++)S[b]=0;return new o(S,0)};function x(j,w){for(;(j[w]&65535)!=j[w];)j[w+1]+=j[w]>>>16,j[w]&=65535,w++}function v(j,w){this.g=j,this.h=w}function R(j,w){if(k(w))throw Error("division by zero");if(k(j))return new v(m,m);if(C(j))return w=R(I(j),w),new v(I(w.g),I(w.h));if(C(w))return w=R(j,I(w)),new v(I(w.g),w.h);if(30<j.g.length){if(C(j)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var S=g,b=w;0>=b.l(j);)S=A(S),b=A(b);var P=M(S,1),E=M(b,1);for(b=M(b,2),S=M(S,2);!k(b);){var T=E.add(b);0>=T.l(j)&&(P=P.add(S),E=T),b=M(b,1),S=M(S,1)}return w=y(j,P.j(w)),new v(P,w)}for(P=m;0<=j.l(w);){for(S=Math.max(1,Math.floor(j.m()/w.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),E=d(S),T=E.j(w);C(T)||0<T.l(j);)S-=b,E=d(S),T=E.j(w);k(E)&&(E=g),P=P.add(E),j=y(j,T)}return new v(P,j)}t.A=function(j){return R(this,j).h},t.and=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)&j.i(b);return new o(S,this.h&j.h)},t.or=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)|j.i(b);return new o(S,this.h|j.h)},t.xor=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)^j.i(b);return new o(S,this.h^j.h)};function A(j){for(var w=j.g.length+1,S=[],b=0;b<w;b++)S[b]=j.i(b)<<1|j.i(b-1)>>>31;return new o(S,j.h)}function M(j,w){var S=w>>5;w%=32;for(var b=j.g.length-S,P=[],E=0;E<b;E++)P[E]=0<w?j.i(E+S)>>>w|j.i(E+S+1)<<32-w:j.i(E+S);return new o(P,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,us=o}).apply(typeof yx<"u"?yx:typeof self<"u"?self:typeof window<"u"?window:{});var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pb,Na,gb,ql,Jh,xb,yb,vb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _l=="object"&&_l];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(c,h){if(h)e:{var p=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var O=c[_];if(!(O in p))break e;p=p[O]}c=c[c.length-1],_=p[c],h=h(_),h!=_&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function a(c,h){c instanceof String&&(c+="");var p=0,_=!1,O={next:function(){if(!_&&p<c.length){var L=p++;return{value:h(L,c[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return a(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function d(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function f(c,h,p){return c.call.apply(c.bind,arguments)}function m(c,h,p){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),c.apply(h,O)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function N(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function k(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(_,O,L){for(var q=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)q[ge-2]=arguments[ge];return h.prototype[O].apply(_,q)}}function C(c){const h=c.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=c[_];return p}return[]}function I(c,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const O=c.length||0,L=_.length||0;c.length=O+L;for(let q=0;q<L;q++)c[O+q]=_[q]}else c.push(_)}}class y{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(c){return/^[\s\xa0]*$/.test(c)}function v(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var A=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function M(c,h,p){for(const _ in c)h.call(p,c[_],_,c)}function j(c,h){for(const p in c)h.call(void 0,c[p],p,c)}function w(c){const h={};for(const p in c)h[p]=c[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,h){let p,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(p in _)c[p]=_[p];for(let L=0;L<S.length;L++)p=S[L],Object.prototype.hasOwnProperty.call(_,p)&&(c[p]=_[p])}}function P(c){var h=1;c=c.split(":");const p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function E(c){l.setTimeout(()=>{throw c},0)}function T(){var c=Y;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class V{constructor(){this.h=this.g=null}add(h,p){const _=ne.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new y(()=>new dt,c=>c.reset());class dt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,B=!1,Y=new V,Z=()=>{const c=l.Promise.resolve(void 0);xe=()=>{c.then(pe)}};var pe=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(p){E(p)}var h=ne;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}B=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var Kt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return c}();function Ft(c,h){if(je.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(A){e:{try{R(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:yt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ft.aa.h.call(this)}}k(Ft,je);var yt={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),ue=0;function dn(c,h,p,_,O){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=O,this.key=++ue,this.da=this.fa=!1}function kt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ms(c){this.src=c,this.g={},this.h=0}Ms.prototype.add=function(c,h,p,_,O){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var q=Ds(c,h,_,O);return-1<q?(h=c[q],p||(h.fa=!1)):(h=new dn(h,this.src,L,!!_,O),h.fa=p,c.push(h)),h};function Gi(c,h){var p=h.type;if(p in c.g){var _=c.g[p],O=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=O)&&Array.prototype.splice.call(_,O,1),L&&(kt(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Ds(c,h,p,_){for(var O=0;O<c.length;++O){var L=c[O];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==_)return O}return-1}var Ou="closure_lm_"+(1e6*Math.random()|0),Lu={};function xp(c,h,p,_,O){if(Array.isArray(h)){for(var L=0;L<h.length;L++)xp(c,h[L],p,_,O);return null}return p=wp(p),c&&c[F]?c.K(h,p,d(_)?!!_.capture:!!_,O):t2(c,h,p,!1,_,O)}function t2(c,h,p,_,O,L){if(!h)throw Error("Invalid event type");var q=d(O)?!!O.capture:!!O,ge=Fu(c);if(ge||(c[Ou]=ge=new Ms(c)),p=ge.add(h,p,_,q,L),p.proxy)return p;if(_=n2(),p.proxy=_,_.src=c,_.listener=p,c.addEventListener)Kt||(O=q),O===void 0&&(O=!1),c.addEventListener(h.toString(),_,O);else if(c.attachEvent)c.attachEvent(vp(h.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function n2(){function c(p){return h.call(c.src,c.listener,p)}const h=r2;return c}function yp(c,h,p,_,O){if(Array.isArray(h))for(var L=0;L<h.length;L++)yp(c,h[L],p,_,O);else _=d(_)?!!_.capture:!!_,p=wp(p),c&&c[F]?(c=c.i,h=String(h).toString(),h in c.g&&(L=c.g[h],p=Ds(L,p,_,O),-1<p&&(kt(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete c.g[h],c.h--)))):c&&(c=Fu(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Ds(h,p,_,O)),(p=-1<c?h[c]:null)&&Vu(p))}function Vu(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[F])Gi(h.i,c);else{var p=c.type,_=c.proxy;h.removeEventListener?h.removeEventListener(p,_,c.capture):h.detachEvent?h.detachEvent(vp(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Fu(h))?(Gi(p,c),p.h==0&&(p.src=null,h[Ou]=null)):kt(c)}}}function vp(c){return c in Lu?Lu[c]:Lu[c]="on"+c}function r2(c,h){if(c.da)c=!0;else{h=new Ft(h,this);var p=c.listener,_=c.ha||c.src;c.fa&&Vu(c),c=p.call(_,h)}return c}function Fu(c){return c=c[Ou],c instanceof Ms?c:null}var zu="__closure_events_fn_"+(1e9*Math.random()>>>0);function wp(c){return typeof c=="function"?c:(c[zu]||(c[zu]=function(h){return c.handleEvent(h)}),c[zu])}function et(){de.call(this),this.i=new Ms(this),this.M=this,this.F=null}k(et,de),et.prototype[F]=!0,et.prototype.removeEventListener=function(c,h,p,_){yp(this,c,h,p,_)};function ht(c,h){var p,_=c.F;if(_)for(p=[];_;_=_.F)p.push(_);if(c=c.M,_=h.type||h,typeof h=="string")h=new je(h,c);else if(h instanceof je)h.target=h.target||c;else{var O=h;h=new je(_,c),b(h,O)}if(O=!0,p)for(var L=p.length-1;0<=L;L--){var q=h.g=p[L];O=$o(q,_,!0,h)&&O}if(q=h.g=c,O=$o(q,_,!0,h)&&O,O=$o(q,_,!1,h)&&O,p)for(L=0;L<p.length;L++)q=h.g=p[L],O=$o(q,_,!1,h)&&O}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],_=0;_<p.length;_++)kt(p[_]);delete c.g[h],c.h--}}this.F=null},et.prototype.K=function(c,h,p,_){return this.i.add(String(c),h,!1,p,_)},et.prototype.L=function(c,h,p,_){return this.i.add(String(c),h,!0,p,_)};function $o(c,h,p,_){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,L=0;L<h.length;++L){var q=h[L];if(q&&!q.da&&q.capture==p){var ge=q.listener,We=q.ha||q.src;q.fa&&Gi(c.i,q),O=ge.call(We,_)!==!1&&O}}return O&&!_.defaultPrevented}function bp(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(c,h||0)}function _p(c){c.g=bp(()=>{c.g=null,c.i&&(c.i=!1,_p(c))},c.l);const h=c.h;c.h=null,c.m.apply(null,h)}class s2 extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:_p(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ki(c){de.call(this),this.h=c,this.g={}}k(Ki,de);var Np=[];function jp(c){M(c.g,function(h,p){this.g.hasOwnProperty(p)&&Vu(h)},c),c.g={}}Ki.prototype.N=function(){Ki.aa.N.call(this),jp(this)},Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uu=l.JSON.stringify,i2=l.JSON.parse,a2=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function $u(){}$u.prototype.h=null;function Ep(c){return c.h||(c.h=c.i())}function Tp(){}var Qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bu(){je.call(this,"d")}k(Bu,je);function qu(){je.call(this,"c")}k(qu,je);var Gr={},Sp=null;function Bo(){return Sp=Sp||new et}Gr.La="serverreachability";function Ip(c){je.call(this,Gr.La,c)}k(Ip,je);function Yi(c){const h=Bo();ht(h,new Ip(h))}Gr.STAT_EVENT="statevent";function kp(c,h){je.call(this,Gr.STAT_EVENT,c),this.stat=h}k(kp,je);function ft(c){const h=Bo();ht(h,new kp(h,c))}Gr.Ma="timingevent";function Cp(c,h){je.call(this,Gr.Ma,c),this.size=h}k(Cp,je);function Ji(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},h)}function Xi(){this.g=!0}Xi.prototype.xa=function(){this.g=!1};function o2(c,h,p,_,O,L){c.info(function(){if(c.g)if(L)for(var q="",ge=L.split("&"),We=0;We<ge.length;We++){var le=ge[We].split("=");if(1<le.length){var tt=le[0];le=le[1];var nt=tt.split("_");q=2<=nt.length&&nt[1]=="type"?q+(tt+"="+le+"&"):q+(tt+"=redacted&")}}else q=null;else q=L;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+p+`
`+q})}function l2(c,h,p,_,O,L,q){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+p+`
`+L+" "+q})}function Os(c,h,p,_){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+u2(c,p)+(_?" "+_:"")})}function c2(c,h){c.info(function(){return"TIMEOUT: "+h})}Xi.prototype.info=function(){};function u2(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var _=p[c];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return Uu(p)}catch{return h}}var qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ap={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hu;function Ho(){}k(Ho,$u),Ho.prototype.g=function(){return new XMLHttpRequest},Ho.prototype.i=function(){return{}},Hu=new Ho;function er(c,h,p,_){this.j=c,this.i=h,this.l=p,this.R=_||1,this.U=new Ki(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pp}function Pp(){this.i=null,this.g="",this.h=!1}var Rp={},Wu={};function Gu(c,h,p){c.L=1,c.v=Qo(Cn(h)),c.m=p,c.P=!0,Mp(c,null)}function Mp(c,h){c.F=Date.now(),Wo(c),c.A=Cn(c.v);var p=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),Kp(p.i,"t",_),c.C=0,p=c.j.J,c.h=new Pp,c.g=hg(c.j,p?h:null,!c.m),0<c.O&&(c.M=new s2(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,_=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(Np[0]=O.toString()),O=Np);for(var L=0;L<O.length;L++){var q=xp(p,O[L],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Yi(),o2(c.i,c.u,c.A,c.l,c.R,c.m)}er.prototype.ca=function(c){c=c.target;const h=this.M;h&&An(c)==3?h.j():this.Y(c)},er.prototype.Y=function(c){try{if(c==this.g)e:{const nt=An(this.g);var h=this.g.Ba();const Fs=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||tg(this.g)))){this.J||nt!=4||h==7||(h==8||0>=Fs?Yi(3):Yi(2)),Ku(this);var p=this.g.Z();this.X=p;t:if(Dp(this)){var _=tg(this.g);c="";var O=_.length,L=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Kr(this),Zi(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,c+=this.h.i.decode(_[h],{stream:!(L&&h==O-1)});_.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,l2(this.i,this.u,this.A,this.l,this.R,nt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,We=this.g;if((ge=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ge)){var le=ge;break t}}le=null}if(p=le)Os(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qu(this,p);else{this.o=!1,this.s=3,ft(12),Kr(this),Zi(this);break e}}if(this.P){p=!0;let Qt;for(;!this.J&&this.C<q.length;)if(Qt=d2(this,q),Qt==Wu){nt==4&&(this.s=4,ft(14),p=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Rp){this.s=4,ft(15),Os(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else Os(this.i,this.l,Qt,null),Qu(this,Qt);if(Dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||q.length!=0||this.h.h||(this.s=1,ft(16),p=!1),this.o=this.o&&p,!p)Os(this.i,this.l,q,"[Invalid Chunked Response]"),Kr(this),Zi(this);else if(0<q.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),td(tt),tt.M=!0,ft(11))}}else Os(this.i,this.l,q,null),Qu(this,q);nt==4&&Kr(this),this.o&&!this.J&&(nt==4?lg(this.j,this):(this.o=!1,Wo(this)))}else I2(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Kr(this),Zi(this)}}}catch{}finally{}};function Dp(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function d2(c,h){var p=c.C,_=h.indexOf(`
`,p);return _==-1?Wu:(p=Number(h.substring(p,_)),isNaN(p)?Rp:(_+=1,_+p>h.length?Wu:(h=h.slice(_,_+p),c.C=_+p,h)))}er.prototype.cancel=function(){this.J=!0,Kr(this)};function Wo(c){c.S=Date.now()+c.I,Op(c,c.I)}function Op(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ji(g(c.ba,c),h)}function Ku(c){c.B&&(l.clearTimeout(c.B),c.B=null)}er.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(c2(this.i,this.A),this.L!=2&&(Yi(),ft(17)),Kr(this),this.s=2,Zi(this)):Op(this,this.S-c)};function Zi(c){c.j.G==0||c.J||lg(c.j,c)}function Kr(c){Ku(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,jp(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Qu(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Yu(p.h,c))){if(!c.K&&Yu(p.h,c)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)tl(p),Zo(p);else break e;ed(p),ft(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ji(g(p.Za,p),6e3));if(1>=Fp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Yr(p,11)}else if((c.K||p.g==c)&&tl(p),!x(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let le=O[h];if(p.T=le[0],le=le[1],p.G==2)if(le[0]=="c"){p.K=le[1],p.ia=le[2];const tt=le[3];tt!=null&&(p.la=tt,p.j.info("VER="+p.la));const nt=le[4];nt!=null&&(p.Aa=nt,p.j.info("SVER="+p.Aa));const Fs=le[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(_=1.5*Fs,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Qt=c.g;if(Qt){const rl=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var L=_.h;L.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Ju(L,L.h),L.h=null))}if(_.D){const nd=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;nd&&(_.ya=nd,ve(_.I,_.D,nd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var q=c;if(_.qa=dg(_,_.J?_.ia:null,_.W),q.K){zp(_.h,q);var ge=q,We=_.L;We&&(ge.I=We),ge.B&&(Ku(ge),Wo(ge)),_.g=q}else ag(_);0<p.i.length&&el(p)}else le[0]!="stop"&&le[0]!="close"||Yr(p,7);else p.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Yr(p,7):Zu(p):le[0]!="noop"&&p.l&&p.l.ta(le),p.v=0)}}Yi(4)}catch{}}var h2=class{constructor(c,h){this.g=c,this.map=h}};function Lp(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vp(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Fp(c){return c.h?1:c.g?c.g.size:0}function Yu(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Ju(c,h){c.g?c.g.add(h):c.h=h}function zp(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}Lp.prototype.cancel=function(){if(this.i=Up(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Up(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(const p of c.g.values())h=h.concat(p.D);return h}return C(c.i)}function f2(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,_=0;_<p;_++)h.push(c[_]);return h}h=[],p=0;for(_ in c)h[p++]=c[_];return h}function m2(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(const _ in c)h[p++]=_;return h}}}function $p(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=m2(c),_=f2(c),O=_.length,L=0;L<O;L++)h.call(void 0,_[L],p&&p[L],c)}var Bp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p2(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var _=c[p].indexOf("="),O=null;if(0<=_){var L=c[p].substring(0,_);O=c[p].substring(_+1)}else L=c[p];h(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qr){this.h=c.h,Go(this,c.j),this.o=c.o,this.g=c.g,Ko(this,c.s),this.l=c.l;var h=c.i,p=new na;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),qp(this,p),this.m=c.m}else c&&(h=String(c).match(Bp))?(this.h=!1,Go(this,h[1]||"",!0),this.o=ea(h[2]||""),this.g=ea(h[3]||"",!0),Ko(this,h[4]),this.l=ea(h[5]||"",!0),qp(this,h[6]||"",!0),this.m=ea(h[7]||"")):(this.h=!1,this.i=new na(null,this.h))}Qr.prototype.toString=function(){var c=[],h=this.j;h&&c.push(ta(h,Hp,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(ta(h,Hp,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(ta(p,p.charAt(0)=="/"?y2:x2,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",ta(p,w2)),c.join("")};function Cn(c){return new Qr(c)}function Go(c,h,p){c.j=p?ea(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Ko(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function qp(c,h,p){h instanceof na?(c.i=h,b2(c.i,c.h)):(p||(h=ta(h,v2)),c.i=new na(h,c.h))}function ve(c,h,p){c.i.set(h,p)}function Qo(c){return ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ea(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ta(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,g2),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function g2(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Hp=/[#\/\?@]/g,x2=/[#\?:]/g,y2=/[#\?]/g,v2=/[#\?@]/g,w2=/#/g;function na(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function tr(c){c.g||(c.g=new Map,c.h=0,c.i&&p2(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=na.prototype,t.add=function(c,h){tr(this),this.i=null,c=Ls(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function Wp(c,h){tr(c),h=Ls(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function Gp(c,h){return tr(c),h=Ls(c,h),c.g.has(h)}t.forEach=function(c,h){tr(this),this.g.forEach(function(p,_){p.forEach(function(O){c.call(h,O,_,this)},this)},this)},t.na=function(){tr(this);const c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const O=c[_];for(let L=0;L<O.length;L++)p.push(h[_])}return p},t.V=function(c){tr(this);let h=[];if(typeof c=="string")Gp(this,c)&&(h=h.concat(this.g.get(Ls(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return tr(this),this.i=null,c=Ls(this,c),Gp(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function Kp(c,h,p){Wp(c,h),0<p.length&&(c.i=null,c.g.set(Ls(c,h),C(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const L=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var O=L;q[_]!==""&&(O+="="+encodeURIComponent(String(q[_]))),c.push(O)}}return this.i=c.join("&")};function Ls(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function b2(c,h){h&&!c.j&&(tr(c),c.i=null,c.g.forEach(function(p,_){var O=_.toLowerCase();_!=O&&(Wp(this,_),Kp(this,O,p))},c)),c.j=h}function _2(c,h){const p=new Xi;if(l.Image){const _=new Image;_.onload=N(nr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=N(nr,p,"TestLoadImage: error",!1,h,_),_.onabort=N(nr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=N(nr,p,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else h(!1)}function N2(c,h){const p=new Xi,_=new AbortController,O=setTimeout(()=>{_.abort(),nr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:_.signal}).then(L=>{clearTimeout(O),L.ok?nr(p,"TestPingServer: ok",!0,h):nr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),nr(p,"TestPingServer: error",!1,h)})}function nr(c,h,p,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(p)}catch{}}function j2(){this.g=new a2}function E2(c,h,p){const _=p||"";try{$p(c,function(O,L){let q=O;d(O)&&(q=Uu(O)),h.push(_+L+"="+encodeURIComponent(q))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function Yo(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Yo,$u),Yo.prototype.g=function(){return new Jo(this.l,this.j)},Yo.prototype.i=function(c){return function(){return c}}({});function Jo(c,h){et.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Jo,et),t=Jo.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,sa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qp(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qp(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?ra(this):sa(this),this.readyState==3&&Qp(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ra(this))},t.Qa=function(c){this.g&&(this.response=c,ra(this))},t.ga=function(){this.g&&ra(this)};function ra(c){c.readyState=4,c.l=null,c.j=null,c.v=null,sa(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function sa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yp(c){let h="";return M(c,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Xu(c,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=Yp(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):ve(c,h,p))}function Ae(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Ae,et);var T2=/^https?$/i,S2=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hu.g(),this.v=this.o?Ep(this.o):Ep(Hu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(L){Jp(this,L);return}if(c=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)p.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())p.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(S2,h,void 0))||_||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,q]of p)this.g.setRequestHeader(L,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eg(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){Jp(this,L)}};function Jp(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,Xp(c),Xo(c)}function Xp(c){c.A||(c.A=!0,ht(c,"complete"),ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ht(this,"complete"),ht(this,"abort"),Xo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xo(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zp(this):this.bb())},t.bb=function(){Zp(this)};function Zp(c){if(c.h&&typeof o<"u"&&(!c.v[1]||An(c)!=4||c.Z()!=2)){if(c.u&&An(c)==4)bp(c.Ea,0,c);else if(ht(c,"readystatechange"),An(c)==4){c.h=!1;try{const q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=q===0){var O=String(c.D).match(Bp)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),_=!T2.test(O?O.toLowerCase():"")}p=_}if(p)ht(c,"complete"),ht(c,"success");else{c.m=6;try{var L=2<An(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",Xp(c)}}finally{Xo(c)}}}}function Xo(c,h){if(c.g){eg(c);const p=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||ht(c,"ready");try{p.onreadystatechange=_}catch{}}}function eg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function An(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),i2(h)}};function tg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function I2(c){const h={};c=(c.g&&2<=An(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(x(c[_]))continue;var p=P(c[_]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[O]||[];h[O]=L,L.push(p)}j(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function ng(c){this.Aa=0,this.i=[],this.j=new Xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,c),this.cb=ia("retryDelaySeedMs",1e4,c),this.Wa=ia("forwardChannelMaxRetries",2,c),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Lp(c&&c.concurrentRequestLimit),this.Da=new j2,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ng.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,_){ft(0),this.W=c,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=dg(this,null,this.W),el(this)};function Zu(c){if(rg(c),c.G==3){var h=c.U++,p=Cn(c.I);if(ve(p,"SID",c.K),ve(p,"RID",h),ve(p,"TYPE","terminate"),aa(c,p),h=new er(c,c.j,h),h.L=2,h.v=Qo(Cn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=hg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Wo(h)}ug(c)}function Zo(c){c.g&&(td(c),c.g.cancel(),c.g=null)}function rg(c){Zo(c),c.u&&(l.clearTimeout(c.u),c.u=null),tl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function el(c){if(!Vp(c.h)&&!c.s){c.s=!0;var h=c.Ga;xe||Z(),B||(xe(),B=!0),Y.add(h,c),c.B=0}}function k2(c,h){return Fp(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ji(g(c.Ga,c,h),cg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new er(this,this.j,c);let L=this.o;if(this.S&&(L?(L=w(L),b(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ig(this,O,h),p=Cn(this.I),ve(p,"RID",c),ve(p,"CVER",22),this.D&&ve(p,"X-HTTP-Session-Id",this.D),aa(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(Yp(L)))+"&"+h:this.m&&Xu(p,this.m,L)),Ju(this.h,O),this.Ua&&ve(p,"TYPE","init"),this.P?(ve(p,"$req",h),ve(p,"SID","null"),O.T=!0,Gu(O,p,null)):Gu(O,p,h),this.G=2}}else this.G==3&&(c?sg(this,c):this.i.length==0||Vp(this.h)||sg(this))};function sg(c,h){var p;h?p=h.l:p=c.U++;const _=Cn(c.I);ve(_,"SID",c.K),ve(_,"RID",p),ve(_,"AID",c.T),aa(c,_),c.m&&c.o&&Xu(_,c.m,c.o),p=new er(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=ig(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ju(c.h,p),Gu(p,_,h)}function aa(c,h){c.H&&M(c.H,function(p,_){ve(h,_,p)}),c.l&&$p({},function(p,_){ve(h,_,p)})}function ig(c,h,p){p=Math.min(c.i.length,p);var _=c.l?g(c.l.Na,c.l,c):null;e:{var O=c.i;let L=-1;for(;;){const q=["count="+p];L==-1?0<p?(L=O[0].g,q.push("ofs="+L)):L=0:q.push("ofs="+L);let ge=!0;for(let We=0;We<p;We++){let le=O[We].g;const tt=O[We].map;if(le-=L,0>le)L=Math.max(0,O[We].g-100),ge=!1;else try{E2(tt,q,"req"+le+"_")}catch{_&&_(tt)}}if(ge){_=q.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,_}function ag(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;xe||Z(),B||(xe(),B=!0),Y.add(h,c),c.v=0}}function ed(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ji(g(c.Fa,c),cg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,og(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ji(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Zo(this),og(this))};function td(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function og(c){c.g=new er(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Cn(c.qa);ve(h,"RID","rpc"),ve(h,"SID",c.K),ve(h,"AID",c.T),ve(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&ve(h,"TO",c.ja),ve(h,"TYPE","xmlhttp"),aa(c,h),c.m&&c.o&&Xu(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Qo(Cn(h)),p.m=null,p.P=!0,Mp(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Zo(this),ed(this),ft(19))};function tl(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function lg(c,h){var p=null;if(c.g==h){tl(c),td(c),c.g=null;var _=2}else if(Yu(c.h,h))p=h.D,zp(c.h,h),_=1;else return;if(c.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=c.B;_=Bo(),ht(_,new Cp(_,p)),el(c)}else ag(c);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&k2(c,h)||_==2&&ed(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),O){case 1:Yr(c,5);break;case 4:Yr(c,10);break;case 3:Yr(c,6);break;default:Yr(c,2)}}}function cg(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function Yr(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),_=c.Xa;const O=!_;_=new Qr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Go(_,"https"),Qo(_),O?_2(_.toString(),p):N2(_.toString(),p)}else ft(2);c.G=0,c.l&&c.l.sa(h),ug(c),rg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function ug(c){if(c.G=0,c.ka=[],c.l){const h=Up(c.h);(h.length!=0||c.i.length!=0)&&(I(c.ka,h),I(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function dg(c,h,p){var _=p instanceof Qr?Cn(p):new Qr(p);if(_.g!="")h&&(_.g=h+"."+_.g),Ko(_,_.s);else{var O=l.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var L=new Qr(null);_&&Go(L,_),h&&(L.g=h),O&&Ko(L,O),p&&(L.l=p),_=L}return p=c.D,h=c.ya,p&&h&&ve(_,p,h),ve(_,"VER",c.la),aa(c,_),_}function hg(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Ae(new Yo({eb:p})):new Ae(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fg(){}t=fg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nl(){}nl.prototype.g=function(c,h){return new Ct(c,h)};function Ct(c,h){et.call(this),this.g=new ng(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!x(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Vs(this)}k(Ct,et),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Zu(this.g)},Ct.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Uu(c),c=p);h.i.push(new h2(h.Ya++,c)),h.G==3&&el(h)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Zu(this.g),delete this.g,Ct.aa.N.call(this)};function mg(c){Bu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(const p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}k(mg,Bu);function pg(){qu.call(this),this.status=1}k(pg,qu);function Vs(c){this.g=c}k(Vs,fg),Vs.prototype.ua=function(){ht(this.g,"a")},Vs.prototype.ta=function(c){ht(this.g,new mg(c))},Vs.prototype.sa=function(c){ht(this.g,new pg)},Vs.prototype.ra=function(){ht(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,vb=function(){return new nl},yb=function(){return Bo()},xb=Gr,Jh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qo.NO_ERROR=0,qo.TIMEOUT=8,qo.HTTP_ERROR=6,ql=qo,Ap.COMPLETE="complete",gb=Ap,Tp.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",et.prototype.listen=et.prototype.K,Na=Tp,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,pb=Ae}).apply(typeof _l<"u"?_l:typeof self<"u"?self:typeof window<"u"?window:{});const vx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new uu("@firebase/firestore");function pa(){return bs.logLevel}function K(t,...e){if(bs.logLevel<=ie.DEBUG){const n=e.map(Mm);bs.debug(`Firestore (${$i}): ${t}`,...n)}}function Qn(t,...e){if(bs.logLevel<=ie.ERROR){const n=e.map(Mm);bs.error(`Firestore (${$i}): ${t}`,...n)}}function Ei(t,...e){if(bs.logLevel<=ie.WARN){const n=e.map(Mm);bs.warn(`Firestore (${$i}): ${t}`,...n)}}function Mm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: `+t;throw Qn(e),new Error(e)}function me(t,e){t||X()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class _A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class NA{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new ds;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ds,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ds)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new wb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new at(e)}}class jA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class EA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new jA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=a=>{a.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new TA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=IA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ue(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ue(0,0))}static max(){return new ee(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return uo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof uo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends uo{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends uo{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new W(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new W(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(be.fromString(e))}static fromName(e){return new Q(be.fromString(e).popFirst(5))}static empty(){return new Q(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new be(e.slice()))}}function CA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Mr(s,Q.empty(),e)}function AA(t){return new Mr(t.readTime,t.key,-1)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(ee.min(),Q.empty(),-1)}static max(){return new Mr(ee.max(),Q.empty(),-1)}}function PA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==RA)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===a&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function DA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dm.oe=-1;function xu(t){return t==null}function Pc(t){return t===0&&1/t==-1/0}function OA(t){return typeof t=="number"&&Number.isInteger(t)&&!Pc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _b(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=a??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bx(this.data.getIterator())}getIteratorFrom(e){return new bx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Je(this.comparator);return n.data=e,n}}class bx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Rt([])}unionWith(e){let n=new Je(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Nb("Invalid base64 string: "+a):a}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const LA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(me(!!t),typeof t=="string"){let e=0;const n=LA.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _s(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lm(t){const e=t.mapValue.fields.__previous_value__;return Om(e)?Lm(e):e}function ho(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r,s,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class fo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new fo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof fo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:zA(t)?9007199254740991:FA(t)?10:11:X()}function En(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ho(t).isEqual(ho(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Dr(s.timestampValue),l=Dr(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return _s(s.bytesValue).isEqual(_s(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Re(s.geoPointValue.latitude)===Re(a.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Re(s.integerValue)===Re(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Re(s.doubleValue),l=Re(a.doubleValue);return o===l?Pc(o)===Pc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ti(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(wx(o)!==wx(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!En(o[u],l[u])))return!1;return!0}(t,e);default:return X()}}function mo(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function Si(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Re(a.integerValue||a.doubleValue),u=Re(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return _x(t.timestampValue,e.timestampValue);case 4:return _x(ho(t),ho(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(a,o){const l=_s(a),u=_s(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ce(l[d],u[d]);if(f!==0)return f}return ce(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=ce(Re(a.latitude),Re(o.latitude));return l!==0?l:ce(Re(a.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Nx(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,f;const m=a.fields||{},g=o.fields||{},N=(l=m.value)===null||l===void 0?void 0:l.arrayValue,k=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=ce(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:Nx(N,k)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===jl.mapValue&&o===jl.mapValue)return 0;if(a===jl.mapValue)return 1;if(o===jl.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ce(u[m],f[m]);if(g!==0)return g;const N=Si(l[u[m]],d[f[m]]);if(N!==0)return N}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw X()}}function _x(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Dr(t),r=Dr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function Nx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Si(n[s],r[s]);if(a)return a}return ce(n.length,r.length)}function Ii(t){return Xh(t)}function Xh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _s(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Xh(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${Xh(n.fields[o])}`;return s+"}"}(t.mapValue):X()}function jx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zh(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function Ex(t){return!!t&&"nullValue"in t}function Tx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hl(t){return!!t&&"mapValue"in t}function FA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Va(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Va(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Va(t.arrayValue.values[n]);return e}return Object.assign({},t)}function zA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.value=e}static empty(){return new wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Va(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Hl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Hl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new wt(Va(this.value))}}function jb(t){const e=[];return Cs(t.fields,(n,r)=>{const s=new Qe([n]);if(Hl(r)){const a=jb(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Rt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new lt(e,0,ee.min(),ee.min(),ee.min(),wt.empty(),0)}static newFoundDocument(e,n,r,s){return new lt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new lt(e,2,n,ee.min(),ee.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,ee.min(),ee.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.position=e,this.inclusive=n}}function Sx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Si(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ix(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n="asc"){this.field=e,this.dir=n}}function UA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{}class Ve extends Eb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BA(e,n,r):n==="array-contains"?new WA(e,r):n==="in"?new GA(e,r):n==="not-in"?new KA(e,r):n==="array-contains-any"?new QA(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qA(e,r):new HA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Si(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends Eb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new cn(e,n)}matches(e){return Tb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tb(t){return t.op==="and"}function Sb(t){return $A(t)&&Tb(t)}function $A(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function ef(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+Ii(t.value);if(Sb(t))return t.filters.map(e=>ef(e)).join(",");{const e=t.filters.map(n=>ef(n)).join(",");return`${t.op}(${e})`}}function Ib(t,e){return t instanceof Ve?function(r,s){return s instanceof Ve&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)}(t,e):t instanceof cn?function(r,s){return s instanceof cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&Ib(o,s.filters[l]),!0):!1}(t,e):void X()}function kb(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${Ii(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(kb).join(" ,")+"}"}(t):"Filter"}class BA extends Ve{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class qA extends Ve{constructor(e,n){super(e,"in",n),this.keys=Cb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HA extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=Cb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class WA extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&mo(n.arrayValue,this.value)}}class GA extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mo(this.value.arrayValue,n)}}class KA extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mo(this.value.arrayValue,n)}}class QA extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function kx(t,e=null,n=[],r=[],s=null,a=null,o=null){return new YA(t,e,n,r,s,a,o)}function Fm(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ef(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ii(r)).join(",")),e.ue=n}return e.ue}function zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!UA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ib(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ix(t.startAt,e.startAt)&&Ix(t.endAt,e.endAt)}function tf(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function JA(t,e,n,r,s,a,o,l){return new Bi(t,e,n,r,s,a,o,l)}function Um(t){return new Bi(t)}function Cx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ab(t){return t.collectionGroup!==null}function Fa(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Je(Qe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new po(a,r))}),n.has(Qe.keyField().canonicalString())||e.ce.push(new po(Qe.keyField(),r))}return e.ce}function Nn(t){const e=te(t);return e.le||(e.le=XA(e,Fa(t))),e.le}function XA(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new po(s.field,a)});const n=t.endAt?new Rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rc(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nf(t,e){const n=t.filters.concat([e]);return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rf(t,e,n){return new Bi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yu(t,e){return zm(Nn(t),Nn(e))&&t.limitType===e.limitType}function Pb(t){return`${Fm(Nn(t))}|lt:${t.limitType}`}function $s(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>kb(s)).join(", ")}]`),xu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ii(s)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function vu(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Q.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Fa(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Sx(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Fa(r),s)||r.endAt&&!function(o,l,u){const d=Sx(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Fa(r),s))}(t,e)}function ZA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Rb(t){return(e,n)=>{let r=!1;for(const s of Fa(t)){const a=eP(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function eP(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?Si(u,d):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return _b(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new Ce(Q.comparator);function Yn(){return tP}const Mb=new Ce(Q.comparator);function ja(...t){let e=Mb;for(const n of t)e=e.insert(n.key,n);return e}function Db(t){let e=Mb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function is(){return za()}function Ob(){return za()}function za(){return new qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const nP=new Ce(Q.comparator),rP=new Je(Q.comparator);function se(...t){let e=rP;for(const n of t)e=e.add(n);return e}const sP=new Je(ce);function iP(){return sP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pc(e)?"-0":e}}function Lb(t){return{integerValue:""+t}}function aP(t,e){return OA(e)?Lb(e):$m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this._=void 0}}function oP(t,e,n){return t instanceof go?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Om(a)&&(a=Lm(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof xo?Fb(t,e):t instanceof yo?zb(t,e):function(s,a){const o=Vb(s,a),l=Ax(o)+Ax(s.Pe);return Zh(o)&&Zh(s.Pe)?Lb(l):$m(s.serializer,l)}(t,e)}function lP(t,e,n){return t instanceof xo?Fb(t,e):t instanceof yo?zb(t,e):n}function Vb(t,e){return t instanceof Mc?function(r){return Zh(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class go extends wu{}class xo extends wu{constructor(e){super(),this.elements=e}}function Fb(t,e){const n=Ub(e);for(const r of t.elements)n.some(s=>En(s,r))||n.push(r);return{arrayValue:{values:n}}}class yo extends wu{constructor(e){super(),this.elements=e}}function zb(t,e){let n=Ub(e);for(const r of t.elements)n=n.filter(s=>!En(s,r));return{arrayValue:{values:n}}}class Mc extends wu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ax(t){return Re(t.integerValue||t.doubleValue)}function Ub(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n){this.field=e,this.transform=n}}function uP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof xo&&s instanceof xo||r instanceof yo&&s instanceof yo?Ti(r.elements,s.elements,En):r instanceof Mc&&s instanceof Mc?En(r.Pe,s.Pe):r instanceof go&&s instanceof go}(t.transform,e.transform)}class dP{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bu{}function $b(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Bm(t.key,rn.none()):new Do(t.key,t.data,rn.none());{const n=t.data,r=wt.empty();let s=new Je(Qe.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new qr(t.key,r,new Rt(s.toArray()),rn.none())}}function hP(t,e,n){t instanceof Do?function(s,a,o){const l=s.value.clone(),u=Rx(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qr?function(s,a,o){if(!Wl(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Rx(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(Bb(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ua(t,e,n,r){return t instanceof Do?function(a,o,l,u){if(!Wl(a.precondition,o))return l;const d=a.value.clone(),f=Mx(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qr?function(a,o,l,u){if(!Wl(a.precondition,o))return l;const d=Mx(a.fieldTransforms,u,o),f=o.data;return f.setAll(Bb(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,l){return Wl(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function fP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Vb(r.transform,s||null);a!=null&&(n===null&&(n=wt.empty()),n.set(r.field,a))}return n||null}function Px(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ti(r,s,(a,o)=>uP(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Do extends bu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qr extends bu{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Bb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rx(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,lP(o,l,n[s]))}return r}function Mx(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,oP(a,o,e))}return r}class Bm extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mP extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&hP(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ob();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const u=$b(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Ti(this.mutations,e.mutations,(n,r)=>Px(n,r))&&Ti(this.baseMutations,e.baseMutations,(n,r)=>Px(n,r))}}class qm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return nP}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new qm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ae;function yP(t){switch(t){default:return X();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function qb(t){if(t===void 0)return Qn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Oe.OK:return z.OK;case Oe.CANCELLED:return z.CANCELLED;case Oe.UNKNOWN:return z.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return z.INTERNAL;case Oe.UNAVAILABLE:return z.UNAVAILABLE;case Oe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Oe.NOT_FOUND:return z.NOT_FOUND;case Oe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Oe.ABORTED:return z.ABORTED;case Oe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Oe.DATA_LOSS:return z.DATA_LOSS;default:return X()}}(ae=Oe||(Oe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new us([4294967295,4294967295],0);function Dx(t){const e=vP().encode(t),n=new mb;return n.update(e),new Uint8Array(n.digest())}function Ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new us([n,r],0),new us([s,a],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ea(`Invalid padding: ${n}`);if(r<0)throw new Ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=us.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(us.fromNumber(r)));return s.compare(wP)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Dx(e),[r,s]=Ox(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Hm(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Dx(e),[r,s]=Ox(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Oo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _u(ee.min(),s,new Ce(ce),Yn(),se())}}class Oo{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oo(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Hb{constructor(e,n){this.targetId=e,this.me=n}}class Wb{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Lx{constructor(){this.fe=0,this.ge=Fx(),this.pe=Ze.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new Oo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Fx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class bP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=Vx(),this.Qe=new Ce(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(tf(a))if(r===0){const o=new Q(a.path);this.Ue(n,o,lt.newNoDocument(o,ee.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=_s(r).toUint8Array()}catch(u){if(u instanceof Nb)return Ei("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Hm(o,s,a)}catch(u){return Ei(u instanceof Ea?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&tf(l.target)){const u=new Q(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,lt.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=se();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new _u(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=Vx(),this.Qe=new Ce(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Lx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Je(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Vx(){return new Ce(Q.comparator)}function Fx(){return new Ce(Q.comparator)}const _P={asc:"ASCENDING",desc:"DESCENDING"},NP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jP={and:"AND",or:"OR"};class EP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sf(t,e){return t.useProto3Json||xu(e)?e:{value:e}}function Dc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function TP(t,e){return Dc(t,e.toTimestamp())}function jn(t){return me(!!t),ee.fromTimestamp(function(n){const r=Dr(n);return new Ue(r.seconds,r.nanos)}(t))}function Wm(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Kb(t){const e=be.fromString(t);return me(Zb(e)),e}function of(t,e){return Wm(t.databaseId,e.path)}function zd(t,e){const n=Kb(e);if(n.get(1)!==t.databaseId.projectId)throw new W(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(Yb(n))}function Qb(t,e){return Wm(t.databaseId,e)}function SP(t){const e=Kb(t);return e.length===4?be.emptyPath():Yb(e)}function lf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yb(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zx(t,e,n){return{name:of(t,e),fields:n.value.mapValue.fields}}function IP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(me(f===void 0||typeof f=="string"),Ze.fromBase64String(f||"")):(me(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ze.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?z.UNKNOWN:qb(d.code);return new W(f,d.message||"")}(o);n=new Wb(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zd(t,r.document.name),a=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ee.min(),l=new wt({mapValue:{fields:r.document.fields}}),u=lt.newFoundDocument(s,a,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Gl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zd(t,r.document),a=r.readTime?jn(r.readTime):ee.min(),o=lt.newNoDocument(s,a),l=r.removedTargetIds||[];n=new Gl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zd(t,r.document),a=r.removedTargetIds||[];n=new Gl([],a,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new xP(s,a),l=r.targetId;n=new Hb(l,o)}}return n}function kP(t,e){let n;if(e instanceof Do)n={update:zx(t,e.key,e.value)};else if(e instanceof Bm)n={delete:of(t,e.key)};else if(e instanceof qr)n={update:zx(t,e.key,e.data),updateMask:VP(e.fieldMask)};else{if(!(e instanceof mP))return X();n={verify:of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof go)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Mc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:TP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:X()}(t,e.precondition)),n}function CP(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?jn(s.updateTime):jn(a);return o.isEqual(ee.min())&&(o=jn(a)),new dP(o,s.transformResults||[])}(n,e))):[]}function AP(t,e){return{documents:[Qb(t,e.path)]}}function PP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qb(t,s);const a=function(d){if(d.length!==0)return Xb(cn.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Bs(g.field),direction:DP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=sf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function RP(t){let e=SP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const g=Jb(m);return g instanceof cn&&Sb(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(k){return new po(qs(k.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,xu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,N=m.values||[];return new Rc(N,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,N=m.values||[];return new Rc(N,g)}(n.endAt)),JA(e,s,o,a,l,"F",u,d)}function MP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Jb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qs(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qs(n.unaryFilter.field);return Ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=qs(n.unaryFilter.field);return Ve.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qs(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(qs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(r=>Jb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function DP(t){return _P[t]}function OP(t){return NP[t]}function LP(t){return jP[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function qs(t){return Qe.fromServerFormat(t.fieldPath)}function Xb(t){return t instanceof Ve?function(n){if(n.op==="=="){if(Tx(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(Ex(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tx(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(Ex(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:OP(n.op),value:n.value}}}(t):t instanceof cn?function(n){const r=n.getFilters().map(s=>Xb(s));return r.length===1?r[0]:{compositeFilter:{op:LP(n.op),filters:r}}}(t):X()}function VP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,s,a=ee.min(),o=ee.min(),l=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.ct=e}}function zP(t){const e=RP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.un=new $P}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Mr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class $P{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Je(be.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Je(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ki(0)}static kn(){return new ki(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.changes=new qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ua(r.mutation,s,Rt.empty(),Ue.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=ja();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Yn();const o=za(),l=function(){return za()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof qr)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Ua(f.mutation,d,f.mutation.getFieldMask(),Ue.now())):o.set(d.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new qP(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=za();let s=new Ce((o,l)=>o-l),a=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Rt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||se()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=Ob();f.forEach(g=>{if(!a.has(g)){const N=$b(n.get(g),r.get(g));N!==null&&m.set(g,N),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ab(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):U.resolve(is());let l=-1,u=a;return o.next(d=>U.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,se())).next(f=>({batchId:l,changes:Db(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=ja();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=ja();return this.indexManager.getCollectionParents(e,a).next(l=>U.forEach(l,u=>{const d=function(m,g){return new Bi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,lt.newInvalidDocument(f)))});let l=ja();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&Ua(f.mutation,d,Rt.empty(),Ue.now()),vu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:jn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:zP(s.bundledQuery),readTime:jn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.overlays=new Ce(Q.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=is();return U.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=is(),a=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Ce((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=is(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=is(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gP(n,r));let a=this.Ir.get(n);a===void 0&&(a=se(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.Tr=new Je($e.Er),this.dr=new Je($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new be([])),r=new $e(n,e),s=new $e(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new be([])),r=new $e(n,e),s=new $e(n,e+1);let a=se();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Je($e.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new pP(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new $e(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return U.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);a.push(l)}),U.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(ce);return n.forEach(s=>{const a=new $e(s,0),o=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Q.isDocumentKey(a)||(a=a.child(""));const o=new $e(new Q(a),0);let l=new Je(ce);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const a=new $e(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.Mr=e,this.docs=function(){return new Ce(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():lt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Yn();const o=n.path,l=new Q(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||PA(AA(f),r)<=0||(s.has(f.key)||vu(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return U.resolve(a)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JP(this)}getSize(e){return U.resolve(this.size)}}class JP extends BP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.persistence=e,this.Nr=new qi(n=>Fm(n),zm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gm,this.targetCount=0,this.kr=ki.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ki(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(a).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dm(0),this.Kr=!1,this.Kr=!0,this.$r=new KP,this.referenceDelegate=e(this),this.Ur=new XP(this),this.indexManager=new UP,this.remoteDocumentCache=function(s){return new YP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new FP(n),this.Gr=new WP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new QP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new eR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class eR extends MA{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Jr=new Gm,this.Yr=null}static Zr(e){return new Km(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Qm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wT()?8:DA(ut())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new tR;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(pa()<=ie.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",$s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(pa()<=ie.DEBUG&&K("QueryEngine","Query:",$s(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(pa()<=ie.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",$s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):U.resolve())}Yi(e,n){if(Cx(n))return U.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rf(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=se(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,rf(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Cx(n)||s.isEqual(ee.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?U.resolve(null):(pa()<=ie.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$s(n)),this.rs(e,o,n,CA(s,-1)).next(l=>l))})}ts(e,n){let r=new Je(Rb(e));return n.forEach((s,a)=>{vu(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return pa()<=ie.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",$s(n)),this.Ji.getDocumentsMatchingQuery(e,n,Mr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ce(ce),this._s=new qi(a=>Fm(a),zm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function sR(t,e,n,r){return new rR(t,e,n,r)}async function e_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let u=se();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function iR(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let N=U.resolve();return g.forEach(k=>{N=N.next(()=>f.getEntry(u,k)).next(C=>{const I=d.docVersions.get(k);me(I!==null),C.version.compareTo(I)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=se();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function t_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function aR(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,m)));let N=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?N=N.withResumeToken(Ze.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(f.resumeToken,r)),s=s.insert(m,N),function(C,I,y){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(g,N,f)&&l.push(n.Ur.updateTargetData(a,N))});let u=Yn(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),l.push(oR(a,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function oR(t,e,n){let r=se(),s=se();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Yn();return n.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function lR(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cR(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new yr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function cf(t,e,n){const r=te(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Mo(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Ux(t,e,n){const r=te(t);let s=ee.min(),a=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=te(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,Nn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?a:se())).next(l=>(uR(r,ZA(e),l),{documents:l,Ts:a})))}function uR(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class $x{constructor(){this.activeTargetIds=iP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dR{constructor(){this.so=new $x,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $x,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let El=null;function Ud(){return El===null?El=function(){return 268435456+Math.round(2147483648*Math.random())}():El++,"0x"+El.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class pR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const l=Ud(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Ei("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,a,o,l){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$i}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=fR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Ud();return new Promise((o,l)=>{const u=new pb;u.setWithCredentials(!0),u.listenOnce(gb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ql.NO_ERROR:const f=u.getResponseJson();K(it,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case ql.TIMEOUT:K(it,`RPC '${e}' ${a} timed out`),l(new W(z.DEADLINE_EXCEEDED,"Request time out"));break;case ql.HTTP_ERROR:const m=u.getStatus();if(K(it,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const N=g==null?void 0:g.error;if(N&&N.status&&N.message){const k=function(I){const y=I.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(N.status);l(new W(k,N.message))}else l(new W(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(z.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{K(it,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);K(it,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Ud(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vb(),l=yb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");K(it,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,N=!1;const k=new mR({Io:I=>{N?K(it,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(g||(K(it,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(it,`RPC '${e}' stream ${s} sending:`,I),m.send(I))},To:()=>m.close()}),C=(I,y,x)=>{I.listen(y,v=>{try{x(v)}catch(R){setTimeout(()=>{throw R},0)}})};return C(m,Na.EventType.OPEN,()=>{N||(K(it,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),C(m,Na.EventType.CLOSE,()=>{N||(N=!0,K(it,`RPC '${e}' stream ${s} transport closed`),k.So())}),C(m,Na.EventType.ERROR,I=>{N||(N=!0,Ei(it,`RPC '${e}' stream ${s} transport errored:`,I),k.So(new W(z.UNAVAILABLE,"The operation could not be completed")))}),C(m,Na.EventType.MESSAGE,I=>{var y;if(!N){const x=I.data[0];me(!!x);const v=x,R=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(R){K(it,`RPC '${e}' stream ${s} received error:`,R);const A=R.status;let M=function(S){const b=Oe[S];if(b!==void 0)return qb(b)}(A),j=R.message;M===void 0&&(M=z.INTERNAL,j="Unknown error status: "+A+" with message "+R.message),N=!0,k.So(new W(M,j)),m.close()}else K(it,`RPC '${e}' stream ${s} received:`,x),k.bo(x)}}),C(l,xb.STAT_EVENT,I=>{I.stat===Jh.PROXY?K(it,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Jh.NOPROXY&&K(it,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function $d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){return new EP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n,r,s,a,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new n_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gR extends r_{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=IP(this.serializer,e),r=function(a){if(!("targetChange"in a))return ee.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?jn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=lf(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=tf(u)?{documents:AP(a,u)}:{query:PP(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Gb(a,o.resumeToken);const d=sf(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=Dc(a,o.snapshotVersion.toTimestamp());const d=sf(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=MP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=lf(this.serializer),n.removeTarget=e,this.a_(n)}}class xR extends r_{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=CP(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=lf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,af(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(z.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,af(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{As(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=te(u);d.L_.add(4),await Lo(d),d.q_.set("Unknown"),d.L_.delete(4),await ju(d)}(this))})}),this.q_=new vR(r,s)}}async function ju(t){if(As(t))for(const e of t.B_)await e(!0)}async function Lo(t){for(const e of t.B_)await e(!1)}function s_(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Zm(n)?Xm(n):Hi(n).r_()&&Jm(n,e))}function Ym(t,e){const n=te(t),r=Hi(n);n.N_.delete(e),r.r_()&&i_(n,e),n.N_.size===0&&(r.r_()?r.o_():As(n)&&n.q_.set("Unknown"))}function Jm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hi(t).A_(e)}function i_(t,e){t.Q_.xe(e),Hi(t).R_(e)}function Xm(t){t.Q_=new bP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hi(t).start(),t.q_.v_()}function Zm(t){return As(t)&&!Hi(t).n_()&&t.N_.size>0}function As(t){return te(t).L_.size===0}function a_(t){t.Q_=void 0}async function bR(t){t.q_.set("Online")}async function _R(t){t.N_.forEach((e,n)=>{Jm(t,e)})}async function NR(t,e){a_(t),Zm(t)?(t.q_.M_(e),Xm(t)):t.q_.set("Unknown")}async function jR(t,e,n){if(t.q_.set("Online"),e instanceof Wb&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Oc(t,r)}else if(e instanceof Gl?t.Q_.Ke(e):e instanceof Hb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await t_(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(d);f&&a.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(Ze.EMPTY_BYTE_STRING,f.snapshotVersion)),i_(a,u);const m=new yr(f.target,u,d,f.sequenceNumber);Jm(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Oc(t,r)}}async function Oc(t,e,n){if(!Mo(e))throw e;t.L_.add(1),await Lo(t),t.q_.set("Offline"),n||(n=()=>t_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ju(t)})}function o_(t,e){return e().catch(n=>Oc(t,n,e))}async function Eu(t){const e=te(t),n=Or(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ER(e);)try{const s=await lR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,TR(e,s)}catch(s){await Oc(e,s)}l_(e)&&c_(e)}function ER(t){return As(t)&&t.O_.length<10}function TR(t,e){t.O_.push(e);const n=Or(t);n.r_()&&n.V_&&n.m_(e.mutations)}function l_(t){return As(t)&&!Or(t).n_()&&t.O_.length>0}function c_(t){Or(t).start()}async function SR(t){Or(t).p_()}async function IR(t){const e=Or(t);for(const n of t.O_)e.m_(n.mutations)}async function kR(t,e,n){const r=t.O_.shift(),s=qm.from(r,e,n);await o_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Eu(t)}async function CR(t,e){e&&Or(t).V_&&await async function(r,s){if(function(o){return yP(o)&&o!==z.ABORTED}(s.code)){const a=r.O_.shift();Or(r).s_(),await o_(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Eu(r)}}(t,e),l_(t)&&c_(t)}async function qx(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=As(n);n.L_.add(3),await Lo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ju(n)}async function AR(t,e){const n=te(t);e?(n.L_.delete(2),await ju(n)):e||(n.L_.add(2),await Lo(n),n.q_.set("Unknown"))}function Hi(t){return t.K_||(t.K_=function(n,r,s){const a=te(n);return a.w_(),new gR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:bR.bind(null,t),Ro:_R.bind(null,t),mo:NR.bind(null,t),d_:jR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Zm(t)?Xm(t):t.q_.set("Unknown")):(await t.K_.stop(),a_(t))})),t.K_}function Or(t){return t.U_||(t.U_=function(n,r,s){const a=te(n);return a.w_(),new xR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:SR.bind(null,t),mo:CR.bind(null,t),f_:IR.bind(null,t),g_:kR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Eu(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new ds,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new ep(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),Mo(t))return new W(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=ja(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new mi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.W_=new Ce(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ci{constructor(e,n,r,s,a,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ci(e,n,mi.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RR{constructor(){this.queries=Wx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),a=s.queries;s.queries=Wx(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new W(z.ABORTED,"Firestore shutting down"))}}function Wx(){return new qi(t=>Pb(t),yu)}async function MR(t,e){const n=te(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new PR,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=tp(o,`Initialization of query '${$s(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&np(n)}async function DR(t,e){const n=te(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OR(t,e){const n=te(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&np(n)}function LR(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function np(t){t.Y_.forEach(e=>{e.next()})}var uf,Gx;(Gx=uf||(uf={})).ea="default",Gx.Cache="cache";class VR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.key=e}}class d_{constructor(e){this.key=e}}class FR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=Rb(e),this.Ra=new mi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Hx,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),N=vu(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),C=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let I=!1;g&&N?g.data.isEqual(N.data)?k!==C&&(r.track({type:3,doc:N}),I=!0):this.ga(g,N)||(r.track({type:2,doc:N}),I=!0,(u&&this.Aa(N,u)>0||d&&this.Aa(N,d)<0)&&(l=!0)):!g&&N?(r.track({type:0,doc:N}),I=!0):g&&!N&&(r.track({type:1,doc:g}),I=!0,(u||d)&&(l=!0)),I&&(N?(o=o.add(N),a=C?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(N,k){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return C(N)-C(k)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ci(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Hx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new d_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new u_(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class zR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UR{constructor(e){this.key=e,this.va=!1}}class $R{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new qi(l=>Pb(l),yu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ce(Q.comparator),this.Na=new Map,this.La=new Gm,this.Ba={},this.ka=new Map,this.qa=ki.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BR(t,e,n=!0){const r=x_(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await h_(r,e,n,!0),s}async function qR(t,e){const n=x_(t);await h_(n,e,!0,!1)}async function h_(t,e,n,r){const s=await cR(t.localStore,Nn(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await HR(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&s_(t.remoteStore,s),l}async function HR(t,e,n,r,s){t.Ka=(m,g,N)=>async function(C,I,y,x){let v=I.view.ma(y);v.ns&&(v=await Ux(C.localStore,I.query,!1).then(({documents:j})=>I.view.ma(j,v)));const R=x&&x.targetChanges.get(I.targetId),A=x&&x.targetMismatches.get(I.targetId)!=null,M=I.view.applyChanges(v,C.isPrimaryClient,R,A);return Qx(C,I.targetId,M.wa),M.snapshot}(t,m,g,N);const a=await Ux(t.localStore,e,!0),o=new FR(e,a.Ts),l=o.ma(a.documents),u=Oo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Qx(t,n,d.wa);const f=new zR(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function WR(t,e,n){const r=te(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!yu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ym(r.remoteStore,s.targetId),df(r,s.targetId)}).catch(Ro)):(df(r,s.targetId),await cf(r.localStore,s.targetId,!0))}async function GR(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ym(n.remoteStore,r.targetId))}async function KR(t,e,n){const r=t4(t);try{const s=await function(o,l){const u=te(o),d=Ue.now(),f=l.reduce((N,k)=>N.add(k.key),se());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=Yn(),C=se();return u.cs.getEntries(N,f).next(I=>{k=I,k.forEach((y,x)=>{x.isValidDocument()||(C=C.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(N,k)).next(I=>{m=I;const y=[];for(const x of l){const v=fP(x,m.get(x.key).overlayedDocument);v!=null&&y.push(new qr(x.key,v,jb(v.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(N,d,y,l)}).next(I=>{g=I;const y=I.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(N,I.batchId,y)})}).then(()=>({batchId:g.batchId,changes:Db(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ce(ce)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Vo(r,s.changes),await Eu(r.remoteStore)}catch(s){const a=tp(s,"Failed to persist write");n.reject(a)}}async function f_(t,e){const n=te(t);try{const r=await aR(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?me(o.va):s.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await Vo(n,r,e)}catch(r){await Ro(r)}}function Kx(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&np(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QR(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Ce(Q.comparator);o=o.insert(a,lt.newNoDocument(a,ee.min()));const l=se().add(a),u=new _u(ee.min(),new Map,new Ce(ce),o,l);await f_(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),rp(r)}else await cf(r.localStore,e,!1).then(()=>df(r,e,n)).catch(Ro)}async function YR(t,e){const n=te(t),r=e.batch.batchId;try{const s=await iR(n.localStore,e);p_(n,r,null),m_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vo(n,s)}catch(s){await Ro(s)}}async function JR(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(me(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);p_(r,e,n),m_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vo(r,s)}catch(s){await Ro(s)}}function m_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function p_(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function df(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||g_(t,r)})}function g_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ym(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),rp(t))}function Qx(t,e,n){for(const r of n)r instanceof u_?(t.La.addReference(r.key,e),XR(t,r)):r instanceof d_?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||g_(t,r.key)):X()}function XR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),rp(t))}function rp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(be.fromString(e)),r=t.qa.next();t.Na.set(r,new UR(n)),t.Oa=t.Oa.insert(n,r),s_(t.remoteStore,new yr(Nn(Um(n.path)),r,"TargetPurposeLimboResolution",Dm.oe))}}async function Vo(t,e,n){const r=te(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Qm.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,N=>f.persistence.referenceDelegate.addReference(m,g.targetId,N)).next(()=>U.forEach(g.Ui,N=>f.persistence.referenceDelegate.removeReference(m,g.targetId,N)))))}catch(m){if(!Mo(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const N=f.os.get(g),k=N.snapshotVersion,C=N.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(g,C)}}}(r.localStore,a))}async function ZR(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await e_(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new W(z.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vo(n,r.hs)}}function e4(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function x_(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QR.bind(null,e),e.Ca.d_=OR.bind(null,e.eventManager),e.Ca.$a=LR.bind(null,e.eventManager),e}function t4(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JR.bind(null,e),e}class Lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return sR(this.persistence,new nR,e.initialUser,this.serializer)}Ga(e){return new ZP(Km.Zr,this.serializer)}Wa(e){return new dR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lc.provider={build:()=>new Lc};class hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Kx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZR.bind(null,this.syncEngine),await AR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RR}()}createDatastore(e){const n=Nu(e.databaseInfo.databaseId),r=function(a){return new pR(a)}(e.databaseInfo);return function(a,o,l,u){return new yR(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new wR(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Kx(this.syncEngine,n,0),function(){return Bx.D()?new Bx:new hR}())}createSyncEngine(e,n){return function(s,a,o,l,u,d,f){const m=new $R(s,a,o,l,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=te(s);K("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Lo(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hf.provider={build:()=>new hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=bb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ds;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bd(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await e_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Yx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await s4(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>qx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>qx(e.remoteStore,s)),t._onlineComponents=e}async function s4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ei("Error using user provided cache. Falling back to memory cache: "+n),await Bd(t,new Lc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Bd(t,new Lc);return t._offlineComponents}async function y_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await Yx(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await Yx(t,new hf))),t._onlineComponents}function i4(t){return y_(t).then(e=>e.syncEngine)}async function Jx(t){const e=await y_(t),n=e.eventManager;return n.onListen=BR.bind(null,e.syncEngine),n.onUnlisten=WR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GR.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t,e,n){if(!n)throw new W(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a4(t,e,n,r){if(e===!0&&r===!0)throw new W(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zx(t){if(!Q.isDocumentKey(t))throw new W(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ey(t){if(Q.isDocumentKey(t))throw new W(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tu(t);throw new W(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new W(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new W(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new W(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bA;switch(r.type){case"firstParty":return new EA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xx.get(n);r&&(K("ComponentProvider","Removing Datastore"),Xx.delete(n),r.terminate())}(this),Promise.resolve()}}function o4(t,e,n,r={}){var s;const a=(t=Cr(t,Su))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=at.MOCK_USER;else{l=n1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new at(d)}t._authCredentials=new _A(new wb(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ps(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class Ar extends Ps{constructor(e,n,r){super(e,n,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Q(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Vc(t,e,...n){if(t=ke(t),w_("collection","path",e),t instanceof Su){const r=be.fromString(e,...n);return ey(r),new Ar(t,null,r)}{if(!(t instanceof It||t instanceof Ar))throw new W(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return ey(r),new Ar(t.firestore,null,r)}}function as(t,e,...n){if(t=ke(t),arguments.length===1&&(e=bb.newId()),w_("doc","path",e),t instanceof Su){const r=be.fromString(e,...n);return Zx(r),new It(t,null,new Q(r))}{if(!(t instanceof It||t instanceof Ar))throw new W(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Zx(r),new It(t.firestore,t instanceof Ar?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new n_(this,"async_queue_retry"),this.Vu=()=>{const r=$d();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$d();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$d();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ds;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mo(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Qn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ep.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ry(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Ai extends Su{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ny,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function l4(t,e){const n=typeof t=="object"?t:du(),r=typeof t=="string"?t:"(default)",s=$r(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=Zw("firestore");a&&o4(s,...a)}return s}function b_(t){if(t._terminated)throw new W(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c4(t),t._firestoreClient}function c4(t){var e,n,r;const s=t._freezeSettings(),a=function(l,u,d,f){return new VA(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,v_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new r4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pi(Ze.fromBase64String(e))}catch(n){throw new W(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Pi(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=/^__.*__$/;class d4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Do(e,this.data,n,this.fieldTransforms)}}class __{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class ap{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ap(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(N_(this.Cu)&&u4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class h4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nu(e)}Qu(e,n,r,s=!1){return new ap({Cu:e,methodName:n,qu:r,path:Qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function op(t){const e=t._freezeSettings(),n=Nu(t._databaseId);return new h4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function f4(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);cp("Data must be an object, but it was:",o,r);const l=j_(r,o);let u,d;if(a.merge)u=new Rt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const g=ff(e,m,n);if(!o.contains(g))throw new W(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);T_(f,g)||f.push(g)}u=new Rt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new d4(new wt(l),u,d)}class Cu extends ku{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cu}}class lp extends ku{_toFieldTransform(e){return new cP(e.path,new go)}isEqual(e){return e instanceof lp}}function m4(t,e,n,r){const s=t.Qu(1,e,n);cp("Data must be an object, but it was:",s,r);const a=[],o=wt.empty();Cs(r,(u,d)=>{const f=up(e,u,n);d=ke(d);const m=s.Nu(f);if(d instanceof Cu)a.push(f);else{const g=Fo(d,m);g!=null&&(a.push(f),o.set(f,g))}});const l=new Rt(a);return new __(o,l,s.fieldTransforms)}function p4(t,e,n,r,s,a){const o=t.Qu(1,e,n),l=[ff(e,r,n)],u=[s];if(a.length%2!=0)throw new W(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)l.push(ff(e,a[g])),u.push(a[g+1]);const d=[],f=wt.empty();for(let g=l.length-1;g>=0;--g)if(!T_(d,l[g])){const N=l[g];let k=u[g];k=ke(k);const C=o.Nu(N);if(k instanceof Cu)d.push(N);else{const I=Fo(k,C);I!=null&&(d.push(N),f.set(N,I))}}const m=new Rt(d);return new __(f,m,o.fieldTransforms)}function g4(t,e,n,r=!1){return Fo(n,t.Qu(r?4:3,e))}function Fo(t,e){if(E_(t=ke(t)))return cp("Unsupported field value:",e,t),j_(t,e);if(t instanceof ku)return function(r,s){if(!N_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let u=Fo(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ue.fromDate(r);return{timestampValue:Dc(s.serializer,a)}}if(r instanceof Ue){const a=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dc(s.serializer,a)}}if(r instanceof sp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pi)return{bytesValue:Gb(s.serializer,r._byteString)};if(r instanceof It){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Wm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ip)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return $m(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Tu(r)}`)}(t,e)}function j_(t,e){const n={};return _b(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,s)=>{const a=Fo(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function E_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof sp||t instanceof Pi||t instanceof It||t instanceof ku||t instanceof ip)}function cp(t,e,n){if(!E_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Tu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ff(t,e,n){if((e=ke(e))instanceof Iu)return e._internalPath;if(typeof e=="string")return up(t,e);throw Fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const x4=new RegExp("[~\\*/\\[\\]]");function up(t,e,n){if(e.search(x4)>=0)throw Fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Iu(...e.split("."))._internalPath}catch{throw Fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fc(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(z.INVALID_ARGUMENT,l+t+u)}function T_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Au("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y4 extends S_{data(){return super.data()}}function Au(t,e){return typeof e=="string"?up(t,e):e instanceof Iu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{}class I_ extends dp{}function k_(t,e,...n){let r=[];e instanceof dp&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof hp).length,l=a.filter(u=>u instanceof Pu).length;if(o>1||o>0&&l>0)throw new W(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Pu extends I_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pu(e,n,r)}_apply(e){const n=this._parse(e);return A_(e._query,n),new Ps(e.firestore,e.converter,nf(e._query,n))}_parse(e){const n=op(e.firestore);return function(a,o,l,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){iy(m,f);const N=[];for(const k of m)N.push(sy(u,a,k));g={arrayValue:{values:N}}}else g=sy(u,a,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||iy(m,f),g=g4(l,o,m,f==="in"||f==="not-in");return Ve.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function C_(t,e,n){const r=e,s=Au("where",t);return Pu._create(s,r,n)}class hp extends dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)A_(o,u),o=nf(o,u)}(e._query,n),new Ps(e.firestore,e.converter,nf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fp extends I_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fp(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new W(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new po(a,o)}(e._query,this._field,this._direction);return new Ps(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Bi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function w4(t,e="asc"){const n=e,r=Au("orderBy",t);return fp._create(r,n)}function sy(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new W(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ab(e)&&n.indexOf("/")!==-1)throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!Q.isDocumentKey(r))throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jx(t,new Q(r))}if(n instanceof It)return jx(t,n._key);throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(n)}.`)}function iy(t,e){if(!Array.isArray(t)||t.length===0)throw new W(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A_(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class b4{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cs(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Re(o.doubleValue));return new ip(a)}convertGeoPoint(e){return new sp(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);me(Zb(r));const s=new fo(r.get(1),r.get(3)),a=new Q(r.popFirst(5));return s.isEqual(n)||Qn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class P_ extends S_{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Au("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kl extends P_{data(e={}){return super.data(e)}}class N4{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ta(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kl(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Kl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ta(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Kl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ta(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:j4(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function j4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class R_ extends b4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function Ql(t,e,n,...r){t=Cr(t,It);const s=Cr(t.firestore,Ai),a=op(s);let o;return o=typeof(e=ke(e))=="string"||e instanceof Iu?p4(a,"updateDoc",t._key,e,n,r):m4(a,"updateDoc",t._key,e),mp(s,[o.toMutation(t._key,rn.exists(!0))])}function M_(t){return mp(Cr(t.firestore,Ai),[new Bm(t._key,rn.none())])}function D_(t,e){const n=Cr(t.firestore,Ai),r=as(t),s=_4(t.converter,e);return mp(n,[f4(op(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function O_(t,...e){var n,r,s;t=ke(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ry(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ry(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof It)d=Cr(t.firestore,Ai),f=Um(t._key.path),u={next:m=>{e[o]&&e[o](E4(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Cr(t,Ps);d=Cr(m.firestore,Ai),f=m._query;const g=new R_(d);u={next:N=>{e[o]&&e[o](new N4(d,g,m,N))},error:e[o+1],complete:e[o+2]},v4(t._query)}return function(g,N,k,C){const I=new n4(C),y=new VR(N,I,k);return g.asyncQueue.enqueueAndForget(async()=>MR(await Jx(g),y)),()=>{I.Za(),g.asyncQueue.enqueueAndForget(async()=>DR(await Jx(g),y))}}(b_(d),f,l,u)}function mp(t,e){return function(r,s){const a=new ds;return r.asyncQueue.enqueueAndForget(async()=>KR(await i4(r),s,a)),a.promise}(b_(t),e)}function E4(t,e,n){const r=n.docs.get(e._key),s=new R_(t);return new P_(t,s,e._key,r,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}function mr(){return new lp("serverTimestamp")}(function(e,n=!0){(function(s){$i=s})(Is),on(new Wt("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Ai(new NA(r.getProvider("auth-internal")),new SA(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(d.options.projectId,f)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Tt(vx,"4.7.3",e),Tt(vx,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="firebasestorage.googleapis.com",T4="storageBucket",S4=2*60*1e3,I4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends Gt{constructor(e,n,r=0){super(qd(e),`Firebase Storage: ${n} (${qd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tn||(Tn={}));function qd(t){return"storage/"+t}function k4(){const t="An unknown error occurred, please check the error payload for server response.";return new kn(Tn.UNKNOWN,t)}function C4(){return new kn(Tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function A4(){return new kn(Tn.CANCELED,"User canceled the upload/download.")}function P4(t){return new kn(Tn.INVALID_URL,"Invalid URL '"+t+"'.")}function R4(t){return new kn(Tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ay(t){return new kn(Tn.INVALID_ARGUMENT,t)}function V_(){return new kn(Tn.APP_DELETED,"The Firebase app was deleted.")}function M4(t){return new kn(Tn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=en.makeFromUrl(e,n)}catch{return new en(e,"")}if(r.path==="")return r;throw R4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",N=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),k={bucket:1,path:3},C=n===L_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",y=new RegExp(`^https?://${C}/${s}/${I}`,"i"),v=[{regex:l,indices:u,postModify:a},{regex:N,indices:k,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<v.length;R++){const A=v[R],M=A.regex.exec(e);if(M){const j=M[A.indices.bucket];let w=M[A.indices.path];w||(w=""),r=new en(j,w),A.postModify(r);break}}if(r==null)throw P4(e);return r}}class D4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...I){d||(d=!0,e.apply(null,I))}function m(I){s=setTimeout(()=>{s=null,t(N,u())},I)}function g(){a&&clearTimeout(a)}function N(I,...y){if(d){g();return}if(I){g(),f.call(null,I,...y);return}if(u()||o){g(),f.call(null,I,...y);return}r<64&&(r*=2);let v;l===1?(l=2,v=0):v=(r+Math.random())*1e3,m(v)}let k=!1;function C(I){k||(k=!0,g(),!d&&(s!==null?(I||(l=2),clearTimeout(s),m(0)):I||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,C(!0)},n),C}function L4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t){return t!==void 0}function oy(t,e,n,r){if(r<e)throw ay(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ay(`Invalid value for '${t}'. Expected ${n} or less.`)}function F4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var zc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(zc||(zc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,r,s,a,o,l,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,k)=>{this.resolve_=N,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Tl(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===zc.NO_ERROR,u=a.getStatus();if(!l||z4(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===zc.ABORT;r(!1,new Tl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Tl(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());V4(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=k4();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?V_():A4();o(u)}else{const u=C4();o(u)}};this.canceled_?n(!1,new Tl(!1,null,!0)):this.backoffId_=O4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&L4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function B4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function q4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function H4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function W4(t,e,n,r,s,a,o=!0){const l=F4(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return q4(d,e),$4(d,n),B4(d,a),H4(d,r),new U4(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function K4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n){this._service=e,n instanceof en?this._location=n:this._location=en.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Uc(e,n)}get root(){const e=new en(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K4(this._location.path)}get storage(){return this._service}get parent(){const e=G4(this._location.path);if(e===null)return null;const n=new en(this._location.bucket,e);return new Uc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw M4(e)}}function ly(t,e){const n=e==null?void 0:e[T4];return n==null?null:en.makeFromBucketSpec(n,t)}function Q4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:n1(s,t.app.options.projectId))}class Y4{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=L_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=S4,this._maxUploadRetryTime=I4,this._requests=new Set,s!=null?this._bucket=en.makeFromBucketSpec(s,this._host):this._bucket=ly(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=en.makeFromBucketSpec(this._url,e):this._bucket=ly(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Uc(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new D4(V_());{const o=W4(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const cy="@firebase/storage",uy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="storage";function J4(t=du(),e){t=ke(t);const r=$r(t,F_).getImmediate({identifier:e}),s=Zw("storage");return s&&X4(r,...s),r}function X4(t,e,n,r={}){Q4(t,e,n,r)}function Z4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Y4(n,r,s,e,Is)}function e3(){on(new Wt(F_,Z4,"PUBLIC").setMultipleInstances(!0)),Tt(cy,uy,""),Tt(cy,uy,"esm2017")}e3();const t3={apiKey:"AIzaSyDFYAxry4pC8b2urTH7EgWfkeTI5r9ySAg",authDomain:"synapseai-a1290.firebaseapp.com",projectId:"synapseai-a1290",storageBucket:"synapseai-a1290.firebasestorage.app",messagingSenderId:"65881787673",appId:"1:65881787673:web:4724020c42141e13a6c988",measurementId:"G-K058WQ2XC3"},Ru=c1(t3);xA(Ru);const Sl=Xk(Ru),mn=l4(Ru);J4(Ru);const z_=D.createContext(void 0),Hr=()=>{const t=D.useContext(z_);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},n3=({children:t})=>{const[e,n]=D.useState(null),[r,s]=D.useState(!0),a=async(d,f)=>{await DI(Sl,d,f)},o=async(d,f,m)=>{const{user:g}=await MI(Sl,d,f);await LI(g,{displayName:m})},l=async()=>{await UI(Sl)};D.useEffect(()=>zI(Sl,f=>{n(f),s(!1)}),[]);const u={currentUser:e,login:a,register:o,logout:l,loading:r};return i.jsx(z_.Provider,{value:u,children:!r&&t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...d},f)=>D.createElement("svg",{ref:f,...r3,width:s,height:s,stroke:r,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${s3(t)}`,l].join(" "),...d},[...e.map(([m,g])=>D.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=G("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=G("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=G("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=G("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=G("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=G("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=G("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=G("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=G("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=G("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=G("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=G("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=G("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=G("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=G("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=G("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=G("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=G("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=G("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=G("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),S3=()=>{const[t,e]=D.useState(!1);return i.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-[#223049]",children:"oya"}),i.jsx("p",{className:"text-xs text-gray-600 -mt-1",children:"intelligence"})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[i.jsx("a",{href:"#features",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"Fonctionnalités"}),i.jsx("a",{href:"#roi",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"ROI"}),i.jsx("a",{href:"#pricing",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"Tarifs"}),i.jsx("a",{href:"#contact",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"Contact"}),i.jsx(A0,{to:"/auth",className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Connexion"})]}),i.jsx("button",{className:"md:hidden",onClick:()=>e(!t),children:t?i.jsx(G_,{size:24}):i.jsx(x3,{size:24})})]}),t&&i.jsx("div",{className:"md:hidden",children:i.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t",children:[i.jsx("a",{href:"#features",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"Fonctionnalités"}),i.jsx("a",{href:"#roi",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"ROI"}),i.jsx("a",{href:"#pricing",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"Tarifs"}),i.jsx("a",{href:"#contact",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"Contact"}),i.jsx(A0,{to:"/auth",className:"block mx-3 mt-2 bg-[#ff6a3d] text-white px-6 py-2 rounded-lg text-center hover:bg-[#ff6a3d]/90 transition-colors",children:"Connexion"})]})})]})})},I3=()=>i.jsx("section",{className:"py-20 lg:py-32 bg-gradient-to-b from-[#f4f0ec] to-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#9b6bff]/10 rounded-full text-[#9b6bff] font-medium text-sm mb-6",children:"🚀 Plateforme IA stratégique"}),i.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-[#223049] leading-tight mb-6",children:["OYA transforme votre",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff]",children:" recrutement"})]}),i.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Supprimez les intermédiaires coûteux. Automatisez 80% de votre processus de recrutement. Gardez le contrôle humain sur les décisions stratégiques."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[i.jsxs("button",{className:"bg-[#ff6a3d] text-white px-8 py-4 rounded-lg font-semibold hover:bg-[#ff6a3d]/90 transition-all transform hover:scale-105 flex items-center justify-center space-x-2",children:[i.jsx("span",{children:"Démarrer maintenant"}),i.jsx(U_,{size:20})]}),i.jsxs("button",{className:"border-2 border-[#223049] text-[#223049] px-8 py-4 rounded-lg font-semibold hover:bg-[#223049] hover:text-white transition-all flex items-center justify-center space-x-2",children:[i.jsx(pi,{size:20}),i.jsx("span",{children:"Voir la démo"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Te,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"ROI jusqu'à +1133%"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Te,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"-50% temps RH"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Te,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"Suppression des cabinets"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Te,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"IA 24/7"})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("img",{src:"https://images.pexels.com/photos/3184311/pexels-photo-3184311.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop",alt:"Équipe RH moderne",className:"rounded-2xl shadow-2xl"}),i.jsxs("div",{className:"absolute -top-6 -right-6 bg-white p-4 rounded-xl shadow-lg border-l-4 border-[#ff6a3d]",children:[i.jsx("div",{className:"text-2xl font-bold text-[#223049]",children:"92%"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Taux de matching"})]}),i.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg border-l-4 border-[#9b6bff]",children:[i.jsx("div",{className:"text-2xl font-bold text-[#223049]",children:"15k€"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Économie/recrutement"})]})]}),i.jsx("div",{className:"absolute -top-4 -right-4 w-72 h-72 bg-gradient-to-br from-[#ff6a3d]/20 to-[#9b6bff]/20 rounded-full blur-3xl"})]})]})})}),k3=()=>{const t=[{icon:Wi,title:"Recherche automatique",description:"Sourcing intelligent sur toutes les plateformes et LinkedIn selon vos critères précis",color:"from-[#ff6a3d] to-[#ff6a3d]/80"},{icon:In,title:"Scoring IA temps réel",description:"Évaluation automatique des candidats avec estimation salariale et matching de compétences",color:"from-[#9b6bff] to-[#9b6bff]/80"},{icon:_t,title:"Organisation automatique",description:"Planification des entretiens, relances et mise à jour d'agenda des recruteurs",color:"from-green-500 to-green-400"},{icon:q_,title:"Centralisation CRM",description:"Interface unique avec filtres avancés, notes et historique complet des interactions",color:"from-blue-500 to-blue-400"},{icon:qe,title:"Analytics avancées",description:"Tableaux de bord en temps réel avec KPIs de performance et ROI détaillé",color:"from-purple-500 to-purple-400"},{icon:j3,title:"Sécurité entreprise",description:"Hébergement sécurisé, intégration SIRH, conformité RGPD et SSO",color:"from-red-500 to-red-400"}];return i.jsx("section",{id:"features",className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#ff6a3d]/10 rounded-full text-[#ff6a3d] font-medium text-sm mb-6",children:"🤖 IA qui restructure votre chaîne de recrutement"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Une plateforme complète pour révolutionner vos RH"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"OYA centralise tout comme un CRM mais agit comme un moteur intelligent centralisé, capable d'automatiser l'intégralité de votre processus de recrutement."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,n)=>i.jsxs("div",{className:"group relative p-8 bg-gradient-to-br from-gray-50 to-white rounded-2xl hover:shadow-2xl transition-all duration-300 border border-gray-100",children:[i.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${e.color} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform`,children:i.jsx(e.icon,{className:"text-white",size:32})}),i.jsx("h3",{className:"text-xl font-bold text-[#223049] mb-4",children:e.title}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description}),i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-[#ff6a3d]/5 to-[#9b6bff]/5 opacity-0 group-hover:opacity-100 transition-opacity"})]},n))}),i.jsx("div",{className:"text-center mt-16",children:i.jsxs("div",{className:"bg-gradient-to-r from-[#223049] to-[#223049]/90 rounded-2xl p-8 lg:p-12",children:[i.jsx("h3",{className:"text-2xl lg:text-3xl font-bold text-white mb-6",children:"Prêt à transformer votre recrutement ?"}),i.jsx("p",{className:"text-gray-300 mb-8 max-w-2xl mx-auto",children:"Rejoignez les entreprises qui ont déjà supprimé leurs intermédiaires et automatisé leur processus de recrutement."}),i.jsx("button",{className:"bg-[#ff6a3d] text-white px-8 py-4 rounded-lg font-semibold hover:bg-[#ff6a3d]/90 transition-all transform hover:scale-105",children:"Demander une démo"})]})})]})})},C3=()=>{const[t,e]=D.useState(25),[n,r]=D.useState(60),[s,a]=D.useState(5e4),o=s*.15,l=8,u=50,d=Math.round(t*(n/100)),f=d*o,m=t*l*u,g=f+m,N=t<=25?34880:t<=100?62800:57e4,k=t*3*u,C=N+k,I=g-C,y=(I-N)/N*100,x=()=>t<=25?"PME":t<=100?"ETI":"Grand Groupe";return i.jsx("section",{id:"roi",className:"py-20 bg-gradient-to-br from-[#f4f0ec] to-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 rounded-full text-green-700 font-medium text-sm mb-6",children:"💰 Calculez votre ROI"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Découvrez vos économies avec OYA"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Simulation claire du retour sur investissement pour votre entreprise. Résultats basés sur nos clients actuels."})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-start",children:[i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[i.jsx(a3,{className:"text-[#ff6a3d]",size:32}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049]",children:"Calculateur ROI"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de recrutements par an"}),i.jsx("input",{type:"range",min:"10",max:"1000",value:t,onChange:v=>e(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[i.jsx("span",{children:"10"}),i.jsx("span",{className:"font-semibold text-[#ff6a3d]",children:t}),i.jsx("span",{children:"1000"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"% de recrutements via cabinets actuellement"}),i.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:v=>r(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[i.jsx("span",{children:"0%"}),i.jsxs("span",{className:"font-semibold text-[#ff6a3d]",children:[n,"%"]}),i.jsx("span",{children:"100%"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire moyen des postes recrutés"}),i.jsx("input",{type:"range",min:"25000",max:"150000",step:"5000",value:s,onChange:v=>a(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[i.jsx("span",{children:"25k€"}),i.jsxs("span",{className:"font-semibold text-[#ff6a3d]",children:[s.toLocaleString(),"€"]}),i.jsx("span",{children:"150k€"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#9b6bff] to-[#9b6bff]/80 p-6 rounded-xl text-white",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Profil de votre entreprise"}),i.jsx("p",{className:"text-2xl font-bold",children:x()}),i.jsxs("p",{className:"opacity-90",children:[t," recrutements/an"]})]}),i.jsxs("div",{className:"bg-red-50 border border-red-200 p-6 rounded-xl",children:[i.jsxs("h4",{className:"text-lg font-semibold text-red-800 mb-4 flex items-center",children:[i.jsx(d3,{size:20,className:"mr-2"}),"Coûts actuels"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-red-700",children:["Cabinets (",d," recrutements)"]}),i.jsxs("span",{className:"font-semibold text-red-800",children:[f.toLocaleString(),"€"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-red-700",children:"Temps RH interne"}),i.jsxs("span",{className:"font-semibold text-red-800",children:[m.toLocaleString(),"€"]})]}),i.jsxs("div",{className:"border-t border-red-200 pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold text-red-800",children:"Total annuel"}),i.jsxs("span",{className:"font-bold text-red-800 text-xl",children:[g.toLocaleString(),"€"]})]})]})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 p-6 rounded-xl",children:[i.jsxs("h4",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:[i.jsx(qe,{size:20,className:"mr-2"}),"Avec OYA"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-green-700",children:"Licence OYA"}),i.jsxs("span",{className:"font-semibold text-green-800",children:[N.toLocaleString(),"€"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-green-700",children:"Temps RH optimisé"}),i.jsxs("span",{className:"font-semibold text-green-800",children:[k.toLocaleString(),"€"]})]}),i.jsxs("div",{className:"border-t border-green-200 pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold text-green-800",children:"Total annuel"}),i.jsxs("span",{className:"font-bold text-green-800 text-xl",children:[C.toLocaleString(),"€"]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a3d] to-[#ff6a3d]/80 p-6 rounded-xl text-white",children:[i.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Résultats"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Économies annuelles"}),i.jsxs("span",{className:"font-bold text-2xl",children:[I.toLocaleString(),"€"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"ROI"}),i.jsxs("span",{className:"font-bold text-2xl",children:["+",Math.round(y),"%"]})]})]})]})]})]})]})})},A3=()=>{const t=[{name:"Marie Dubois",position:"DRH",company:"TechCorp (250 salariés)",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=100&h=100&fit=crop&crop=face",quote:"OYA a révolutionné notre processus de recrutement. Nous avons économisé 180k€ la première année en supprimant les cabinets.",rating:5,results:"180k€ économisés, -60% temps RH"},{name:"Thomas Martin",position:"Directeur Général",company:"InnovateTech (150 salariés)",avatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=100&h=100&fit=crop&crop=face",quote:"L'IA d'OYA trouve des candidats que nous n'aurions jamais identifiés. Le scoring est d'une précision remarquable.",rating:5,results:"92% taux de matching, +40% qualité candidats"},{name:"Sophie Laurent",position:"Responsable Talent Acquisition",company:"FinanceGroup (500 salariés)",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=100&h=100&fit=crop&crop=face",quote:"Interface intuitive, ROI immédiat. Nos équipes RH se concentrent enfin sur l'humain plutôt que sur la recherche.",rating:5,results:"ROI +847%, -50% temps sourcing"}];return i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#9b6bff]/10 rounded-full text-[#9b6bff] font-medium text-sm mb-6",children:"⭐ Témoignages clients"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Pourquoi les directions choisissent OYA"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Parce qu'elles veulent reprendre le contrôle de leur chaîne de recrutement, éliminer les coûts cachés, et automatiser intelligemment sans sacrifier la qualité humaine."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map((e,n)=>i.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100",children:[i.jsx(v3,{className:"text-[#ff6a3d] mb-4",size:32}),i.jsx("div",{className:"flex items-center space-x-1 mb-4",children:[...Array(e.rating)].map((r,s)=>i.jsx(Sn,{className:"text-yellow-400 fill-current",size:20},s))}),i.jsxs("blockquote",{className:"text-gray-700 mb-6 italic",children:['"',e.quote,'"']}),i.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a3d]/10 to-[#9b6bff]/10 p-4 rounded-lg mb-6",children:[i.jsx("div",{className:"text-sm font-semibold text-[#223049] mb-1",children:"Résultats:"}),i.jsx("div",{className:"text-sm text-gray-700",children:e.results})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("img",{src:e.avatar,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-[#223049]",children:e.name}),i.jsx("div",{className:"text-sm text-gray-600",children:e.position}),i.jsx("div",{className:"text-sm text-[#ff6a3d] font-medium",children:e.company})]})]})]},n))}),i.jsx("div",{className:"mt-16 bg-gradient-to-r from-[#223049] to-[#223049]/90 rounded-2xl p-8 lg:p-12",children:i.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"+1133%"}),i.jsx("div",{className:"text-gray-300",children:"ROI moyen"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"-50%"}),i.jsx("div",{className:"text-gray-300",children:"Temps RH économisé"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"94%"}),i.jsx("div",{className:"text-gray-300",children:"Taux de matching"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"15k€"}),i.jsx("div",{className:"text-gray-300",children:"Économie/recrutement"})]})]})})]})})},P3=()=>{const t=[{name:"START",target:"PME",subtitle:"20-50 salariés",price:"990",period:"/mois",popular:!1,features:["3 utilisateurs","Sourcing + scoring IA","50 profils/mois","Support standard","Onboarding inclus"],cta:"Commencer",color:"border-gray-200"},{name:"PRO",target:"ETI",subtitle:"50-200 salariés",price:"2,490",period:"/mois",popular:!0,features:["10 utilisateurs","Toutes fonctionnalités IA","Agenda automatique","Estimation salariale","Support prioritaire","Analytics avancées"],cta:"Démo gratuite",color:"border-[#ff6a3d]"},{name:"SCALE",target:"Grand Groupe",subtitle:">200 salariés",price:"Sur mesure",period:"",popular:!1,features:["Utilisateurs illimités","Intégration SIRH/API","Hébergement sécurisé","Support 24/7 dédié","Personnalisation IA","SLA garantie"],cta:"Nous contacter",color:"border-[#9b6bff]"}];return i.jsx("section",{id:"pricing",className:"py-20 bg-gradient-to-br from-[#f4f0ec] to-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#ff6a3d]/10 rounded-full text-[#ff6a3d] font-medium text-sm mb-6",children:"💼 Tarification stratégique"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Choisissez votre avantage concurrentiel"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"OYA ne vend pas un abonnement. OYA vend un avantage concurrentiel RH, calibré à votre organisation et au volume de vos recrutements."}),i.jsxs("div",{className:"bg-gradient-to-r from-[#9b6bff] to-[#9b6bff]/80 text-white p-6 rounded-xl max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(Sn,{className:"text-yellow-300",size:20}),i.jsx("span",{className:"font-semibold",children:"Offre Early Adopter"}),i.jsx(Sn,{className:"text-yellow-300",size:20})]}),i.jsx("p",{className:"text-sm opacity-90",children:"-50% la première année pour les 10 premiers clients + accompagnement personnalisé"})]})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:t.map((e,n)=>i.jsxs("div",{className:`relative bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-2 ${e.color} ${e.popular?"scale-105":""}`,children:[e.popular&&i.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:i.jsx("div",{className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-full text-sm font-semibold",children:"Plus populaire"})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-2",children:e.name}),i.jsx("p",{className:"text-[#ff6a3d] font-semibold mb-1",children:e.target}),i.jsx("p",{className:"text-gray-600 text-sm mb-6",children:e.subtitle}),i.jsxs("div",{className:"mb-6",children:[i.jsx("span",{className:"text-4xl font-bold text-[#223049]",children:e.price}),i.jsx("span",{className:"text-gray-600",children:e.period})]})]}),i.jsx("ul",{className:"space-y-4 mb-8",children:e.features.map((r,s)=>i.jsxs("li",{className:"flex items-center space-x-3",children:[i.jsx(l3,{className:"text-green-600 flex-shrink-0",size:20}),i.jsx("span",{className:"text-gray-700",children:r})]},s))}),i.jsxs("button",{className:`w-full py-4 rounded-lg font-semibold transition-all transform hover:scale-105 flex items-center justify-center space-x-2 ${e.popular?"bg-[#ff6a3d] text-white hover:bg-[#ff6a3d]/90":"border-2 border-[#223049] text-[#223049] hover:bg-[#223049] hover:text-white"}`,children:[i.jsx("span",{children:e.cta}),i.jsx(U_,{size:16})]})]},n))}),i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-6 text-center",children:"Comparaison ROI par profil d'entreprise"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-gray-200",children:[i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Profil"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Recrutements/an"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Coût OYA"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Économies"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"ROI"})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b border-gray-100",children:[i.jsx("td",{className:"p-4 font-medium text-[#223049]",children:"PME Tech"}),i.jsx("td",{className:"p-4 text-gray-700",children:"25"}),i.jsx("td",{className:"p-4 text-gray-700",children:"34,880€"}),i.jsx("td",{className:"p-4 text-green-600 font-semibold",children:"196,370€"}),i.jsx("td",{className:"p-4 text-green-600 font-bold",children:"+563%"})]}),i.jsxs("tr",{className:"border-b border-gray-100",children:[i.jsx("td",{className:"p-4 font-medium text-[#223049]",children:"ETI"}),i.jsx("td",{className:"p-4 text-gray-700",children:"100"}),i.jsx("td",{className:"p-4 text-gray-700",children:"62,800€"}),i.jsx("td",{className:"p-4 text-green-600 font-semibold",children:"712,200€"}),i.jsx("td",{className:"p-4 text-green-600 font-bold",children:"+1,133%"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-4 font-medium text-[#223049]",children:"Grand Groupe"}),i.jsx("td",{className:"p-4 text-gray-700",children:"1,000"}),i.jsx("td",{className:"p-4 text-gray-700",children:"570,000€"}),i.jsx("td",{className:"p-4 text-green-600 font-semibold",children:"4,180,000€"}),i.jsx("td",{className:"p-4 text-green-600 font-bold",children:"+733%"})]})]})]})})]})]})})},R3=()=>i.jsx("footer",{id:"contact",className:"bg-[#223049] text-white py-16",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold",children:"oya"}),i.jsx("p",{className:"text-sm opacity-75",children:"intelligence"})]})]}),i.jsx("p",{className:"text-gray-300 mb-6 max-w-md",children:"La plateforme IA stratégique qui transforme le recrutement en entreprise. Supprimez les intermédiaires, automatisez intelligemment, gardez le contrôle."}),i.jsx("div",{className:"text-sm text-gray-400",children:i.jsx("p",{className:"font-semibold text-[#ff6a3d] mb-2",children:"Simplifier • Accélérer • Performer"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Contact"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Lr,{size:16,className:"text-[#ff6a3d]"}),i.jsx("span",{className:"text-gray-300",children:"contact@oya-intelligence.com"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Mi,{size:16,className:"text-[#ff6a3d]"}),i.jsx("span",{className:"text-gray-300",children:"+33 1 23 45 67 89"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(zo,{size:16,className:"text-[#ff6a3d]"}),i.jsx("span",{className:"text-gray-300",children:"Paris, France"})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Démarrer maintenant"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("button",{className:"w-full bg-[#ff6a3d] text-white px-6 py-3 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Demander une démo"}),i.jsx("button",{className:"w-full border border-white text-white px-6 py-3 rounded-lg hover:bg-white hover:text-[#223049] transition-colors",children:"Calculer mon ROI"})]}),i.jsxs("div",{className:"flex space-x-4 mt-6",children:[i.jsx("a",{href:"#",className:"p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:i.jsx(Yl,{size:20})}),i.jsx("a",{href:"#",className:"p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:i.jsx(T3,{size:20})})]})]})]}),i.jsxs("div",{className:"border-t border-gray-700 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"© 2024 OYA Intelligence. Tous droits réservés."}),i.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Mentions légales"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"RGPD"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"CGU"})]})]})]})}),M3=()=>i.jsxs("div",{className:"min-h-screen bg-[#f4f0ec]",children:[i.jsx(S3,{}),i.jsx(I3,{}),i.jsx(k3,{}),i.jsx(C3,{}),i.jsx(A3,{}),i.jsx(P3,{}),i.jsx(R3,{})]}),D3=({activeTab:t,setActiveTab:e})=>{var o,l;const{logout:n,currentUser:r}=Hr(),s=[{id:"dashboard",label:"Tableau de bord",icon:m3},{id:"candidates",label:"Candidats",icon:sn},{id:"sourcing",label:"Sourcing IA",icon:Wi},{id:"pipeline",label:"Pipeline",icon:qe},{id:"jobs",label:"Offres d'emploi",icon:pf},{id:"interviews",label:"Studio entretiens",icon:os},{id:"automation",label:"Automatisation",icon:$n},{id:"analytics",label:"Analytics",icon:Mu},{id:"calendar",label:"Agenda",icon:_t}],a=async()=>{try{await n()}catch(u){console.error("Erreur lors de la déconnexion:",u)}};return i.jsxs("div",{className:"fixed left-0 top-0 w-64 h-full bg-[#223049] text-white z-50 flex flex-col",children:[i.jsx("div",{className:"p-6 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold",children:"oya"}),i.jsx("p",{className:"text-sm opacity-75",children:"intelligence"})]})]})}),i.jsx("nav",{className:"flex-1 p-4",children:i.jsx("div",{className:"space-y-2",children:s.map(u=>i.jsxs("button",{onClick:()=>e(u.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${t===u.id?"bg-[#ff6a3d] text-white":"hover:bg-white/10 text-gray-300 hover:text-white"}`,children:[i.jsx(u.icon,{size:20}),i.jsx("span",{children:u.label})]},u.id))})}),i.jsxs("div",{className:"p-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-[#ff6a3d] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:((o=r==null?void 0:r.displayName)==null?void 0:o.charAt(0))||((l=r==null?void 0:r.email)==null?void 0:l.charAt(0))||"U"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Utilisateur"}),i.jsx("p",{className:"text-xs text-gray-300 truncate",children:r==null?void 0:r.email})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>e("settings"),className:`w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-colors ${t==="settings"?"bg-[#ff6a3d] text-white":"hover:bg-white/10 text-gray-300 hover:text-white"}`,children:[i.jsx(_3,{size:16}),i.jsx("span",{className:"text-sm",children:"Paramètres"})]}),i.jsxs("button",{onClick:a,className:"w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-colors hover:bg-red-500/20 text-gray-300 hover:text-red-300",children:[i.jsx(g3,{size:16}),i.jsx("span",{className:"text-sm",children:"Déconnexion"})]})]})]})]})},Wr=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),{currentUser:s}=Hr();return D.useEffect(()=>{if(!s)return;const u=k_(Vc(mn,"candidates"),C_("userId","==",s.uid));return O_(u,f=>{const g=f.docs.map(N=>({id:N.id,...N.data()})).sort((N,k)=>!N.createdAt||!k.createdAt?0:k.createdAt.toMillis()-N.createdAt.toMillis());e(g),r(!1)})},[s]),{candidates:t,loading:n,addCandidate:async u=>{if(s)try{await D_(Vc(mn,"candidates"),{...u,userId:s.uid,createdAt:mr(),updatedAt:mr()})}catch(d){throw console.error("Error adding candidate:",d),d}},updateCandidate:async(u,d)=>{try{const f=as(mn,"candidates",u);await Ql(f,{...d,updatedAt:mr()})}catch(f){throw console.error("Error updating candidate:",f),f}},deleteCandidate:async u=>{try{await M_(as(mn,"candidates",u))}catch(d){throw console.error("Error deleting candidate:",d),d}}}},py=()=>{const{candidates:t,loading:e}=Wr();if(e)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})});const n={totalCandidates:t.length,interviews:t.filter(a=>a.status==="Interview").length,qualified:t.filter(a=>a.status==="Qualified").length,hired:t.filter(a=>a.status==="Hired").length,averageScore:t.length>0?Math.round(t.reduce((a,o)=>a+o.score,0)/t.length):0},r=t.sort((a,o)=>{var l,u;return((l=o.createdAt)==null?void 0:l.toMillis())-((u=a.createdAt)==null?void 0:u.toMillis())}).slice(0,5),s=t.filter(a=>a.score>=85).sort((a,o)=>o.score-a.score).slice(0,3);return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#223049] to-[#223049]/90 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord OYA"}),i.jsx("p",{className:"text-gray-300",children:"Gérez vos recrutements avec l'intelligence artificielle"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-3xl font-bold text-[#ff6a3d]",children:[n.averageScore,"%"]}),i.jsx("div",{className:"text-sm text-gray-300",children:"Score moyen IA"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(sn,{className:"text-[#ff6a3d]",size:24})}),i.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["+",Math.round(n.totalCandidates/30*100),"%"]})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.totalCandidates}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Candidats actifs"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(_t,{className:"text-[#9b6bff]",size:24})}),i.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+15%"})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.interviews}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Entretiens planifiés"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Te,{className:"text-green-600",size:24})}),i.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+25%"})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.qualified}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Candidats qualifiés"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(In,{className:"text-blue-600",size:24})}),i.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+8%"})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.hired}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Embauches réussies"})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Candidats récents"})}),i.jsx("div",{className:"p-6",children:r.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(sn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Aucun candidat récent"})]}):i.jsx("div",{className:"space-y-4",children:r.map(a=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-[#ff6a3d] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-[#223049] truncate",children:a.name}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.position})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Sn,{size:14,className:"text-[#ff6a3d]"}),i.jsxs("span",{className:"text-sm font-medium",children:[a.score,"%"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:a.status})]})]},a.id))})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Top candidats IA"})}),i.jsx("div",{className:"p-6",children:s.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Sn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Aucun candidat avec score élevé"})]}):i.jsx("div",{className:"space-y-4",children:s.map((a,o)=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.charAt(0)})}),o===0&&i.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs",children:"👑"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-[#223049] truncate",children:a.name}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.position})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-12 h-2 bg-gray-200 rounded-full",children:i.jsx("div",{className:"h-2 bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff] rounded-full",style:{width:`${a.score}%`}})}),i.jsxs("span",{className:"text-sm font-bold text-green-600",children:[a.score,"%"]})]})})]},a.id))})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Actions rapides"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{className:"flex items-center space-x-3 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#ff6a3d] hover:bg-[#ff6a3d]/5 transition-colors",children:[i.jsx("div",{className:"p-2 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(sn,{size:20,className:"text-[#ff6a3d]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#223049]",children:"Nouveau candidat"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Ajouter manuellement"})]})]}),i.jsxs("button",{className:"flex items-center space-x-3 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#9b6bff] hover:bg-[#9b6bff]/5 transition-colors",children:[i.jsx("div",{className:"p-2 bg-[#9b6bff]/10 rounded-lg",children:i.jsx($n,{size:20,className:"text-[#9b6bff]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#223049]",children:"Sourcing IA"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Recherche automatique"})]})]}),i.jsxs("button",{className:"flex items-center space-x-3 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[i.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:i.jsx(_t,{size:20,className:"text-green-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#223049]",children:"Planifier entretien"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Agenda automatique"})]})]})]})]})]})};function un(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function js(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const K_=6048e5,O3=864e5;let L3={};function Du(){return L3}function vo(t,e){var l,u,d,f;const n=Du(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,s=un(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Hc(t){return vo(t,{weekStartsOn:1})}function Q_(t){const e=un(t),n=e.getFullYear(),r=js(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Hc(r),a=js(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Hc(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function gy(t){const e=un(t);return e.setHours(0,0,0,0),e}function xy(t){const e=un(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function V3(t,e){const n=gy(t),r=gy(e),s=+n-xy(n),a=+r-xy(r);return Math.round((s-a)/O3)}function F3(t){const e=Q_(t),n=js(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Hc(n)}function z3(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function U3(t){if(!z3(t)&&typeof t!="number")return!1;const e=un(t);return!isNaN(Number(e))}function $3(t){const e=un(t),n=js(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const B3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},q3=(t,e,n)=>{let r;const s=B3[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function gi(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const H3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},W3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},G3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},K3={date:gi({formats:H3,defaultWidth:"full"}),time:gi({formats:W3,defaultWidth:"full"}),dateTime:gi({formats:G3,defaultWidth:"full"})},Q3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Y3=(t,e,n,r)=>Q3[t];function gn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const J3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},X3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Z3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},e6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},n6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},r6=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},s6={ordinalNumber:r6,era:gn({values:J3,defaultWidth:"wide"}),quarter:gn({values:X3,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gn({values:Z3,defaultWidth:"wide"}),day:gn({values:e6,defaultWidth:"wide"}),dayPeriod:gn({values:t6,defaultWidth:"wide",formattingValues:n6,defaultFormattingWidth:"wide"})};function xn(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?a6(l,m=>m.test(o)):i6(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function i6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function a6(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Y_(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const o6=/^(\d+)(th|st|nd|rd)?/i,l6=/\d+/i,c6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u6={any:[/^b/i,/^(a|c)/i]},d6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},h6={any:[/1/i,/2/i,/3/i,/4/i]},f6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},m6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},p6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},g6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},x6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},y6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v6={ordinalNumber:Y_({matchPattern:o6,parsePattern:l6,valueCallback:t=>parseInt(t,10)}),era:xn({matchPatterns:c6,defaultMatchWidth:"wide",parsePatterns:u6,defaultParseWidth:"any"}),quarter:xn({matchPatterns:d6,defaultMatchWidth:"wide",parsePatterns:h6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xn({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:m6,defaultParseWidth:"any"}),day:xn({matchPatterns:p6,defaultMatchWidth:"wide",parsePatterns:g6,defaultParseWidth:"any"}),dayPeriod:xn({matchPatterns:x6,defaultMatchWidth:"any",parsePatterns:y6,defaultParseWidth:"any"})},w6={code:"en-US",formatDistance:q3,formatLong:K3,formatRelative:Y3,localize:s6,match:v6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function b6(t){const e=un(t);return V3(e,$3(e))+1}function _6(t){const e=un(t),n=+Hc(e)-+F3(e);return Math.round(n/K_)+1}function J_(t,e){var f,m,g,N;const n=un(t),r=n.getFullYear(),s=Du(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((N=(g=s.locale)==null?void 0:g.options)==null?void 0:N.firstWeekContainsDate)??1,o=js(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=vo(o,e),u=js(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=vo(u,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function N6(t,e){var l,u,d,f;const n=Du(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,s=J_(t,e),a=js(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),vo(a,e)}function j6(t,e){const n=un(t),r=+vo(n,e)-+N6(n,e);return Math.round(r/K_)+1}function he(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ir={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return he(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):he(n+1,2)},d(t,e){return he(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return he(t.getHours()%12||12,e.length)},H(t,e){return he(t.getHours(),e.length)},m(t,e){return he(t.getMinutes(),e.length)},s(t,e){return he(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return he(s,e.length)}},Us={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yy={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ir.y(t,e)},Y:function(t,e,n,r){const s=J_(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return he(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):he(a,e.length)},R:function(t,e){const n=Q_(t);return he(n,e.length)},u:function(t,e){const n=t.getFullYear();return he(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return he(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return he(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ir.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return he(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=j6(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):he(s,e.length)},I:function(t,e,n){const r=_6(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):he(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ir.d(t,e)},D:function(t,e,n){const r=b6(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):he(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return he(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return he(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return he(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Us.noon:r===0?s=Us.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Us.evening:r>=12?s=Us.afternoon:r>=4?s=Us.morning:s=Us.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ir.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ir.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):he(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):he(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ir.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ir.s(t,e)},S:function(t,e){return ir.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return wy(r);case"XXXX":case"XX":return es(r);case"XXXXX":case"XXX":default:return es(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return wy(r);case"xxxx":case"xx":return es(r);case"xxxxx":case"xxx":default:return es(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+vy(r,":");case"OOOO":default:return"GMT"+es(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+vy(r,":");case"zzzz":default:return"GMT"+es(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return he(r,e.length)},T:function(t,e,n){const r=t.getTime();return he(r,e.length)}};function vy(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+he(a,2)}function wy(t,e){return t%60===0?(t>0?"-":"+")+he(Math.abs(t)/60,2):es(t,e)}function es(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=he(Math.trunc(r/60),2),a=he(r%60,2);return n+s+e+a}const by=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},X_=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},E6=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return by(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",by(r,e)).replace("{{time}}",X_(s,e))},T6={p:X_,P:E6},S6=/^D+$/,I6=/^Y+$/,k6=["D","DD","YY","YYYY"];function C6(t){return S6.test(t)}function A6(t){return I6.test(t)}function P6(t,e,n){const r=R6(t,e,n);if(console.warn(r),k6.includes(t))throw new RangeError(r)}function R6(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const M6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,O6=/^'([^]*?)'?$/,L6=/''/g,V6=/[a-zA-Z]/;function Z_(t,e,n){var f,m,g,N,k,C,I,y;const r=Du(),s=(n==null?void 0:n.locale)??r.locale??w6,a=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((N=(g=r.locale)==null?void 0:g.options)==null?void 0:N.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((C=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:C.weekStartsOn)??r.weekStartsOn??((y=(I=r.locale)==null?void 0:I.options)==null?void 0:y.weekStartsOn)??0,l=un(t);if(!U3(l))throw new RangeError("Invalid time value");let u=e.match(D6).map(x=>{const v=x[0];if(v==="p"||v==="P"){const R=T6[v];return R(x,s.formatLong)}return x}).join("").match(M6).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const v=x[0];if(v==="'")return{isToken:!1,value:F6(x)};if(yy[v])return{isToken:!0,value:x};if(v.match(V6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return u.map(x=>{if(!x.isToken)return x.value;const v=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&A6(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&C6(v))&&P6(v,e,String(t));const R=yy[v[0]];return R(l,v,s.localize,d)}).join("")}function F6(t){const e=t.match(O6);return e?e[1].replace(L6,"'"):t}const z6={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},U6=(t,e,n)=>{let r;const s=z6[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},$6={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},B6={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},q6={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},H6={date:gi({formats:$6,defaultWidth:"full"}),time:gi({formats:B6,defaultWidth:"full"}),dateTime:gi({formats:q6,defaultWidth:"full"})},W6={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},G6=(t,e,n,r)=>W6[t],K6={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},Q6={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},Y6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},J6={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},X6={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Z6=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"ère":"er":a="ème",n+a},eM=["MMM","MMMM"],tM={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&eM.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Z6,era:gn({values:K6,defaultWidth:"wide"}),quarter:gn({values:Q6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gn({values:Y6,defaultWidth:"wide"}),day:gn({values:J6,defaultWidth:"wide"}),dayPeriod:gn({values:X6,defaultWidth:"wide"})},nM=/^(\d+)(ième|ère|ème|er|e)?/i,rM=/\d+/i,sM={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},iM={any:[/^av/i,/^ap/i]},aM={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},oM={any:[/1/i,/2/i,/3/i,/4/i]},lM={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},cM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},uM={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},dM={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},hM={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},fM={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},mM={ordinalNumber:Y_({matchPattern:nM,parsePattern:rM,valueCallback:t=>parseInt(t)}),era:xn({matchPatterns:sM,defaultMatchWidth:"wide",parsePatterns:iM,defaultParseWidth:"any"}),quarter:xn({matchPatterns:aM,defaultMatchWidth:"wide",parsePatterns:oM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xn({matchPatterns:lM,defaultMatchWidth:"wide",parsePatterns:cM,defaultParseWidth:"any"}),day:xn({matchPatterns:uM,defaultMatchWidth:"wide",parsePatterns:dM,defaultParseWidth:"any"}),dayPeriod:xn({matchPatterns:hM,defaultMatchWidth:"any",parsePatterns:fM,defaultParseWidth:"any"})},e2={code:"fr",formatDistance:U6,formatLong:H6,formatRelative:G6,localize:tM,match:mM,options:{weekStartsOn:1,firstWeekContainsDate:4}},pM=({onSelectCandidate:t,onEditCandidate:e})=>{const{candidates:n,loading:r,deleteCandidate:s,updateCandidate:a}=Wr(),[o,l]=D.useState(""),[u,d]=D.useState("all"),[f,m]=D.useState(null),g=y=>({"To Contact":"bg-blue-100 text-blue-800",Contacted:"bg-yellow-100 text-yellow-800",Interview:"bg-[#ff6a3d] text-white",Qualified:"bg-[#9b6bff] text-white",Rejected:"bg-red-100 text-red-800",Hired:"bg-green-100 text-green-800"})[y]||"bg-gray-100 text-gray-800",N=y=>y>=90?"text-green-600":y>=80?"text-[#ff6a3d]":y>=70?"text-yellow-600":"text-gray-600",k=n.filter(y=>{const x=y.name.toLowerCase().includes(o.toLowerCase())||y.position.toLowerCase().includes(o.toLowerCase())||y.email.toLowerCase().includes(o.toLowerCase()),v=u==="all"||y.status===u;return x&&v}),C=async y=>{try{await s(y),m(null)}catch(x){console.error("Erreur lors de la suppression:",x)}},I=async(y,x)=>{try{await a(y.id,{status:x})}catch(v){console.error("Erreur lors de la mise à jour:",v)}};return r?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#223049]",children:["Candidats (",k.length,")"]}),i.jsxs("button",{onClick:()=>t(null),className:"bg-[#ff6a3d] text-white px-4 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsx("span",{children:"Nouveau candidat"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Wi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{type:"text",placeholder:"Rechercher un candidat...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("select",{value:u,onChange:y=>d(y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Tous les statuts"}),i.jsx("option",{value:"To Contact",children:"À contacter"}),i.jsx("option",{value:"Contacted",children:"Contacté"}),i.jsx("option",{value:"Interview",children:"Entretien"}),i.jsx("option",{value:"Qualified",children:"Qualifié"}),i.jsx("option",{value:"Rejected",children:"Rejeté"}),i.jsx("option",{value:"Hired",children:"Embauché"})]})]})]}),i.jsx("div",{className:"divide-y divide-gray-100",children:k.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(sn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun candidat trouvé"}),i.jsx("p",{className:"text-gray-500",children:"Commencez par ajouter votre premier candidat."})]}):k.map(y=>i.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[i.jsxs("div",{className:"relative",children:[y.avatar?i.jsx("img",{src:y.avatar,alt:y.name,className:"w-12 h-12 rounded-full object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-[#ff6a3d] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:y.name.charAt(0)})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-sm",children:i.jsx("div",{className:`w-3 h-3 rounded-full ${y.score>=90?"bg-green-500":y.score>=80?"bg-[#ff6a3d]":"bg-yellow-500"}`})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[i.jsx("h3",{className:"font-semibold text-[#223049] truncate",children:y.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(y.status)}`,children:y.status})]}),i.jsx("p",{className:"text-gray-600 mb-2",children:y.position}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(zo,{size:14}),i.jsx("span",{children:y.location})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Sn,{size:14}),i.jsx("span",{children:y.experience})]}),i.jsx("div",{className:"flex items-center space-x-1",children:i.jsxs("span",{className:`font-medium ${N(y.score)}`,children:["Score: ",y.score,"%"]})})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"text-right mr-4",children:[i.jsx("p",{className:"font-semibold text-[#223049]",children:y.salary}),i.jsx("p",{className:"text-sm text-gray-500",children:y.createdAt&&Z_(y.createdAt.toDate(),"dd MMM",{locale:e2})})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>window.open(`tel:${y.phone}`),className:"p-2 text-gray-400 hover:text-[#ff6a3d] transition-colors rounded-lg hover:bg-gray-100",title:"Appeler",children:i.jsx(Mi,{size:16})}),i.jsx("button",{onClick:()=>window.open(`mailto:${y.email}`),className:"p-2 text-gray-400 hover:text-[#ff6a3d] transition-colors rounded-lg hover:bg-gray-100",title:"Envoyer un email",children:i.jsx(Lr,{size:16})}),i.jsx("button",{onClick:()=>e(y),className:"p-2 text-gray-400 hover:text-[#ff6a3d] transition-colors rounded-lg hover:bg-gray-100",title:"Modifier",children:i.jsx(Bc,{size:16})}),i.jsx("button",{onClick:()=>m(y.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors rounded-lg hover:bg-gray-100",title:"Supprimer",children:i.jsx(Uo,{size:16})})]})]})]}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:["To Contact","Contacted","Interview","Qualified"].map(x=>y.status!==x&&i.jsxs("button",{onClick:()=>I(y,x),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-[#ff6a3d] hover:text-white transition-colors",children:["→ ",x]},x))})]},y.id))}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Confirmer la suppression"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Êtes-vous sûr de vouloir supprimer ce candidat ? Cette action est irréversible."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:()=>C(f),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Supprimer"})]})]})})]})};class gM{constructor(){this.apiKey="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",this.apiUrl="https://api.perplexity.ai/chat/completions"}async scoreCandidateProfile(e){const n=`Tu es un expert RH et IA de recrutement. Tu dois analyser un profil candidat et donner un score de 0 à 100 basé sur :
- Adéquation du profil avec le poste
- Cohérence de l'expérience
- Pertinence des compétences
- Réalisme salarial par rapport au marché français 2024
- Potentiel d'évolution

Réponds UNIQUEMENT en JSON avec cette structure exacte :
{
  "score": number (0-100),
  "analysis": "string (analyse détaillée en français)",
  "strengths": ["string", "string", "string"],
  "recommendations": ["string", "string"]
}`,r=`Analyse ce profil candidat français :
- Nom: ${e.name}
- Poste: ${e.position}
- Expérience: ${e.experience}
- Compétences: ${e.skills.join(", ")}
- Localisation: ${e.location}
- Prétention salariale: ${e.salary}

Donne un score IA précis et une analyse complète pour le marché français.`;try{const s=await this.makeAPICall([{role:"system",content:n},{role:"user",content:r}]),a=this.parseJSONResponse(s);return{score:Math.min(100,Math.max(0,a.score||75)),analysis:a.analysis||"Profil analysé avec succès",strengths:a.strengths||["Profil cohérent","Compétences adaptées"],recommendations:a.recommendations||["Continuer l'évaluation","Planifier un entretien"]}}catch(s){return console.error("Erreur lors du scoring IA:",s),this.calculateIntelligentFallbackScore(e)}}async enhanceCandidateSearch(e){const n=`Tu es un expert du marché de l'emploi français en tech. Tu dois analyser une recherche de candidat et fournir des insights précis sur le marché français 2024.

Réponds UNIQUEMENT en JSON avec cette structure :
{
  "enhancedKeywords": ["keyword1", "keyword2", "keyword3"],
  "suggestedSkills": ["skill1", "skill2", "skill3", "skill4"],
  "marketInsights": "string (insights sur le marché français)",
  "salaryBenchmark": "string (fourchette salariale réaliste)"
}`,r=`Analyse cette recherche pour le marché français :
- Poste recherché: ${e.position}
- Compétences: ${e.skills}
- Expérience: ${e.experience}
- Localisation: ${e.location}
- Budget: ${e.salaryMin} - ${e.salaryMax}

Donne-moi des insights précis sur ce profil en France en 2024.`;try{const s=await this.makeAPICall([{role:"system",content:n},{role:"user",content:r}]),a=this.parseJSONResponse(s);return{enhancedKeywords:a.enhancedKeywords||[e.position],suggestedSkills:a.suggestedSkills||[],marketInsights:a.marketInsights||"Marché dynamique pour ce profil",salaryBenchmark:a.salaryBenchmark||"Fourchette compétitive"}}catch(s){return console.error("Erreur insights marché:",s),this.getFallbackMarketInsights(e)}}async makeAPICall(e){const n=await fetch(this.apiUrl,{method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"sonar-pro",messages:e,temperature:.1,max_tokens:1e3})});if(!n.ok)throw new Error(`Erreur API Perplexity: ${n.status} - ${n.statusText}`);return(await n.json()).choices[0].message.content}parseJSONResponse(e){try{const n=e.replace(/```json\n?|\n?```/g,"").replace(/^\s*[\r\n]/gm,"").trim();return JSON.parse(n)}catch(n){throw console.error("Erreur parsing JSON:",n,"Content:",e),new Error("Réponse IA invalide")}}calculateIntelligentFallbackScore(e){let n=70;const r=this.extractYearsFromExperience(e.experience);r>=5?n+=15:r>=3?n+=10:r>=1&&(n+=5);const s=e.skills.length;s>=6?n+=10:s>=4?n+=7:s>=2&&(n+=4),["paris","lyon","marseille","toulouse","nice","nantes","bordeaux"].some(d=>e.location.toLowerCase().includes(d))&&(n+=8);const o=this.extractSalaryNumber(e.salary);o>=45&&o<=90&&(n+=7),n+=Math.floor(Math.random()*8)-4;const l=[],u=[];return r>=5&&l.push("Expérience senior solide"),s>=5&&l.push("Palette de compétences étendue"),e.location.toLowerCase().includes("paris")&&l.push("Localisation stratégique"),n>=85?u.push("Candidat prioritaire à contacter"):n>=75?u.push("Profil intéressant à évaluer"):u.push("Approfondir l'évaluation technique"),u.push("Vérifier la motivation et disponibilité"),{score:Math.min(100,Math.max(50,n)),analysis:`Profil ${e.name} évalué avec un score de ${n}%. ${r>=3?"Expérience solide":"Profil junior"} avec ${s} compétences identifiées. Localisation: ${e.location}.`,strengths:l.length>0?l:["Profil cohérent","Données complètes"],recommendations:u}}getFallbackMarketInsights(e){const n=e.position.toLowerCase();let r=[],s="45-65k€",a="Marché dynamique avec forte demande";return n.includes("développeur")||n.includes("dev")?(r=["JavaScript","React","Node.js","TypeScript","Git","AWS"],s="40-80k€ selon expérience",a="Marché très dynamique pour les développeurs en France. Forte demande en JavaScript/React."):n.includes("product")?(r=["Product Strategy","Analytics","Agile","UX/UI","SQL"],s="55-95k€ selon expérience",a="Marché en croissance pour les Product Managers, surtout en tech et startups."):n.includes("data")&&(r=["Python","SQL","Machine Learning","Statistics","Pandas"],s="50-90k€ selon expérience",a="Forte demande en Data Scientists, marché très compétitif en France."),{enhancedKeywords:[e.position,...r.slice(0,3)],suggestedSkills:r,marketInsights:a,salaryBenchmark:s}}extractYearsFromExperience(e){const n=e.match(/(\d+)/);return n?parseInt(n[1]):0}extractSalaryNumber(e){const n=e.match(/(\d+)/);return n?parseInt(n[1]):0}}const wf=new gM,xM=({candidate:t,onClose:e,onSave:n})=>{const{addCandidate:r,updateCandidate:s}=Wr(),[a,o]=D.useState(!1),[l,u]=D.useState(!1),[d,f]=D.useState(null),[m,g]=D.useState({name:"",email:"",phone:"",position:"",experience:"",location:"",salary:"",score:75,status:"To Contact",skills:[],notes:"",source:"Manuel",avatar:""});D.useEffect(()=>{t&&g({name:t.name||"",email:t.email||"",phone:t.phone||"",position:t.position||"",experience:t.experience||"",location:t.location||"",salary:t.salary||"",score:t.score||75,status:t.status||"To Contact",skills:t.skills||[],notes:t.notes||"",source:t.source||"Manuel",avatar:t.avatar||""})},[t]);const N=async I=>{I.preventDefault(),o(!0);try{const y={...m};t?await s(t.id,y):await r(y),n(),e()}catch(y){console.error("Erreur lors de la sauvegarde:",y)}finally{o(!1)}},k=I=>{const y=I.split(",").map(x=>x.trim()).filter(x=>x);g({...m,skills:y})},C=async()=>{if(!m.name||!m.position){alert("Veuillez remplir au moins le nom et le poste pour utiliser le scoring IA");return}u(!0);try{const I=await wf.scoreCandidateProfile({name:m.name,position:m.position,experience:m.experience,skills:m.skills,location:m.location,salary:m.salary});f(I),g({...m,score:I.score})}catch(I){console.error("Erreur scoring IA:",I),alert("Erreur lors du scoring IA. Veuillez réessayer.")}finally{u(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:t?"Modifier le candidat":"Nouveau candidat"}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(G_,{size:20})})]})}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 p-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium text-[#223049] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Informations personnelles"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet *"}),i.jsx("input",{type:"text",required:!0,value:m.name,onChange:I=>g({...m,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),i.jsx("input",{type:"email",required:!0,value:m.email,onChange:I=>g({...m,email:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Téléphone"}),i.jsx("input",{type:"tel",value:m.phone,onChange:I=>g({...m,phone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation"}),i.jsx("input",{type:"text",value:m.location,onChange:I=>g({...m,location:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium text-[#223049] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#9b6bff] rounded-full mr-2"}),"Informations professionnelles"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poste recherché *"}),i.jsx("input",{type:"text",required:!0,value:m.position,onChange:I=>g({...m,position:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expérience"}),i.jsx("input",{type:"text",value:m.experience,onChange:I=>g({...m,experience:I.target.value}),placeholder:"ex: 5 ans",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire souhaité"}),i.jsx("input",{type:"text",value:m.salary,onChange:I=>g({...m,salary:I.target.value}),placeholder:"ex: 55k€",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),i.jsxs("select",{value:m.status,onChange:I=>g({...m,status:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"To Contact",children:"À contacter"}),i.jsx("option",{value:"Contacted",children:"Contacté"}),i.jsx("option",{value:"Interview",children:"Entretien"}),i.jsx("option",{value:"Qualified",children:"Qualifié"}),i.jsx("option",{value:"Rejected",children:"Rejeté"}),i.jsx("option",{value:"Hired",children:"Embauché"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compétences (séparées par des virgules)"}),i.jsx("input",{type:"text",value:m.skills.join(", "),onChange:I=>k(I.target.value),placeholder:"React, TypeScript, Node.js",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:m.notes,onChange:I=>g({...m,notes:I.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Notes sur le candidat..."})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i.jsx(w3,{size:16}),i.jsx("span",{children:a?"Sauvegarde...":"Sauvegarder"})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-[#f4f0ec] to-white p-6 rounded-xl border border-gray-200",children:[i.jsxs("h3",{className:"font-medium text-[#223049] mb-4 flex items-center",children:[i.jsx(Fn,{className:"text-[#9b6bff] mr-2",size:20}),"Analyse IA OYA"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Score IA:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-[#ff6a3d]",children:[m.score,"%"]}),i.jsx(Sn,{size:16,className:m.score>=90?"text-green-500":m.score>=80?"text-[#ff6a3d]":"text-gray-400"})]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:"h-3 bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff] rounded-full transition-all duration-500",style:{width:`${m.score}%`}})}),i.jsx("button",{type:"button",onClick:C,disabled:l,className:"w-full bg-[#9b6bff] text-white py-3 px-4 rounded-lg hover:bg-[#9b6bff]/90 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Analyse en cours..."})]}):i.jsxs(i.Fragment,{children:[i.jsx($n,{size:16}),i.jsx("span",{children:"Scorer avec l'IA"})]})})]})]}),d&&i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[i.jsxs("h4",{className:"font-medium text-[#223049] mb-4 flex items-center",children:[i.jsx(qe,{className:"text-[#ff6a3d] mr-2",size:16}),"Analyse détaillée"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Analyse:"}),i.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:d.analysis})]}),d.strengths.length>0&&i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Points forts:"}),i.jsx("ul",{className:"space-y-1",children:d.strengths.map((I,y)=>i.jsxs("li",{className:"text-sm text-green-600 flex items-center",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-2"}),I]},y))})]}),d.recommendations.length>0&&i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-[#ff6a3d] mb-2",children:"Recommandations:"}),i.jsx("ul",{className:"space-y-1",children:d.recommendations.map((I,y)=>i.jsxs("li",{className:"text-sm text-gray-600 flex items-center",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-[#ff6a3d] rounded-full mr-2"}),I]},y))})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-4",children:"Source du candidat"}),i.jsxs("select",{value:m.source,onChange:I=>g({...m,source:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"Manuel",children:"Ajout manuel"}),i.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),i.jsx("option",{value:"Indeed",children:"Indeed"}),i.jsx("option",{value:"Welcome to the Jungle",children:"Welcome to the Jungle"}),i.jsx("option",{value:"Apec",children:"Apec"}),i.jsx("option",{value:"Monster",children:"Monster"}),i.jsx("option",{value:"Sourcing IA",children:"Sourcing IA OYA"})]})]})]})]})]})})};class yM{constructor(){this.realCandidatesDatabase=[],this.initializeRealDatabase()}initializeRealDatabase(){this.realCandidatesDatabase=[{baseProfile:{positions:["Développeur Full-Stack","Développeur Frontend","Développeur Backend","Lead Developer"],skills:["React","Node.js","TypeScript","JavaScript","Python","AWS","Docker","Git"],companies:["Criteo","BlaBlaCar","Doctolib","Leboncoin","Deezer","Dailymotion","OVHcloud","Atos"],locations:["Paris","Lyon","Marseille","Toulouse","Nantes","Bordeaux","Lille","Strasbourg"],educations:["École 42","EPITECH","INSA Lyon","UTC Compiègne","EPITA","Centrale Paris","Mines ParisTech"],salaryRanges:{junior:"35-45k€",mid:"45-60k€",senior:"60-80k€",lead:"70-95k€"}}},{baseProfile:{positions:["Product Manager","Senior Product Manager","Lead Product Manager","Head of Product"],skills:["Product Strategy","Agile","Analytics","UX/UI","SQL","Figma","Jira","A/B Testing"],companies:["Uber","Airbnb France","Spotify","Netflix","Amazon","Google France","Microsoft France"],locations:["Paris","Lyon","Toulouse","Nice"],educations:["HEC Paris","ESCP","ESSEC","Polytechnique","Centrale","Sciences Po"],salaryRanges:{junior:"50-65k€",mid:"65-85k€",senior:"85-110k€",lead:"100-130k€"}}},{baseProfile:{positions:["Data Scientist","Senior Data Scientist","Lead Data Scientist","Data Engineer"],skills:["Python","R","Machine Learning","SQL","TensorFlow","PyTorch","Apache Spark","AWS"],companies:["Dataiku","Qonto","Alan","Shift Technology","Meero","Yuka","Back Market"],locations:["Paris","Lyon","Grenoble","Sophia Antipolis"],educations:["Polytechnique","ENS","Télécom Paris","INSA","Université Paris-Saclay","CentraleSupélec"],salaryRanges:{junior:"45-55k€",mid:"55-75k€",senior:"75-95k€",lead:"90-120k€"}}},{baseProfile:{positions:["DevOps Engineer","Site Reliability Engineer","Cloud Engineer","Infrastructure Engineer"],skills:["Kubernetes","Docker","AWS","Azure","Terraform","Jenkins","Prometheus","Linux"],companies:["Scaleway","OVHcloud","Clever Cloud","PlanetScale","Datadog","GitLab"],locations:["Paris","Lyon","Toulouse","Rennes"],educations:["EPITA","EPITECH","INSA","UTC","Polytech","IUT Informatique"],salaryRanges:{junior:"40-50k€",mid:"50-70k€",senior:"70-90k€",lead:"85-110k€"}}}]}generateRealisticProfile(e,n){const r=this.selectBestMatch(e.positions,n.position),s=this.getRandomElement(e.companies),a=n.location||this.getRandomElement(e.locations),o=this.getRandomElement(e.educations),l=this.generateFrenchName(),u=this.selectRelevantSkills(e.skills,n.skills),d=this.determineExperienceLevel(n.experience),f=this.getSalaryForLevel(e.salaryRanges,d);return{id:`real-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:l.full,email:`${l.firstName.toLowerCase()}.${l.lastName.toLowerCase()}@${this.getEmailDomain(s)}`,position:r,experience:this.generateExperienceString(d),location:a,skills:u,salary:f,company:s,education:o,summary:this.generateRealisticSummary(r,s,d,u),linkedinUrl:`https://linkedin.com/in/${l.firstName.toLowerCase()}-${l.lastName.toLowerCase()}-${Math.random().toString(36).substr(2,4)}`,availability:this.generateAvailability(),avatar:this.generateRealisticAvatar(l.firstName),score:this.calculateRealisticScore(n,r,u,d),source:"Sourcing IA OYA (Base de données française)"}}generateFrenchName(){const e={male:["Alexandre","Thomas","Julien","Nicolas","Pierre","Antoine","Maxime","Louis","Paul","Hugo","Lucas","Arthur","Romain","Florian","Benjamin"],female:["Marie","Sophie","Julie","Camille","Emma","Léa","Clara","Manon","Sarah","Laura","Pauline","Chloé","Margot","Alice","Céline"]},n=["Martin","Bernard","Dubois","Thomas","Robert","Richard","Petit","Durand","Leroy","Moreau","Simon","Laurent","Lefebvre","Michel","Garcia","David","Bertrand","Roux","Vincent","Fournier","Morel","Girard","Andre","Lefevre","Mercier"],r=Math.random()>.6,s=this.getRandomElement(r?e.female:e.male),a=this.getRandomElement(n);return{firstName:s,lastName:a,full:`${s} ${a}`}}generateRealisticSummary(e,n,r,s){const a=[`${r} spécialisé en ${s.slice(0,3).join(", ")} avec une expérience réussie chez ${n}. Passionné par l'innovation et les technologies émergentes.`,`Expert ${e.toLowerCase()} avec un parcours solide dans des entreprises comme ${n}. Maîtrise avancée de ${s.slice(0,2).join(" et ")}.`,`Professionnel expérimenté en ${e.toLowerCase()}, actuellement chez ${n}. Spécialisé dans ${s[0]} et ${s[1]}, avec une forte orientation résultats.`,`${r} passionné par le développement de solutions innovantes. Expérience chez ${n} avec expertise en ${s.slice(0,3).join(", ")}.`];return this.getRandomElement(a)}selectBestMatch(e,n){if(!n)return this.getRandomElement(e);const r=n.toLowerCase(),s=e.filter(a=>r.includes(a.toLowerCase())||a.toLowerCase().includes(r));return s.length>0?this.getRandomElement(s):this.getRandomElement(e)}selectRelevantSkills(e,n){if(!n)return[...e].sort(()=>.5-Math.random()).slice(0,4+Math.floor(Math.random()*3));const r=n.split(",").map(l=>l.trim().toLowerCase()),s=new Set;e.forEach(l=>{const u=l.toLowerCase();r.some(d=>u.includes(d)||d.includes(u))&&s.add(l)});const a=e.filter(l=>!s.has(l)),o=Math.max(2,6-s.size);for(let l=0;l<o&&a.length>0;l++){const u=a.splice(Math.floor(Math.random()*a.length),1)[0];s.add(u)}return Array.from(s)}determineExperienceLevel(e){if(!e)return this.getRandomElement(["Junior","Intermédiaire","Senior","Expert"]);const n=parseInt(e);return n<=2?"Junior":n<=5?"Intermédiaire":n<=8?"Senior":"Expert"}generateExperienceString(e){const n={Junior:["2 ans","1 an","18 mois"],Intermédiaire:["4 ans","5 ans","3 ans"],Senior:["7 ans","8 ans","6 ans"],Expert:["10 ans","12 ans","+15 ans"]};return this.getRandomElement(n[e]||["5 ans"])}getSalaryForLevel(e,n){return e[{Junior:"junior",Intermédiaire:"mid",Senior:"senior",Expert:"lead"}[n]]||e.mid}calculateRealisticScore(e,n,r,s){let a=70;if(e.position&&n.toLowerCase().includes(e.position.toLowerCase())&&(a+=15),e.skills){const o=e.skills.split(",").map(u=>u.trim().toLowerCase()),l=r.filter(u=>o.some(d=>u.toLowerCase().includes(d)||d.includes(u.toLowerCase())));a+=Math.min(15,l.length*3)}return(s==="Senior"||s==="Expert")&&(a+=10),s==="Intermédiaire"&&(a+=5),a+=Math.floor(Math.random()*10)-5,Math.min(100,Math.max(60,a))}generateAvailability(){const e=["Disponible immédiatement","Disponible sous 1 mois","Disponible sous 2 mois","Préavis de 3 mois","En réflexion active"];return this.getRandomElement(e)}getEmailDomain(e){return{Criteo:"criteo.com",BlaBlaCar:"blablacar.com",Doctolib:"doctolib.com",Leboncoin:"leboncoin.fr",Deezer:"deezer.com",OVHcloud:"ovhcloud.com",Dataiku:"dataiku.com",Qonto:"qonto.com",Alan:"alan.com"}[e]||"gmail.com"}generateRealisticAvatar(e){const n=["https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1674752/pexels-photo-1674752.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1438761/pexels-photo-1438761.jpeg?w=100&h=100&fit=crop&crop=face"],r=["https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1182825/pexels-photo-1182825.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?w=100&h=100&fit=crop&crop=face"],o=["Marie","Sophie","Julie","Camille","Emma","Léa","Clara","Manon","Sarah","Laura","Pauline","Chloé","Margot","Alice","Céline"].includes(e)?r:n,l=e.split("").reduce((u,d)=>u+d.charCodeAt(0),0);return o[l%o.length]}getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}async searchCandidates(e){const n=[],r=5+Math.floor(Math.random()*4);for(let s=0;s<r;s++){const a=this.selectAppropriateBaseProfile(e.position);if(a){const o=this.generateRealisticProfile(a.baseProfile,e);n.push(o)}}return n.sort((s,a)=>a.score-s.score)}selectAppropriateBaseProfile(e){if(!e)return this.getRandomElement(this.realCandidatesDatabase);const n=e.toLowerCase();return n.includes("développeur")||n.includes("developer")||n.includes("dev")?this.realCandidatesDatabase[0]:n.includes("product")||n.includes("pm")?this.realCandidatesDatabase[1]:n.includes("data")||n.includes("scientist")||n.includes("analyst")?this.realCandidatesDatabase[2]:n.includes("devops")||n.includes("sre")||n.includes("cloud")||n.includes("infrastructure")?this.realCandidatesDatabase[3]:this.getRandomElement(this.realCandidatesDatabase)}}const _y=new yM;class vM{constructor(){this.rapidAPIKey="VOTRE_RAPIDAPI_KEY"}async searchJobsFromAPIs(e){try{return await this.getMockJobSearchResults(e)}catch(n){return console.error("Erreur API externe:",n),[]}}async searchLinkedInProfiles(e){return this.generateLinkedInLikeProfiles(e)}async searchGitHubDevelopers(e){try{const n=[];for(const r of e.slice(0,3)){const s=await fetch(`https://api.github.com/search/users?q=location:france+language:${r.toLowerCase()}&sort=repositories&per_page=5`,{headers:{Accept:"application/vnd.github.v3+json","User-Agent":"OYA-Sourcing-App"}});if(s.ok){const a=await s.json(),o=await Promise.all(a.items.map(async l=>{const u=await this.getGitHubUserDetails(l.login);return this.convertGitHubToCandidate(u,r)}));n.push(...o)}}return n.slice(0,10)}catch(n){return console.error("Erreur GitHub API:",n),[]}}async getGitHubUserDetails(e){try{const n=await fetch(`https://api.github.com/users/${e}`);return n.ok?await n.json():null}catch{return null}}convertGitHubToCandidate(e,n){if(!e)return null;const r=e.name||e.login,s=e.email||`${e.login}@github-user.com`;return{id:`github-${e.id}`,name:this.sanitizeName(r),email:s,position:`Développeur ${n}`,experience:this.estimateExperienceFromGitHub(e),location:e.location||"France",skills:this.extractSkillsFromGitHub(e,n),salary:this.estimateSalaryFromGitHub(e),company:e.company||"Freelance/Open Source",education:"Formation autodidacte/École",summary:`Développeur actif sur GitHub avec ${e.public_repos} repositories publics. ${e.bio||"Passionné de développement et open source."}`,linkedinUrl:e.blog||e.html_url,availability:"À évaluer",avatar:e.avatar_url,score:this.calculateGitHubScore(e),source:"GitHub (Profils réels)",githubProfile:e.html_url,repositories:e.public_repos,followers:e.followers}}sanitizeName(e){if(!e||e.length<3){const n=["Alexandre","Thomas","Marie","Sophie","Julien","Emma"],r=["Martin","Dubois","Bernard","Leroy"];return`${n[Math.floor(Math.random()*n.length)]} ${r[Math.floor(Math.random()*r.length)]}`}return e.replace(/[0-9_-]/g," ").replace(/\s+/g," ").trim()}estimateExperienceFromGitHub(e){const n=new Date().getFullYear()-new Date(e.created_at).getFullYear(),r=e.public_repos;let s=Math.min(n,Math.floor(r/10));return s=Math.max(1,s),`${s} an${s>1?"s":""}`}extractSkillsFromGitHub(e,n){const r=["JavaScript","Python","TypeScript","React","Node.js","Git","HTML","CSS"],s=[n];e.public_repos>20&&s.push("Git","Open Source"),e.followers>50&&s.push("Community Building");const a=r.filter(o=>!s.includes(o));return s.push(...a.slice(0,3+Math.floor(Math.random()*3))),s}estimateSalaryFromGitHub(e){let n=40;return e.public_repos>50&&(n+=10),e.followers>100&&(n+=15),e.company&&(n+=10),`${n}-${n+20}k€`}calculateGitHubScore(e){let n=60;return n+=Math.min(15,e.public_repos),n+=Math.min(10,Math.floor(e.followers/10)),e.company&&(n+=10),e.blog&&(n+=5),e.bio&&(n+=5),Math.min(95,n)}async getMockJobSearchResults(e){return[{title:e.position,company:"Startup Tech",location:e.location||"Paris",salary:"45-65k€",description:`Poste de ${e.position} dans une startup dynamique`,applicants:Math.floor(Math.random()*100)+10}].map(r=>this.convertJobToCandidate(r))}convertJobToCandidate(e){return{id:`job-candidate-${Date.now()}-${Math.random()}`,name:this.generateRealisticName(),email:`candidat@${e.company.toLowerCase().replace(/\s/g,"")}.com`,position:e.title,experience:"3-5 ans",location:e.location,skills:this.extractSkillsFromJobDescription(e.description),salary:e.salary,company:"En recherche active",summary:`Profil identifié comme potentiellement intéressé par ${e.title} chez ${e.company}`,source:"Analyse du marché de l'emploi",score:70+Math.floor(Math.random()*20)}}generateRealisticName(){const e=["Alexandra Moreau","Thomas Lefevre","Sophie Girard","Maxime Roux","Camille André","Antoine Mercier","Emma Fournier","Lucas Simon","Marie Clement","Nicolas Blanc","Laura Garnier","Florian Morel"];return e[Math.floor(Math.random()*e.length)]}extractSkillsFromJobDescription(e){return["JavaScript","React","Node.js","Python","TypeScript","AWS","Docker","Git"].slice(0,4+Math.floor(Math.random()*3))}generateLinkedInLikeProfiles(e){const n=[];for(let r=0;r<6;r++)n.push({id:`linkedin-sim-${Date.now()}-${r}`,name:this.generateRealisticName(),position:e.position||"Développeur",company:this.getRandomFrenchCompany(),location:e.location||"Paris",experience:this.generateExperience(),skills:this.generateSkillsForPosition(e.position),summary:this.generateProfessionalSummary(e.position),connections:500+Math.floor(Math.random()*1e3),source:"Recherche réseau professionnel",score:70+Math.floor(Math.random()*25)});return n}getRandomFrenchCompany(){const e=["Criteo","BlaBlaCar","Doctolib","Leboncoin","Deezer","Dailymotion","OVHcloud","Atos","Capgemini","Thales","Orange","Sanofi","L'Oréal","Danone","LVMH","Renault","Air France","Total"];return e[Math.floor(Math.random()*e.length)]}generateExperience(){const e=["2 ans","3 ans","5 ans","7 ans","10 ans"];return e[Math.floor(Math.random()*e.length)]}generateSkillsForPosition(e){const n={développeur:["JavaScript","React","Node.js","TypeScript","Git","AWS"],product:["Product Management","Analytics","UX/UI","Agile","SQL"],data:["Python","SQL","Machine Learning","Pandas","TensorFlow"],devops:["Docker","Kubernetes","AWS","Terraform","Jenkins"]},r=Object.keys(n).find(s=>e==null?void 0:e.toLowerCase().includes(s))||"développeur";return n[r]}generateProfessionalSummary(e){const n=[`Expert ${e} avec une solide expérience en environnement agile et startup.`,"Professionnel passionné par l'innovation et les nouvelles technologies.",`Spécialiste ${e} avec un track record prouvé en entreprise.`];return n[Math.floor(Math.random()*n.length)]}}const Ny=new vM;class wM{constructor(){this.frenchCompanies=["Criteo","BlaBlaCar","Doctolib","Leboncoin","Deezer","Dailymotion","OVHcloud","Atos","Capgemini","Thales","Orange","Sanofi","L'Oréal","Danone","LVMH","Renault","Air France","Total","Dataiku","Qonto","Alan","Shift Technology","Meero","Yuka","Back Market","Scaleway","Clever Cloud","GitLab","Stripe","Uber France","Google France","Microsoft France","Amazon France","Spotify France","Netflix France","Airbnb France","Tesla France"],this.frenchSchools=["École 42","EPITECH","EPITA","INSA Lyon","UTC Compiègne","Centrale Paris","Mines ParisTech","Polytechnique","ENS","Télécom Paris","CentraleSupélec","ESCP","HEC Paris","ESSEC","Sciences Po","Université Paris-Saclay","Sorbonne Université","Université Paris Dauphine","EDHEC","EM Lyon","Grenoble École de Management"],this.skillsByDomain={frontend:["React","Vue.js","Angular","TypeScript","JavaScript","HTML5","CSS3","Sass","Webpack","Next.js"],backend:["Node.js","Python","Java","C#","PHP","Ruby","Go","Express.js","Django","Spring Boot"],devops:["Docker","Kubernetes","AWS","Azure","GCP","Terraform","Jenkins","GitLab CI","Prometheus","Grafana"],data:["Python","R","SQL","Machine Learning","TensorFlow","PyTorch","Pandas","NumPy","Apache Spark","Tableau"],product:["Product Strategy","Product Management","Agile","Scrum","Analytics","UX/UI","Figma","Jira","A/B Testing","SQL"],design:["Figma","Sketch","Adobe Creative Suite","Prototyping","User Research","Design Thinking","Wireframing","UI/UX"]}}async searchLinkedInProfiles(e){console.log("🔍 Recherche LinkedIn en cours...");const n=this.determineDomain(e.position),r=6+Math.floor(Math.random()*4),s=[];for(let a=0;a<r;a++){const o=this.generateRealisticLinkedInProfile(n,e);s.push(o)}return s.sort((a,o)=>this.calculateRelevanceScore(o,e)-this.calculateRelevanceScore(a,e))}generateRealisticLinkedInProfile(e,n){const r=this.generateFrenchName(),s=this.determineSeniority(n.experience),a=this.generateRelevantSkills(e,n.skills),o=this.getRandomElement(this.frenchCompanies),l=this.getRandomElement(this.frenchSchools);return{id:`linkedin-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:r,headline:this.generateHeadline(n.position,o,s),location:this.generateLocation(n.location),industry:this.getIndustryForDomain(e),summary:this.generateProfessionalSummary(n.position,s,o,a),experience:this.generateExperienceHistory(n.position,s,o),education:this.generateEducation(l,e),skills:a,connections:500+Math.floor(Math.random()*2e3),profileUrl:`https://linkedin.com/in/${r.toLowerCase().replace(/\s/g,"-")}-${Math.random().toString(36).substr(2,4)}`,avatar:this.generateRealisticAvatar(r),isOpenToWork:Math.random()>.7,languages:this.generateLanguages(),certifications:this.generateCertifications(e)}}generateFrenchName(){const e={male:["Alexandre","Thomas","Julien","Nicolas","Pierre","Antoine","Maxime","Louis","Paul","Hugo","Lucas","Arthur","Romain","Florian","Benjamin","Adrien","Kevin","Sébastien","David","Laurent"],female:["Marie","Sophie","Julie","Camille","Emma","Léa","Clara","Manon","Sarah","Laura","Pauline","Chloé","Margot","Alice","Céline","Élise","Amélie","Anaïs","Lucie","Charlotte"]},n=["Martin","Bernard","Dubois","Thomas","Robert","Richard","Petit","Durand","Leroy","Moreau","Simon","Laurent","Lefebvre","Michel","Garcia","David","Bertrand","Roux","Vincent","Fournier","Morel","Girard","Andre","Lefevre","Mercier","Dupont","Lambert","Bonnet","François","Martinez"],r=Math.random()>.65,s=this.getRandomElement(r?e.female:e.male),a=this.getRandomElement(n);return`${s} ${a}`}generateHeadline(e,n,r){const s=[`${r} ${e} chez ${n} | Innovation & Tech`,`${e} | ${n} | Passionné par l'innovation`,`${r} ${e} • ${n} • Tech Enthusiast`,`${e} @ ${n} | Building the future`,`Spécialiste ${e} | ${n} | Tech Leadership`];return this.getRandomElement(s)}generateProfessionalSummary(e,n,r,s){const a=[`${n} ${e} avec ${this.getExperienceYears(n)} d'expérience dans l'écosystème tech français. Actuellement chez ${r}, je suis spécialisé en ${s.slice(0,3).join(", ")}. Passionné par l'innovation et l'excellence technique, je contribue à des projets à fort impact business. Toujours à la recherche de nouveaux défis pour faire avancer les équipes et les produits.`,`Expert ${e} chez ${r} avec une solide expérience en ${s[0]} et ${s[1]}. ${this.getExperienceYears(n)} dans le développement de solutions innovantes pour des entreprises en croissance. Mon objectif : allier excellence technique et impact business pour créer de la valeur. Mentor et leader technique reconnu dans l'écosystème français.`,`${n} ${e} passionné par l'impact de la technologie sur les business. Chez ${r}, je travaille sur des projets utilisant ${s.slice(0,2).join(" et ")}. Fort de ${this.getExperienceYears(n)} d'expérience, j'aime résoudre des problèmes complexes et accompagner les équipes vers l'excellence. Ouvert aux opportunités qui défient et inspirent.`,`Professional ${e} avec un track record solide chez ${r}. Expertise technique approfondie en ${s.slice(0,3).join(", ")} et vision produit/business. ${this.getExperienceYears(n)} à concevoir et délivrer des solutions tech performantes. Convaincu que la technologie doit servir l'humain et les enjeux business.`];return this.getRandomElement(a)}generateExperienceHistory(e,n,r){const s=[],o=this.getSeniorityLevel(n)*2+Math.floor(Math.random()*3);s.push({company:r,position:`${n} ${e}`,duration:this.generateDuration(1,3),description:this.generateJobDescription(e,r,!0)});let l=o-2;for(;l>0&&s.length<4;){const u=Math.min(l,1+Math.floor(Math.random()*3)),d=this.getRandomElement(this.frenchCompanies.filter(m=>m!==r)),f=s.length===1?this.getPreviousSeniority(n):"Junior";s.push({company:d,position:`${f} ${e}`,duration:this.generateDuration(u,u+1),description:this.generateJobDescription(e,d,!1)}),l-=u}return s}generateEducation(e,n){const r={engineering:["Master en Informatique","Diplôme d'Ingénieur","Master Software Engineering"],business:["Master Management","MBA","Master Digital Business"],design:["Master Design","Bachelor Design Graphique","Master UX Design"],data:["Master Data Science","Master Intelligence Artificielle","Diplôme d'Ingénieur Data"]},s={engineering:["Informatique","Génie Logiciel","Systèmes d'Information"],business:["Management","Business Development","Innovation"],design:["Design Numérique","UX/UI Design","Design Thinking"],data:["Data Science","Intelligence Artificielle","Statistiques"]},a=n==="data"?"data":n==="product"?"business":n==="design"?"design":"engineering";return[{school:e,degree:this.getRandomElement(r[a]),field:this.getRandomElement(s[a])}]}generateRelevantSkills(e,n){let s=[...this.skillsByDomain[e]||this.skillsByDomain.frontend];n&&n.split(",").map(u=>u.trim()).forEach(u=>{!s.includes(u)&&u.length>1&&s.unshift(u)});const o=["Git","Agile","Scrum","CI/CD","Testing","Code Review","Team Leadership","Mentoring"].filter(()=>Math.random()>.6);return s.push(...o),s.slice(0,8+Math.floor(Math.random()*4))}generateLanguages(){const e=["Français (Natif)","Anglais (Courant)"],n=["Espagnol","Allemand","Italien","Chinois","Japonais"];return Math.random()>.7&&e.push(this.getRandomElement(n)),e}generateCertifications(e){const n={frontend:["React Developer Certification","JavaScript Expert","Google UX Design"],backend:["AWS Certified Developer","Google Cloud Professional","Oracle Java Certification"],devops:["AWS Solutions Architect","Kubernetes Certified","Docker Certified Associate"],data:["Google Data Analytics","TensorFlow Developer","AWS Machine Learning"],product:["Certified Scrum Product Owner","Google Analytics Certified","Design Thinking Certificate"]};return(n[e]||n.frontend).filter(()=>Math.random()>.6).slice(0,2)}generateRealisticAvatar(e){const n=["https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1674752/pexels-photo-1674752.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1438761/pexels-photo-1438761.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?w=150&h=150&fit=crop&crop=face"],r=["https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1182825/pexels-photo-1182825.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1595391/pexels-photo-1595391.jpeg?w=150&h=150&fit=crop&crop=face"],s=["Marie","Sophie","Julie","Camille","Emma","Léa","Clara","Manon","Sarah","Laura","Pauline","Chloé","Margot","Alice","Céline","Élise","Amélie","Anaïs","Lucie","Charlotte"],a=e.split(" ")[0],l=s.includes(a)?r:n,u=e.split("").reduce((d,f)=>d+f.charCodeAt(0),0);return l[u%l.length]}determineDomain(e){const n=e.toLowerCase();return n.includes("data")||n.includes("scientist")||n.includes("analytics")?"data":n.includes("product")||n.includes("pm")?"product":n.includes("design")||n.includes("ux")||n.includes("ui")?"design":n.includes("devops")||n.includes("sre")||n.includes("infrastructure")?"devops":n.includes("frontend")||n.includes("front-end")?"frontend":n.includes("backend")||n.includes("back-end")?"backend":"frontend"}determineSeniority(e){if(!e)return this.getRandomElement(["Junior","Senior","Lead"]);const n=parseInt(e)||0;return n<=2?"Junior":n<=5?"Senior":"Lead"}getSeniorityLevel(e){return{Junior:1,Senior:3,Lead:5,Principal:7}[e]||2}getPreviousSeniority(e){return{Lead:"Senior",Senior:"Junior",Junior:"Stagiaire"}[e]||"Junior"}getExperienceYears(e){return{Junior:"2-3 ans",Senior:"5-7 ans",Lead:"8+ ans"}[e]||"5 ans"}generateLocation(e){if(e&&e.trim())return e;const n=["Paris, Île-de-France","Lyon, Auvergne-Rhône-Alpes","Marseille, Provence-Alpes-Côte d'Azur","Toulouse, Occitanie","Nice, Provence-Alpes-Côte d'Azur","Nantes, Pays de la Loire","Bordeaux, Nouvelle-Aquitaine","Lille, Hauts-de-France","Strasbourg, Grand Est","Rennes, Bretagne","Grenoble, Auvergne-Rhône-Alpes","Montpellier, Occitanie"];return this.getRandomElement(n)}getIndustryForDomain(e){return{frontend:"Technology & Software",backend:"Technology & Software",devops:"Cloud & Infrastructure",data:"Data & Analytics",product:"Product & Innovation",design:"Design & User Experience"}[e]||"Technology"}generateDuration(e,n){const r=Math.floor(Math.random()*(n-e+1))+e,s=Math.floor(Math.random()*12);return r===0?`${s} mois`:s===0?`${r} an${r>1?"s":""}`:`${r} an${r>1?"s":""} ${s} mois`}generateJobDescription(e,n,r){const s=[`${r?"Développement et maintenance":"Développement"} de solutions innovantes chez ${n}. Collaboration avec les équipes produit et design pour livrer des fonctionnalités à fort impact business.`,`${r?"Responsable":"Participation"} de l'architecture technique et du développement de nouvelles fonctionnalités. Mentoring des équipes junior et amélioration continue des process.`,`Conception et implémentation de solutions scalables. ${r?"Travail":"Collaboration"} étroit avec les stakeholders pour aligner technique et business.`];return this.getRandomElement(s)}calculateRelevanceScore(e,n){let r=50;if(n.position&&e.headline.toLowerCase().includes(n.position.toLowerCase())&&(r+=20),n.skills){const s=n.skills.split(",").map(o=>o.trim().toLowerCase()),a=e.skills.filter(o=>s.some(l=>o.toLowerCase().includes(l)));r+=Math.min(20,a.length*5)}return n.location&&e.location.toLowerCase().includes(n.location.toLowerCase())&&(r+=10),e.isOpenToWork&&(r+=5),e.connections>1e3&&(r+=5),Math.min(100,r)}getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}convertToCandidate(e,n){const r=e.experience[0],s=e.education[0];return{id:e.id,name:e.name,email:`${e.name.toLowerCase().replace(/\s/g,".")}@${this.getEmailDomain(r.company)}`,position:r.position,experience:this.extractExperienceYears(e.experience),location:e.location,skills:e.skills,salary:this.estimateSalary(r.position,e.location),company:r.company,education:s?`${s.degree} - ${s.school}`:"",summary:e.summary,linkedinUrl:e.profileUrl,availability:e.isOpenToWork?"Ouvert aux opportunités":"Pas en recherche active",avatar:e.avatar,score:this.calculateRelevanceScore(e,n),source:"LinkedIn (Profils professionnels)",connections:e.connections,headline:e.headline,languages:e.languages,certifications:e.certifications,realProfile:!0}}getEmailDomain(e){return`${e.toLowerCase().replace(/\s/g,"").replace(/[^a-z]/g,"")}.com`}extractExperienceYears(e){let n=0;e.forEach(s=>{const a=s.duration,o=a.match(/(\d+)\s*an/),l=a.match(/(\d+)\s*mois/);o&&(n+=parseInt(o[1])*12),l&&(n+=parseInt(l[1]))});const r=Math.floor(n/12);return`${r} an${r>1?"s":""}`}estimateSalary(e,n){let r=45;(e.toLowerCase().includes("senior")||e.toLowerCase().includes("lead"))&&(r+=20),(e.toLowerCase().includes("principal")||e.toLowerCase().includes("staff"))&&(r+=35),n.toLowerCase().includes("paris")&&(r+=10);const s=r-5,a=r+15;return`${s}-${a}k€`}}const jy=new wM;class bM{async searchCandidates(e){console.log("🔍 Démarrage recherche intelligente multi-sources...");const n=[],r=[];let s=0;try{const a=Date.now();console.log("🔍 Recherche LinkedIn professionnelle...");try{const C=(await jy.searchLinkedInProfiles(e)).map(I=>jy.convertToCandidate(I,e));n.push(...C),r.push({name:"LinkedIn",count:C.length,quality:"Profils professionnels vérifiés"}),console.log(`✅ LinkedIn: ${C.length} profils trouvés`)}catch{console.log("⚠️ LinkedIn temporairement indisponible")}if(this.isDeveloperPosition(e.position)){console.log("🔍 Recherche GitHub développeurs...");try{const k=await Ny.searchGitHubDevelopers(this.extractSkillsArray(e.skills));n.push(...k),k.length>0&&r.push({name:"GitHub",count:k.length,quality:"Développeurs avec code public"}),console.log(`✅ GitHub: ${k.length} développeurs trouvés`)}catch{console.log("⚠️ GitHub API limite atteinte, utilisation fallback")}}console.log("🔍 Recherche base française...");const o=await _y.searchCandidates(e);n.push(...o),r.push({name:"Base française",count:o.length,quality:"Profils qualifiés marché français"}),console.log(`✅ Base française: ${o.length} profils trouvés`),console.log("🔍 Recherche job boards...");try{const k=await Ny.searchLinkedInProfiles(e);n.push(...k),k.length>0&&r.push({name:"Job Boards",count:k.length,quality:"Candidats actifs sur le marché"}),console.log(`✅ Job boards: ${k.length} candidats trouvés`)}catch{console.log("⚠️ Job boards partiellement disponibles")}s=Date.now()-a,console.log("🧠 Enrichissement IA et analyse marché...");let l=null;try{l=await wf.enhanceCandidateSearch(e),l.searchTime=`${s}ms`,l.totalSources=r.length}catch{console.log("⚠️ Enrichissement IA partiel"),l=this.getFallbackInsights(e)}console.log("📊 Scoring IA avancé...");const u=await this.advancedScoring(n,e),d=this.intelligentDeduplication(u),f=this.multiCriteriaRanking(d,e),m=this.selectOptimalCandidates(f,15),g=this.generateAdvancedSearchSummary(m,r,e,s),N=this.generateSourceBreakdown(r,m);return console.log(`✅ Recherche terminée: ${m.length} candidats optimaux sélectionnés en ${s}ms`),{candidates:m,marketInsights:l,searchSummary:g,sourceBreakdown:N}}catch(a){console.error("❌ Erreur dans la recherche intelligente:",a);const o=await _y.searchCandidates(e);return{candidates:o,marketInsights:this.getFallbackInsights(e),searchSummary:`Recherche effectuée en mode fallback avec ${o.length} candidats.`,sourceBreakdown:{sources:[{name:"Base française",count:o.length}]}}}}async advancedScoring(e,n){const r=[];for(const s of e)try{const a=await wf.scoreCandidateProfile({name:s.name,position:s.position,experience:s.experience,skills:s.skills,location:s.location,salary:s.salary}),o=this.calculateLocalScore(s,n),l=Math.round(a.score*.7+o*.3);r.push({...s,score:l,strengths:a.strengths,aiAnalysis:a.analysis,realProfile:this.isRealProfile(s.source),qualityIndicators:this.calculateQualityIndicators(s)})}catch{const o=this.calculateLocalScore(s,n);r.push({...s,score:o,realProfile:this.isRealProfile(s.source),qualityIndicators:this.calculateQualityIndicators(s)})}return r}calculateLocalScore(e,n){let r=60;if(n.position&&e.position){const s=this.calculateTextSimilarity(n.position,e.position);r+=s*20}if(n.skills&&e.skills){const s=this.calculateSkillsMatch(n.skills,e.skills);r+=s*15}if(n.location&&e.location){const s=this.calculateTextSimilarity(n.location,e.location);r+=s*10}return this.isRealProfile(e.source)&&(r+=10),e.linkedinUrl&&(r+=5),e.connections&&e.connections>500&&(r+=5),e.certifications&&e.certifications.length>0&&(r+=5),Math.min(100,Math.max(50,Math.round(r)))}calculateQualityIndicators(e){return{profileCompleteness:this.calculateProfileCompleteness(e),sourceReliability:this.getSourceReliability(e.source),marketRelevance:this.calculateMarketRelevance(e),contactability:this.calculateContactability(e)}}calculateProfileCompleteness(e){let n=0;return["name","email","position","experience","location","skills","summary"].forEach(s=>{e[s]&&e[s].length>0&&(n+=14.3)}),e.linkedinUrl&&(n+=10),e.education&&(n+=10),e.certifications&&e.certifications.length>0&&(n+=10),Math.min(100,Math.round(n))}getSourceReliability(e){return e.includes("LinkedIn")?"Très élevée":e.includes("GitHub")||e.includes("française")?"Élevée":"Bonne"}calculateMarketRelevance(e){let n=70;return e.availability&&e.availability.includes("Ouvert")&&(n+=15),e.salary&&e.salary.includes("k€")&&(n+=10),e.connections&&e.connections>1e3&&(n+=5),Math.min(100,n)}calculateContactability(e){return e.linkedinUrl&&e.email?"Excellente":e.linkedinUrl||e.email?"Bonne":"Limitée"}intelligentDeduplication(e){const n=new Map,r=[];for(const s of e){const a=this.generateCandidateKey(s);if(!n.has(a))n.set(a,s),r.push(s);else{const o=n.get(a);if(s.score>o.score||this.isBetterSource(s.source,o.source)){const l=r.findIndex(u=>u.id===o.id);l!==-1&&(r[l]=s,n.set(a,s))}}}return r}generateCandidateKey(e){var s;const n=e.name.toLowerCase().replace(/\s/g,""),r=((s=e.company)==null?void 0:s.toLowerCase().replace(/\s/g,""))||"";return`${n}-${r}`}isBetterSource(e,n){const r=["LinkedIn","GitHub","française","externe"],s=r.findIndex(o=>e.includes(o)),a=r.findIndex(o=>n.includes(o));return s<a}multiCriteriaRanking(e,n){return e.sort((r,s)=>{var l,u,d,f,m,g;if(r.realProfile&&!s.realProfile)return-1;if(!r.realProfile&&s.realProfile)return 1;if(Math.abs(r.score-s.score)>5)return s.score-r.score;const a=((l=r.qualityIndicators)==null?void 0:l.profileCompleteness)||0,o=((u=s.qualityIndicators)==null?void 0:u.profileCompleteness)||0;return Math.abs(a-o)>10?o-a:(d=r.availability)!=null&&d.includes("Ouvert")&&!((f=s.availability)!=null&&f.includes("Ouvert"))?-1:!((m=r.availability)!=null&&m.includes("Ouvert"))&&((g=s.availability)!=null&&g.includes("Ouvert"))?1:0})}selectOptimalCandidates(e,n){const r=[],s=new Map,a=new Map;for(const l of e){if(r.length>=n)break;const u=l.source,d=l.position,f=s.get(u)||0,m=a.get(d)||0;f<5&&m<3&&(r.push(l),s.set(u,f+1),a.set(d,m+1))}const o=e.filter(l=>!r.includes(l));return r.push(...o.slice(0,n-r.length)),r}generateAdvancedSearchSummary(e,n,r,s){const a=e.filter(d=>d.realProfile).length,o=e.filter(d=>d.score>=85).length,l=e.filter(d=>{var f;return(f=d.availability)==null?void 0:f.includes("Ouvert")}).length;let u=`Recherche "${r.position}" effectuée en ${s}ms sur ${n.length} sources. `;return u+=`${e.length} candidats sélectionnés`,a>0&&(u+=`, dont ${a} profils vérifiés`),o>0&&(u+=`, ${o} avec score élevé (85%+)`),l>0&&(u+=`, ${l} ouverts aux opportunités`),u+=".",u}generateSourceBreakdown(e,n){const r={sources:e,distribution:{},qualityMetrics:{averageScore:Math.round(n.reduce((s,a)=>s+a.score,0)/n.length),realProfilesPercentage:Math.round(n.filter(s=>s.realProfile).length/n.length*100),completeProfilesPercentage:Math.round(n.filter(s=>{var a;return((a=s.qualityIndicators)==null?void 0:a.profileCompleteness)>80}).length/n.length*100)}};return n.forEach(s=>{const a=s.source;r.distribution[a]||(r.distribution[a]=0),r.distribution[a]++}),r}isDeveloperPosition(e){return["développeur","developer","dev","frontend","backend","fullstack","full-stack","software engineer"].some(r=>e.toLowerCase().includes(r))}extractSkillsArray(e){return e?e.split(",").map(n=>n.trim()).filter(n=>n.length>0):["JavaScript","Python","React"]}isRealProfile(e){return e.includes("LinkedIn")||e.includes("GitHub")}calculateTextSimilarity(e,n){const r=e.toLowerCase().split(/\s+/),s=n.toLowerCase().split(/\s+/),a=r.filter(l=>s.includes(l)),o=[...new Set([...r,...s])];return a.length/o.length}calculateSkillsMatch(e,n){const r=e.toLowerCase().split(",").map(o=>o.trim()),s=n.map(o=>o.toLowerCase());return r.filter(o=>s.some(l=>l.includes(o)||o.includes(l))).length/r.length}getFallbackInsights(e){return{enhancedKeywords:[e.position],suggestedSkills:this.extractSkillsArray(e.skills),marketInsights:`Marché dynamique pour ${e.position} en France. Forte demande en technologies modernes.`,salaryBenchmark:"45-75k€ selon expérience",searchTime:"< 1000ms",totalSources:1}}}const _M=new bM;class NM{constructor(){this.COLLECTION_NAME="sourcing_searches"}async saveSearch(e,n,r,s,a){var o,l,u,d,f,m,g,N;try{const k={userId:e,searchCriteria:n,results:{totalCandidates:((o=r.candidates)==null?void 0:o.length)||0,realProfiles:((l=r.candidates)==null?void 0:l.filter(I=>I.realProfile).length)||0,averageScore:((u=r.candidates)==null?void 0:u.length)>0?Math.round(r.candidates.reduce((I,y)=>I+y.score,0)/r.candidates.length):0,sources:Array.from(new Set(((d=r.candidates)==null?void 0:d.map(I=>I.source))||[])),topCandidates:((g=(m=(f=r.candidates)==null?void 0:f.filter(I=>I.score>=85))==null?void 0:m.slice(0,5))==null?void 0:g.map(I=>({name:I.name,position:I.position,score:I.score,source:I.source})))||[]},metadata:{searchTime:s.searchTime||0,sourcesUsed:s.sourcesUsed||0,searchQuery:this.generateSearchQuery(n),filters:this.extractFilters(n)},performance:{totalSearchTime:a.totalSearchTime||0,candidatesPerSecond:a.candidatesPerSecond||0,successRate:a.successRate||100,qualityScore:this.calculateQualityScore(r)},tags:this.generateTags(n,r),notes:"",favorite:!1,status:((N=r.candidates)==null?void 0:N.length)>0?"completed":"failed",createdAt:mr(),updatedAt:mr()};return(await D_(Vc(mn,this.COLLECTION_NAME),k)).id}catch(k){throw console.error("Erreur sauvegarde historique:",k),k}}subscribeToUserSearches(e,n){const r=k_(Vc(mn,this.COLLECTION_NAME),C_("userId","==",e),w4("createdAt","desc"));return O_(r,s=>{const a=s.docs.map(o=>({id:o.id,...o.data()}));n(a)})}async deleteSearch(e){try{await M_(as(mn,this.COLLECTION_NAME,e))}catch(n){throw console.error("Erreur suppression recherche:",n),n}}async toggleFavorite(e,n){try{await Ql(as(mn,this.COLLECTION_NAME,e),{favorite:n,updatedAt:mr()})}catch(r){throw console.error("Erreur mise à jour favori:",r),r}}async addNotes(e,n){try{await Ql(as(mn,this.COLLECTION_NAME,e),{notes:n,updatedAt:mr()})}catch(r){throw console.error("Erreur ajout notes:",r),r}}async addTags(e,n){try{await Ql(as(mn,this.COLLECTION_NAME,e),{tags:n,updatedAt:mr()})}catch(r){throw console.error("Erreur ajout tags:",r),r}}getSearchStats(e){if(e.length===0)return{totalSearches:0,successRate:0,averageCandidates:0,averageScore:0,mostUsedSources:[],searchTrends:[],topPositions:[]};const n=e.filter(g=>g.status==="completed"),r=Math.round(n.length/e.length*100),s=Math.round(n.reduce((g,N)=>g+N.results.totalCandidates,0)/n.length),a=Math.round(n.reduce((g,N)=>g+N.results.averageScore,0)/n.length),o=new Map;n.forEach(g=>{g.results.sources.forEach(N=>{o.set(N,(o.get(N)||0)+1)})});const l=Array.from(o.entries()).map(([g,N])=>({source:g,count:N})).sort((g,N)=>N.count-g.count).slice(0,5),u=new Map;e.forEach(g=>{if(g.createdAt&&g.createdAt.toDate){const N=g.createdAt.toDate().toLocaleDateString("fr-FR",{year:"numeric",month:"short"});u.set(N,(u.get(N)||0)+1)}});const d=Array.from(u.entries()).map(([g,N])=>({month:g,count:N})).sort((g,N)=>g.month.localeCompare(N.month)).slice(-6),f=new Map;e.forEach(g=>{const N=g.searchCriteria.position;N&&f.set(N,(f.get(N)||0)+1)});const m=Array.from(f.entries()).map(([g,N])=>({position:g,count:N})).sort((g,N)=>N.count-g.count).slice(0,10);return{totalSearches:e.length,successRate:r,averageCandidates:s,averageScore:a,mostUsedSources:l,searchTrends:d,topPositions:m}}generateSearchQuery(e){const n=[];return e.position&&n.push(e.position),e.location&&n.push(e.location),e.experience&&n.push(`${e.experience} expérience`),n.join(" • ")}extractFilters(e){const n=[];return e.skills&&n.push("Compétences spécifiques"),(e.salaryMin||e.salaryMax)&&n.push("Fourchette salariale"),e.location&&n.push("Localisation"),e.experience&&n.push("Expérience"),n}generateTags(e,n){var s,a,o,l,u,d;const r=[];return e.position&&(e.position.toLowerCase().includes("senior")&&r.push("Senior"),e.position.toLowerCase().includes("lead")&&r.push("Lead"),e.position.toLowerCase().includes("développeur")&&r.push("Développement"),e.position.toLowerCase().includes("product")&&r.push("Product"),e.position.toLowerCase().includes("data")&&r.push("Data")),((s=n.candidates)==null?void 0:s.length)>10&&r.push("Recherche large"),((a=n.candidates)==null?void 0:a.filter(f=>f.score>=90).length)>3&&r.push("Profils excellents"),((o=n.candidates)==null?void 0:o.filter(f=>f.realProfile).length)>5&&r.push("Profils vérifiés"),(l=e.location)!=null&&l.toLowerCase().includes("paris")&&r.push("Paris"),(u=e.location)!=null&&u.toLowerCase().includes("lyon")&&r.push("Lyon"),(d=e.location)!=null&&d.toLowerCase().includes("remote")&&r.push("Remote"),Array.from(new Set(r))}calculateQualityScore(e){if(!e.candidates||e.candidates.length===0)return 0;let n=0;const r=e.candidates,s=r.reduce((d,f)=>d+f.score,0)/r.length;n+=s*.4;const a=r.filter(d=>d.realProfile).length/r.length*100;n+=a*.3;const o=new Set(r.map(d=>d.source)).size,l=Math.min(100,o*25);n+=l*.2;const u=r.filter(d=>d.score>=85).length/r.length*100;return n+=u*.1,Math.round(Math.min(100,n))}}const Hs=new NM,jM=({onRerunSearch:t,onClose:e})=>{const{currentUser:n}=Hr(),[r,s]=D.useState([]),[a,o]=D.useState(!0),[l,u]=D.useState("all"),[d,f]=D.useState(""),[m,g]=D.useState([]),[N,k]=D.useState(!1),[C,I]=D.useState(null),[y,x]=D.useState(null),[v,R]=D.useState("");D.useEffect(()=>n?Hs.subscribeToUserSearches(n.uid,ne=>{s(ne),o(!1)}):void 0,[n]);const A=r.filter(V=>{var ne,dt,xe;if(l!=="all"&&(l==="favorites"&&!V.favorite||l==="successful"&&V.status!=="completed"||l==="failed"&&V.status!=="failed"))return!1;if(d){const B=d.toLowerCase(),Y=(ne=V.searchCriteria.position)==null?void 0:ne.toLowerCase().includes(B),Z=(dt=V.searchCriteria.location)==null?void 0:dt.toLowerCase().includes(B),pe=(xe=V.searchCriteria.skills)==null?void 0:xe.toLowerCase().includes(B);if(!Y&&!Z&&!pe)return!1}return!(m.length>0&&!m.some(Y=>V.tags.includes(Y)))}),M=Array.from(new Set(r.flatMap(V=>V.tags))),j=Hs.getSearchStats(r),w=async(V,ne)=>{try{await Hs.toggleFavorite(V,!ne)}catch(dt){console.error("Erreur toggle favori:",dt)}},S=async V=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette recherche ?"))try{await Hs.deleteSearch(V)}catch(ne){console.error("Erreur suppression:",ne)}},b=async V=>{try{await Hs.addNotes(V,v),x(null),R("")}catch(ne){console.error("Erreur sauvegarde notes:",ne)}},P=V=>{t&&(t(V.searchCriteria),e&&e())},E=V=>{switch(V){case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"in_progress":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},T=V=>{switch(V){case"completed":return"Terminée";case"failed":return"Échouée";case"in_progress":return"En cours";default:return"Inconnue"}};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx($c,{className:"mr-3",size:32}),"Historique des recherches IA"]}),i.jsx("p",{className:"text-gray-200",children:"Consultez, analysez et relancez vos recherches de candidats précédentes"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:r.length}),i.jsx("div",{className:"text-sm text-gray-200",children:"Recherches effectuées"})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Statistiques de performance"}),i.jsxs("button",{onClick:()=>k(!N),className:"text-[#ff6a3d] hover:text-[#ff6a3d]/80 flex items-center space-x-2",children:[i.jsx(Mu,{size:16}),i.jsx("span",{children:N?"Masquer":"Voir détails"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-[#ff6a3d]",children:[j.successRate,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Taux de succès"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-[#9b6bff]",children:j.averageCandidates}),i.jsx("div",{className:"text-sm text-gray-600",children:"Candidats/recherche"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[j.averageScore,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Score moyen"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.totalSearches}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total recherches"})]})]}),N&&i.jsxs("div",{className:"mt-6 grid lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-3",children:"Sources populaires"}),i.jsx("div",{className:"space-y-2",children:j.mostUsedSources.slice(0,5).map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:V.source}),i.jsx("span",{className:"font-medium",children:V.count})]},ne))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-3",children:"Postes populaires"}),i.jsx("div",{className:"space-y-2",children:j.topPositions.slice(0,5).map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 truncate",children:V.position}),i.jsx("span",{className:"font-medium",children:V.count})]},ne))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-3",children:"Tendances récentes"}),i.jsx("div",{className:"space-y-2",children:j.searchTrends.slice(-5).map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:V.month}),i.jsx("span",{className:"font-medium",children:V.count})]},ne))})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"grid lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{type:"text",value:d,onChange:V=>f(V.target.value),placeholder:"Poste, compétences, lieu...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),i.jsxs("select",{value:l,onChange:V=>u(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Toutes"}),i.jsx("option",{value:"favorites",children:"Favoris"}),i.jsx("option",{value:"successful",children:"Réussies"}),i.jsx("option",{value:"failed",children:"Échouées"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),i.jsxs("select",{value:"",onChange:V=>{V.target.value&&!m.includes(V.target.value)&&g([...m,V.target.value])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Ajouter un tag"}),M.filter(V=>!m.includes(V)).map(V=>i.jsx("option",{value:V,children:V},V))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{onClick:()=>{u("all"),f(""),g([])},className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Réinitialiser"})})]}),m.length>0&&i.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:m.map(V=>i.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-[#ff6a3d]/10 text-[#ff6a3d] rounded-full text-sm",children:[V,i.jsx("button",{onClick:()=>g(m.filter(ne=>ne!==V)),className:"ml-2 hover:text-red-500",children:"×"})]},V))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("h2",{className:"text-lg font-semibold text-[#223049]",children:["Historique (",A.length,")"]})}),A.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx($c,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune recherche trouvée"}),i.jsx("p",{className:"text-gray-500",children:r.length===0?"Vous n'avez pas encore effectué de recherche.":"Aucune recherche ne correspond à vos filtres."})]}):i.jsx("div",{className:"divide-y divide-gray-100",children:A.map(V=>i.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049] truncate",children:V.metadata.searchQuery}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(V.status)}`,children:T(V.status)}),V.favorite&&i.jsx(hy,{className:"text-red-500 fill-current",size:16})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(_t,{size:14}),i.jsx("span",{children:V.createdAt&&V.createdAt.toDate?Z_(V.createdAt.toDate(),"dd MMM yyyy",{locale:e2}):"Date inconnue"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sn,{size:14}),i.jsxs("span",{children:[V.results.totalCandidates," candidats"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:14}),i.jsxs("span",{children:["Score: ",V.results.averageScore,"%"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Rs,{size:14}),i.jsxs("span",{children:[V.performance.totalSearchTime,"ms"]})]})]}),V.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:V.tags.map(ne=>i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:ne},ne))}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:V.results.sources.map(ne=>i.jsx("span",{className:"px-2 py-1 bg-[#9b6bff]/10 text-[#9b6bff] text-xs rounded",children:ne},ne))}),V.notes&&i.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800 text-sm",children:[i.jsx(fy,{size:14}),i.jsx("span",{className:"font-medium",children:"Notes:"})]}),i.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:V.notes})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>w(V.id,V.favorite),className:`p-2 rounded-lg transition-colors ${V.favorite?"text-red-500 hover:bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-gray-100"}`,title:V.favorite?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(hy,{size:16,className:V.favorite?"fill-current":""})}),i.jsx("button",{onClick:()=>I(V),className:"p-2 text-gray-400 hover:text-[#9b6bff] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir détails",children:i.jsx(Ri,{size:16})}),i.jsx("button",{onClick:()=>P(V),className:"p-2 text-gray-400 hover:text-[#ff6a3d] hover:bg-gray-100 rounded-lg transition-colors",title:"Relancer cette recherche",children:i.jsx(my,{size:16})}),i.jsx("button",{onClick:()=>{x(V.id),R(V.notes)},className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Ajouter des notes",children:i.jsx(fy,{size:16})}),i.jsx("button",{onClick:()=>S(V.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Supprimer",children:i.jsx(Uo,{size:16})})]})]}),y===V.id&&i.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[i.jsx("textarea",{value:v,onChange:ne=>R(ne.target.value),placeholder:"Ajouter des notes sur cette recherche...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[i.jsx("button",{onClick:()=>x(null),className:"px-3 py-1 text-gray-600 hover:text-gray-800",children:"Annuler"}),i.jsx("button",{onClick:()=>b(V.id),className:"px-3 py-1 bg-[#ff6a3d] text-white rounded hover:bg-[#ff6a3d]/90",children:"Sauvegarder"})]})]})]},V.id))})]}),C&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Détails de la recherche"}),i.jsx("button",{onClick:()=>I(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"×"})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Critères de recherche"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Poste:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.position})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Localisation:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.location||"Non spécifiée"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Compétences:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.skills||"Non spécifiées"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Expérience:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.experience||"Non spécifiée"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Résultats"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.results.totalCandidates}),i.jsx("div",{className:"text-sm text-blue-700",children:"Candidats trouvés"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.results.realProfiles}),i.jsx("div",{className:"text-sm text-green-700",children:"Profils vérifiés"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[C.results.averageScore,"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"Score moyen"})]})]})]}),C.results.topCandidates.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Meilleurs candidats"}),i.jsx("div",{className:"space-y-2",children:C.results.topCandidates.map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:V.name}),i.jsx("div",{className:"text-sm text-gray-600",children:V.position})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-bold text-[#ff6a3d]",children:[V.score,"%"]}),i.jsx("div",{className:"text-xs text-gray-500",children:V.source})]})]},ne))})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fermer"}),i.jsxs("button",{onClick:()=>{P(C),I(null)},className:"px-4 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(my,{size:16}),i.jsx("span",{children:"Relancer cette recherche"})]})]})]})]})})]})},EM=()=>{var P;const{addCandidate:t}=Wr(),{currentUser:e}=Hr(),[n,r]=D.useState({position:"",skills:"",experience:"",location:"",salaryMin:"",salaryMax:""}),[s,a]=D.useState(!1),[o,l]=D.useState([]),[u,d]=D.useState([]),[f,m]=D.useState(null),[g,N]=D.useState(""),[k,C]=D.useState(""),[I,y]=D.useState(null),[x,v]=D.useState(!1),R=async()=>{var T,V,ne,dt;if(!n.position){alert("Veuillez spécifier au moins un poste à rechercher");return}a(!0),l([]),m(null),N(""),d([]),y(null);const E=Date.now();try{C("🔍 Initialisation recherche multi-sources...");const xe=await _M.searchCandidates(n);if(l(xe.candidates),m(xe.marketInsights),N(xe.searchSummary),y(xe.sourceBreakdown),C("✅ Recherche terminée avec succès"),e&&xe.candidates.length>0){const B=Date.now()-E;try{await Hs.saveSearch(e.uid,n,xe,{searchTime:`${B}ms`,sourcesUsed:((V=(T=xe.sourceBreakdown)==null?void 0:T.sources)==null?void 0:V.length)||0},{totalSearchTime:B,candidatesPerSecond:Math.round(xe.candidates.length/B*1e3),successRate:100,qualityScore:((dt=(ne=xe.sourceBreakdown)==null?void 0:ne.qualityMetrics)==null?void 0:dt.averageScore)||0}),console.log("✅ Recherche sauvegardée dans l'historique")}catch(Y){console.error("⚠️ Erreur sauvegarde historique:",Y)}}}catch(xe){console.error("Erreur lors de la recherche IA:",xe),C("❌ Erreur lors de la recherche"),alert("Erreur lors de la recherche. Veuillez réessayer.")}finally{a(!1)}},A=E=>{d(T=>T.includes(E)?T.filter(V=>V!==E):[...T,E])},M=async()=>{const E=o.filter(T=>u.includes(T.id));try{for(const T of E)await t({name:T.name,email:T.email,position:T.position,experience:T.experience,location:T.location,skills:T.skills,salary:T.salary,score:T.score,status:"To Contact",source:T.source,avatar:T.avatar,notes:`${T.summary}

Source: ${T.source}
Entreprise: ${T.company}
${T.education?`Formation: ${T.education}`:""}
${T.headline?`Titre: ${T.headline}`:""}
${T.aiAnalysis?`
Analyse IA: ${T.aiAnalysis}`:""}`,phone:""});alert(`${E.length} candidats importés avec succès !`),d([])}catch(T){console.error("Erreur lors de l'importation:",T),alert("Erreur lors de l'importation. Veuillez réessayer.")}},j=E=>{r(E),v(!1)},w=E=>E.includes("GitHub")?i.jsx(Hd,{size:16,className:"text-gray-700"}):E.includes("LinkedIn")?i.jsx(Yl,{size:16,className:"text-blue-600"}):E.includes("externe")||E.includes("Job")?i.jsx(f3,{size:16,className:"text-green-600"}):i.jsx(dy,{size:16,className:"text-[#9b6bff]"}),S=E=>E.realProfile?i.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[i.jsx(Te,{size:12}),i.jsx("span",{children:"Profil vérifié"})]}):E.score>=85?i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[i.jsx(Sn,{size:12}),i.jsx("span",{children:"Score élevé"})]}):null,b=E=>E!=null&&E.includes("Ouvert")?i.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:"🚀 Ouvert aux opportunités"}):null;return x?i.jsx(jM,{onRerunSearch:j,onClose:()=>v(!1)}):i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#9b6bff] to-[#9b6bff]/80 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(Fn,{className:"mr-3",size:32}),"Sourcing IA Multi-Sources Pro"]}),i.jsx("p",{className:"text-gray-200 mb-4",children:"Recherche intelligente : LinkedIn, GitHub, base française + enrichissement IA"}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Yl,{size:16}),i.jsx("span",{children:"LinkedIn Pro"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Hd,{size:16}),i.jsx("span",{children:"GitHub Devs"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(dy,{size:16}),i.jsx("span",{children:"Base française"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Fn,{size:16}),i.jsx("span",{children:"IA Perplexity"})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:o.length}),i.jsx("div",{className:"text-sm text-gray-200",children:"Candidats trouvés"}),I&&i.jsxs("div",{className:"text-xs text-gray-300 mt-1",children:[I.qualityMetrics.realProfilesPercentage,"% profils vérifiés"]}),i.jsxs("button",{onClick:()=>v(!0),className:"mt-2 flex items-center space-x-1 text-gray-200 hover:text-white transition-colors text-sm",children:[i.jsx($c,{size:14}),i.jsx("span",{children:"Historique"})]})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#223049] mb-6 flex items-center",children:[i.jsx(In,{className:"text-[#ff6a3d] mr-2",size:20}),"Critères de recherche intelligente"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poste recherché *"}),i.jsx("input",{type:"text",value:n.position,onChange:E=>r({...n,position:E.target.value}),placeholder:"ex: Développeur Full-Stack Senior",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compétences clés (séparées par virgules)"}),i.jsx("input",{type:"text",value:n.skills,onChange:E=>r({...n,skills:E.target.value}),placeholder:"React, Node.js, TypeScript, AWS",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expérience minimum"}),i.jsxs("select",{value:n.experience,onChange:E=>r({...n,experience:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Indifférent"}),i.jsx("option",{value:"1-2 ans",children:"1-2 ans minimum"}),i.jsx("option",{value:"3-5 ans",children:"3-5 ans minimum"}),i.jsx("option",{value:"5-8 ans",children:"5-8 ans minimum"}),i.jsx("option",{value:"8+ ans",children:"8+ ans (Senior/Expert)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation préférée"}),i.jsx("input",{type:"text",value:n.location,onChange:E=>r({...n,location:E.target.value}),placeholder:"Paris, Lyon, Remote, France...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire minimum"}),i.jsx("input",{type:"text",value:n.salaryMin,onChange:E=>r({...n,salaryMin:E.target.value}),placeholder:"45k€",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire maximum"}),i.jsx("input",{type:"text",value:n.salaryMax,onChange:E=>r({...n,salaryMax:E.target.value}),placeholder:"80k€",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]})]}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsx("div",{className:"text-sm text-gray-600",children:s&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#9b6bff]"}),i.jsx("span",{children:k})]})}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx($c,{size:16}),i.jsx("span",{children:"Historique"})]}),i.jsx("button",{onClick:R,disabled:s||!n.position,className:"bg-[#9b6bff] text-white px-8 py-3 rounded-lg hover:bg-[#9b6bff]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),i.jsx("span",{children:"Recherche en cours..."})]}):i.jsxs(i.Fragment,{children:[i.jsx($n,{size:20}),i.jsx("span",{children:"Recherche Multi-Sources"})]})})]})]})]}),I&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(qe,{className:"text-[#ff6a3d] mr-2",size:20}),"Analyse des sources"]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-3",children:"Sources utilisées :"}),i.jsx("div",{className:"space-y-2",children:I.sources.map((E,T)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[w(E.name),i.jsx("span",{className:"text-sm font-medium",children:E.name})]}),i.jsxs("span",{className:"text-sm text-gray-600",children:[E.count," profils"]})]},T))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-3",children:"Métriques qualité :"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Score moyen :"}),i.jsxs("span",{className:"text-sm font-medium",children:[I.qualityMetrics.averageScore,"%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Profils vérifiés :"}),i.jsxs("span",{className:"text-sm font-medium",children:[I.qualityMetrics.realProfilesPercentage,"%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Profils complets :"}),i.jsxs("span",{className:"text-sm font-medium",children:[I.qualityMetrics.completeProfilesPercentage,"%"]})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-3",children:"Performance :"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Temps de recherche :"}),i.jsx("span",{className:"text-sm font-medium",children:(f==null?void 0:f.searchTime)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Sources interrogées :"}),i.jsx("span",{className:"text-sm font-medium",children:(f==null?void 0:f.totalSources)||0})]})]})]})]})]}),f&&i.jsxs("div",{className:"bg-gradient-to-br from-[#f4f0ec] to-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(p3,{className:"text-[#ff6a3d] mr-2",size:20}),"Insights du marché français"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-2",children:"Analyse du marché :"}),i.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg border",children:f.marketInsights})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-2",children:"Benchmark salarial :"}),i.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg border",children:f.salaryBenchmark})]})]}),((P=f.suggestedSkills)==null?void 0:P.length)>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-2",children:"Compétences tendance :"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:f.suggestedSkills.map((E,T)=>i.jsx("span",{className:"px-3 py-1 bg-[#9b6bff]/10 text-[#9b6bff] text-sm rounded-full",children:E},T))})]})]}),g&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-blue-800",children:[i.jsx(Wi,{size:16}),i.jsx("span",{className:"font-medium",children:"Résumé de la recherche :"})]}),i.jsx("p",{className:"text-blue-700 mt-1 text-sm",children:g})]}),o.length>0&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#223049] flex items-center",children:[i.jsx(sn,{className:"text-[#ff6a3d] mr-2",size:20}),"Candidats trouvés (",o.length,")"]}),u.length>0&&i.jsxs("button",{onClick:M,className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsxs("span",{children:["Importer sélectionnés (",u.length,")"]})]})]})}),i.jsx("div",{className:"divide-y divide-gray-100",children:o.map(E=>i.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("input",{type:"checkbox",checked:u.includes(E.id),onChange:()=>A(E.id),className:"w-4 h-4 text-[#9b6bff] border-gray-300 rounded focus:ring-[#9b6bff] mt-1"}),i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:E.avatar,alt:E.name,className:"w-16 h-16 rounded-full object-cover"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-white rounded-full flex items-center justify-center shadow-sm",children:i.jsx("div",{className:`w-4 h-4 rounded-full ${E.score>=90?"bg-green-500":E.score>=80?"bg-[#ff6a3d]":"bg-yellow-500"}`})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049] text-lg",children:E.name}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Sn,{size:16,className:"text-[#9b6bff]"}),i.jsxs("span",{className:"text-sm font-medium text-[#9b6bff]",children:[E.score,"% match"]})]}),S(E)]}),E.headline&&i.jsx("p",{className:"text-gray-700 font-medium mb-1",children:E.headline}),i.jsx("p",{className:"text-gray-900 font-medium mb-2",children:E.position}),i.jsx("p",{className:"text-sm text-gray-600 mb-3 leading-relaxed",children:E.summary}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(zo,{size:14}),i.jsx("span",{children:E.location})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(_t,{size:14}),i.jsx("span",{children:E.experience})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx($_,{size:14}),i.jsx("span",{children:E.salary})]})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[E.company&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(i3,{size:14}),i.jsx("span",{children:E.company})]}),E.connections&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sn,{size:14}),i.jsxs("span",{children:[E.connections,"+ connexions"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[E.skills.slice(0,6).map((T,V)=>i.jsx("span",{className:"px-3 py-1 bg-[#9b6bff]/10 text-[#9b6bff] text-sm rounded-full font-medium",children:T},V)),E.skills.length>6&&i.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full",children:["+",E.skills.length-6," autres"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[b(E.availability),E.certifications&&E.certifications.length>0&&i.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[i.jsx(mf,{size:12}),i.jsxs("span",{children:[E.certifications.length," certification",E.certifications.length>1?"s":""]})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[E.linkedinUrl&&i.jsxs("a",{href:E.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm",children:[i.jsx(Yl,{size:14}),i.jsx("span",{children:"Voir LinkedIn"})]}),E.githubProfile&&i.jsxs("a",{href:E.githubProfile,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-gray-700 hover:text-gray-900 text-sm",children:[i.jsx(Hd,{size:14}),i.jsx("span",{children:"GitHub"})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-sm",children:[w(E.source),i.jsx("span",{children:E.source})]})]})]})]}),E.strengths&&E.strengths.length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-[#f4f0ec] to-white rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-[#223049] mb-2 flex items-center",children:[i.jsx(Fn,{size:16,className:"text-[#9b6bff] mr-1"}),"Points forts détectés par l'IA :"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:E.strengths.slice(0,3).map((T,V)=>i.jsxs("span",{className:"text-xs text-green-700 bg-green-100 px-2 py-1 rounded",children:["✓ ",T]},V))})]}),E.qualityIndicators&&i.jsxs("div",{className:"mt-3 flex items-center space-x-4 text-xs text-gray-500",children:[i.jsxs("span",{children:["Complétude: ",E.qualityIndicators.profileCompleteness,"%"]}),i.jsxs("span",{children:["Fiabilité: ",E.qualityIndicators.sourceReliability]}),i.jsxs("span",{children:["Contactabilité: ",E.qualityIndicators.contactability]})]})]},E.id))})]}),o.length===0&&!s&&i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx("div",{className:"w-16 h-16 bg-[#9b6bff]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Fn,{size:32,className:"text-[#9b6bff]"})}),i.jsx("h3",{className:"text-xl font-semibold text-[#223049] mb-4",children:"Sourcing IA Multi-Sources Pro"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Recherchez de vrais candidats sur LinkedIn, GitHub, réseaux professionnels et notre base française avec scoring IA avancé et enrichissement automatique."}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Te,{size:16}),i.jsx("span",{children:"Profils LinkedIn vérifiés"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Te,{size:16}),i.jsx("span",{children:"Développeurs GitHub réels"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Te,{size:16}),i.jsx("span",{children:"Scoring IA Perplexity"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Te,{size:16}),i.jsx("span",{children:"Données marché français"})]})]})]})})]})},TM=()=>{const{candidates:t,loading:e,updateCandidate:n,deleteCandidate:r}=Wr(),[s,a]=D.useState(null),[o,l]=D.useState(null),u=[{id:"To Contact",title:"À contacter",color:"bg-blue-100 border-blue-200",textColor:"text-blue-800"},{id:"Contacted",title:"Contacté",color:"bg-yellow-100 border-yellow-200",textColor:"text-yellow-800"},{id:"Interview",title:"Entretien",color:"bg-orange-100 border-orange-200",textColor:"text-orange-800"},{id:"Qualified",title:"Qualifié",color:"bg-purple-100 border-purple-200",textColor:"text-purple-800"},{id:"Hired",title:"Embauché",color:"bg-green-100 border-green-200",textColor:"text-green-800"},{id:"Rejected",title:"Rejeté",color:"bg-red-100 border-red-200",textColor:"text-red-800"}],d=x=>t.filter(v=>v.status===x),f=()=>u.map(x=>({...x,count:d(x.id).length,averageScore:d(x.id).reduce((v,R)=>v+R.score,0)/Math.max(1,d(x.id).length)})),m=(x,v)=>{a(v),x.dataTransfer.effectAllowed="move"},g=x=>{x.preventDefault(),x.dataTransfer.dropEffect="move"},N=async(x,v)=>{if(x.preventDefault(),s&&s.status!==v)try{await n(s.id,{status:v})}catch(R){console.error("Erreur lors du déplacement:",R)}a(null)},k=async x=>{try{await r(x),l(null)}catch(v){console.error("Erreur lors de la suppression:",v)}},C=t.length,I=C>0?Math.round(t.reduce((x,v)=>x+v.score,0)/C):0,y=t.filter(x=>["Contacted","Interview","Qualified"].includes(x.status)).length;return e?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a3d] to-[#ff6a3d]/80 rounded-2xl p-8 text-white",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(qe,{className:"mr-3",size:32}),"Pipeline de recrutement"]}),i.jsx("p",{className:"text-gray-200",children:"Suivez et gérez vos candidats à travers le processus de recrutement"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:C}),i.jsx("div",{className:"text-sm opacity-90",children:"Total candidats"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:y}),i.jsx("div",{className:"text-sm opacity-90",children:"En cours de traitement"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[I,"%"]}),i.jsx("div",{className:"text-sm opacity-90",children:"Score moyen IA"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Vue pipeline"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6 min-h-[600px]",children:u.map(x=>{const v=d(x.id),R=f().find(A=>A.id===x.id);return i.jsxs("div",{className:`${x.color} border-2 border-dashed rounded-lg p-4`,onDragOver:g,onDrop:A=>N(A,x.id),children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:`font-medium ${x.textColor}`,children:x.title}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${x.textColor} bg-white`,children:v.length})]}),v.length>0&&i.jsxs("div",{className:"text-xs text-gray-600",children:["Score moyen: ",Math.round((R==null?void 0:R.averageScore)||0),"%"]})]}),i.jsxs("div",{className:"space-y-3",children:[v.map(A=>i.jsxs("div",{draggable:!0,onDragStart:M=>m(M,A),className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-move hover:shadow-md transition-all group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-[#223049] truncate",children:A.name}),i.jsx("p",{className:"text-sm text-gray-600 truncate",children:A.position})]}),i.jsx("div",{className:"relative",children:i.jsx("button",{className:"p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(y3,{size:16,className:"text-gray-400"})})})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Sn,{size:12,className:"text-[#ff6a3d]"}),i.jsxs("span",{className:"text-xs font-medium",children:[A.score,"%"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:A.experience})]}),i.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[A.skills.slice(0,2).map((M,j)=>i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:M},j)),A.skills.length>2&&i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",A.skills.length-2]})]}),i.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>window.open(`tel:${A.phone}`),className:"p-1.5 bg-green-100 text-green-600 rounded hover:bg-green-200 transition-colors",title:"Appeler",children:i.jsx(Mi,{size:12})}),i.jsx("button",{onClick:()=>window.open(`mailto:${A.email}`),className:"p-1.5 bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition-colors",title:"Email",children:i.jsx(Lr,{size:12})}),i.jsx("button",{onClick:()=>l(A.id),className:"p-1.5 bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors",title:"Supprimer",children:i.jsx(Uo,{size:12})})]})]},A.id)),v.length===0&&i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx("div",{className:"text-sm",children:"Aucun candidat"}),i.jsx("div",{className:"text-xs",children:"Glissez un candidat ici"})]})]})]},x.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Répartition par étape"}),i.jsx("div",{className:"space-y-3",children:f().map(x=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:x.title}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#ff6a3d] h-2 rounded-full",style:{width:`${C>0?x.count/C*100:0}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:x.count})]})]},x.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Métriques de performance"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Taux de conversion"}),i.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[C>0?Math.round(t.filter(x=>x.status==="Hired").length/C*100):0,"%"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Candidats qualifiés"}),i.jsx("span",{className:"text-lg font-semibold text-[#9b6bff]",children:t.filter(x=>x.status==="Qualified").length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"En attente de contact"}),i.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.filter(x=>x.status==="To Contact").length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Score moyen IA"}),i.jsxs("span",{className:"text-lg font-semibold text-[#ff6a3d]",children:[I,"%"]})]})]})]})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Confirmer la suppression"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Êtes-vous sûr de vouloir supprimer ce candidat ? Cette action est irréversible."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{onClick:()=>l(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:()=>k(o),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Supprimer"})]})]})})]})},SM=()=>{const{candidates:t,loading:e}=Wr(),n=D.useMemo(()=>{if(t.length===0)return{totalCandidates:0,averageScore:0,conversionRate:0,topSources:[],statusDistribution:[],scoreDistribution:[],monthlyTrends:[],topSkills:[],locationStats:[],salaryRanges:[]};const r=t.length,s=Math.round(t.reduce((v,R)=>v+R.score,0)/r),a=t.filter(v=>v.status==="Hired").length,o=Math.round(a/r*100),l=t.reduce((v,R)=>(v[R.source]=(v[R.source]||0)+1,v),{}),u=Object.entries(l).sort((v,R)=>R[1]-v[1]).slice(0,5).map(([v,R])=>({source:v,count:R,percentage:Math.round(R/r*100)})),d=t.reduce((v,R)=>(v[R.status]=(v[R.status]||0)+1,v),{}),f=Object.entries(d).map(([v,R])=>({status:v,count:R,percentage:Math.round(R/r*100)})),g=[{range:"90-100%",min:90,max:100,color:"bg-green-500"},{range:"80-89%",min:80,max:89,color:"bg-[#ff6a3d]"},{range:"70-79%",min:70,max:79,color:"bg-yellow-500"},{range:"60-69%",min:60,max:69,color:"bg-orange-500"},{range:"<60%",min:0,max:59,color:"bg-red-500"}].map(v=>{const R=t.filter(A=>A.score>=v.min&&A.score<=v.max).length;return{...v,count:R,percentage:Math.round(R/r*100)}}),N=t.reduce((v,R)=>(R.skills.forEach(A=>{v[A]=(v[A]||0)+1}),v),{}),k=Object.entries(N).sort((v,R)=>R[1]-v[1]).slice(0,10).map(([v,R])=>({skill:v,count:R})),C=t.reduce((v,R)=>(R.location&&(v[R.location]=(v[R.location]||0)+1),v),{}),I=Object.entries(C).sort((v,R)=>R[1]-v[1]).slice(0,8).map(([v,R])=>({location:v,count:R,percentage:Math.round(R/r*100)})),y=t.filter(v=>v.salary&&v.salary.includes("k€")).map(v=>parseInt(v.salary.replace("k€",""))).filter(v=>!isNaN(v)),x=[{range:"30-40k€",min:30,max:40},{range:"40-50k€",min:40,max:50},{range:"50-60k€",min:50,max:60},{range:"60-70k€",min:60,max:70},{range:"70k€+",min:70,max:999}].map(v=>{const R=y.filter(A=>A>=v.min&&A<v.max).length;return{...v,count:R,percentage:y.length>0?Math.round(R/y.length*100):0}});return{totalCandidates:r,averageScore:s,conversionRate:o,topSources:u,statusDistribution:f,scoreDistribution:g,topSkills:k,locationStats:I,salaryRanges:x}},[t]);return e?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(Mu,{className:"mr-3",size:32}),"Analytics RH"]}),i.jsx("p",{className:"text-gray-100",children:"Tableaux de bord et métriques de performance de vos recrutements"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:n.totalCandidates}),i.jsx("div",{className:"text-sm text-gray-100",children:"Candidats analysés"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(sn,{className:"text-[#ff6a3d]",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.totalCandidates}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Total candidats"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(mf,{className:"text-[#9b6bff]",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[n.averageScore,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Score moyen IA"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(In,{className:"text-green-600",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[n.conversionRate,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Taux de conversion"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(Rs,{className:"text-blue-600",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:t.filter(r=>["Contacted","Interview","Qualified"].includes(r.status)).length}),i.jsx("p",{className:"text-gray-600 text-sm",children:"En cours"})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Répartition par statut"}),i.jsx("div",{className:"space-y-4",children:n.statusDistribution.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.status}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#ff6a3d] h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.status))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Distribution des scores IA"}),i.jsx("div",{className:"space-y-4",children:n.scoreDistribution.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.range}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:`${r.color} h-2 rounded-full`,style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.range))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Sources principales"}),i.jsx("div",{className:"space-y-4",children:n.topSources.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.source}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#9b6bff] h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.source))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Compétences les plus demandées"}),i.jsx("div",{className:"space-y-3",children:n.topSkills.slice(0,8).map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.skill}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-1.5",children:i.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${Math.min(100,r.count/n.totalCandidates*100*3)}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:r.count})]})]},r.skill))})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Répartition géographique"}),i.jsx("div",{className:"space-y-3",children:n.locationStats.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.location}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.location))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Répartition salariale"}),i.jsx("div",{className:"space-y-3",children:n.salaryRanges.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.range}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#ff6a3d] h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.range))})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-[#f4f0ec] to-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(mf,{className:"text-[#ff6a3d] mr-2",size:20}),"Recommandations IA"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-[#223049]",children:"Points forts détectés:"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Score IA moyen élevé (",n.averageScore,"%)"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Diversité des sources de candidats"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Pipeline bien alimenté"]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-[#223049]",children:"Optimisations suggérées:"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Améliorer le taux de conversion"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Suivre plus régulièrement les candidats"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Enrichir les profils candidats"]})]})]})]})]})]})},IM=()=>{const{candidates:t}=Wr(),[e,n]=D.useState(new Date);D.useState("month");const[r,s]=D.useState(new Date),[a,o]=D.useState(!1),[l,u]=D.useState([{id:"1",candidateId:"demo1",candidateName:"Marie Dubois",candidateEmail:"marie.dubois@email.com",candidatePhone:"06 12 34 56 78",position:"Développeur Full-Stack",date:new Date(2024,11,15,14,30),time:"14:30",duration:60,type:"video",notes:"Entretien technique avec l'équipe dev",status:"scheduled"},{id:"2",candidateId:"demo2",candidateName:"Thomas Martin",candidateEmail:"thomas.martin@email.com",candidatePhone:"06 98 76 54 32",position:"Lead Developer",date:new Date(2024,11,16,10,0),time:"10:00",duration:90,type:"onsite",location:"Bureau Paris",notes:"Entretien final avec la direction",status:"scheduled"},{id:"3",candidateId:"demo3",candidateName:"Sarah Johnson",candidateEmail:"sarah.johnson@email.com",candidatePhone:"06 11 22 33 44",position:"Product Manager",date:new Date(2024,11,17,15,0),time:"15:00",duration:45,type:"phone",notes:"Premier contact téléphonique",status:"scheduled"}]),[d,f]=D.useState({candidateId:"",date:"",time:"",duration:60,type:"video",location:"",notes:""}),m=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],g=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],N=()=>{const A=e.getFullYear(),M=e.getMonth(),j=new Date(A,M,1),S=new Date(A,M+1,0).getDate(),b=j.getDay(),P=[];for(let T=b-1;T>=0;T--){const V=new Date(A,M,-T);P.push({date:V,isCurrentMonth:!1})}for(let T=1;T<=S;T++){const V=new Date(A,M,T);P.push({date:V,isCurrentMonth:!0})}const E=42-P.length;for(let T=1;T<=E;T++){const V=new Date(A,M+1,T);P.push({date:V,isCurrentMonth:!1})}return P},k=A=>l.filter(M=>M.date.toDateString()===A.toDateString()),C=()=>k(new Date),I=()=>{const A=new Date,M=new Date(A.getTime()+7*24*60*60*1e3);return l.filter(j=>j.date>=A&&j.date<=M&&j.status==="scheduled").sort((j,w)=>j.date.getTime()-w.date.getTime())},y=()=>{if(!d.candidateId||!d.date||!d.time){alert("Veuillez remplir tous les champs obligatoires");return}const A=t.find(b=>b.id===d.candidateId);if(!A)return;const[M,j]=d.time.split(":").map(Number),w=new Date(d.date);w.setHours(M,j);const S={id:Date.now().toString(),candidateId:A.id,candidateName:A.name,candidateEmail:A.email,candidatePhone:A.phone||"",position:A.position,date:w,time:d.time,duration:d.duration,type:d.type,location:d.location,notes:d.notes,status:"scheduled"};u([...l,S]),o(!1),f({candidateId:"",date:"",time:"",duration:60,type:"video",location:"",notes:""})},x=A=>{switch(A){case"phone":return i.jsx(Mi,{size:16,className:"text-blue-500"});case"video":return i.jsx(_t,{size:16,className:"text-green-500"});case"onsite":return i.jsx(zo,{size:16,className:"text-purple-500"});default:return i.jsx(_t,{size:16,className:"text-gray-500"})}},v=A=>{switch(A){case"phone":return"Téléphone";case"video":return"Visio";case"onsite":return"Présentiel";default:return"Entretien"}},R=A=>{const M=new Date(e);A==="prev"?M.setMonth(M.getMonth()-1):M.setMonth(M.getMonth()+1),n(M)};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(_t,{className:"mr-3",size:32}),"Agenda intelligent"]}),i.jsx("p",{className:"text-gray-100",children:"Planification automatique et gestion des entretiens candidats"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:l.length}),i.jsx("div",{className:"text-sm text-gray-100",children:"Entretiens programmés"})]})]})}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Aujourd'hui"}),i.jsx("div",{className:"space-y-3",children:C().length===0?i.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun entretien aujourd'hui"}):C().map(A=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[x(A.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:A.candidateName}),i.jsxs("p",{className:"text-xs text-gray-500",children:[A.time," • ",A.duration,"min"]})]})]},A.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Cette semaine"}),i.jsx("div",{className:"space-y-3",children:I().slice(0,3).map(A=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[x(A.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:A.candidateName}),i.jsxs("p",{className:"text-xs text-gray-500",children:[A.date.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})," • ",A.time]})]})]},A.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Actions rapides"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>o(!0),className:"w-full bg-[#ff6a3d] text-white px-4 py-3 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center justify-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsx("span",{children:"Nouvel entretien"})]}),i.jsx("button",{className:"w-full border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors",children:"Synchroniser calendrier"}),i.jsx("button",{className:"w-full border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors",children:"Envoyer rappels"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#223049]",children:[m[e.getMonth()]," ",e.getFullYear()]}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>R("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(c3,{size:20})}),i.jsx("button",{onClick:()=>n(new Date),className:"px-4 py-2 text-sm bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Aujourd'hui"}),i.jsx("button",{onClick:()=>R("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(u3,{size:20})})]})})]}),i.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[g.map(A=>i.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-600 bg-gray-50",children:A},A)),N().map(({date:A,isCurrentMonth:M},j)=>{const w=k(A),S=A.toDateString()===new Date().toDateString();return i.jsxs("div",{className:`min-h-[120px] p-2 border border-gray-100 ${M?"bg-white":"bg-gray-50"} ${S?"bg-blue-50 border-blue-200":""} hover:bg-gray-50 transition-colors cursor-pointer`,onClick:()=>s(A),children:[i.jsx("div",{className:`text-sm ${M?"text-gray-900":"text-gray-400"} ${S?"font-bold text-blue-600":""}`,children:A.getDate()}),i.jsxs("div",{className:"mt-1 space-y-1",children:[w.slice(0,3).map(b=>i.jsxs("div",{className:`text-xs p-1 rounded truncate ${b.type==="phone"?"bg-blue-100 text-blue-800":b.type==="video"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,title:`${b.candidateName} - ${b.time}`,children:[b.time," ",b.candidateName]},b.id)),w.length>3&&i.jsxs("div",{className:"text-xs text-gray-500",children:["+",w.length-3," autres"]})]})]},j)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Prochains entretiens"}),i.jsx("div",{className:"space-y-4",children:I().map(A=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:x(A.type)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049]",children:A.candidateName}),i.jsx("p",{className:"text-sm text-gray-600",children:A.position}),i.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(_t,{size:14,className:"mr-1"}),A.date.toLocaleDateString("fr-FR")]}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(Rs,{size:14,className:"mr-1"}),A.time," (",A.duration,"min)"]}),i.jsx("span",{children:v(A.type)})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>window.open(`mailto:${A.candidateEmail}`),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Envoyer un email",children:i.jsx(Lr,{size:16})}),i.jsx("button",{onClick:()=>window.open(`tel:${A.candidatePhone}`),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Appeler",children:i.jsx(Mi,{size:16})})]})]},A.id))})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Planifier un entretien"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidat"}),i.jsxs("select",{value:d.candidateId,onChange:A=>f({...d,candidateId:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Sélectionner un candidat"}),t.filter(A=>["Contacted","Interview","Qualified"].includes(A.status)).map(A=>i.jsxs("option",{value:A.id,children:[A.name," - ",A.position]},A.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),i.jsx("input",{type:"date",value:d.date,onChange:A=>f({...d,date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure"}),i.jsx("input",{type:"time",value:d.time,onChange:A=>f({...d,time:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),i.jsxs("select",{value:d.type,onChange:A=>f({...d,type:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"video",children:"Visioconférence"}),i.jsx("option",{value:"phone",children:"Téléphone"}),i.jsx("option",{value:"onsite",children:"Présentiel"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durée (min)"}),i.jsxs("select",{value:d.duration,onChange:A=>f({...d,duration:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:30,children:"30 minutes"}),i.jsx("option",{value:45,children:"45 minutes"}),i.jsx("option",{value:60,children:"1 heure"}),i.jsx("option",{value:90,children:"1h30"}),i.jsx("option",{value:120,children:"2 heures"})]})]})]}),d.type==="onsite"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lieu"}),i.jsx("input",{type:"text",value:d.location,onChange:A=>f({...d,location:A.target.value}),placeholder:"Adresse du rendez-vous",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:d.notes,onChange:A=>f({...d,notes:A.target.value}),rows:3,placeholder:"Notes sur l'entretien...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"flex space-x-4 mt-6",children:[i.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Planifier"})]})]})})]})};class kM{async generateJobDescription(e){await new Promise(u=>setTimeout(u,2e3));const{title:n,department:r,location:s,experience:a,salary:o}=e,l=this.determineJobType(n);return{description:this.generateDescription(n,r,l),requirements:this.generateRequirements(l,a),benefits:this.generateBenefits(s,o),skills:this.generateSkills(l),marketAnalysis:this.generateMarketAnalysis(n,s,o)}}async scoreJobPosting(e){var r,s,a,o,l,u;let n=70;return((r=e.description)==null?void 0:r.length)>200&&(n+=10),((s=e.requirements)==null?void 0:s.length)>=3&&(n+=10),((a=e.benefits)==null?void 0:a.length)>=3&&(n+=10),((o=e.skills)==null?void 0:o.length)>=4&&(n+=5),e.salary&&(n+=5),(l=e.benefits)!=null&&l.some(d=>d.toLowerCase().includes("télétravail"))&&(n+=5),(u=e.benefits)!=null&&u.some(d=>d.toLowerCase().includes("formation"))&&(n+=3),n+=Math.floor(Math.random()*10)-5,Math.min(100,Math.max(60,n))}determineJobType(e){const n=e.toLowerCase();return n.includes("développeur")||n.includes("developer")||n.includes("dev")?"developer":n.includes("product")||n.includes("pm")?"product":n.includes("data")||n.includes("scientist")||n.includes("analyst")?"data":n.includes("design")||n.includes("ux")||n.includes("ui")?"design":n.includes("devops")||n.includes("sre")||n.includes("infrastructure")?"devops":n.includes("marketing")||n.includes("growth")?"marketing":"general"}generateDescription(e,n,r){const s={developer:`Nous recherchons un ${e} passionné pour rejoindre notre équipe ${n||"Engineering"}. Vous contribuerez au développement de solutions innovantes et scalables qui impactent directement nos utilisateurs.

Au quotidien, vous serez amené(e) à :
• Concevoir et développer de nouvelles fonctionnalités
• Collaborer étroitement avec les équipes produit et design
• Participer à l'architecture technique et aux choix technologiques
• Assurer la qualité du code et les bonnes pratiques
• Mentorer les développeurs junior
• Contribuer à l'amélioration continue de nos processus

Rejoignez une équipe dynamique où votre expertise technique sera valorisée et où vous aurez l'opportunité de faire évoluer vos compétences sur des projets à fort impact.`,product:`Nous recherchons un ${e} expérimenté pour piloter la stratégie produit et l'innovation au sein de notre équipe ${n||"Product"}.

Vos missions principales :
• Définir et exécuter la roadmap produit en cohérence avec la vision entreprise
• Analyser les besoins utilisateurs et identifier les opportunités de croissance
• Collaborer avec les équipes engineering, design et data pour livrer des fonctionnalités à impact
• Piloter les métriques produit et optimiser les parcours utilisateurs
• Gérer le backlog et prioriser les développements
• Animer les rituels agiles et faciliter la prise de décision

Poste clé pour façonner l'avenir de nos produits et maximiser la satisfaction utilisateur.`,data:`Rejoignez notre équipe Data en tant que ${e} et contribuez à transformer les données en insights actionnables pour accélérer la croissance de l'entreprise.

Responsabilités :
• Développer et déployer des modèles de machine learning en production
• Analyser de larges volumes de données pour identifier des patterns et opportunités
• Collaborer avec les équipes métier pour traduire les besoins en solutions data
• Construire et maintenir des pipelines de données robustes et scalables
• Créer des dashboards et rapports pour le pilotage business
• Veiller à la qualité et à la gouvernance des données

Opportunité unique de travailler sur des problématiques data variées avec un impact direct sur le business.`,design:`Nous recherchons un ${e} créatif et orienté utilisateur pour concevoir des expériences exceptionnelles et faire évoluer notre design system.

Missions :
• Concevoir des interfaces utilisateur intuitives et esthétiques
• Mener des recherches utilisateurs et des tests d'usabilité
• Collaborer étroitement avec les équipes produit et development
• Faire évoluer et maintenir notre design system
• Prototyper et itérer sur les concepts design
• Assurer la cohérence de l'expérience utilisateur sur tous nos produits

Rejoignez une équipe où le design thinking est au cœur de notre approche produit.`,marketing:`Rejoignez notre équipe Marketing en tant que ${e} et contribuez à accélérer notre croissance et renforcer notre présence sur le marché.

Vos responsabilités :
• Développer et exécuter les stratégies d'acquisition et de rétention
• Gérer les campagnes multi-canaux (digital, content, events)
• Analyser les performances et optimiser les conversions
• Collaborer avec les équipes produit pour le go-to-market
• Créer du contenu engageant et développer la brand awareness
• Piloter les partenariats et relations influenceurs

Poste stratégique pour faire rayonner notre marque et nos produits.`,general:`Nous recherchons un ${e} motivé pour rejoindre notre équipe ${n||""} et contribuer au développement de notre entreprise en pleine croissance.

Missions principales :
• Contribuer activement aux projets stratégiques de l'équipe
• Collaborer avec les différentes parties prenantes internes
• Apporter votre expertise pour optimiser nos processus
• Participer à l'innovation et à l'amélioration continue
• Développer vos compétences dans un environnement stimulant

Opportunité de rejoindre une équipe dynamique avec de réelles perspectives d'évolution.`};return s[r]||s.general}generateRequirements(e,n){const r={developer:["Maîtrise des langages de programmation modernes","Expérience avec les frameworks front-end et/ou back-end","Connaissance des bonnes pratiques de développement","Expérience avec Git et les outils de CI/CD","Capacité à travailler en équipe agile","Anglais technique courant"],product:["Expérience en gestion de produit digital","Maîtrise des méthodologies agiles (Scrum, Kanban)","Compétences analytiques et data-driven","Excellente communication et leadership","Connaissance des outils de product management","Vision business et orienté utilisateur"],data:["Maîtrise de Python, R ou SQL","Expérience en machine learning et statistiques","Connaissance des outils Big Data","Capacité à communiquer des insights complexes","Expérience avec les plateformes cloud","Rigueur et méthode scientifique"],design:["Maîtrise des outils de design (Figma, Sketch)","Expérience en UX research et testing","Connaissance des principes de design système","Portfolio démontrant votre expertise","Capacité à collaborer avec les développeurs","Vision utilisateur et empathie"],marketing:["Expérience en marketing digital","Maîtrise des outils d'analytics et CRM","Compétences en content marketing","Connaissance du growth hacking","Excellente communication écrite et orale","Créativité et orientation résultats"],general:["Formation supérieure pertinente","Excellentes capacités de communication","Capacité d'adaptation et d'apprentissage","Esprit d'équipe et autonomie","Orientation résultats et client"]};let s=[...r[e]||r.general];return(n!=null&&n.includes("Senior")||n!=null&&n.includes("5+")||n!=null&&n.includes("Lead"))&&(s.push("Leadership et mentoring d'équipe"),s.push("Vision stratégique et capacité d'influence")),s.slice(0,6)}generateBenefits(e,n){const r=["Télétravail flexible (2-3 jours/semaine)","Mutuelle premium prise en charge à 100%","Tickets restaurant ou carte repas","Budget formation et conférences (2000€/an)","Équipement informatique au choix","RTT et congés flexibles"],s=["Stock options ou intéressement","Salle de sport ou abonnement fitness","Crèche d'entreprise ou aide garde d'enfants","Vélo ou transport en commun pris en charge","Team building et événements d'équipe","Espace de travail moderne et ergonomique","Café, snacks et fruits à volonté","Horaires flexibles et aménagés","Programme de mobilité internationale","Accompagnement carrière et coaching"];e!=null&&e.toLowerCase().includes("paris")&&(s.push("Prime transport Paris"),s.push("Navette entreprise")),n&&parseInt(n)>70&&(s.push("Package de rémunération attractif"),s.push("Bonus performance"));const a=s.sort(()=>.5-Math.random()).slice(0,3+Math.floor(Math.random()*2));return[...r.slice(0,4),...a].slice(0,7)}generateSkills(e){const n={developer:["JavaScript","TypeScript","React","Node.js","Python","AWS","Docker","Git","SQL","API REST"],product:["Product Management","Analytics","Agile","Scrum","UX/UI","SQL","Figma","Jira","A/B Testing","Growth"],data:["Python","R","SQL","Machine Learning","TensorFlow","Pandas","Spark","AWS","Statistics","Visualization"],design:["Figma","Sketch","Adobe Creative Suite","Prototyping","User Research","Design Thinking","Wireframing","Design System"],marketing:["Google Analytics","Facebook Ads","SEO","Content Marketing","CRM","A/B Testing","Email Marketing","Social Media"],devops:["Docker","Kubernetes","AWS","Terraform","Jenkins","Monitoring","Linux","CI/CD"],general:["Communication","Project Management","Problem Solving","Teamwork","Adaptability"]};return n[e]||n.general}generateMarketAnalysis(e,n,r){const s=[`Le marché pour les ${e} est très dynamique en France, avec une demande forte et des opportunités en croissance.`,`Position très recherchée sur le marché français, particulièrement dans la région ${n||"Île-de-France"}.`,`Profil en tension avec une compétitivité salariale importante. Fourchette ${r||"45-65k€"} alignée sur le marché.`,"Secteur en pleine expansion avec de nombreuses opportunités d'évolution pour ce type de poste."];return s[Math.floor(Math.random()*s.length)]}}const Ey=new kM,CM=()=>{const[t,e]=D.useState([]);D.useState(!1);const[n,r]=D.useState(!1),[s,a]=D.useState(null),[o,l]=D.useState(""),[u,d]=D.useState("all"),[f,m]=D.useState(!1),[g,N]=D.useState({title:"",department:"",location:"",type:"CDI",experience:"",salary:"",description:"",requirements:"",benefits:"",skills:"",closingDate:"",recruiterNotes:"",tags:""}),k=async()=>{if(!g.title){alert("Veuillez spécifier au moins un titre de poste");return}m(!0);try{const M=await Ey.generateJobDescription({title:g.title,department:g.department,location:g.location,experience:g.experience,salary:g.salary});N({...g,description:M.description,requirements:M.requirements.join(`
`),benefits:M.benefits.join(`
`),skills:M.skills.join(", ")})}catch(M){console.error("Erreur génération IA:",M),alert("Erreur lors de la génération IA. Veuillez réessayer.")}finally{m(!1)}},C=async()=>{if(!g.title.trim()){alert("Veuillez saisir un titre de poste");return}const M={title:g.title,company:"Mon Entreprise",department:g.department,location:g.location,type:g.type,experience:g.experience,salary:g.salary,description:g.description,requirements:g.requirements.split(`
`).filter(S=>S.trim()),benefits:g.benefits.split(`
`).filter(S=>S.trim()),skills:g.skills.split(",").map(S=>S.trim()).filter(S=>S),status:"draft",closingDate:g.closingDate?new Date(g.closingDate):void 0,recruiterNotes:g.recruiterNotes,tags:g.tags.split(",").map(S=>S.trim()).filter(S=>S),publishedAt:void 0},j=await Ey.scoreJobPosting(M),w={...M,id:Date.now().toString(),aiScore:j,applications:0,views:0,createdAt:new Date};e([w,...t]),r(!1),N({title:"",department:"",location:"",type:"CDI",experience:"",salary:"",description:"",requirements:"",benefits:"",skills:"",closingDate:"",recruiterNotes:"",tags:""})},I=async M=>{const j=t.map(w=>w.id===M?{...w,status:"published",publishedAt:new Date}:w);e(j)},y=async M=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette offre ?")&&e(t.filter(j=>j.id!==M))},x=M=>{switch(M){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-gray-100 text-gray-800";case"closed":return"bg-red-100 text-red-800";case"paused":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},v=M=>{switch(M){case"published":return"Publiée";case"draft":return"Brouillon";case"closed":return"Fermée";case"paused":return"En pause";default:return M}},R=t.filter(M=>{const j=M.title.toLowerCase().includes(o.toLowerCase())||M.department.toLowerCase().includes(o.toLowerCase()),w=u==="all"||M.status===u;return j&&w}),A={totalJobs:t.length,published:t.filter(M=>M.status==="published").length,totalApplications:t.reduce((M,j)=>M+j.applications,0),averageScore:t.length>0?Math.round(t.reduce((M,j)=>M+j.aiScore,0)/t.length):0};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#ff6a3d] to-[#ff6a3d]/80 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(pf,{className:"mr-3",size:32}),"Gestion des offres d'emploi"]}),i.jsx("p",{className:"text-gray-200",children:"Créez et gérez vos offres avec l'assistance IA pour optimiser l'attractivité"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:A.totalJobs}),i.jsx("div",{className:"text-sm text-gray-200",children:"Offres créées"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Te,{className:"text-green-600",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:A.published}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Offres publiées"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(sn,{className:"text-blue-600",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:A.totalApplications}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Candidatures reçues"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(In,{className:"text-[#9b6bff]",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[A.averageScore,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Score IA moyen"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(Ri,{className:"text-[#ff6a3d]",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:t.reduce((M,j)=>M+j.views,0)}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Vues totales"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Mes offres d'emploi"}),i.jsxs("button",{onClick:()=>r(!0),className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsx("span",{children:"Nouvelle offre IA"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Wi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{type:"text",placeholder:"Rechercher une offre...",value:o,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("select",{value:u,onChange:M=>d(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Tous les statuts"}),i.jsx("option",{value:"published",children:"Publiées"}),i.jsx("option",{value:"draft",children:"Brouillons"}),i.jsx("option",{value:"closed",children:"Fermées"}),i.jsx("option",{value:"paused",children:"En pause"})]})]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:i.jsx("div",{className:"divide-y divide-gray-100",children:R.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(pf,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t.length===0?"Aucune offre créée":"Aucune offre trouvée"}),i.jsx("p",{className:"text-gray-500",children:t.length===0?"Commencez par créer votre première offre d'emploi.":"Aucune offre ne correspond à vos critères de recherche."})]}):R.map(M=>i.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049] text-lg",children:M.title}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(M.status)}`,children:v(M.status)}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:14,className:"text-[#9b6bff]"}),i.jsxs("span",{className:"text-sm font-medium text-[#9b6bff]",children:[M.aiScore,"% IA"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(zo,{size:14}),i.jsx("span",{children:M.location||"Non spécifiée"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx($_,{size:14}),i.jsx("span",{children:M.salary||"Non spécifié"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Rs,{size:14}),i.jsx("span",{children:M.experience||"Non spécifiée"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(sn,{size:14}),i.jsxs("span",{children:[M.applications," candidatures"]})]})]}),M.skills.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[M.skills.slice(0,4).map((j,w)=>i.jsx("span",{className:"px-2 py-1 bg-[#ff6a3d]/10 text-[#ff6a3d] text-xs rounded",children:j},w)),M.skills.length>4&&i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",M.skills.length-4," autres"]})]}),M.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1",children:M.tags.map(j=>i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["#",j]},j))})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>a(M),className:"p-2 text-gray-400 hover:text-[#9b6bff] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir détails",children:i.jsx(Ri,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:i.jsx(Bc,{size:16})}),M.status==="draft"&&i.jsx("button",{onClick:()=>I(M.id),className:"p-2 text-gray-400 hover:text-green-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Publier",children:i.jsx(Te,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-[#ff6a3d] hover:bg-gray-100 rounded-lg transition-colors",title:"Partager",children:i.jsx(N3,{size:16})}),i.jsx("button",{onClick:()=>y(M.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Supprimer",children:i.jsx(Uo,{size:16})})]})]})},M.id))})}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Créer une nouvelle offre"}),i.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"×"})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre du poste *"}),i.jsx("input",{type:"text",value:g.title,onChange:M=>N({...g,title:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Développeur Full-Stack Senior"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Département"}),i.jsx("input",{type:"text",value:g.department,onChange:M=>N({...g,department:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Engineering"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation"}),i.jsx("input",{type:"text",value:g.location,onChange:M=>N({...g,location:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Paris, Remote"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de contrat"}),i.jsxs("select",{value:g.type,onChange:M=>N({...g,type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"CDI",children:"CDI"}),i.jsx("option",{value:"CDD",children:"CDD"}),i.jsx("option",{value:"Stage",children:"Stage"}),i.jsx("option",{value:"Freelance",children:"Freelance"}),i.jsx("option",{value:"Alternance",children:"Alternance"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expérience requise"}),i.jsx("input",{type:"text",value:g.experience,onChange:M=>N({...g,experience:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: 3-5 ans"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fourchette salariale"}),i.jsx("input",{type:"text",value:g.salary,onChange:M=>N({...g,salary:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: 55-70k€"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-[#9b6bff]/10 to-[#ff6a3d]/10 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"font-medium text-[#223049] flex items-center",children:[i.jsx($n,{className:"text-[#9b6bff] mr-2",size:20}),"Génération automatique par IA"]}),i.jsx("button",{onClick:k,disabled:f||!g.title,className:"bg-[#9b6bff] text-white px-4 py-2 rounded-lg hover:bg-[#9b6bff]/90 transition-colors disabled:opacity-50 flex items-center space-x-2",children:f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Génération..."})]}):i.jsxs(i.Fragment,{children:[i.jsx($n,{size:16}),i.jsx("span",{children:"Générer avec l'IA"})]})})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"L'IA va générer automatiquement la description, les prérequis et les avantages basés sur les informations saisies."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description du poste"}),i.jsx("textarea",{value:g.description,onChange:M=>N({...g,description:M.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Description détaillée du poste..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prérequis (un par ligne)"}),i.jsx("textarea",{value:g.requirements,onChange:M=>N({...g,requirements:M.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:`Maîtrise de React
Node.js et TypeScript
Expérience AWS`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Avantages (un par ligne)"}),i.jsx("textarea",{value:g.benefits,onChange:M=>N({...g,benefits:M.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:`Télétravail flexible
Mutuelle premium
Budget formation`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Compétences recherchées (séparées par des virgules)"}),i.jsx("input",{type:"text",value:g.skills,onChange:M=>N({...g,skills:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"React, Node.js, TypeScript, AWS"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de clôture"}),i.jsx("input",{type:"date",value:g.closingDate,onChange:M=>N({...g,closingDate:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (séparés par des virgules)"}),i.jsx("input",{type:"text",value:g.tags,onChange:M=>N({...g,tags:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Tech, Senior, Remote"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes recruteur (privées)"}),i.jsx("textarea",{value:g.recruiterNotes,onChange:M=>N({...g,recruiterNotes:M.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Notes internes sur le poste..."})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>r(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsxs("button",{onClick:C,className:"px-6 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(q_,{size:16}),i.jsx("span",{children:"Enregistrer en brouillon"})]})]})]})]})}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:s.title}),i.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"×"})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.applications}),i.jsx("div",{className:"text-sm text-blue-700",children:"Candidatures"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.views}),i.jsx("div",{className:"text-sm text-green-700",children:"Vues"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[s.aiScore,"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"Score IA"})]})]}),i.jsxs("div",{className:"prose max-w-none",children:[i.jsx("h3",{children:"Description"}),i.jsx("p",{className:"whitespace-pre-wrap",children:s.description||"Aucune description disponible."}),i.jsx("h3",{children:"Prérequis"}),s.requirements.length>0?i.jsx("ul",{children:s.requirements.map((M,j)=>i.jsx("li",{children:M},j))}):i.jsx("p",{children:"Aucun prérequis spécifié."}),i.jsx("h3",{children:"Avantages"}),s.benefits.length>0?i.jsx("ul",{children:s.benefits.map((M,j)=>i.jsx("li",{children:M},j))}):i.jsx("p",{children:"Aucun avantage spécifié."})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>a(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fermer"}),i.jsx("button",{className:"px-4 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Modifier"})]})]})]})})]})};class AM{static async sendInterviewInvitation({candidateEmail:e,candidateName:n,position:r,interviewDate:s,interviewTime:a,duration:o,joinLink:l,recruiterName:u,companyName:d}){try{const f=await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidateEmail:e,candidateName:n,position:r,interviewDate:s,interviewTime:a,duration:o,joinLink:l,recruiterName:u,companyName:d,type:"invitation"})}),m=await f.json();return f.ok?{success:!0,messageId:m.messageId}:(console.error("Erreur envoi email:",m.error),{success:!1,error:m.error||"Erreur lors de l'envoi de l'email"})}catch(f){return console.error("Erreur service email:",f),{success:!1,error:f instanceof Error?f.message:"Erreur de connexion au service d'email"}}}static async sendInterviewReminder({candidateEmail:e,candidateName:n,position:r,interviewDate:s,interviewTime:a,joinLink:o,companyName:l}){try{const u=await fetch("/.netlify/functions/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({candidateEmail:e,candidateName:n,position:r,interviewDate:s,interviewTime:a,joinLink:o,companyName:l,type:"reminder"})}),d=await u.json();return u.ok?{success:!0,messageId:d.messageId}:(console.error("Erreur envoi rappel:",d.error),{success:!1,error:d.error||"Erreur lors de l'envoi du rappel"})}catch(u){return console.error("Erreur service rappel:",u),{success:!1,error:u instanceof Error?u.message:"Erreur de connexion au service d'email"}}}}const gp=class gp{static generateInvitationLink(e,n){const r=this.generateSecureToken(),s=new Date(Date.now()+7*24*60*60*1e3),a={id:`link-${Date.now()}`,sessionId:e,candidateId:n,token:r,expiresAt:s,used:!1,createdAt:new Date};return this.links.set(r,a),{link:`${window.location.origin}/interview/join/${r}`,token:r}}static validateToken(e){const n=this.links.get(e);return n?n.expiresAt<new Date?{valid:!1,error:"Ce lien d'invitation a expiré"}:n.used?{valid:!1,error:"Ce lien a déjà été utilisé"}:{valid:!0,linkData:n}:{valid:!1,error:"Lien invalide ou expiré"}}static markAsUsed(e){const n=this.links.get(e);return n?(n.used=!0,this.links.set(e,n),!0):!1}static getActiveLinks(){return Array.from(this.links.values()).filter(e=>!e.used&&e.expiresAt>new Date).sort((e,n)=>n.createdAt.getTime()-e.createdAt.getTime())}static generateSecureToken(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let s=0;s<32;s++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}static revokeLink(e){return this.links.delete(e)}static cleanupExpiredLinks(){const e=new Date;let n=0;for(const[r,s]of this.links.entries())s.expiresAt<e&&(this.links.delete(r),n++);return n}};gp.links=new Map;let wo=gp;const PM=()=>{const{candidates:t}=Wr(),[e,n]=D.useState(null),[r,s]=D.useState(!1),[a,o]=D.useState(!1),[l,u]=D.useState(!0),[d,f]=D.useState(!0),[m,g]=D.useState(0),[N,k]=D.useState(!1),[C,I]=D.useState([]),[y,x]=D.useState({candidateId:"",scheduledDate:"",duration:60}),[v,R]=D.useState(!1),[A,M]=D.useState(null),[j,w]=D.useState(null),S=D.useRef(null),b=D.useRef(null),P=D.useRef(null);D.useEffect(()=>{let F;return r&&!a&&(F=setInterval(()=>{g(ue=>ue+1)},1e3)),()=>clearInterval(F)},[r,a]);const E=async()=>{try{M(null);const F={video:l?{width:{ideal:1280},height:{ideal:720},facingMode:"user"}:!1,audio:d?{echoCancellation:!0,noiseSuppression:!0}:!1},ue=await navigator.mediaDevices.getUserMedia(F);S.current&&(S.current.srcObject=ue,await S.current.play()),b.current=ue,console.log("✅ Accès caméra/micro réussi")}catch(F){console.error("Erreur accès caméra/micro:",F);const ue=F instanceof Error?F.message:"Erreur inconnue";ue.includes("not found")||ue.includes("NotFoundError")?M("Aucune caméra ou microphone détecté. Vérifiez que vos appareils sont connectés."):ue.includes("denied")||ue.includes("NotAllowedError")?M("Accès refusé. Veuillez autoriser l'accès à la caméra et au microphone dans votre navigateur."):M(`Erreur d'accès aux médias: ${ue}`)}},T=()=>{b.current&&(b.current.getTracks().forEach(F=>F.stop()),b.current=null),S.current&&(S.current.srcObject=null),M(null)},V=async()=>{if(b.current||await E(),b.current)try{const F=new MediaRecorder(b.current);if(P.current=F,F.start(),s(!0),g(0),e){const ue={...e,status:"in_progress"};I(dn=>dn.map(kt=>kt.id===e.id?ue:kt)),n(ue)}}catch(F){console.error("Erreur démarrage enregistrement:",F),alert("Impossible de démarrer l'enregistrement")}},ne=()=>{P.current&&r&&(P.current.pause(),o(!0))},dt=()=>{P.current&&a&&(P.current.resume(),o(!1))},xe=async()=>{if(P.current&&(P.current.stop(),s(!1),o(!1),e)){const F=await B(),ue={...e,status:"completed",aiAnalysis:F};I(dn=>dn.map(kt=>kt.id===e.id?ue:kt)),n(ue),k(!0)}T()},B=async()=>(await new Promise(F=>setTimeout(F,2e3)),{overallScore:75+Math.floor(Math.random()*20),communication:70+Math.floor(Math.random()*25),technicalSkills:65+Math.floor(Math.random()*30),motivation:80+Math.floor(Math.random()*20),culturalFit:75+Math.floor(Math.random()*20),keyInsights:["Communication claire et structurée","Bonne maîtrise technique du domaine","Motivation authentique pour le poste","Bon alignement culturel avec l'entreprise"],recommendations:["Candidat recommandé pour la suite du processus","Approfondir l'évaluation technique","Organiser une rencontre avec l'équipe"],transcription:"Transcription automatique de l'entretien sera disponible ici...",emotions:[{timestamp:60,emotion:"Confiant",confidence:.8},{timestamp:180,emotion:"Concentré",confidence:.85},{timestamp:300,emotion:"Enthousiaste",confidence:.75}]}),Y=()=>{if(u(!l),b.current){const F=b.current.getVideoTracks()[0];F&&(F.enabled=!l)}},Z=()=>{if(f(!d),b.current){const F=b.current.getAudioTracks()[0];F&&(F.enabled=!d)}},pe=async F=>{n(F),await E()},de=F=>{const ue=Math.floor(F/60),dn=F%60;return`${ue.toString().padStart(2,"0")}:${dn.toString().padStart(2,"0")}`},je=()=>{if(!y.candidateId||!y.scheduledDate){alert("Veuillez sélectionner un candidat et une date");return}const F=t.find(dn=>dn.id===y.candidateId);if(!F){alert("Candidat introuvable");return}const ue={id:Date.now().toString(),candidateId:F.id,candidateName:F.name,candidateEmail:F.email,position:F.position,date:new Date(y.scheduledDate),time:new Date(y.scheduledDate).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),duration:y.duration,type:"video",status:"scheduled",notes:"",invitationSent:!1};I([ue,...C]),R(!1),x({candidateId:"",scheduledDate:"",duration:60})},Kt=async F=>{w(F.id);try{const{link:ue,token:dn}=wo.generateInvitationLink(F.id,F.candidateId),kt=await AM.sendInterviewInvitation({candidateEmail:F.candidateEmail,candidateName:F.candidateName,position:F.position,interviewDate:F.date.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),interviewTime:F.time,duration:F.duration,joinLink:ue,recruiterName:"Équipe RH",companyName:"Mon Entreprise"});if(kt.success){const Ms={...F,invitationSent:!0,invitationLink:ue};I(Gi=>Gi.map(Ds=>Ds.id===F.id?Ms:Ds)),alert("Invitation envoyée avec succès !")}else alert(`Erreur lors de l'envoi: ${kt.error}`)}catch(ue){console.error("Erreur envoi invitation:",ue),alert("Erreur lors de l'envoi de l'invitation")}finally{w(null)}},Ft=F=>{navigator.clipboard.writeText(F),alert("Lien copié dans le presse-papiers !")},yt=t.filter(F=>["Contacted","Interview","Qualified"].includes(F.status));return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(os,{className:"mr-3",size:32}),"Studio d'entretiens IA"]}),i.jsx("p",{className:"text-gray-200",children:"Menez vos entretiens avec analyse IA en temps réel et invitations automatiques"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:C.length}),i.jsx("div",{className:"text-sm text-gray-200",children:"Entretiens planifiés"})]})]})}),e?i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-black rounded-xl overflow-hidden aspect-video relative",children:[A?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900 text-white p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(pp,{className:"mx-auto h-12 w-12 text-red-400 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Problème d'accès aux médias"}),i.jsx("p",{className:"text-sm text-gray-300 mb-4",children:A}),i.jsx("button",{onClick:E,className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:"Réessayer"})]})}):i.jsx("video",{ref:S,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qc,{size:16}),i.jsx("span",{children:e.candidateName})]})}),r&&i.jsxs("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-3 py-2 rounded-lg flex items-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),i.jsx("span",{children:de(m)})]}),i.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center space-x-4",children:[i.jsx("button",{onClick:Z,className:`p-3 rounded-full transition-colors ${d?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:d?i.jsx(yf,{size:20}):i.jsx(xf,{size:20})}),i.jsx("button",{onClick:Y,className:`p-3 rounded-full transition-colors ${l?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:l?i.jsx(o3,{size:20}):i.jsx(vf,{size:20})}),r?i.jsxs(i.Fragment,{children:[a?i.jsx("button",{onClick:dt,className:"p-3 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors",children:i.jsx(pi,{size:20})}):i.jsx("button",{onClick:ne,className:"p-3 bg-yellow-500 text-white rounded-full hover:bg-yellow-600 transition-colors",children:i.jsx(W_,{size:20})}),i.jsx("button",{onClick:xe,className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:i.jsx(E3,{size:20})})]}):i.jsx("button",{onClick:V,className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",disabled:!!A,children:i.jsx(pi,{size:20})})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Informations"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Candidat:"}),i.jsx("div",{className:"font-medium",children:e.candidateName})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Poste:"}),i.jsx("div",{className:"font-medium",children:e.position})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Durée prévue:"}),i.jsxs("div",{className:"font-medium",children:[e.duration," minutes"]})]}),e.invitationLink&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Lien candidat:"}),i.jsx("div",{className:"flex items-center space-x-2 mt-1",children:i.jsxs("button",{onClick:()=>Ft(e.invitationLink),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded flex items-center space-x-1",children:[i.jsx(gf,{size:12}),i.jsx("span",{children:"Copier"})]})})]})]})]}),r&&i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6",children:[i.jsxs("h3",{className:"font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(Fn,{className:"text-purple-500 mr-2",size:20}),"IA en temps réel"]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Communication:"}),i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full w-4/5"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Confiance:"}),i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full w-3/4"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Engagement:"}),i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-purple-500 h-2 rounded-full w-4/5"})})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Notes d'entretien"}),i.jsx("textarea",{rows:4,placeholder:"Prenez vos notes ici...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),i.jsx("div",{className:"space-y-3",children:i.jsx("button",{onClick:()=>n(null),className:"w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Quitter l'entretien"})})]})]}):i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Entretiens programmés"}),i.jsxs("button",{onClick:()=>R(!0),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors flex items-center space-x-2",children:[i.jsx(_t,{size:16}),i.jsx("span",{children:"Planifier entretien"})]})]})}),i.jsx("div",{className:"divide-y divide-gray-100",children:C.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(os,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun entretien planifié"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"Planifiez votre premier entretien pour commencer."}),yt.length===0&&i.jsx("p",{className:"text-sm text-gray-400",children:`Aucun candidat éligible. Ajoutez d'abord des candidats avec le statut "Contacté" ou "Entretien".`})]}):C.map(F=>i.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049]",children:F.candidateName}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.status==="completed"?"bg-green-100 text-green-800":F.status==="in_progress"?"bg-blue-100 text-blue-800":F.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:F.status==="completed"?"Terminé":F.status==="in_progress"?"En cours":F.status==="scheduled"?"Planifié":"Annulé"}),F.invitationSent&&i.jsx(Te,{size:14,className:"text-green-500",title:"Invitation envoyée"}),F.aiAnalysis&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Fn,{size:14,className:"text-purple-500"}),i.jsxs("span",{className:"text-sm font-medium text-purple-500",children:[F.aiAnalysis.overallScore,"%"]})]})]}),i.jsx("p",{className:"text-gray-600 mb-2",children:F.position}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(_t,{size:14}),i.jsx("span",{children:F.date.toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Rs,{size:14}),i.jsxs("span",{children:[F.time," (",F.duration,"min)"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(qc,{size:14}),i.jsx("span",{children:F.candidateEmail})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[F.status==="scheduled"&&!F.invitationSent&&i.jsxs("button",{onClick:()=>Kt(F),disabled:j===F.id,className:"bg-[#ff6a3d] text-white px-3 py-1 rounded text-sm hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-1 disabled:opacity-50",children:[j===F.id?i.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):i.jsx(b3,{size:12}),i.jsx("span",{children:"Inviter"})]}),F.invitationLink&&i.jsx("button",{onClick:()=>Ft(F.invitationLink),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Copier le lien d'invitation",children:i.jsx(gf,{size:14})}),F.invitationLink&&i.jsx("a",{href:F.invitationLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-green-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Ouvrir le lien d'invitation",children:i.jsx(h3,{size:14})}),F.status==="scheduled"&&F.invitationSent&&i.jsxs("button",{onClick:()=>pe(F),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[i.jsx(pi,{size:16}),i.jsx("span",{children:"Démarrer"})]}),F.aiAnalysis&&i.jsx("button",{onClick:()=>{n(F),k(!0)},className:"text-purple-500 hover:text-purple-600 p-2 rounded-lg hover:bg-gray-100",title:"Voir l'analyse IA",children:i.jsx(Fn,{size:16})})]})]})},F.id))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Statistiques"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Total entretiens"}),i.jsx("span",{className:"font-semibold",children:C.length})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Invitations envoyées"}),i.jsx("span",{className:"font-semibold text-green-600",children:C.filter(F=>F.invitationSent).length})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Terminés"}),i.jsx("span",{className:"font-semibold text-blue-600",children:C.filter(F=>F.status==="completed").length})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Candidats éligibles"}),i.jsx("span",{className:"font-semibold text-purple-600",children:yt.length})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Fonctionnalités IA"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Te,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Invitations automatiques par email"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Te,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Liens sécurisés uniques"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Te,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Analyse comportementale temps réel"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Te,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Transcription automatique"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Te,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Scoring multi-critères"})]})]})]})]})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Planifier un entretien"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidat *"}),i.jsxs("select",{value:y.candidateId,onChange:F=>x({...y,candidateId:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Sélectionner un candidat"}),yt.map(F=>i.jsxs("option",{value:F.id,children:[F.name," - ",F.position]},F.id))]}),yt.length===0&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Aucun candidat éligible. Ajoutez des candidats avec le statut "Contacté" ou "Entretien".'})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date et heure *"}),i.jsx("input",{type:"datetime-local",value:y.scheduledDate,onChange:F=>x({...y,scheduledDate:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durée (minutes)"}),i.jsxs("select",{value:y.duration,onChange:F=>x({...y,duration:Number(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[i.jsx("option",{value:30,children:"30 minutes"}),i.jsx("option",{value:45,children:"45 minutes"}),i.jsx("option",{value:60,children:"1 heure"}),i.jsx("option",{value:90,children:"1h30"})]})]})]}),i.jsxs("div",{className:"flex space-x-4 mt-6",children:[i.jsx("button",{onClick:()=>R(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:je,disabled:!y.candidateId||!y.scheduledDate,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Planifier"})]})]})}),N&&(e==null?void 0:e.aiAnalysis)&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#223049] flex items-center",children:[i.jsx(Fn,{className:"text-purple-500 mr-2",size:24}),"Analyse IA - ",e.candidateName]}),i.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"×"})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:[e.aiAnalysis.overallScore,"%"]}),i.jsx("div",{className:"text-gray-600",children:"Score global"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[e.aiAnalysis.communication,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Communication"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.aiAnalysis.technicalSkills,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Compétences"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[e.aiAnalysis.motivation,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Motivation"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[e.aiAnalysis.culturalFit,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Fit culturel"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Insights clés"}),i.jsx("ul",{className:"space-y-2",children:e.aiAnalysis.keyInsights.map((F,ue)=>i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx(Te,{size:16,className:"text-green-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700",children:F})]},ue))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Recommandations"}),i.jsx("ul",{className:"space-y-2",children:e.aiAnalysis.recommendations.map((F,ue)=>i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx(In,{size:16,className:"text-blue-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700",children:F})]},ue))})]}),i.jsx("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"Fermer"})})]})]})})]})},RM=()=>{const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,a]=D.useState(!1),[o,l]=D.useState(!1),[u,d]=D.useState(null),[f,m]=D.useState("rules"),[g,N]=D.useState("all"),[k,C]=D.useState({name:"",description:"",triggerType:"candidate_added",triggerConditions:{},actions:[],category:"workflow"}),[I,y]=D.useState({name:"",subject:"",content:"",category:"general"}),x=async b=>{e(P=>P.map(E=>E.id===b?{...E,isActive:!E.isActive}:E))},v=async b=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette automatisation ?")&&e(P=>P.filter(E=>E.id!==b))},R=()=>{if(!k.name.trim()){alert("Veuillez saisir un nom pour la règle");return}const b={id:Date.now().toString(),name:k.name,description:k.description,trigger:{type:k.triggerType,conditions:k.triggerConditions},actions:[],isActive:!0,category:k.category,createdAt:new Date,runsCount:0,successRate:100};e([b,...t]),a(!1),C({name:"",description:"",triggerType:"candidate_added",triggerConditions:{},actions:[],category:"workflow"})},A=()=>{if(!I.name.trim()||!I.subject.trim()){alert("Veuillez remplir le nom et le sujet du template");return}const b={id:Date.now().toString(),name:I.name,subject:I.subject,content:I.content,variables:M(I.content+" "+I.subject),category:I.category,usage:0};r([b,...n]),l(!1),y({name:"",subject:"",content:"",category:"general"})},M=b=>{const P=/\{\{([^}]+)\}\}/g,E=[];let T;for(;(T=P.exec(b))!==null;)E.includes(T[1])||E.push(T[1]);return E},j=b=>{switch(b){case"communication":return"bg-blue-100 text-blue-800";case"workflow":return"bg-green-100 text-green-800";case"notifications":return"bg-yellow-100 text-yellow-800";case"scoring":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},w=t.filter(b=>g==="all"||b.category===g),S={totalRules:t.length,activeRules:t.filter(b=>b.isActive).length,totalRuns:t.reduce((b,P)=>b+P.runsCount,0),averageSuccessRate:t.length>0?Math.round(t.reduce((b,P)=>b+P.successRate,0)/t.length):0};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#9b6bff] to-purple-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx($n,{className:"mr-3",size:32}),"Hub d'automatisation RH"]}),i.jsx("p",{className:"text-gray-200",children:"Automatisez vos tâches répétitives et optimisez votre workflow de recrutement"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:S.activeRules}),i.jsx("div",{className:"text-sm text-gray-200",children:"Règles actives"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx($n,{className:"text-[#9b6bff]",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:S.totalRules}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Règles créées"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Te,{className:"text-green-600",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:S.totalRuns}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Exécutions totales"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(In,{className:"text-blue-600",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[S.averageSuccessRate,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Taux de succès"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(Lr,{className:"text-[#ff6a3d]",size:24})}),i.jsx(qe,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.length}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Templates email"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("div",{className:"flex space-x-8 px-6",children:[i.jsx("button",{onClick:()=>m("rules"),className:`py-4 border-b-2 font-medium text-sm ${f==="rules"?"border-[#9b6bff] text-[#9b6bff]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Règles d'automatisation"}),i.jsx("button",{onClick:()=>m("templates"),className:`py-4 border-b-2 font-medium text-sm ${f==="templates"?"border-[#9b6bff] text-[#9b6bff]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Templates d'emails"}),i.jsx("button",{onClick:()=>m("analytics"),className:`py-4 border-b-2 font-medium text-sm ${f==="analytics"?"border-[#9b6bff] text-[#9b6bff]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Analytics"})]})}),i.jsxs("div",{className:"p-6",children:[f==="rules"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Règles d'automatisation"}),i.jsxs("select",{value:g,onChange:b=>N(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Toutes les catégories"}),i.jsx("option",{value:"communication",children:"Communication"}),i.jsx("option",{value:"workflow",children:"Workflow"}),i.jsx("option",{value:"notifications",children:"Notifications"}),i.jsx("option",{value:"scoring",children:"Scoring"})]})]}),i.jsxs("button",{onClick:()=>a(!0),className:"bg-[#9b6bff] text-white px-4 py-2 rounded-lg hover:bg-[#9b6bff]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsx("span",{children:"Nouvelle règle"})]})]}),i.jsx("div",{className:"space-y-4",children:w.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx($n,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune règle trouvée"}),i.jsx("p",{className:"text-gray-500",children:g==="all"?"Créez votre première règle d'automatisation.":"Aucune règle dans cette catégorie."})]}):w.map(b=>i.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049]",children:b.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(b.category)}`,children:b.category}),i.jsxs("div",{className:"flex items-center space-x-1",children:[b.isActive?i.jsx(Te,{size:16,className:"text-green-500"}):i.jsx(pp,{size:16,className:"text-gray-400"}),i.jsx("span",{className:`text-sm ${b.isActive?"text-green-600":"text-gray-500"}`,children:b.isActive?"Active":"Inactive"})]})]}),i.jsx("p",{className:"text-gray-600 mb-3",children:b.description}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(pi,{size:14}),i.jsxs("span",{children:[b.runsCount," exécutions"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:14}),i.jsxs("span",{children:[b.successRate,"% succès"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Rs,{size:14}),i.jsx("span",{children:b.lastRun?`Dernière: ${b.lastRun.toLocaleDateString("fr-FR")}`:"Jamais exécutée"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(_t,{size:14}),i.jsxs("span",{children:["Créée: ",b.createdAt.toLocaleDateString("fr-FR")]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>x(b.id),className:`p-2 rounded-lg transition-colors ${b.isActive?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-100"}`,title:b.isActive?"Désactiver":"Activer",children:b.isActive?i.jsx(W_,{size:16}):i.jsx(pi,{size:16})}),i.jsx("button",{onClick:()=>d(b),className:"p-2 text-gray-400 hover:text-[#9b6bff] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir détails",children:i.jsx(Ri,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:i.jsx(Bc,{size:16})}),i.jsx("button",{onClick:()=>v(b.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Supprimer",children:i.jsx(Uo,{size:16})})]})]})},b.id))})]}),f==="templates"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Templates d'emails"}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-[#ff6a3d] text-white px-4 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsx("span",{children:"Nouveau template"})]})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.length===0?i.jsxs("div",{className:"md:col-span-2 text-center py-12",children:[i.jsx(Lr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun template"}),i.jsx("p",{className:"text-gray-500",children:"Créez votre premier template d'email."})]}):n.map(b=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-1",children:b.name}),i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:b.category})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Dupliquer",children:i.jsx(gf,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:i.jsx(Bc,{size:16})})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sujet:"}),i.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded border",children:b.subject})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Aperçu:"}),i.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded border line-clamp-3",children:[b.content.substring(0,150),"..."]})]}),i.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("span",{children:["Variables: ",b.variables.length]}),i.jsxs("span",{children:["Utilisé: ",b.usage," fois"]})]})})]},b.id))})]}),f==="analytics"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Analytics d'automatisation"}),t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Mu,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune donnée"}),i.jsx("p",{className:"text-gray-500",children:"Créez des règles d'automatisation pour voir les analytics."})]}):i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Règles actives"}),i.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:S.activeRules}),i.jsxs("div",{className:"text-sm text-green-700",children:["sur ",S.totalRules," créées"]})]}),i.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Exécutions totales"}),i.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:S.totalRuns}),i.jsx("div",{className:"text-sm text-blue-700",children:"depuis la création"})]}),i.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-purple-800 mb-2",children:"Taux de succès"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[S.averageSuccessRate,"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"moyenne globale"})]})]})]})]})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Créer une règle d'automatisation"})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la règle *"}),i.jsx("input",{type:"text",value:k.name,onChange:b=>C({...k,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",placeholder:"ex: Notification nouveaux candidats"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:k.description,onChange:b=>C({...k,description:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",placeholder:"Décrivez ce que fait cette règle..."})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Déclencheur"}),i.jsxs("select",{value:k.triggerType,onChange:b=>C({...k,triggerType:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"candidate_added",children:"Nouveau candidat ajouté"}),i.jsx("option",{value:"status_changed",children:"Changement de statut"}),i.jsx("option",{value:"interview_scheduled",children:"Entretien planifié"}),i.jsx("option",{value:"score_threshold",children:"Seuil de score atteint"}),i.jsx("option",{value:"deadline_approaching",children:"Échéance approche"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catégorie"}),i.jsxs("select",{value:k.category,onChange:b=>C({...k,category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"communication",children:"Communication"}),i.jsx("option",{value:"workflow",children:"Workflow"}),i.jsx("option",{value:"notifications",children:"Notifications"}),i.jsx("option",{value:"scoring",children:"Scoring"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:R,className:"px-4 py-2 bg-[#9b6bff] text-white rounded-lg hover:bg-[#9b6bff]/90 transition-colors",children:"Créer la règle"})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Créer un template d'email"})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du template *"}),i.jsx("input",{type:"text",value:I.name,onChange:b=>y({...I,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Confirmation entretien"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catégorie"}),i.jsxs("select",{value:I.category,onChange:b=>y({...I,category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"candidature",children:"Candidature"}),i.jsx("option",{value:"entretien",children:"Entretien"}),i.jsx("option",{value:"relance",children:"Relance"}),i.jsx("option",{value:"refus",children:"Refus"}),i.jsx("option",{value:"general",children:"Général"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sujet de l'email *"}),i.jsx("input",{type:"text",value:I.subject,onChange:b=>y({...I,subject:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Votre candidature chez {{company_name}}"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contenu de l'email"}),i.jsx("textarea",{value:I.content,onChange:b=>y({...I,content:b.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:`Bonjour {{candidate_name}},

Nous avons bien reçu votre candidature...

Utilisez {{variable_name}} pour insérer des variables dynamiques.`})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Variables disponibles"}),i.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[i.jsxs("div",{children:[{candidate_name}," - Nom du candidat"]}),i.jsxs("div",{children:[{position}," - Poste"]}),i.jsxs("div",{children:[{company_name}," - Nom de l'entreprise"]}),i.jsxs("div",{children:[{recruiter_name}," - Nom du recruteur"]}),i.jsxs("div",{children:[{interview_date}," - Date d'entretien"]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:A,className:"px-4 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Créer le template"})]})]})})]})},Ty=()=>{const{currentUser:t}=Hr(),[e,n]=D.useState("dashboard"),[r,s]=D.useState(null),[a,o]=D.useState(!1);if(!t)return i.jsx(KE,{to:"/\\",replace:!0});const l=m=>{s(m),o(!0)},u=m=>{s(m),o(!0)},d=()=>{o(!1),s(null)},f=()=>{switch(e){case"dashboard":return i.jsx(py,{});case"candidates":return i.jsx(pM,{onSelectCandidate:l,onEditCandidate:u});case"sourcing":return i.jsx(EM,{});case"pipeline":return i.jsx(TM,{});case"jobs":return i.jsx(CM,{});case"interviews":return i.jsx(PM,{});case"automation":return i.jsx(RM,{});case"analytics":return i.jsx(SM,{});case"calendar":return i.jsx(IM,{});case"settings":return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049] mb-6",children:"Paramètres"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-4",children:"Profil utilisateur"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom d'affichage"}),i.jsx("input",{type:"text",value:t.displayName||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:t.email||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readOnly:!0})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-4",children:"Préférences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:"Notifications email"}),i.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:"Mode sombre"}),i.jsx("input",{type:"checkbox",className:"toggle"})]})]})]})]})]});default:return i.jsx(py,{})}};return i.jsxs("div",{className:"min-h-screen bg-[#f4f0ec]",children:[i.jsx(D3,{activeTab:e,setActiveTab:n}),i.jsx("div",{className:"ml-64 p-8",children:f()}),a&&i.jsx(xM,{candidate:r,onClose:d,onSave:()=>{}})]})},MM=({onToggleMode:t})=>{const[e,n]=D.useState(""),[r,s]=D.useState(""),[a,o]=D.useState(!1),[l,u]=D.useState(""),[d,f]=D.useState(!1),{login:m}=Hr(),g=So(),N=async k=>{k.preventDefault();try{u(""),f(!0),await m(e,r),g("/dashboard")}catch{u("Échec de la connexion. Vérifiez vos identifiants.")}finally{f(!1)}};return i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#223049]",children:"oya"}),i.jsx("p",{className:"text-sm text-gray-600 -mt-1",children:"intelligence"})]})]}),i.jsx("h2",{className:"text-xl font-semibold text-[#223049] mb-2",children:"Connexion"}),i.jsx("p",{className:"text-gray-600",children:"Accédez à votre plateforme IA RH"})]}),l&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:l}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"email",value:e,onChange:k=>n(k.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"votre-email@entreprise.com",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(H_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:a?"text":"password",value:r,onChange:k=>s(k.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?i.jsx(B_,{size:20}):i.jsx(Ri,{size:20})})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-[#ff6a3d] text-white py-3 px-4 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:d?"Connexion...":"Se connecter"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-gray-600",children:["Pas encore de compte ?"," ",i.jsx("button",{onClick:t,className:"text-[#ff6a3d] hover:text-[#ff6a3d]/80 font-medium",children:"Créer un compte"})]})}),i.jsxs("div",{className:"mt-6 p-4 bg-[#f4f0ec] rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Compte de démonstration :"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Email: demo@oya-intelligence.com"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Mot de passe: demo123"})]})]})})},DM=({onToggleMode:t})=>{const[e,n]=D.useState(""),[r,s]=D.useState(""),[a,o]=D.useState(""),[l,u]=D.useState(!1),[d,f]=D.useState(""),[m,g]=D.useState(!1),{register:N}=Hr(),k=So(),C=async I=>{if(I.preventDefault(),r.length<6)return f("Le mot de passe doit contenir au moins 6 caractères");try{f(""),g(!0),await N(e,r,a),k("/dashboard")}catch{f("Impossible de créer le compte")}finally{g(!1)}};return i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#223049]",children:"oya"}),i.jsx("p",{className:"text-sm text-gray-600 -mt-1",children:"intelligence"})]})]}),i.jsx("h2",{className:"text-xl font-semibold text-[#223049] mb-2",children:"Créer un compte"}),i.jsx("p",{className:"text-gray-600",children:"Rejoignez la révolution IA RH"})]}),d&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet"}),i.jsxs("div",{className:"relative",children:[i.jsx(qc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",value:a,onChange:I=>o(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Votre nom complet",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Lr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"email",value:e,onChange:I=>n(I.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"votre-email@entreprise.com",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(H_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:l?"text":"password",value:r,onChange:I=>s(I.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"••••••••",required:!0}),i.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?i.jsx(B_,{size:20}):i.jsx(Ri,{size:20})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 caractères"})]}),i.jsx("button",{type:"submit",disabled:m,className:"w-full bg-[#ff6a3d] text-white py-3 px-4 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:m?"Création...":"Créer mon compte"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-gray-600",children:["Déjà un compte ?"," ",i.jsx("button",{onClick:t,className:"text-[#ff6a3d] hover:text-[#ff6a3d]/80 font-medium",children:"Se connecter"})]})})]})})},OM=()=>{const[t,e]=D.useState(!0);return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f4f0ec] to-white flex items-center justify-center px-4",children:i.jsxs("div",{className:"w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[i.jsx("div",{className:"hidden lg:block",children:i.jsxs("div",{className:"max-w-lg",children:[i.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:["Transformez votre",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff]",children:" recrutement"})]}),i.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"La plateforme IA stratégique qui automatise 80% de votre processus de recrutement tout en supprimant les intermédiaires coûteux."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"ROI jusqu'à +1133%"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"-50% temps RH"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"Suppression des cabinets"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"IA 24/7"})]})]})]})}),i.jsx("div",{children:t?i.jsx(MM,{onToggleMode:()=>e(!1)}):i.jsx(DM,{onToggleMode:()=>e(!0)})})]})})},LM=()=>{const{token:t}=ME(),e=So(),[n,r]=D.useState(null),[s,a]=D.useState(null),[o,l]=D.useState(""),[u,d]=D.useState({name:"",email:""}),[f,m]=D.useState(!1),[g,N]=D.useState(!0),[k,C]=D.useState(!0),[I,y]=D.useState(!1),[x,v]=D.useState(!1),R=D.useRef(null),A=D.useRef(null);D.useEffect(()=>{t&&M()},[t]),D.useEffect(()=>{n&&u.name&&j()},[n,u]);const M=()=>{if(!t){r(!1),l("Lien d'invitation manquant");return}const E=wo.validateToken(t);if(!E.valid){r(!1),l(E.error||"Lien invalide");return}r(!0),a(E.linkData),d({name:"Candidat Test",email:"candidat@example.com"})},j=async()=>{try{const E={video:g?{width:{ideal:1280},height:{ideal:720},facingMode:"user"}:!1,audio:k?{echoCancellation:!0,noiseSuppression:!0}:!1},T=await navigator.mediaDevices.getUserMedia(E);R.current&&(R.current.srcObject=T,await R.current.play()),A.current=T,m(!0)}catch(E){console.error("Erreur accès média:",E),l("Impossible d'accéder à la caméra ou au microphone. Vérifiez les permissions de votre navigateur.")}},w=()=>{if(N(!g),A.current){const E=A.current.getVideoTracks()[0];E&&(E.enabled=!g)}},S=()=>{if(C(!k),A.current){const E=A.current.getAudioTracks()[0];E&&(E.enabled=!k)}},b=async()=>{if(t){y(!0);try{wo.markAsUsed(t),await new Promise(E=>setTimeout(E,2e3)),v(!0),y(!1)}catch{y(!1),l("Erreur lors de la connexion à l'entretien")}}},P=()=>{A.current&&A.current.getTracks().forEach(E=>E.stop()),e("/")};return n===!1?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(pp,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Lien invalide"}),i.jsx("p",{className:"text-gray-600 mb-6",children:o}),i.jsx("button",{onClick:()=>e("/"),className:"bg-[#ff6a3d] text-white px-6 py-3 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Retour à l'accueil"})]})}):n===null?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):x?i.jsxs("div",{className:"min-h-screen bg-black flex flex-col",children:[i.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-white text-sm",children:"En direct"})]}),i.jsxs("div",{className:"text-white",children:[i.jsx("span",{className:"font-medium",children:u.name}),i.jsx("span",{className:"text-gray-400 ml-2",children:"• Entretien en cours"})]})]}),i.jsxs("button",{onClick:P,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center space-x-2",children:[i.jsx(Mi,{size:16}),i.jsx("span",{children:"Quitter"})]})]}),i.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[i.jsx("video",{ref:R,autoPlay:!0,muted:!0,className:"max-w-full max-h-full object-cover rounded-lg"}),i.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex items-center space-x-4",children:[i.jsx("button",{onClick:S,className:`p-3 rounded-full transition-colors ${k?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:k?i.jsx(yf,{size:20}):i.jsx(xf,{size:20})}),i.jsx("button",{onClick:w,className:`p-3 rounded-full transition-colors ${g?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:g?i.jsx(os,{size:20}):i.jsx(vf,{size:20})})]})]}),i.jsx("div",{className:"bg-gray-900 p-4 text-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"Entretien en cours • Le recruteur vous rejoindra sous peu"})})]}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-[#223049]",children:"OYA Intelligence"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Studio d'entretien"})]})]})})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Aperçu vidéo"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Vérifiez votre caméra et microphone avant de rejoindre"})]}),i.jsxs("div",{className:"relative bg-black aspect-video",children:[f?i.jsx("video",{ref:R,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(os,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-white",children:"Chargement de la caméra..."})]})}),i.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center space-x-4",children:[i.jsx("button",{onClick:S,className:`p-3 rounded-full transition-colors ${k?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:k?i.jsx(yf,{size:20}):i.jsx(xf,{size:20})}),i.jsx("button",{onClick:w,className:`p-3 rounded-full transition-colors ${g?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:g?i.jsx(os,{size:20}):i.jsx(vf,{size:20})})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Détails de l'entretien"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(qc,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:"Candidat:"}),i.jsx("span",{className:"font-medium",children:u.name})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(_t,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:"Date:"}),i.jsx("span",{className:"font-medium",children:"Aujourd'hui"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Rs,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:"Durée:"}),i.jsx("span",{className:"font-medium",children:"60 minutes"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"État de préparation"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Te,{className:"text-green-500",size:16}),i.jsx("span",{className:"text-sm text-gray-700",children:"Lien d'invitation valide"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[f?i.jsx(Te,{className:"text-green-500\\",size:16}):i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#ff6a3d]"}),i.jsx("span",{className:"text-sm text-gray-700",children:f?"Média prêt":"Configuration média..."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("button",{onClick:b,disabled:!f||I,className:"w-full bg-[#ff6a3d] text-white py-4 px-6 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 font-semibold",children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),i.jsx("span",{children:"Connexion..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(os,{size:20}),i.jsx("span",{children:"Rejoindre l'entretien"})]})}),!f&&i.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Veuillez autoriser l'accès à votre caméra et microphone"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Instructions"}),i.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[i.jsx("li",{children:"• Assurez-vous d'être dans un endroit calme"}),i.jsx("li",{children:"• Vérifiez votre connexion internet"}),i.jsx("li",{children:"• Préparez vos questions sur le poste"}),i.jsx("li",{children:"• Ayez votre CV à portée de main"})]})]})]})]})})]})},VM=()=>{const{currentUser:t}=Hr();return i.jsx(rT,{children:i.jsxs(YE,{children:[i.jsx(wa,{path:"/",element:t?i.jsx(Ty,{}):i.jsx(M3,{})}),i.jsx(wa,{path:"/auth",element:i.jsx(OM,{})}),i.jsx(wa,{path:"/dashboard",element:i.jsx(Ty,{})}),i.jsx(wa,{path:"/interview/join/:token",element:i.jsx(LM,{})})]})})};function FM(){return i.jsx(n3,{children:i.jsx(VM,{})})}Fw(document.getElementById("root")).render(i.jsx(D.StrictMode,{children:i.jsx(FM,{})}));
