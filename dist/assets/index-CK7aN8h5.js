function U2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function $2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ly={exports:{}},Kc={},Vy={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),B2=Symbol.for("react.portal"),q2=Symbol.for("react.fragment"),H2=Symbol.for("react.strict_mode"),W2=Symbol.for("react.profiler"),G2=Symbol.for("react.provider"),K2=Symbol.for("react.context"),Q2=Symbol.for("react.forward_ref"),Y2=Symbol.for("react.suspense"),J2=Symbol.for("react.memo"),X2=Symbol.for("react.lazy"),wg=Symbol.iterator;function Z2(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var Fy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zy=Object.assign,Uy={};function Vi(t,e,n){this.props=t,this.context=e,this.refs=Uy,this.updater=n||Fy}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $y(){}$y.prototype=Vi.prototype;function Nf(t,e,n){this.props=t,this.context=e,this.refs=Uy,this.updater=n||Fy}var jf=Nf.prototype=new $y;jf.constructor=Nf;zy(jf,Vi.prototype);jf.isPureReactComponent=!0;var bg=Array.isArray,By=Object.prototype.hasOwnProperty,Ef={current:null},qy={key:!0,ref:!0,__self:!0,__source:!0};function Hy(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)By.call(e,r)&&!qy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:jo,type:t,key:a,ref:o,props:s,_owner:Ef.current}}function eN(t,e){return{$$typeof:jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tf(t){return typeof t=="object"&&t!==null&&t.$$typeof===jo}function tN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _g=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tN(""+t.key):e.toString(36)}function Cl(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jo:case B2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+id(o,0):r,bg(s)?(n="",t!=null&&(n=t.replace(_g,"$&/")+"/"),Cl(s,e,n,"",function(d){return d})):s!=null&&(Tf(s)&&(s=eN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_g,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",bg(t))for(var l=0;l<t.length;l++){a=t[l];var u=r+id(a,l);o+=Cl(a,e,n,u,s)}else if(u=Z2(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=r+id(a,l++),o+=Cl(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function al(t,e,n){if(t==null)return t;var r=[],s=0;return Cl(t,r,"","",function(a){return e.call(n,a,s++)}),r}function nN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Al={transition:null},rN={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Al,ReactCurrentOwner:Ef};function Wy(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:al,forEach:function(t,e,n){al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return al(t,function(){e++}),e},toArray:function(t){return al(t,function(e){return e})||[]},only:function(t){if(!Tf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Vi;se.Fragment=q2;se.Profiler=W2;se.PureComponent=Nf;se.StrictMode=H2;se.Suspense=Y2;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rN;se.act=Wy;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zy({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Ef.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)By.call(e,u)&&!qy.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:jo,type:t.type,key:s,ref:a,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:K2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G2,_context:t},t.Consumer=t};se.createElement=Hy;se.createFactory=function(t){var e=Hy.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Q2,render:t}};se.isValidElement=Tf;se.lazy=function(t){return{$$typeof:X2,_payload:{_status:-1,_result:t},_init:nN}};se.memo=function(t,e){return{$$typeof:J2,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=Al.transition;Al.transition={};try{t()}finally{Al.transition=e}};se.unstable_act=Wy;se.useCallback=function(t,e){return xt.current.useCallback(t,e)};se.useContext=function(t){return xt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};se.useEffect=function(t,e){return xt.current.useEffect(t,e)};se.useId=function(){return xt.current.useId()};se.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return xt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};se.useRef=function(t){return xt.current.useRef(t)};se.useState=function(t){return xt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return xt.current.useTransition()};se.version="18.3.1";Vy.exports=se;var D=Vy.exports;const sN=$2(D),iN=U2({__proto__:null,default:sN},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN=D,oN=Symbol.for("react.element"),lN=Symbol.for("react.fragment"),cN=Object.prototype.hasOwnProperty,uN=aN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dN={key:!0,ref:!0,__self:!0,__source:!0};function Gy(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cN.call(e,r)&&!dN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oN,type:t,key:a,ref:o,props:s,_owner:uN.current}}Kc.Fragment=lN;Kc.jsx=Gy;Kc.jsxs=Gy;Ly.exports=Kc;var i=Ly.exports,Ky={exports:{}},Vt={},Qy={exports:{}},Yy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var ge=Z-1>>>1,he=B[ge];if(0<s(he,Y))B[ge]=Y,B[Z]=he,Z=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var ge=0,he=B.length,Ee=he>>>1;ge<Ee;){var Qt=2*(ge+1)-1,zt=B[Qt],vt=Qt+1,F=B[vt];if(0>s(zt,Z))vt<he&&0>s(F,zt)?(B[ge]=F,B[vt]=Z,ge=vt):(B[ge]=zt,B[Qt]=Z,ge=Qt);else if(vt<he&&0>s(F,Z))B[ge]=F,B[vt]=Z,ge=vt;else break e}}return Y}function s(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,m=null,g=3,N=!1,k=!1,C=!1,I=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function R(B){if(C=!1,v(B),!k)if(n(u)!==null)k=!0,ht(A);else{var Y=n(d);Y!==null&&ye(R,Y.startTime-B)}}function A(B,Y){k=!1,C&&(C=!1,y(w),w=-1),N=!0;var Z=g;try{for(v(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!P());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var he=ge(m.expirationTime<=Y);Y=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(u)&&r(u),v(Y)}else r(u);m=n(u)}if(m!==null)var Ee=!0;else{var Qt=n(d);Qt!==null&&ye(R,Qt.startTime-Y),Ee=!1}return Ee}finally{m=null,g=Z,N=!1}}var M=!1,j=null,w=-1,S=5,b=-1;function P(){return!(t.unstable_now()-b<S)}function E(){if(j!==null){var B=t.unstable_now();b=B;var Y=!0;try{Y=j(!0,B)}finally{Y?T():(M=!1,j=null)}}else M=!1}var T;if(typeof x=="function")T=function(){x(E)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,ne=V.port2;V.port1.onmessage=E,T=function(){ne.postMessage(null)}}else T=function(){I(E,0)};function ht(B){j=B,M||(M=!0,T())}function ye(B,Y){w=I(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,ht(A))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var Z=g;g=Y;try{return B()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=g;g=B;try{return Y()}finally{g=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var ge=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ge+Z:ge):Z=ge,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Z+he,B={id:f++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:he,sortIndex:-1},Z>ge?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(C?(y(w),w=-1):C=!0,ye(R,Z-ge))):(B.sortIndex=he,e(u,B),k||N||(k=!0,ht(A))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var Y=g;return function(){var Z=g;g=Y;try{return B.apply(this,arguments)}finally{g=Z}}}})(Yy);Qy.exports=Yy;var hN=Qy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN=D,Lt=hN;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jy=new Set,Ha={};function Ts(t,e){yi(t,e),yi(t+"Capture",e)}function yi(t,e){for(Ha[t]=e,t=0;t<e.length;t++)Jy.add(e[t])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kd=Object.prototype.hasOwnProperty,mN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ng={},jg={};function pN(t){return Kd.call(jg,t)?!0:Kd.call(Ng,t)?!1:mN.test(t)?jg[t]=!0:(Ng[t]=!0,!1)}function gN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xN(t,e,n,r){if(e===null||typeof e>"u"||gN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sf=/[\-:]([a-z])/g;function If(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sf,If);Ze[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sf,If);Ze[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sf,If);Ze[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kf(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xN(e,n,s,r)&&(n=null),r||s===null?pN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=fN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ol=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Ks=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),Qd=Symbol.for("react.profiler"),Xy=Symbol.for("react.provider"),Zy=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),Jd=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),ev=Symbol.for("react.offscreen"),Eg=Symbol.iterator;function ca(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,ad;function va(t){if(ad===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ad=e&&e[1]||""}return`
`+ad+t}var od=!1;function ld(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?va(t):""}function yN(t){switch(t.tag){case 5:return va(t.type);case 16:return va("Lazy");case 13:return va("Suspense");case 19:return va("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function Xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ks:return"Fragment";case Gs:return"Portal";case Qd:return"Profiler";case Cf:return"StrictMode";case Yd:return"Suspense";case Jd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zy:return(t.displayName||"Context")+".Consumer";case Xy:return(t._context.displayName||"Context")+".Provider";case Af:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pf:return e=t.displayName||null,e!==null?e:Xd(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return Xd(t(e))}catch{}}return null}function vN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xd(e);case 8:return e===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wN(t){var e=tv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ll(t){t._valueTracker||(t._valueTracker=wN(t))}function nv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zd(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rv(t,e){e=e.checked,e!=null&&kf(t,"checked",e,!1)}function eh(t,e){rv(t,e);var n=Rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?th(t,e.type,n):e.hasOwnProperty("defaultValue")&&th(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function th(t,e,n){(e!=="number"||Zl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wa=Array.isArray;function ai(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(wa(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function sv(t,e){var n=Rr(e.value),r=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cl,av=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cl=cl||document.createElement("div"),cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bN=["Webkit","ms","Moz","O"];Object.keys(Ca).forEach(function(t){bN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ca[e]=Ca[t]})});function ov(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ca.hasOwnProperty(t)&&Ca[t]?(""+e).trim():e+"px"}function lv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ov(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _N=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sh(t,e){if(e){if(_N[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ah=null;function Rf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oh=null,oi=null,li=null;function Cg(t){if(t=So(t)){if(typeof oh!="function")throw Error($(280));var e=t.stateNode;e&&(e=Zc(e),oh(t.stateNode,t.type,e))}}function cv(t){oi?li?li.push(t):li=[t]:oi=t}function uv(){if(oi){var t=oi,e=li;if(li=oi=null,Cg(t),e)for(t=0;t<e.length;t++)Cg(e[t])}}function dv(t,e){return t(e)}function hv(){}var cd=!1;function fv(t,e,n){if(cd)return t(e,n);cd=!0;try{return dv(t,e,n)}finally{cd=!1,(oi!==null||li!==null)&&(hv(),uv())}}function Ga(t,e){var n=t.stateNode;if(n===null)return null;var r=Zc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var lh=!1;if(qn)try{var ua={};Object.defineProperty(ua,"passive",{get:function(){lh=!0}}),window.addEventListener("test",ua,ua),window.removeEventListener("test",ua,ua)}catch{lh=!1}function NN(t,e,n,r,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Aa=!1,ec=null,tc=!1,ch=null,jN={onError:function(t){Aa=!0,ec=t}};function EN(t,e,n,r,s,a,o,l,u){Aa=!1,ec=null,NN.apply(jN,arguments)}function TN(t,e,n,r,s,a,o,l,u){if(EN.apply(this,arguments),Aa){if(Aa){var d=ec;Aa=!1,ec=null}else throw Error($(198));tc||(tc=!0,ch=d)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ag(t){if(Ss(t)!==t)throw Error($(188))}function SN(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ag(s),t;if(a===r)return Ag(s),e;a=a.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function pv(t){return t=SN(t),t!==null?gv(t):null}function gv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gv(t);if(e!==null)return e;t=t.sibling}return null}var xv=Lt.unstable_scheduleCallback,Pg=Lt.unstable_cancelCallback,IN=Lt.unstable_shouldYield,kN=Lt.unstable_requestPaint,De=Lt.unstable_now,CN=Lt.unstable_getCurrentPriorityLevel,Mf=Lt.unstable_ImmediatePriority,yv=Lt.unstable_UserBlockingPriority,nc=Lt.unstable_NormalPriority,AN=Lt.unstable_LowPriority,vv=Lt.unstable_IdlePriority,Qc=null,wn=null;function PN(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Qc,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:DN,RN=Math.log,MN=Math.LN2;function DN(t){return t>>>=0,t===0?32:31-(RN(t)/MN|0)|0}var ul=64,dl=4194304;function ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ba(l):(a&=o,a!==0&&(r=ba(a)))}else o=n&~s,o!==0?r=ba(o):a!==0&&(r=ba(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function ON(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-nn(a),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=ON(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function uh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wv(){var t=ul;return ul<<=1,!(ul&4194240)&&(ul=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Eo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function VN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Df(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function bv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _v,Of,Nv,jv,Ev,dh=!1,hl=[],wr=null,br=null,_r=null,Ka=new Map,Qa=new Map,cr=[],FN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rg(t,e){switch(t){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(e.pointerId)}}function da(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=So(e),e!==null&&Of(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function zN(t,e,n,r,s){switch(e){case"focusin":return wr=da(wr,t,e,n,r,s),!0;case"dragenter":return br=da(br,t,e,n,r,s),!0;case"mouseover":return _r=da(_r,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Ka.set(a,da(Ka.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Qa.set(a,da(Qa.get(a)||null,t,e,n,r,s)),!0}return!1}function Tv(t){var e=ns(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=mv(n),e!==null){t.blockedOn=e,Ev(t.priority,function(){Nv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ah=r,n.target.dispatchEvent(r),ah=null}else return e=So(n),e!==null&&Of(e),t.blockedOn=n,!1;e.shift()}return!0}function Mg(t,e,n){Pl(t)&&n.delete(e)}function UN(){dh=!1,wr!==null&&Pl(wr)&&(wr=null),br!==null&&Pl(br)&&(br=null),_r!==null&&Pl(_r)&&(_r=null),Ka.forEach(Mg),Qa.forEach(Mg)}function ha(t,e){t.blockedOn===e&&(t.blockedOn=null,dh||(dh=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,UN)))}function Ya(t){function e(s){return ha(s,t)}if(0<hl.length){ha(hl[0],t);for(var n=1;n<hl.length;n++){var r=hl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wr!==null&&ha(wr,t),br!==null&&ha(br,t),_r!==null&&ha(_r,t),Ka.forEach(e),Qa.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)Tv(n),n.blockedOn===null&&cr.shift()}var ci=Xn.ReactCurrentBatchConfig,sc=!0;function $N(t,e,n,r){var s=me,a=ci.transition;ci.transition=null;try{me=1,Lf(t,e,n,r)}finally{me=s,ci.transition=a}}function BN(t,e,n,r){var s=me,a=ci.transition;ci.transition=null;try{me=4,Lf(t,e,n,r)}finally{me=s,ci.transition=a}}function Lf(t,e,n,r){if(sc){var s=hh(t,e,n,r);if(s===null)wd(t,e,r,ic,n),Rg(t,r);else if(zN(s,t,e,n,r))r.stopPropagation();else if(Rg(t,r),e&4&&-1<FN.indexOf(t)){for(;s!==null;){var a=So(s);if(a!==null&&_v(a),a=hh(t,e,n,r),a===null&&wd(t,e,r,ic,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else wd(t,e,r,null,n)}}var ic=null;function hh(t,e,n,r){if(ic=null,t=Rf(r),t=ns(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ic=t,null}function Sv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CN()){case Mf:return 1;case yv:return 4;case nc:case AN:return 16;case vv:return 536870912;default:return 16}default:return 16}}var gr=null,Vf=null,Rl=null;function Iv(){if(Rl)return Rl;var t,e=Vf,n=e.length,r,s="value"in gr?gr.value:gr.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Rl=s.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fl(){return!0}function Dg(){return!1}function Ft(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?fl:Dg,this.isPropagationStopped=Dg,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fl)},persist:function(){},isPersistent:fl}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=Ft(Fi),To=ke({},Fi,{view:0,detail:0}),qN=Ft(To),dd,hd,fa,Yc=ke({},To,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fa&&(fa&&t.type==="mousemove"?(dd=t.screenX-fa.screenX,hd=t.screenY-fa.screenY):hd=dd=0,fa=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),Og=Ft(Yc),HN=ke({},Yc,{dataTransfer:0}),WN=Ft(HN),GN=ke({},To,{relatedTarget:0}),fd=Ft(GN),KN=ke({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),QN=Ft(KN),YN=ke({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JN=Ft(YN),XN=ke({},Fi,{data:0}),Lg=Ft(XN),ZN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ej={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tj[t])?!!e[t]:!1}function zf(){return nj}var rj=ke({},To,{key:function(t){if(t.key){var e=ZN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ej[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zf,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sj=Ft(rj),ij=ke({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vg=Ft(ij),aj=ke({},To,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zf}),oj=Ft(aj),lj=ke({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cj=Ft(lj),uj=ke({},Yc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dj=Ft(uj),hj=[9,13,27,32],Uf=qn&&"CompositionEvent"in window,Pa=null;qn&&"documentMode"in document&&(Pa=document.documentMode);var fj=qn&&"TextEvent"in window&&!Pa,kv=qn&&(!Uf||Pa&&8<Pa&&11>=Pa),Fg=" ",zg=!1;function Cv(t,e){switch(t){case"keyup":return hj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Av(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qs=!1;function mj(t,e){switch(t){case"compositionend":return Av(e);case"keypress":return e.which!==32?null:(zg=!0,Fg);case"textInput":return t=e.data,t===Fg&&zg?null:t;default:return null}}function pj(t,e){if(Qs)return t==="compositionend"||!Uf&&Cv(t,e)?(t=Iv(),Rl=Vf=gr=null,Qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kv&&e.locale!=="ko"?null:e.data;default:return null}}var gj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gj[t.type]:e==="textarea"}function Pv(t,e,n,r){cv(r),e=ac(e,"onChange"),0<e.length&&(n=new Ff("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ra=null,Ja=null;function xj(t){Bv(t,0)}function Jc(t){var e=Xs(t);if(nv(e))return t}function yj(t,e){if(t==="change")return e}var Rv=!1;if(qn){var md;if(qn){var pd="oninput"in document;if(!pd){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),pd=typeof $g.oninput=="function"}md=pd}else md=!1;Rv=md&&(!document.documentMode||9<document.documentMode)}function Bg(){Ra&&(Ra.detachEvent("onpropertychange",Mv),Ja=Ra=null)}function Mv(t){if(t.propertyName==="value"&&Jc(Ja)){var e=[];Pv(e,Ja,t,Rf(t)),fv(xj,e)}}function vj(t,e,n){t==="focusin"?(Bg(),Ra=e,Ja=n,Ra.attachEvent("onpropertychange",Mv)):t==="focusout"&&Bg()}function wj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jc(Ja)}function bj(t,e){if(t==="click")return Jc(e)}function _j(t,e){if(t==="input"||t==="change")return Jc(e)}function Nj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:Nj;function Xa(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kd.call(e,s)||!on(t[s],e[s]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hg(t,e){var n=qg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qg(n)}}function Dv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ov(){for(var t=window,e=Zl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zl(t.document)}return e}function $f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jj(t){var e=Ov(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dv(n.ownerDocument.documentElement,n)){if(r!==null&&$f(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=Hg(n,a);var o=Hg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ej=qn&&"documentMode"in document&&11>=document.documentMode,Ys=null,fh=null,Ma=null,mh=!1;function Wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mh||Ys==null||Ys!==Zl(r)||(r=Ys,"selectionStart"in r&&$f(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ma&&Xa(Ma,r)||(Ma=r,r=ac(fh,"onSelect"),0<r.length&&(e=new Ff("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ys)))}function ml(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionend:ml("Transition","TransitionEnd")},gd={},Lv={};qn&&(Lv=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Xc(t){if(gd[t])return gd[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lv)return gd[t]=e[n];return t}var Vv=Xc("animationend"),Fv=Xc("animationiteration"),zv=Xc("animationstart"),Uv=Xc("transitionend"),$v=new Map,Gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){$v.set(t,e),Ts(e,[t])}for(var xd=0;xd<Gg.length;xd++){var yd=Gg[xd],Tj=yd.toLowerCase(),Sj=yd[0].toUpperCase()+yd.slice(1);Fr(Tj,"on"+Sj)}Fr(Vv,"onAnimationEnd");Fr(Fv,"onAnimationIteration");Fr(zv,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(Uv,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ij=new Set("cancel close invalid load scroll toggle".split(" ").concat(_a));function Kg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TN(r,e,void 0,t),t.currentTarget=null}function Bv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;Kg(s,l,d),a=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;Kg(s,l,d),a=u}}}if(tc)throw t=ch,tc=!1,ch=null,t}function be(t,e){var n=e[vh];n===void 0&&(n=e[vh]=new Set);var r=t+"__bubble";n.has(r)||(qv(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),qv(n,t,r,e)}var pl="_reactListening"+Math.random().toString(36).slice(2);function Za(t){if(!t[pl]){t[pl]=!0,Jy.forEach(function(n){n!=="selectionchange"&&(Ij.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pl]||(e[pl]=!0,vd("selectionchange",!1,e))}}function qv(t,e,n,r){switch(Sv(e)){case 1:var s=$N;break;case 4:s=BN;break;default:s=Lf}n=s.bind(null,e,n,t),s=void 0,!lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wd(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ns(l),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}l=l.parentNode}}r=r.return}fv(function(){var d=a,f=Rf(n),m=[];e:{var g=$v.get(t);if(g!==void 0){var N=Ff,k=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":N=sj;break;case"focusin":k="focus",N=fd;break;case"focusout":k="blur",N=fd;break;case"beforeblur":case"afterblur":N=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=WN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=oj;break;case Vv:case Fv:case zv:N=QN;break;case Uv:N=cj;break;case"scroll":N=qN;break;case"wheel":N=dj;break;case"copy":case"cut":case"paste":N=JN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Vg}var C=(e&4)!==0,I=!C&&t==="scroll",y=C?g!==null?g+"Capture":null:g;C=[];for(var x=d,v;x!==null;){v=x;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,y!==null&&(R=Ga(x,y),R!=null&&C.push(eo(x,R,v)))),I)break;x=x.return}0<C.length&&(g=new N(g,k,null,n,f),m.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==ah&&(k=n.relatedTarget||n.fromElement)&&(ns(k)||k[Hn]))break e;if((N||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=d,k=k?ns(k):null,k!==null&&(I=Ss(k),k!==I||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=d),N!==k)){if(C=Og,R="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=Vg,R="onPointerLeave",y="onPointerEnter",x="pointer"),I=N==null?g:Xs(N),v=k==null?g:Xs(k),g=new C(R,x+"leave",N,n,f),g.target=I,g.relatedTarget=v,R=null,ns(f)===d&&(C=new C(y,x+"enter",k,n,f),C.target=v,C.relatedTarget=I,R=C),I=R,N&&k)t:{for(C=N,y=k,x=0,v=C;v;v=Us(v))x++;for(v=0,R=y;R;R=Us(R))v++;for(;0<x-v;)C=Us(C),x--;for(;0<v-x;)y=Us(y),v--;for(;x--;){if(C===y||y!==null&&C===y.alternate)break t;C=Us(C),y=Us(y)}C=null}else C=null;N!==null&&Qg(m,g,N,C,!1),k!==null&&I!==null&&Qg(m,I,k,C,!0)}}e:{if(g=d?Xs(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var A=yj;else if(Ug(g))if(Rv)A=_j;else{A=wj;var M=vj}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(A=bj);if(A&&(A=A(t,d))){Pv(m,A,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&th(g,"number",g.value)}switch(M=d?Xs(d):window,t){case"focusin":(Ug(M)||M.contentEditable==="true")&&(Ys=M,fh=d,Ma=null);break;case"focusout":Ma=fh=Ys=null;break;case"mousedown":mh=!0;break;case"contextmenu":case"mouseup":case"dragend":mh=!1,Wg(m,n,f);break;case"selectionchange":if(Ej)break;case"keydown":case"keyup":Wg(m,n,f)}var j;if(Uf)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Qs?Cv(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(kv&&n.locale!=="ko"&&(Qs||w!=="onCompositionStart"?w==="onCompositionEnd"&&Qs&&(j=Iv()):(gr=f,Vf="value"in gr?gr.value:gr.textContent,Qs=!0)),M=ac(d,w),0<M.length&&(w=new Lg(w,t,null,n,f),m.push({event:w,listeners:M}),j?w.data=j:(j=Av(n),j!==null&&(w.data=j)))),(j=fj?mj(t,n):pj(t,n))&&(d=ac(d,"onBeforeInput"),0<d.length&&(f=new Lg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=j))}Bv(m,e)})}function eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ac(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ga(t,n),a!=null&&r.unshift(eo(t,a,s)),a=Ga(t,e),a!=null&&r.push(eo(t,a,s))),t=t.return}return r}function Us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qg(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Ga(n,a),u!=null&&o.unshift(eo(n,u,l))):s||(u=Ga(n,a),u!=null&&o.push(eo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kj=/\r\n?/g,Cj=/\u0000|\uFFFD/g;function Yg(t){return(typeof t=="string"?t:""+t).replace(kj,`
`).replace(Cj,"")}function gl(t,e,n){if(e=Yg(e),Yg(t)!==e&&n)throw Error($(425))}function oc(){}var ph=null,gh=null;function xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,Aj=typeof clearTimeout=="function"?clearTimeout:void 0,Jg=typeof Promise=="function"?Promise:void 0,Pj=typeof queueMicrotask=="function"?queueMicrotask:typeof Jg<"u"?function(t){return Jg.resolve(null).then(t).catch(Rj)}:yh;function Rj(t){setTimeout(function(){throw t})}function bd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ya(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zi=Math.random().toString(36).slice(2),gn="__reactFiber$"+zi,to="__reactProps$"+zi,Hn="__reactContainer$"+zi,vh="__reactEvents$"+zi,Mj="__reactListeners$"+zi,Dj="__reactHandles$"+zi;function ns(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hn]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xg(t);t!==null;){if(n=t[gn])return n;t=Xg(t)}return e}t=n,n=t.parentNode}return null}function So(t){return t=t[gn]||t[Hn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Zc(t){return t[to]||null}var wh=[],Zs=-1;function zr(t){return{current:t}}function Ne(t){0>Zs||(t.current=wh[Zs],wh[Zs]=null,Zs--)}function ve(t,e){Zs++,wh[Zs]=t.current,t.current=e}var Mr={},ut=zr(Mr),jt=zr(!1),fs=Mr;function vi(t,e){var n=t.type.contextTypes;if(!n)return Mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function lc(){Ne(jt),Ne(ut)}function Zg(t,e,n){if(ut.current!==Mr)throw Error($(168));ve(ut,e),ve(jt,n)}function Hv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,vN(t)||"Unknown",s));return ke({},n,r)}function cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,fs=ut.current,ve(ut,t),ve(jt,jt.current),!0}function e0(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Hv(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,Ne(jt),Ne(ut),ve(ut,t)):Ne(jt),ve(jt,n)}var Mn=null,eu=!1,_d=!1;function Wv(t){Mn===null?Mn=[t]:Mn.push(t)}function Oj(t){eu=!0,Wv(t)}function Ur(){if(!_d&&Mn!==null){_d=!0;var t=0,e=me;try{var n=Mn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mn=null,eu=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(t+1)),xv(Mf,Ur),s}finally{me=e,_d=!1}}return null}var ei=[],ti=0,uc=null,dc=0,Ut=[],$t=0,ms=null,Dn=1,On="";function Xr(t,e){ei[ti++]=dc,ei[ti++]=uc,uc=t,dc=e}function Gv(t,e,n){Ut[$t++]=Dn,Ut[$t++]=On,Ut[$t++]=ms,ms=t;var r=Dn;t=On;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var a=32-nn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dn=1<<32-nn(e)+s|n<<s|r,On=a+t}else Dn=1<<a|n<<s|r,On=t}function Bf(t){t.return!==null&&(Xr(t,1),Gv(t,1,0))}function qf(t){for(;t===uc;)uc=ei[--ti],ei[ti]=null,dc=ei[--ti],ei[ti]=null;for(;t===ms;)ms=Ut[--$t],Ut[$t]=null,On=Ut[--$t],Ut[$t]=null,Dn=Ut[--$t],Ut[$t]=null}var Dt=null,Rt=null,je=!1,en=null;function Kv(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ms!==null?{id:Dn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Rt=null,!0):!1;default:return!1}}function bh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _h(t){if(je){var e=Rt;if(e){var n=e;if(!t0(t,e)){if(bh(t))throw Error($(418));e=Nr(n.nextSibling);var r=Dt;e&&t0(t,e)?Kv(r,n):(t.flags=t.flags&-4097|2,je=!1,Dt=t)}}else{if(bh(t))throw Error($(418));t.flags=t.flags&-4097|2,je=!1,Dt=t}}}function n0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function xl(t){if(t!==Dt)return!1;if(!je)return n0(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xh(t.type,t.memoizedProps)),e&&(e=Rt)){if(bh(t))throw Qv(),Error($(418));for(;e;)Kv(t,e),e=Nr(e.nextSibling)}if(n0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Dt?Nr(t.stateNode.nextSibling):null;return!0}function Qv(){for(var t=Rt;t;)t=Nr(t.nextSibling)}function wi(){Rt=Dt=null,je=!1}function Hf(t){en===null?en=[t]:en.push(t)}var Lj=Xn.ReactCurrentBatchConfig;function ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function yl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r0(t){var e=t._init;return e(t._payload)}function Yv(t){function e(y,x){if(t){var v=y.deletions;v===null?(y.deletions=[x],y.flags|=16):v.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=Sr(y,x),y.index=0,y.sibling=null,y}function a(y,x,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<x?(y.flags|=2,x):v):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,x,v,R){return x===null||x.tag!==6?(x=kd(v,y.mode,R),x.return=y,x):(x=s(x,v),x.return=y,x)}function u(y,x,v,R){var A=v.type;return A===Ks?f(y,x,v.props.children,R,v.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===or&&r0(A)===x.type)?(R=s(x,v.props),R.ref=ma(y,x,v),R.return=y,R):(R=Ul(v.type,v.key,v.props,null,y.mode,R),R.ref=ma(y,x,v),R.return=y,R)}function d(y,x,v,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Cd(v,y.mode,R),x.return=y,x):(x=s(x,v.children||[]),x.return=y,x)}function f(y,x,v,R,A){return x===null||x.tag!==7?(x=us(v,y.mode,R,A),x.return=y,x):(x=s(x,v),x.return=y,x)}function m(y,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=kd(""+x,y.mode,v),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ol:return v=Ul(x.type,x.key,x.props,null,y.mode,v),v.ref=ma(y,null,x),v.return=y,v;case Gs:return x=Cd(x,y.mode,v),x.return=y,x;case or:var R=x._init;return m(y,R(x._payload),v)}if(wa(x)||ca(x))return x=us(x,y.mode,v,null),x.return=y,x;yl(y,x)}return null}function g(y,x,v,R){var A=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return A!==null?null:l(y,x,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ol:return v.key===A?u(y,x,v,R):null;case Gs:return v.key===A?d(y,x,v,R):null;case or:return A=v._init,g(y,x,A(v._payload),R)}if(wa(v)||ca(v))return A!==null?null:f(y,x,v,R,null);yl(y,v)}return null}function N(y,x,v,R,A){if(typeof R=="string"&&R!==""||typeof R=="number")return y=y.get(v)||null,l(x,y,""+R,A);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ol:return y=y.get(R.key===null?v:R.key)||null,u(x,y,R,A);case Gs:return y=y.get(R.key===null?v:R.key)||null,d(x,y,R,A);case or:var M=R._init;return N(y,x,v,M(R._payload),A)}if(wa(R)||ca(R))return y=y.get(v)||null,f(x,y,R,A,null);yl(x,R)}return null}function k(y,x,v,R){for(var A=null,M=null,j=x,w=x=0,S=null;j!==null&&w<v.length;w++){j.index>w?(S=j,j=null):S=j.sibling;var b=g(y,j,v[w],R);if(b===null){j===null&&(j=S);break}t&&j&&b.alternate===null&&e(y,j),x=a(b,x,w),M===null?A=b:M.sibling=b,M=b,j=S}if(w===v.length)return n(y,j),je&&Xr(y,w),A;if(j===null){for(;w<v.length;w++)j=m(y,v[w],R),j!==null&&(x=a(j,x,w),M===null?A=j:M.sibling=j,M=j);return je&&Xr(y,w),A}for(j=r(y,j);w<v.length;w++)S=N(j,y,w,v[w],R),S!==null&&(t&&S.alternate!==null&&j.delete(S.key===null?w:S.key),x=a(S,x,w),M===null?A=S:M.sibling=S,M=S);return t&&j.forEach(function(P){return e(y,P)}),je&&Xr(y,w),A}function C(y,x,v,R){var A=ca(v);if(typeof A!="function")throw Error($(150));if(v=A.call(v),v==null)throw Error($(151));for(var M=A=null,j=x,w=x=0,S=null,b=v.next();j!==null&&!b.done;w++,b=v.next()){j.index>w?(S=j,j=null):S=j.sibling;var P=g(y,j,b.value,R);if(P===null){j===null&&(j=S);break}t&&j&&P.alternate===null&&e(y,j),x=a(P,x,w),M===null?A=P:M.sibling=P,M=P,j=S}if(b.done)return n(y,j),je&&Xr(y,w),A;if(j===null){for(;!b.done;w++,b=v.next())b=m(y,b.value,R),b!==null&&(x=a(b,x,w),M===null?A=b:M.sibling=b,M=b);return je&&Xr(y,w),A}for(j=r(y,j);!b.done;w++,b=v.next())b=N(j,y,w,b.value,R),b!==null&&(t&&b.alternate!==null&&j.delete(b.key===null?w:b.key),x=a(b,x,w),M===null?A=b:M.sibling=b,M=b);return t&&j.forEach(function(E){return e(y,E)}),je&&Xr(y,w),A}function I(y,x,v,R){if(typeof v=="object"&&v!==null&&v.type===Ks&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ol:e:{for(var A=v.key,M=x;M!==null;){if(M.key===A){if(A=v.type,A===Ks){if(M.tag===7){n(y,M.sibling),x=s(M,v.props.children),x.return=y,y=x;break e}}else if(M.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===or&&r0(A)===M.type){n(y,M.sibling),x=s(M,v.props),x.ref=ma(y,M,v),x.return=y,y=x;break e}n(y,M);break}else e(y,M);M=M.sibling}v.type===Ks?(x=us(v.props.children,y.mode,R,v.key),x.return=y,y=x):(R=Ul(v.type,v.key,v.props,null,y.mode,R),R.ref=ma(y,x,v),R.return=y,y=R)}return o(y);case Gs:e:{for(M=v.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(y,x.sibling),x=s(x,v.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=Cd(v,y.mode,R),x.return=y,y=x}return o(y);case or:return M=v._init,I(y,x,M(v._payload),R)}if(wa(v))return k(y,x,v,R);if(ca(v))return C(y,x,v,R);yl(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(y,x.sibling),x=s(x,v),x.return=y,y=x):(n(y,x),x=kd(v,y.mode,R),x.return=y,y=x),o(y)):n(y,x)}return I}var bi=Yv(!0),Jv=Yv(!1),hc=zr(null),fc=null,ni=null,Wf=null;function Gf(){Wf=ni=fc=null}function Kf(t){var e=hc.current;Ne(hc),t._currentValue=e}function Nh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){fc=t,Wf=ni=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_t=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(Wf!==t)if(t={context:t,memoizedValue:e,next:null},ni===null){if(fc===null)throw Error($(308));ni=t,fc.dependencies={lanes:0,firstContext:t}}else ni=ni.next=t;return e}var rs=null;function Qf(t){rs===null?rs=[t]:rs.push(t)}function Xv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Qf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Wn(t,r)}function Wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Wn(t,n)}return s=r.interleaved,s===null?(e.next=e,Qf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Wn(t,n)}function Dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}function s0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mc(t,e,n,r){var s=t.updateQueue;lr=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,f=d=u=null,l=a;do{var g=l.lane,N=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:N,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,C=l;switch(g=e,N=n,C.tag){case 1:if(k=C.payload,typeof k=="function"){m=k.call(N,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=C.payload,g=typeof k=="function"?k.call(N,m,g):k,g==null)break e;m=ke({},m,g);break e;case 2:lr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else N={eventTime:N,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=N,u=m):f=f.next=N,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);gs|=o,t.lanes=o,t.memoizedState=m}}function i0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Io={},bn=zr(Io),no=zr(Io),ro=zr(Io);function ss(t){if(t===Io)throw Error($(174));return t}function Jf(t,e){switch(ve(ro,e),ve(no,t),ve(bn,Io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rh(e,t)}Ne(bn),ve(bn,e)}function _i(){Ne(bn),Ne(no),Ne(ro)}function ew(t){ss(ro.current);var e=ss(bn.current),n=rh(e,t.type);e!==n&&(ve(no,t),ve(bn,n))}function Xf(t){no.current===t&&(Ne(bn),Ne(no))}var Te=zr(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nd=[];function Zf(){for(var t=0;t<Nd.length;t++)Nd[t]._workInProgressVersionPrimary=null;Nd.length=0}var Ol=Xn.ReactCurrentDispatcher,jd=Xn.ReactCurrentBatchConfig,ps=0,Ie=null,ze=null,qe=null,gc=!1,Da=!1,so=0,Vj=0;function st(){throw Error($(321))}function em(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function tm(t,e,n,r,s,a){if(ps=a,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ol.current=t===null||t.memoizedState===null?$j:Bj,t=n(r,s),Da){a=0;do{if(Da=!1,so=0,25<=a)throw Error($(301));a+=1,qe=ze=null,e.updateQueue=null,Ol.current=qj,t=n(r,s)}while(Da)}if(Ol.current=xc,e=ze!==null&&ze.next!==null,ps=0,qe=ze=Ie=null,gc=!1,e)throw Error($(300));return t}function nm(){var t=so!==0;return so=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ie.memoizedState=qe=t:qe=qe.next=t,qe}function Wt(){if(ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=qe===null?Ie.memoizedState:qe.next;if(e!==null)qe=e,ze=t;else{if(t===null)throw Error($(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},qe===null?Ie.memoizedState=qe=t:qe=qe.next=t}return qe}function io(t,e){return typeof e=="function"?e(t):e}function Ed(t){var e=Wt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,u=null,d=a;do{var f=d.lane;if((ps&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ie.lanes|=f,gs|=f}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=l,on(r,e.memoizedState)||(_t=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ie.lanes|=a,gs|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=Wt(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);on(a,e.memoizedState)||(_t=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function tw(){}function nw(t,e){var n=Ie,r=Wt(),s=e(),a=!on(r.memoizedState,s);if(a&&(r.memoizedState=s,_t=!0),r=r.queue,rm(iw.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,ao(9,sw.bind(null,n,r,s,e),void 0,null),We===null)throw Error($(349));ps&30||rw(n,e,s)}return s}function rw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sw(t,e,n,r){e.value=n,e.getSnapshot=r,aw(e)&&ow(t)}function iw(t,e,n){return n(function(){aw(e)&&ow(t)})}function aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function ow(t){var e=Wn(t,1);e!==null&&rn(e,t,1,-1)}function a0(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=Uj.bind(null,Ie,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lw(){return Wt().memoizedState}function Ll(t,e,n,r){var s=mn();Ie.flags|=t,s.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function tu(t,e,n,r){var s=Wt();r=r===void 0?null:r;var a=void 0;if(ze!==null){var o=ze.memoizedState;if(a=o.destroy,r!==null&&em(r,o.deps)){s.memoizedState=ao(e,n,a,r);return}}Ie.flags|=t,s.memoizedState=ao(1|e,n,a,r)}function o0(t,e){return Ll(8390656,8,t,e)}function rm(t,e){return tu(2048,8,t,e)}function cw(t,e){return tu(4,2,t,e)}function uw(t,e){return tu(4,4,t,e)}function dw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hw(t,e,n){return n=n!=null?n.concat([t]):null,tu(4,4,dw.bind(null,e,t),n)}function sm(){}function fw(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&em(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mw(t,e){var n=Wt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&em(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pw(t,e,n){return ps&21?(on(n,e)||(n=wv(),Ie.lanes|=n,gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_t=!0),t.memoizedState=n)}function Fj(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{me=n,jd.transition=r}}function gw(){return Wt().memoizedState}function zj(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xw(t))yw(e,n);else if(n=Xv(t,e,n,r),n!==null){var s=gt();rn(n,t,r,s),vw(n,e,r)}}function Uj(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xw(t))yw(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,on(l,o)){var u=e.interleaved;u===null?(s.next=s,Qf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Xv(t,e,s,r),n!==null&&(s=gt(),rn(n,t,r,s),vw(n,e,r))}}function xw(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function yw(t,e){Da=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Df(t,n)}}var xc={readContext:Ht,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},$j={readContext:Ht,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,dw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zj.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:a0,useDebugValue:sm,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=a0(!1),e=t[0];return t=Fj.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=mn();if(je){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),We===null)throw Error($(349));ps&30||rw(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,o0(iw.bind(null,r,a,t),[t]),r.flags|=2048,ao(9,sw.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=mn(),e=We.identifierPrefix;if(je){var n=On,r=Dn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Vj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bj={readContext:Ht,useCallback:fw,useContext:Ht,useEffect:rm,useImperativeHandle:hw,useInsertionEffect:cw,useLayoutEffect:uw,useMemo:mw,useReducer:Ed,useRef:lw,useState:function(){return Ed(io)},useDebugValue:sm,useDeferredValue:function(t){var e=Wt();return pw(e,ze.memoizedState,t)},useTransition:function(){var t=Ed(io)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1},qj={readContext:Ht,useCallback:fw,useContext:Ht,useEffect:rm,useImperativeHandle:hw,useInsertionEffect:cw,useLayoutEffect:uw,useMemo:mw,useReducer:Td,useRef:lw,useState:function(){return Td(io)},useDebugValue:sm,useDeferredValue:function(t){var e=Wt();return ze===null?e.memoizedState=t:pw(e,ze.memoizedState,t)},useTransition:function(){var t=Td(io)[0],e=Wt().memoizedState;return[t,e]},useMutableSource:tw,useSyncExternalStore:nw,useId:gw,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nu={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=gt(),s=Tr(t),a=Un(r,s);a.payload=e,n!=null&&(a.callback=n),e=jr(t,a,s),e!==null&&(rn(e,t,s,r),Dl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=gt(),s=Tr(t),a=Un(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=jr(t,a,s),e!==null&&(rn(e,t,s,r),Dl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),r=Tr(t),s=Un(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(rn(e,t,r,n),Dl(e,t,r))}};function l0(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Xa(n,r)||!Xa(s,a):!0}function ww(t,e,n){var r=!1,s=Mr,a=e.contextType;return typeof a=="object"&&a!==null?a=Ht(a):(s=Et(e)?fs:ut.current,r=e.contextTypes,a=(r=r!=null)?vi(t,s):Mr),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function c0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nu.enqueueReplaceState(e,e.state,null)}function Eh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Yf(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Ht(a):(a=Et(e)?fs:ut.current,s.context=vi(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(jh(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&nu.enqueueReplaceState(s,s.state,null),mc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",r=e;do n+=yN(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Sd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Th(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hj=typeof WeakMap=="function"?WeakMap:Map;function bw(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vc||(vc=!0,Oh=r),Th(t,e)},n}function _w(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Th(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Th(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function u0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Hj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iE.bind(null,t,e,n),e.then(t,t))}function d0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var Wj=Xn.ReactCurrentOwner,_t=!1;function pt(t,e,n,r){e.child=t===null?Jv(e,null,n,r):bi(e,t.child,n,r)}function f0(t,e,n,r,s){n=n.render;var a=e.ref;return ui(e,s),r=tm(t,e,n,r,a,s),n=nm(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(je&&n&&Bf(e),e.flags|=1,pt(t,e,r,s),e.child)}function m0(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!hm(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Nw(t,e,a,r,s)):(t=Ul(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Xa,n(o,r)&&t.ref===e.ref)return Gn(t,e,s)}return e.flags|=1,t=Sr(a,r),t.ref=e.ref,t.return=e,e.child=t}function Nw(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Xa(a,r)&&t.ref===e.ref)if(_t=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(_t=!0);else return e.lanes=t.lanes,Gn(t,e,s)}return Sh(t,e,n,r,s)}function jw(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(si,Pt),Pt|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(si,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ve(si,Pt),Pt|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,ve(si,Pt),Pt|=r;return pt(t,e,s,n),e.child}function Ew(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sh(t,e,n,r,s){var a=Et(n)?fs:ut.current;return a=vi(e,a),ui(e,s),n=tm(t,e,n,r,a,s),r=nm(),t!==null&&!_t?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gn(t,e,s)):(je&&r&&Bf(e),e.flags|=1,pt(t,e,n,s),e.child)}function p0(t,e,n,r,s){if(Et(n)){var a=!0;cc(e)}else a=!1;if(ui(e,s),e.stateNode===null)Vl(t,e),ww(e,n,r),Eh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ht(d):(d=Et(n)?fs:ut.current,d=vi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&c0(e,o,r,d),lr=!1;var g=e.memoizedState;o.state=g,mc(e,r,o,s),u=e.memoizedState,l!==r||g!==u||jt.current||lr?(typeof f=="function"&&(jh(e,n,f,r),u=e.memoizedState),(l=lr||l0(e,n,l,r,g,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Zv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Xt(e.type,l),o.props=d,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=Et(n)?fs:ut.current,u=vi(e,u));var N=n.getDerivedStateFromProps;(f=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&c0(e,o,r,u),lr=!1,g=e.memoizedState,o.state=g,mc(e,r,o,s);var k=e.memoizedState;l!==m||g!==k||jt.current||lr?(typeof N=="function"&&(jh(e,n,N,r),k=e.memoizedState),(d=lr||l0(e,n,d,r,g,k,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ih(t,e,n,r,a,s)}function Ih(t,e,n,r,s,a){Ew(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&e0(e,n,!1),Gn(t,e,a);r=e.stateNode,Wj.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bi(e,t.child,null,a),e.child=bi(e,null,l,a)):pt(t,e,l,a),e.memoizedState=r.state,s&&e0(e,n,!0),e.child}function Tw(t){var e=t.stateNode;e.pendingContext?Zg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zg(t,e.context,!1),Jf(t,e.containerInfo)}function g0(t,e,n,r,s){return wi(),Hf(s),e.flags|=256,pt(t,e,n,r),e.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Ch(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sw(t,e,n){var r=e.pendingProps,s=Te.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Te,s&1),t===null)return _h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=iu(o,r,0,null),t=us(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ch(n),e.memoizedState=kh,t):im(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Gj(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Sr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Sr(l,a):(a=us(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Ch(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=kh,r}return a=t.child,t=a.sibling,r=Sr(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function im(t,e){return e=iu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vl(t,e,n,r){return r!==null&&Hf(r),bi(e,t.child,null,n),t=im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gj(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Sd(Error($(422))),vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=iu({mode:"visible",children:r.children},s,0,null),a=us(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&bi(e,t.child,null,o),e.child.memoizedState=Ch(o),e.memoizedState=kh,a);if(!(e.mode&1))return vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error($(419)),r=Sd(a,r,void 0),vl(t,e,o,r)}if(l=(o&t.childLanes)!==0,_t||l){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Wn(t,s),rn(r,t,s,-1))}return dm(),r=Sd(Error($(421))),vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aE.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Rt=Nr(s.nextSibling),Dt=e,je=!0,en=null,t!==null&&(Ut[$t++]=Dn,Ut[$t++]=On,Ut[$t++]=ms,Dn=t.id,On=t.overflow,ms=e),e=im(e,r.children),e.flags|=4096,e)}function x0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nh(t.return,e,n)}function Id(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Iw(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(pt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&x0(t,n,e);else if(t.tag===19)x0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Id(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&pc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Id(e,!0,n,null,a);break;case"together":Id(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Kj(t,e,n){switch(e.tag){case 3:Tw(e),wi();break;case 5:ew(e);break;case 1:Et(e.type)&&cc(e);break;case 4:Jf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(hc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Sw(t,e,n):(ve(Te,Te.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);ve(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Iw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,jw(t,e,n)}return Gn(t,e,n)}var kw,Ah,Cw,Aw;kw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ah=function(){};Cw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ss(bn.current);var a=null;switch(n){case"input":s=Zd(t,s),r=Zd(t,r),a=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),a=[];break;case"textarea":s=nh(t,s),r=nh(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oc)}sh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ha.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ha.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&be("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Aw=function(t,e,n,r){n!==r&&(e.flags|=4)};function pa(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Qj(t,e,n){var r=e.pendingProps;switch(qf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return Et(e.type)&&lc(),it(e),null;case 3:return r=e.stateNode,_i(),Ne(jt),Ne(ut),Zf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(Fh(en),en=null))),Ah(t,e),it(e),null;case 5:Xf(e);var s=ss(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)Cw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return it(e),null}if(t=ss(bn.current),xl(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[gn]=e,r[to]=a,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<_a.length;s++)be(_a[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":Tg(r,a),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},be("invalid",r);break;case"textarea":Ig(r,a),be("invalid",r)}sh(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&gl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&gl(r.textContent,l,t),s=["children",""+l]):Ha.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":ll(r),Sg(r,a,!0);break;case"textarea":ll(r),kg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=oc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[to]=r,kw(t,e,!1,!1),e.stateNode=t;e:{switch(o=ih(n,r),n){case"dialog":be("cancel",t),be("close",t),s=r;break;case"iframe":case"object":case"embed":be("load",t),s=r;break;case"video":case"audio":for(s=0;s<_a.length;s++)be(_a[s],t);s=r;break;case"source":be("error",t),s=r;break;case"img":case"image":case"link":be("error",t),be("load",t),s=r;break;case"details":be("toggle",t),s=r;break;case"input":Tg(t,r),s=Zd(t,r),be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),be("invalid",t);break;case"textarea":Ig(t,r),s=nh(t,r),be("invalid",t);break;default:s=r}sh(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?lv(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&av(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wa(t,u):typeof u=="number"&&Wa(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ha.hasOwnProperty(a)?u!=null&&a==="onScroll"&&be("scroll",t):u!=null&&kf(t,a,u,o))}switch(n){case"input":ll(t),Sg(t,r,!1);break;case"textarea":ll(t),kg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rr(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?ai(t,!!r.multiple,a,!1):r.defaultValue!=null&&ai(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=oc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)Aw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=ss(ro.current),ss(bn.current),xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(a=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:gl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gl(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return it(e),null;case 13:if(Ne(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Rt!==null&&e.mode&1&&!(e.flags&128))Qv(),wi(),e.flags|=98560,a=!1;else if(a=xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error($(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error($(317));a[gn]=e}else wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),a=!1}else en!==null&&(Fh(en),en=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Ue===0&&(Ue=3):dm())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return _i(),Ah(t,e),t===null&&Za(e.stateNode.containerInfo),it(e),null;case 10:return Kf(e.type._context),it(e),null;case 17:return Et(e.type)&&lc(),it(e),null;case 19:if(Ne(Te),a=e.memoizedState,a===null)return it(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)pa(a,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pc(t),o!==null){for(e.flags|=128,pa(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Te,Te.current&1|2),e.child}t=t.sibling}a.tail!==null&&De()>ji&&(e.flags|=128,r=!0,pa(a,!1),e.lanes=4194304)}else{if(!r)if(t=pc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!je)return it(e),null}else 2*De()-a.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,r=!0,pa(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=De(),e.sibling=null,n=Te.current,ve(Te,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return um(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function Yj(t,e){switch(qf(e),e.tag){case 1:return Et(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(),Ne(jt),Ne(ut),Zf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xf(e),null;case 13:if(Ne(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(Te),null;case 4:return _i(),null;case 10:return Kf(e.type._context),null;case 22:case 23:return um(),null;case 24:return null;default:return null}}var wl=!1,lt=!1,Jj=typeof WeakSet=="function"?WeakSet:Set,H=null;function ri(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function Ph(t,e,n){try{n()}catch(r){Re(t,e,r)}}var y0=!1;function Xj(t,e){if(ph=sc,t=Ov(),$f(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var N;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(N=m.firstChild)!==null;)g=m,m=N;for(;;){if(m===t)break t;if(g===n&&++d===s&&(l=o),g===a&&++f===r&&(u=o),(N=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=N}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:t,selectionRange:n},sc=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var C=k.memoizedProps,I=k.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?C:Xt(e.type,C),I);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(R){Re(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=y0,y0=!1,k}function Oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ph(e,n,a)}s=s.next}while(s!==r)}}function ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Rh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pw(t){var e=t.alternate;e!==null&&(t.alternate=null,Pw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[to],delete e[vh],delete e[Mj],delete e[Dj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rw(t){return t.tag===5||t.tag===3||t.tag===4}function v0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oc));else if(r!==4&&(t=t.child,t!==null))for(Mh(t,e,n),t=t.sibling;t!==null;)Mh(t,e,n),t=t.sibling}function Dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dh(t,e,n),t=t.sibling;t!==null;)Dh(t,e,n),t=t.sibling}var Ke=null,Zt=!1;function sr(t,e,n){for(n=n.child;n!==null;)Mw(t,e,n),n=n.sibling}function Mw(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Qc,n)}catch{}switch(n.tag){case 5:lt||ri(n,e);case 6:var r=Ke,s=Zt;Ke=null,sr(t,e,n),Ke=r,Zt=s,Ke!==null&&(Zt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(Zt?(t=Ke,n=n.stateNode,t.nodeType===8?bd(t.parentNode,n):t.nodeType===1&&bd(t,n),Ya(t)):bd(Ke,n.stateNode));break;case 4:r=Ke,s=Zt,Ke=n.stateNode.containerInfo,Zt=!0,sr(t,e,n),Ke=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ph(n,e,o),s=s.next}while(s!==r)}sr(t,e,n);break;case 1:if(!lt&&(ri(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Re(n,e,l)}sr(t,e,n);break;case 21:sr(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,sr(t,e,n),lt=r):sr(t,e,n);break;default:sr(t,e,n)}}function w0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Jj),e.forEach(function(r){var s=oE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,Zt=!1;break e;case 3:Ke=l.stateNode.containerInfo,Zt=!0;break e;case 4:Ke=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(Ke===null)throw Error($(160));Mw(a,o,s),Ke=null,Zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Re(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dw(e,t),e=e.sibling}function Dw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),fn(t),r&4){try{Oa(3,t,t.return),ru(3,t)}catch(C){Re(t,t.return,C)}try{Oa(5,t,t.return)}catch(C){Re(t,t.return,C)}}break;case 1:Jt(e,t),fn(t),r&512&&n!==null&&ri(n,n.return);break;case 5:if(Jt(e,t),fn(t),r&512&&n!==null&&ri(n,n.return),t.flags&32){var s=t.stateNode;try{Wa(s,"")}catch(C){Re(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&rv(s,a),ih(l,o);var d=ih(l,a);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?lv(s,m):f==="dangerouslySetInnerHTML"?av(s,m):f==="children"?Wa(s,m):kf(s,f,m,d)}switch(l){case"input":eh(s,a);break;case"textarea":sv(s,a);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var N=a.value;N!=null?ai(s,!!a.multiple,N,!1):g!==!!a.multiple&&(a.defaultValue!=null?ai(s,!!a.multiple,a.defaultValue,!0):ai(s,!!a.multiple,a.multiple?[]:"",!1))}s[to]=a}catch(C){Re(t,t.return,C)}}break;case 6:if(Jt(e,t),fn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(C){Re(t,t.return,C)}}break;case 3:if(Jt(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(C){Re(t,t.return,C)}break;case 4:Jt(e,t),fn(t);break;case 13:Jt(e,t),fn(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(lm=De())),r&4&&w0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(d=lt)||f,Jt(e,t),lt=d):Jt(e,t),fn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(m=H=f;H!==null;){switch(g=H,N=g.child,g.tag){case 0:case 11:case 14:case 15:Oa(4,g,g.return);break;case 1:ri(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(C){Re(r,n,C)}}break;case 5:ri(g,g.return);break;case 22:if(g.memoizedState!==null){_0(m);continue}}N!==null?(N.return=g,H=N):_0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ov("display",o))}catch(C){Re(t,t.return,C)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Re(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Jt(e,t),fn(t),r&4&&w0(t);break;case 21:break;default:Jt(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rw(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wa(s,""),r.flags&=-33);var a=v0(t);Dh(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=v0(t);Mh(t,l,o);break;default:throw Error($(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Zj(t,e,n){H=t,Ow(t)}function Ow(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=wl;var d=lt;if(wl=o,(lt=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?N0(s):u!==null?(u.return=o,H=u):N0(s);for(;a!==null;)H=a,Ow(a),a=a.sibling;H=s,wl=l,lt=d}b0(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,H=a):b0(t)}}function b0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Xt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&i0(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i0(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ya(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}lt||e.flags&512&&Rh(e)}catch(g){Re(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function _0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function N0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ru(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Re(e,s,u)}}var a=e.return;try{Rh(e)}catch(u){Re(e,a,u)}break;case 5:var o=e.return;try{Rh(e)}catch(u){Re(e,o,u)}}}catch(u){Re(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var eE=Math.ceil,yc=Xn.ReactCurrentDispatcher,am=Xn.ReactCurrentOwner,qt=Xn.ReactCurrentBatchConfig,le=0,We=null,Ve=null,Je=0,Pt=0,si=zr(0),Ue=0,oo=null,gs=0,su=0,om=0,La=null,wt=null,lm=0,ji=1/0,Rn=null,vc=!1,Oh=null,Er=null,bl=!1,xr=null,wc=0,Va=0,Lh=null,Fl=-1,zl=0;function gt(){return le&6?De():Fl!==-1?Fl:Fl=De()}function Tr(t){return t.mode&1?le&2&&Je!==0?Je&-Je:Lj.transition!==null?(zl===0&&(zl=wv()),zl):(t=me,t!==0||(t=window.event,t=t===void 0?16:Sv(t.type)),t):1}function rn(t,e,n,r){if(50<Va)throw Va=0,Lh=null,Error($(185));Eo(t,n,r),(!(le&2)||t!==We)&&(t===We&&(!(le&2)&&(su|=n),Ue===4&&ur(t,Je)),Tt(t,r),n===1&&le===0&&!(e.mode&1)&&(ji=De()+500,eu&&Ur()))}function Tt(t,e){var n=t.callbackNode;LN(t,e);var r=rc(t,t===We?Je:0);if(r===0)n!==null&&Pg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Pg(n),e===1)t.tag===0?Oj(j0.bind(null,t)):Wv(j0.bind(null,t)),Pj(function(){!(le&6)&&Ur()}),n=null;else{switch(bv(r)){case 1:n=Mf;break;case 4:n=yv;break;case 16:n=nc;break;case 536870912:n=vv;break;default:n=nc}n=qw(n,Lw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lw(t,e){if(Fl=-1,zl=0,le&6)throw Error($(327));var n=t.callbackNode;if(di()&&t.callbackNode!==n)return null;var r=rc(t,t===We?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bc(t,r);else{e=r;var s=le;le|=2;var a=Fw();(We!==t||Je!==e)&&(Rn=null,ji=De()+500,cs(t,e));do try{rE();break}catch(l){Vw(t,l)}while(!0);Gf(),yc.current=a,le=s,Ve!==null?e=0:(We=null,Je=0,e=Ue)}if(e!==0){if(e===2&&(s=uh(t),s!==0&&(r=s,e=Vh(t,s))),e===1)throw n=oo,cs(t,0),ur(t,r),Tt(t,De()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!tE(s)&&(e=bc(t,r),e===2&&(a=uh(t),a!==0&&(r=a,e=Vh(t,a))),e===1))throw n=oo,cs(t,0),ur(t,r),Tt(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:Zr(t,wt,Rn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=lm+500-De(),10<e)){if(rc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){gt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yh(Zr.bind(null,t,wt,Rn),e);break}Zr(t,wt,Rn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eE(r/1960))-r,10<r){t.timeoutHandle=yh(Zr.bind(null,t,wt,Rn),r);break}Zr(t,wt,Rn);break;case 5:Zr(t,wt,Rn);break;default:throw Error($(329))}}}return Tt(t,De()),t.callbackNode===n?Lw.bind(null,t):null}function Vh(t,e){var n=La;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=bc(t,e),t!==2&&(e=wt,wt=n,e!==null&&Fh(e)),t}function Fh(t){wt===null?wt=t:wt.push.apply(wt,t)}function tE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!on(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~om,e&=~su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function j0(t){if(le&6)throw Error($(327));di();var e=rc(t,0);if(!(e&1))return Tt(t,De()),null;var n=bc(t,e);if(t.tag!==0&&n===2){var r=uh(t);r!==0&&(e=r,n=Vh(t,r))}if(n===1)throw n=oo,cs(t,0),ur(t,e),Tt(t,De()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Zr(t,wt,Rn),Tt(t,De()),null}function cm(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(ji=De()+500,eu&&Ur())}}function xs(t){xr!==null&&xr.tag===0&&!(le&6)&&di();var e=le;le|=1;var n=qt.transition,r=me;try{if(qt.transition=null,me=1,t)return t()}finally{me=r,qt.transition=n,le=e,!(le&6)&&Ur()}}function um(){Pt=si.current,Ne(si)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Aj(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(qf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lc();break;case 3:_i(),Ne(jt),Ne(ut),Zf();break;case 5:Xf(r);break;case 4:_i();break;case 13:Ne(Te);break;case 19:Ne(Te);break;case 10:Kf(r.type._context);break;case 22:case 23:um()}n=n.return}if(We=t,Ve=t=Sr(t.current,null),Je=Pt=e,Ue=0,oo=null,om=su=gs=0,wt=La=null,rs!==null){for(e=0;e<rs.length;e++)if(n=rs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}rs=null}return t}function Vw(t,e){do{var n=Ve;try{if(Gf(),Ol.current=xc,gc){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}gc=!1}if(ps=0,qe=ze=Ie=null,Da=!1,so=0,am.current=null,n===null||n.return===null){Ue=1,oo=e,Ve=null;break}e:{var a=t,o=n.return,l=n,u=e;if(e=Je,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var N=d0(o);if(N!==null){N.flags&=-257,h0(N,o,l,a,e),N.mode&1&&u0(a,d,e),e=N,u=d;var k=e.updateQueue;if(k===null){var C=new Set;C.add(u),e.updateQueue=C}else k.add(u);break e}else{if(!(e&1)){u0(a,d,e),dm();break e}u=Error($(426))}}else if(je&&l.mode&1){var I=d0(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),h0(I,o,l,a,e),Hf(Ni(u,l));break e}}a=u=Ni(u,l),Ue!==4&&(Ue=2),La===null?La=[a]:La.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=bw(a,u,e);s0(a,y);break e;case 1:l=u;var x=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Er===null||!Er.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=_w(a,l,e);s0(a,R);break e}}a=a.return}while(a!==null)}Uw(n)}catch(A){e=A,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function Fw(){var t=yc.current;return yc.current=xc,t===null?xc:t}function dm(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),We===null||!(gs&268435455)&&!(su&268435455)||ur(We,Je)}function bc(t,e){var n=le;le|=2;var r=Fw();(We!==t||Je!==e)&&(Rn=null,cs(t,e));do try{nE();break}catch(s){Vw(t,s)}while(!0);if(Gf(),le=n,yc.current=r,Ve!==null)throw Error($(261));return We=null,Je=0,Ue}function nE(){for(;Ve!==null;)zw(Ve)}function rE(){for(;Ve!==null&&!IN();)zw(Ve)}function zw(t){var e=Bw(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?Uw(t):Ve=e,am.current=null}function Uw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Yj(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Ve=null;return}}else if(n=Qj(n,e,Pt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Ue===0&&(Ue=5)}function Zr(t,e,n){var r=me,s=qt.transition;try{qt.transition=null,me=1,sE(t,e,n,r)}finally{qt.transition=s,me=r}return null}function sE(t,e,n,r){do di();while(xr!==null);if(le&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(VN(t,a),t===We&&(Ve=We=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bl||(bl=!0,qw(nc,function(){return di(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=qt.transition,qt.transition=null;var o=me;me=1;var l=le;le|=4,am.current=null,Xj(t,n),Dw(n,t),jj(gh),sc=!!ph,gh=ph=null,t.current=n,Zj(n),kN(),le=l,me=o,qt.transition=a}else t.current=n;if(bl&&(bl=!1,xr=t,wc=s),a=t.pendingLanes,a===0&&(Er=null),PN(n.stateNode),Tt(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vc)throw vc=!1,t=Oh,Oh=null,t;return wc&1&&t.tag!==0&&di(),a=t.pendingLanes,a&1?t===Lh?Va++:(Va=0,Lh=t):Va=0,Ur(),null}function di(){if(xr!==null){var t=bv(wc),e=qt.transition,n=me;try{if(qt.transition=null,me=16>t?16:t,xr===null)var r=!1;else{if(t=xr,xr=null,wc=0,le&6)throw Error($(331));var s=le;for(le|=4,H=t.current;H!==null;){var a=H,o=a.child;if(H.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Oa(8,f,a)}var m=f.child;if(m!==null)m.return=f,H=m;else for(;H!==null;){f=H;var g=f.sibling,N=f.return;if(Pw(f),f===d){H=null;break}if(g!==null){g.return=N,H=g;break}H=N}}}var k=a.alternate;if(k!==null){var C=k.child;if(C!==null){k.child=null;do{var I=C.sibling;C.sibling=null,C=I}while(C!==null)}}H=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,H=o;else e:for(;H!==null;){if(a=H,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Oa(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,H=y;break e}H=a.return}}var x=t.current;for(H=x;H!==null;){o=H;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,H=v;else e:for(o=x;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ru(9,l)}}catch(A){Re(l,l.return,A)}if(l===o){H=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,H=R;break e}H=l.return}}if(le=s,Ur(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Qc,t)}catch{}r=!0}return r}finally{me=n,qt.transition=e}}return!1}function E0(t,e,n){e=Ni(n,e),e=bw(t,e,1),t=jr(t,e,1),e=gt(),t!==null&&(Eo(t,1,e),Tt(t,e))}function Re(t,e,n){if(t.tag===3)E0(t,t,n);else for(;e!==null;){if(e.tag===3){E0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=Ni(n,t),t=_w(e,t,1),e=jr(e,t,1),t=gt(),e!==null&&(Eo(e,1,t),Tt(e,t));break}}e=e.return}}function iE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Je&n)===n&&(Ue===4||Ue===3&&(Je&130023424)===Je&&500>De()-lm?cs(t,0):om|=n),Tt(t,e)}function $w(t,e){e===0&&(t.mode&1?(e=dl,dl<<=1,!(dl&130023424)&&(dl=4194304)):e=1);var n=gt();t=Wn(t,e),t!==null&&(Eo(t,e,n),Tt(t,n))}function aE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$w(t,n)}function oE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),$w(t,n)}var Bw;Bw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)_t=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _t=!1,Kj(t,e,n);_t=!!(t.flags&131072)}else _t=!1,je&&e.flags&1048576&&Gv(e,dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vl(t,e),t=e.pendingProps;var s=vi(e,ut.current);ui(e,n),s=tm(null,e,r,t,s,n);var a=nm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(a=!0,cc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yf(e),s.updater=nu,e.stateNode=s,s._reactInternals=e,Eh(e,r,t,n),e=Ih(null,e,r,!0,a,n)):(e.tag=0,je&&a&&Bf(e),pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=cE(r),t=Xt(r,t),s){case 0:e=Sh(null,e,r,t,n);break e;case 1:e=p0(null,e,r,t,n);break e;case 11:e=f0(null,e,r,t,n);break e;case 14:e=m0(null,e,r,Xt(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Sh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),p0(t,e,r,s,n);case 3:e:{if(Tw(e),t===null)throw Error($(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Zv(t,e),mc(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Ni(Error($(423)),e),e=g0(t,e,r,n,s);break e}else if(r!==s){s=Ni(Error($(424)),e),e=g0(t,e,r,n,s);break e}else for(Rt=Nr(e.stateNode.containerInfo.firstChild),Dt=e,je=!0,en=null,n=Jv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wi(),r===s){e=Gn(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return ew(e),t===null&&_h(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,xh(r,s)?o=null:a!==null&&xh(r,a)&&(e.flags|=32),Ew(t,e),pt(t,e,o,n),e.child;case 6:return t===null&&_h(e),null;case 13:return Sw(t,e,n);case 4:return Jf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bi(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),f0(t,e,r,s,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,ve(hc,r._currentValue),r._currentValue=o,a!==null)if(on(a.value,o)){if(a.children===s.children&&!jt.current){e=Gn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Un(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Nh(a.return,n,e),l.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nh(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ui(e,n),s=Ht(s),r=r(s),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,s=Xt(r,e.pendingProps),s=Xt(r.type,s),m0(t,e,r,s,n);case 15:return Nw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Xt(r,s),Vl(t,e),e.tag=1,Et(r)?(t=!0,cc(e)):t=!1,ui(e,n),ww(e,r,s),Eh(e,r,s,n),Ih(null,e,r,!0,t,n);case 19:return Iw(t,e,n);case 22:return jw(t,e,n)}throw Error($(156,e.tag))};function qw(t,e){return xv(t,e)}function lE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new lE(t,e,n,r)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cE(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Af)return 11;if(t===Pf)return 14}return 2}function Sr(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ks:return us(n.children,s,a,e);case Cf:o=8,s|=8;break;case Qd:return t=Bt(12,n,e,s|2),t.elementType=Qd,t.lanes=a,t;case Yd:return t=Bt(13,n,e,s),t.elementType=Yd,t.lanes=a,t;case Jd:return t=Bt(19,n,e,s),t.elementType=Jd,t.lanes=a,t;case ev:return iu(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xy:o=10;break e;case Zy:o=9;break e;case Af:o=11;break e;case Pf:o=14;break e;case or:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Bt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function us(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function iu(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=ev,t.lanes=n,t.stateNode={isHidden:!1},t}function kd(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Cd(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fm(t,e,n,r,s,a,o,l,u){return t=new uE(t,e,n,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Bt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yf(a),t}function dE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hw(t){if(!t)return Mr;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Et(n))return Hv(t,n,e)}return e}function Ww(t,e,n,r,s,a,o,l,u){return t=fm(n,r,!0,t,s,a,o,l,u),t.context=Hw(null),n=t.current,r=gt(),s=Tr(n),a=Un(r,s),a.callback=e??null,jr(n,a,s),t.current.lanes=s,Eo(t,s,r),Tt(t,r),t}function au(t,e,n,r){var s=e.current,a=gt(),o=Tr(s);return n=Hw(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(rn(t,s,o,a),Dl(t,s,o)),o}function _c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mm(t,e){T0(t,e),(t=t.alternate)&&T0(t,e)}function hE(){return null}var Gw=typeof reportError=="function"?reportError:function(t){console.error(t)};function pm(t){this._internalRoot=t}ou.prototype.render=pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));au(t,e,null,null)};ou.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){au(null,t,null,null)}),e[Hn]=null}};function ou(t){this._internalRoot=t}ou.prototype.unstable_scheduleHydration=function(t){if(t){var e=jv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&Tv(t)}};function gm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function lu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S0(){}function fE(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=_c(o);a.call(d)}}var o=Ww(e,r,t,0,null,!1,!1,"",S0);return t._reactRootContainer=o,t[Hn]=o.current,Za(t.nodeType===8?t.parentNode:t),xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=_c(u);l.call(d)}}var u=fm(t,0,!1,null,null,!1,!1,"",S0);return t._reactRootContainer=u,t[Hn]=u.current,Za(t.nodeType===8?t.parentNode:t),xs(function(){au(e,u,n,r)}),u}function cu(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=_c(o);l.call(u)}}au(e,o,t,s)}else o=fE(n,e,t,s,r);return _c(o)}_v=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ba(e.pendingLanes);n!==0&&(Df(e,n|1),Tt(e,De()),!(le&6)&&(ji=De()+500,Ur()))}break;case 13:xs(function(){var r=Wn(t,1);if(r!==null){var s=gt();rn(r,t,1,s)}}),mm(t,1)}};Of=function(t){if(t.tag===13){var e=Wn(t,134217728);if(e!==null){var n=gt();rn(e,t,134217728,n)}mm(t,134217728)}};Nv=function(t){if(t.tag===13){var e=Tr(t),n=Wn(t,e);if(n!==null){var r=gt();rn(n,t,e,r)}mm(t,e)}};jv=function(){return me};Ev=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};oh=function(t,e,n){switch(e){case"input":if(eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Zc(r);if(!s)throw Error($(90));nv(r),eh(r,s)}}}break;case"textarea":sv(t,n);break;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}};dv=cm;hv=xs;var mE={usingClientEntryPoint:!1,Events:[So,Xs,Zc,cv,uv,cm]},ga={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pE={bundleType:ga.bundleType,version:ga.version,rendererPackageName:ga.rendererPackageName,rendererConfig:ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pv(t),t===null?null:t.stateNode},findFiberByHostInstance:ga.findFiberByHostInstance||hE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Qc=_l.inject(pE),wn=_l}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mE;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gm(e))throw Error($(200));return dE(t,e,null,n)};Vt.createRoot=function(t,e){if(!gm(t))throw Error($(299));var n=!1,r="",s=Gw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fm(t,1,!1,null,null,n,!1,r,s),t[Hn]=e.current,Za(t.nodeType===8?t.parentNode:t),new pm(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=pv(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return xs(t)};Vt.hydrate=function(t,e,n){if(!lu(e))throw Error($(200));return cu(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!gm(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Gw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ww(e,null,t,1,n??null,s,!1,a,o),t[Hn]=e.current,Za(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ou(e)};Vt.render=function(t,e,n){if(!lu(e))throw Error($(200));return cu(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!lu(t))throw Error($(40));return t._reactRootContainer?(xs(function(){cu(null,null,t,!1,function(){t._reactRootContainer=null,t[Hn]=null})}),!0):!1};Vt.unstable_batchedUpdates=cm;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!lu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return cu(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function Kw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kw)}catch(t){console.error(t)}}Kw(),Ky.exports=Vt;var gE=Ky.exports,Qw,I0=gE;Qw=I0.createRoot,I0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lo.apply(this,arguments)}var yr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yr||(yr={}));const k0="popstate";function xE(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return zh("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Nc(s)}return vE(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yE(){return Math.random().toString(36).substr(2,8)}function C0(t,e){return{usr:t.state,key:t.key,idx:e}}function zh(t,e,n,r){return n===void 0&&(n=null),lo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ui(e):e,{state:n,key:e&&e.key||r||yE()})}function Nc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ui(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=yr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(lo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function m(){l=yr.Pop;let I=f(),y=I==null?null:I-d;d=I,u&&u({action:l,location:C.location,delta:y})}function g(I,y){l=yr.Push;let x=zh(C.location,I,y);d=f()+1;let v=C0(x,d),R=C.createHref(x);try{o.pushState(v,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(R)}a&&u&&u({action:l,location:C.location,delta:1})}function N(I,y){l=yr.Replace;let x=zh(C.location,I,y);d=f();let v=C0(x,d),R=C.createHref(x);o.replaceState(v,"",R),a&&u&&u({action:l,location:C.location,delta:0})}function k(I){let y=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof I=="string"?I:Nc(I);return x=x.replace(/ $/,"%20"),Oe(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let C={get action(){return l},get location(){return t(s,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(k0,m),u=I,()=>{s.removeEventListener(k0,m),u=null}},createHref(I){return e(s,I)},createURL:k,encodeLocation(I){let y=k(I);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:N,go(I){return o.go(I)}};return C}var A0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(A0||(A0={}));function wE(t,e,n){return n===void 0&&(n="/"),bE(t,e,n,!1)}function bE(t,e,n,r){let s=typeof e=="string"?Ui(e):e,a=xm(s.pathname||"/",n);if(a==null)return null;let o=Jw(t);_E(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=RE(a);l=AE(o[u],d,r)}return l}function Jw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(Oe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ir([r,u.relativePath]),f=n.concat(u);a.children&&a.children.length>0&&(Oe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Jw(a.children,e,f,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:kE(d,a.index),routesMeta:f})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of Xw(a.path))s(a,o,u)}),e}function Xw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=Xw(r.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function _E(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const NE=/^:[\w-]+$/,jE=3,EE=2,TE=1,SE=10,IE=-2,P0=t=>t==="*";function kE(t,e){let n=t.split("/"),r=n.length;return n.some(P0)&&(r+=IE),e&&(r+=EE),n.filter(s=>!P0(s)).reduce((s,a)=>s+(NE.test(a)?jE:a===""?TE:SE),r)}function CE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function AE(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=R0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=R0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Ir([a,m.pathname]),pathnameBase:LE(Ir([a,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(a=Ir([a,m.pathnameBase]))}return o}function R0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PE(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:N}=f;if(g==="*"){let C=l[m]||"";o=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const k=l[m];return N&&!k?d[g]=void 0:d[g]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function PE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function RE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ME(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ui(t):t;return{pathname:n?n.startsWith("/")?n:DE(n,e):e,search:VE(r),hash:FE(s)}}function DE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ad(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ym(t,e){let n=OE(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ui(t):(s=lo({},t),Oe(!s.pathname||!s.pathname.includes("?"),Ad("?","pathname","search",s)),Oe(!s.pathname||!s.pathname.includes("#"),Ad("#","pathname","hash",s)),Oe(!s.search||!s.search.includes("#"),Ad("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=ME(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),LE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Zw=["post","put","patch","delete"];new Set(Zw);const UE=["get",...Zw];new Set(UE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},co.apply(this,arguments)}const wm=D.createContext(null),$E=D.createContext(null),$r=D.createContext(null),uu=D.createContext(null),Zn=D.createContext({outlet:null,matches:[],isDataRoute:!1}),e1=D.createContext(null);function BE(t,e){let{relative:n}=e===void 0?{}:e;$i()||Oe(!1);let{basename:r,navigator:s}=D.useContext($r),{hash:a,pathname:o,search:l}=n1(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ir([r,o])),s.createHref({pathname:u,search:l,hash:a})}function $i(){return D.useContext(uu)!=null}function ko(){return $i()||Oe(!1),D.useContext(uu).location}function t1(t){D.useContext($r).static||D.useLayoutEffect(t)}function bm(){let{isDataRoute:t}=D.useContext(Zn);return t?rT():qE()}function qE(){$i()||Oe(!1);let t=D.useContext(wm),{basename:e,future:n,navigator:r}=D.useContext($r),{matches:s}=D.useContext(Zn),{pathname:a}=ko(),o=JSON.stringify(ym(s,n.v7_relativeSplatPath)),l=D.useRef(!1);return t1(()=>{l.current=!0}),D.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let m=vm(d,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ir([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,o,a,t])}function HE(){let{matches:t}=D.useContext(Zn),e=t[t.length-1];return e?e.params:{}}function n1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext($r),{matches:s}=D.useContext(Zn),{pathname:a}=ko(),o=JSON.stringify(ym(s,r.v7_relativeSplatPath));return D.useMemo(()=>vm(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function WE(t,e){return GE(t,e)}function GE(t,e,n,r){$i()||Oe(!1);let{navigator:s}=D.useContext($r),{matches:a}=D.useContext(Zn),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=ko(),f;if(e){var m;let I=typeof e=="string"?Ui(e):e;u==="/"||(m=I.pathname)!=null&&m.startsWith(u)||Oe(!1),f=I}else f=d;let g=f.pathname||"/",N=g;if(u!=="/"){let I=u.replace(/^\//,"").split("/");N="/"+g.replace(/^\//,"").split("/").slice(I.length).join("/")}let k=wE(t,{pathname:N}),C=XE(k&&k.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:Ir([u,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?u:Ir([u,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),a,n,r);return e&&C?D.createElement(uu.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:yr.Pop}},C):C}function KE(){let t=nT(),e=zE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const QE=D.createElement(KE,null);class YE extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Zn.Provider,{value:this.props.routeContext},D.createElement(e1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JE(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(wm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Zn.Provider,{value:e},r)}function XE(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);f>=0||Oe(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let m=o[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:N}=n,k=m.route.loader&&g[m.route.id]===void 0&&(!N||N[m.route.id]===void 0);if(m.route.lazy||k){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,m,g)=>{let N,k=!1,C=null,I=null;n&&(N=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||QE,u&&(d<0&&g===0?(k=!0,I=null):d===g&&(k=!0,I=m.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),x=()=>{let v;return N?v=C:k?v=I:m.route.Component?v=D.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=f,D.createElement(JE,{match:m,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:v})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?D.createElement(YE,{location:n.location,revalidation:n.revalidation,component:C,error:N,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var r1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(r1||{}),jc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jc||{});function ZE(t){let e=D.useContext(wm);return e||Oe(!1),e}function eT(t){let e=D.useContext($E);return e||Oe(!1),e}function tT(t){let e=D.useContext(Zn);return e||Oe(!1),e}function s1(t){let e=tT(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function nT(){var t;let e=D.useContext(e1),n=eT(jc.UseRouteError),r=s1(jc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rT(){let{router:t}=ZE(r1.UseNavigateStable),e=s1(jc.UseNavigateStable),n=D.useRef(!1);return t1(()=>{n.current=!0}),D.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,co({fromRouteId:e},a)))},[t,e])}function sT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iT(t){let{to:e,replace:n,state:r,relative:s}=t;$i()||Oe(!1);let{future:a,static:o}=D.useContext($r),{matches:l}=D.useContext(Zn),{pathname:u}=ko(),d=bm(),f=vm(e,ym(l,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return D.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Na(t){Oe(!1)}function aT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=yr.Pop,navigator:a,static:o=!1,future:l}=t;$i()&&Oe(!1);let u=e.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:a,static:o,future:co({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof r=="string"&&(r=Ui(r));let{pathname:f="/",search:m="",hash:g="",state:N=null,key:k="default"}=r,C=D.useMemo(()=>{let I=xm(f,u);return I==null?null:{location:{pathname:I,search:m,hash:g,state:N,key:k},navigationType:s}},[u,f,m,g,N,k,s]);return C==null?null:D.createElement($r.Provider,{value:d},D.createElement(uu.Provider,{children:n,value:C}))}function oT(t){let{children:e,location:n}=t;return WE(Uh(e),n)}new Promise(()=>{});function Uh(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let a=[...e,s];if(r.type===D.Fragment){n.push.apply(n,Uh(r.props.children,a));return}r.type!==Na&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uh(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}function lT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uT(t,e){return t.button===0&&(!e||e==="_self")&&!cT(t)}const dT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hT="6";try{window.__reactRouterVersion=hT}catch{}const fT="startTransition",M0=iN[fT];function mT(t){let{basename:e,children:n,future:r,window:s}=t,a=D.useRef();a.current==null&&(a.current=xE({window:s,v5Compat:!0}));let o=a.current,[l,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=D.useCallback(m=>{d&&M0?M0(()=>u(m)):u(m)},[u,d]);return D.useLayoutEffect(()=>o.listen(f),[o,f]),D.useEffect(()=>sT(r),[r]),D.createElement(aT,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const pT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D0=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=lT(e,dT),{basename:N}=D.useContext($r),k,C=!1;if(typeof d=="string"&&gT.test(d)&&(k=d,pT))try{let v=new URL(window.location.href),R=d.startsWith("//")?new URL(v.protocol+d):new URL(d),A=xm(R.pathname,N);R.origin===v.origin&&A!=null?d=A+R.search+R.hash:C=!0}catch{}let I=BE(d,{relative:s}),y=xT(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:m});function x(v){r&&r(v),v.defaultPrevented||y(v)}return D.createElement("a",$h({},g,{href:k||I,onClick:C||a?r:x,ref:n,target:u}))});var O0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(O0||(O0={}));var L0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(L0||(L0={}));function xT(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=bm(),d=ko(),f=n1(t,{relative:o});return D.useCallback(m=>{if(uT(m,n)){m.preventDefault();let g=r!==void 0?r:Nc(d)===Nc(f);u(t,{replace:g,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,a,o,l])}var V0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},a1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=a>>2,m=(a&3)<<4|l>>4;let g=(l&15)<<2|d>>6,N=d&63;u||(N=64,o||(g=64)),r.push(n[f],n[m],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||m==null)throw new vT;const g=a<<2|l>>4;if(r.push(g),d!==64){const N=l<<4&240|d>>2;if(r.push(N),m!==64){const k=d<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(t){const e=i1(t);return a1.encodeByteArray(e,!0)},Ec=function(t){return wT(t).replace(/\./g,"")},o1=function(t){try{return a1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=()=>bT().__FIREBASE_DEFAULTS__,NT=()=>{if(typeof process>"u"||typeof V0>"u")return;const t=V0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o1(t[1]);return e&&JSON.parse(e)},du=()=>{try{return _T()||NT()||jT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},l1=t=>{var e,n;return(n=(e=du())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},c1=t=>{const e=l1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},u1=()=>{var t;return(t=du())===null||t===void 0?void 0:t.config},d1=t=>{var e;return(e=du())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ec(JSON.stringify(n)),Ec(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function ST(){var t;const e=(t=du())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function f1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CT(){const t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AT(){return!ST()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m1(){try{return typeof indexedDB=="object"}catch{return!1}}function p1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function PT(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="FirebaseError";class Kt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RT,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Is.prototype.create)}}class Is{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?MT(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Kt(s,l,r)}}function MT(t,e){return t.replace(DT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const DT=/\{\$([^}]+)}/g;function OT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(F0(a)&&F0(o)){if(!uo(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function F0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ja(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ea(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LT(t,e){const n=new VT(t,e);return n.subscribe.bind(n)}class VT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pd),s.error===void 0&&(s.error=Pd),s.complete===void 0&&(s.complete=Pd);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=1e3,UT=2,$T=4*60*60*1e3,BT=.5;function z0(t,e=zT,n=UT){const r=e*Math.pow(n,t),s=Math.round(BT*r*(Math.random()-.5)*2);return Math.min($T,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return t&&t._delegate?t._delegate:t}class Gt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ET;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WT(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HT(t){return t===es?void 0:t}function WT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const KT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},QT=ae.INFO,YT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},JT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hu{constructor(e){this.name=e,this._logLevel=QT,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const XT=(t,e)=>e.some(n=>t instanceof n);let U0,$0;function ZT(){return U0||(U0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eS(){return $0||($0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g1=new WeakMap,Bh=new WeakMap,x1=new WeakMap,Rd=new WeakMap,_m=new WeakMap;function tS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(kr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&g1.set(n,t)}).catch(()=>{}),_m.set(e,t),e}function nS(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Bh.set(t,e)}let qh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rS(t){qh=t(qh)}function sS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Md(this),e,...n);return x1.set(r,e.sort?e.sort():[e]),kr(r)}:eS().includes(t)?function(...e){return t.apply(Md(this),e),kr(g1.get(this))}:function(...e){return kr(t.apply(Md(this),e))}}function iS(t){return typeof t=="function"?sS(t):(t instanceof IDBTransaction&&nS(t),XT(t,ZT())?new Proxy(t,qh):t)}function kr(t){if(t instanceof IDBRequest)return tS(t);if(Rd.has(t))return Rd.get(t);const e=iS(t);return e!==t&&(Rd.set(t,e),_m.set(e,t)),e}const Md=t=>_m.get(t);function y1(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=kr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(kr(o.result),u.oldVersion,u.newVersion,kr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const aS=["get","getKey","getAll","getAllKeys","count"],oS=["put","add","delete","clear"],Dd=new Map;function B0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=oS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||aS.includes(n)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Dd.set(e,a),a}rS(t=>({...t,get:(e,n,r)=>B0(e,n)||t.get(e,n,r),has:(e,n)=>!!B0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hh="@firebase/app",q0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new hu("@firebase/app"),uS="@firebase/app-compat",dS="@firebase/analytics-compat",hS="@firebase/analytics",fS="@firebase/app-check-compat",mS="@firebase/app-check",pS="@firebase/auth",gS="@firebase/auth-compat",xS="@firebase/database",yS="@firebase/data-connect",vS="@firebase/database-compat",wS="@firebase/functions",bS="@firebase/functions-compat",_S="@firebase/installations",NS="@firebase/installations-compat",jS="@firebase/messaging",ES="@firebase/messaging-compat",TS="@firebase/performance",SS="@firebase/performance-compat",IS="@firebase/remote-config",kS="@firebase/remote-config-compat",CS="@firebase/storage",AS="@firebase/storage-compat",PS="@firebase/firestore",RS="@firebase/vertexai-preview",MS="@firebase/firestore-compat",DS="firebase",OS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="[DEFAULT]",LS={[Hh]:"fire-core",[uS]:"fire-core-compat",[hS]:"fire-analytics",[dS]:"fire-analytics-compat",[mS]:"fire-app-check",[fS]:"fire-app-check-compat",[pS]:"fire-auth",[gS]:"fire-auth-compat",[xS]:"fire-rtdb",[yS]:"fire-data-connect",[vS]:"fire-rtdb-compat",[wS]:"fire-fn",[bS]:"fire-fn-compat",[_S]:"fire-iid",[NS]:"fire-iid-compat",[jS]:"fire-fcm",[ES]:"fire-fcm-compat",[TS]:"fire-perf",[SS]:"fire-perf-compat",[IS]:"fire-rc",[kS]:"fire-rc-compat",[CS]:"fire-gcs",[AS]:"fire-gcs-compat",[PS]:"fire-fst",[MS]:"fire-fst-compat",[RS]:"fire-vertex","fire-js":"fire-js",[DS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,VS=new Map,Gh=new Map;function H0(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ln(t){const e=t.name;if(Gh.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;Gh.set(e,t);for(const n of Tc.values())H0(n,t);for(const n of VS.values())H0(n,t);return!0}function Br(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new Is("app","Firebase",FS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=OS;function v1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Cr.create("bad-app-name",{appName:String(s)});if(n||(n=u1()),!n)throw Cr.create("no-options");const a=Tc.get(s);if(a){if(uo(n,a.options)&&uo(r,a.config))return a;throw Cr.create("duplicate-app",{appName:s})}const o=new GT(s);for(const u of Gh.values())o.addComponent(u);const l=new zS(n,r,o);return Tc.set(s,l),l}function fu(t=Wh){const e=Tc.get(t);if(!e&&t===Wh&&u1())return v1();if(!e)throw Cr.create("no-app",{appName:t});return e}function St(t,e,n){var r;let s=(r=LS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(l.join(" "));return}ln(new Gt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebase-heartbeat-database",$S=1,ho="firebase-heartbeat-store";let Od=null;function w1(){return Od||(Od=y1(US,$S,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),Od}async function BS(t){try{const n=(await w1()).transaction(ho),r=await n.objectStore(ho).get(b1(t));return await n.done,r}catch(e){if(e instanceof Kt)Kn.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function W0(t,e){try{const r=(await w1()).transaction(ho,"readwrite");await r.objectStore(ho).put(e,b1(t)),await r.done}catch(n){if(n instanceof Kt)Kn.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function b1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=1024,HS=30*24*60*60*1e3;class WS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=G0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=HS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G0(),{heartbeatsToSend:r,unsentEntries:s}=GS(this._heartbeatsCache.heartbeats),a=Ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Kn.warn(n),""}}}function G0(){return new Date().toISOString().substring(0,10)}function GS(t,e=qS){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),K0(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),K0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m1()?p1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function K0(t){return Ec(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){ln(new Gt("platform-logger",e=>new lS(e),"PRIVATE")),ln(new Gt("heartbeat",e=>new WS(e),"PRIVATE")),St(Hh,q0,t),St(Hh,q0,"esm2017"),St("fire-js","")}QS("");function Nm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YS=_1,N1=new Is("auth","Firebase",_1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new hu("@firebase/auth");function JS(t,...e){Sc.logLevel<=ae.WARN&&Sc.warn(`Auth (${ks}): ${t}`,...e)}function $l(t,...e){Sc.logLevel<=ae.ERROR&&Sc.error(`Auth (${ks}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,...e){throw jm(t,...e)}function _n(t,...e){return jm(t,...e)}function j1(t,e,n){const r=Object.assign(Object.assign({},YS()),{[e]:n});return new Is("auth","Firebase",r).create(e,{appName:t.name})}function $n(t){return j1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return N1.create(t,...e)}function J(t,e,...n){if(!t)throw jm(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $l(e),new Error(e)}function Qn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XS(){return Q0()==="http:"||Q0()==="https:"}function Q0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XS()||f1()||"connection"in navigator)?navigator.onLine:!0}function eI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qn(n>e,"Short delay should be less than long delay!"),this.isMobile=TT()||kT()}get(){return ZS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e){Qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Ao(3e4,6e4);function qr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function er(t,e,n,r,s={}){return T1(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Co(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return IT()||(d.referrerPolicy="no-referrer"),E1.fetch()(S1(t,t.config.apiHost,n,l),d)})}async function T1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tI),e);try{const s=new sI(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Nl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Nl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw j1(t,f,d);cn(t,f)}}catch(s){if(s instanceof Kt)throw s;cn(t,"network-request-failed",{message:String(s)})}}async function Po(t,e,n,r,s={}){const a=await er(t,e,n,r,s);return"mfaPendingCredential"in a&&cn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function S1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Em(t.config,s):`${t.config.apiScheme}://${s}`}function rI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),nI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_n(t,e,r);return s.customData._tokenResponse=n,s}function Y0(t){return t!==void 0&&t.enterprise!==void 0}class iI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function aI(t,e){return er(t,"GET","/v2/recaptchaConfig",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e){return er(t,"POST","/v1/accounts:delete",e)}async function I1(t,e){return er(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lI(t,e=!1){const n=Ce(t),r=await n.getIdToken(e),s=Tm(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Fa(Ld(s.auth_time)),issuedAtTime:Fa(Ld(s.iat)),expirationTime:Fa(Ld(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ld(t){return Number(t)*1e3}function Tm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $l("JWT malformed, contained fewer than 3 sections"),null;try{const s=o1(n);return s?JSON.parse(s):($l("Failed to decode base64 JWT payload"),null)}catch(s){return $l("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function J0(t){const e=Tm(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kt&&cI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fa(this.lastLoginAt),this.creationTime=Fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ei(t,I1(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?k1(a.providerUserInfo):[],l=hI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Qh(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function dI(t){const e=Ce(t);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function k1(t){return t.map(e=>{var{providerId:n}=e,r=Nm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI(t,e){const n=await T1(t,{},async()=>{const r=Co({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=S1(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",E1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mI(t,e){return er(t,"POST","/v2/accounts:revokeToken",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=J0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await fI(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new hi;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(J(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hi,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=Nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Qh(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Ei(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lI(this,e)}reload(){return dI(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await Ei(this,oI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,l,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,N=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,k=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:R,isAnonymous:A,providerData:M,stsTokenManager:j}=n;J(v&&j,e,"internal-error");const w=hi.fromJSON(this.name,j);J(typeof v=="string",e,"internal-error"),ir(m,e.name),ir(g,e.name),J(typeof R=="boolean",e,"internal-error"),J(typeof A=="boolean",e,"internal-error"),ir(N,e.name),ir(k,e.name),ir(C,e.name),ir(I,e.name),ir(y,e.name),ir(x,e.name);const S=new Vn({uid:v,auth:e,email:g,emailVerified:R,displayName:m,isAnonymous:A,photoURL:k,phoneNumber:N,tenantId:C,stsTokenManager:w,createdAt:y,lastLoginAt:x});return M&&Array.isArray(M)&&(S.providerData=M.map(b=>Object.assign({},b))),I&&(S._redirectEventId=I),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new hi;s.updateFromServerResponse(n);const a=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ic(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?k1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new hi;l.updateFromIdToken(r);const u=new Vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;function Fn(t){Qn(t instanceof Function,"Expected a class definition");let e=X0.get(t);return e?(Qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C1.type="NONE";const Z0=C1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e,n){return`firebase:${t}:${e}:${n}`}class fi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Bl(this.userKey,s.apiKey,a),this.fullPersistenceKey=Bl("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fi(Fn(Z0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Fn(Z0);const o=Bl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const m=Vn._fromJSON(e,f);d!==a&&(l=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new fi(a,e,r):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new fi(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O1(e))return"Blackberry";if(L1(e))return"Webos";if(P1(e))return"Safari";if((e.includes("chrome/")||R1(e))&&!e.includes("edge/"))return"Chrome";if(D1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function A1(t=dt()){return/firefox\//i.test(t)}function P1(t=dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R1(t=dt()){return/crios\//i.test(t)}function M1(t=dt()){return/iemobile/i.test(t)}function D1(t=dt()){return/android/i.test(t)}function O1(t=dt()){return/blackberry/i.test(t)}function L1(t=dt()){return/webos/i.test(t)}function Sm(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pI(t=dt()){var e;return Sm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gI(){return CT()&&document.documentMode===10}function V1(t=dt()){return Sm(t)||D1(t)||L1(t)||O1(t)||/windows phone/i.test(t)||M1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e=[]){let n;switch(t){case"Browser":n=ex(dt());break;case"Worker":n=`${ex(dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ks}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e={}){return er(t,"GET","/v2/passwordPolicy",qr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=6;class wI{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tx(this),this.idTokenSubscription=new tx(this),this.beforeStateQueue=new xI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await fi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await I1(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject($n(this));const n=e?Ce(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yI(this),n=new wI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Is("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await mI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await fi.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Cs(t){return Ce(t)}class tx{constructor(e){this.auth=e,this.observer=null,this.addObserver=LT(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _I(t){mu=t}function z1(t){return mu.loadJS(t)}function NI(){return mu.recaptchaEnterpriseScript}function jI(){return mu.gapiScript}function EI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TI="recaptcha-enterprise",SI="NO_RECAPTCHA";class II{constructor(e){this.type=TI,this.auth=Cs(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{aI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new iI(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;Y0(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(SI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&Y0(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=NI();u.length!==0&&(u+=l),z1(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function nx(t,e,n,r=!1){const s=new II(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await nx(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await nx(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){const n=Br(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(uo(a,e??{}))return s;cn(s,"already-initialized")}return n.initialize({options:e})}function CI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AI(t,e,n){const r=Cs(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=U1(e),{host:o,port:l}=PI(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),RI()}function U1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PI(t){const e=U1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:rx(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:rx(o)}}}function rx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function MI(t,e){return er(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DI(t,e){return Po(t,"POST","/v1/accounts:signInWithPassword",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t,e){return Po(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}async function LI(t,e){return Po(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends Im{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,n,"signInWithPassword",DI);case"emailLink":return OI(e,{email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,r,"signUpPassword",MI);case"emailLink":return LI(e,{idToken:n,email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mi(t,e){return Po(t,"POST","/v1/accounts:signInWithIdp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="http://localhost";class ys extends Im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=Nm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ys(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mi(e,n)}buildRequest(){const e={requestUri:VI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Co(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zI(t){const e=ja(Ea(t)).link,n=e?ja(Ea(e)).deep_link_id:null,r=ja(Ea(t)).deep_link_id;return(r?ja(Ea(r)).link:null)||r||n||e||t}class km{constructor(e){var n,r,s,a,o,l;const u=ja(Ea(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=FI((s=u.mode)!==null&&s!==void 0?s:null);J(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=zI(e);try{return new km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.providerId=Bi.PROVIDER_ID}static credential(e,n){return fo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=km.parseLink(n);return J(r,"argument-error"),fo._fromEmailAndCode(e,r.code,r.tenantId)}}Bi.PROVIDER_ID="password";Bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends $1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ro{constructor(){super("facebook.com")}static credential(e){return ys._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ys._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Ro{constructor(){super("github.com")}static credential(e){return ys._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Ro{constructor(){super("twitter.com")}static credential(e,n){return ys._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(t,e){return Po(t,"POST","/v1/accounts:signUp",qr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Vn._fromIdTokenResponse(e,r,s),o=sx(r);return new vs({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=sx(r);return new vs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function sx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends Kt{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new kc(e,n,r,s)}}function B1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(t,a,e,r):a})}async function $I(t,e,n=!1){const r=await Ei(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(t,e,n=!1){const{auth:r}=t;if(vn(r.app))return Promise.reject($n(r));const s="reauthenticate";try{const a=await Ei(t,B1(r,s,e,t),n);J(a.idToken,r,"internal-error");const o=Tm(a.idToken);J(o,r,"internal-error");const{sub:l}=o;return J(t.uid===l,r,"user-mismatch"),vs._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&cn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(t,e,n=!1){if(vn(t.app))return Promise.reject($n(t));const r="signIn",s=await B1(t,r,e),a=await vs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function qI(t,e){return q1(Cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(t){const e=Cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HI(t,e,n){if(vn(t.app))return Promise.reject($n(t));const r=Cs(t),o=await Yh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UI).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&H1(t),u}),l=await vs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function WI(t,e,n){return vn(t.app)?Promise.reject($n(t)):qI(Ce(t),Bi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&H1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t,e){return er(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ce(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ei(r,GI(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function QI(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function YI(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function JI(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}function XI(t){return Ce(t).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1e3,ek=10;class G1 extends W1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);gI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ek):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}G1.type="LOCAL";const tk=G1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends W1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}K1.type="SESSION";const Q1=K1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new pu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,a)),u=await nk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Cm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(g.data.response);break;default:clearTimeout(f),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function sk(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function ik(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ak(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ok(){return Y1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firebaseLocalStorageDb",lk=1,Ac="firebaseLocalStorage",X1="fbase_key";class Mo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gu(t,e){return t.transaction([Ac],e?"readwrite":"readonly").objectStore(Ac)}function ck(){const t=indexedDB.deleteDatabase(J1);return new Mo(t).toPromise()}function Jh(){const t=indexedDB.open(J1,lk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ac,{keyPath:X1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ac)?e(r):(r.close(),await ck(),e(await Jh()))})})}async function ix(t,e,n){const r=gu(t,!0).put({[X1]:e,value:n});return new Mo(r).toPromise()}async function uk(t,e){const n=gu(t,!1).get(e),r=await new Mo(n).toPromise();return r===void 0?null:r.value}function ax(t,e){const n=gu(t,!0).delete(e);return new Mo(n).toPromise()}const dk=800,hk=3;class Z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pu._getInstance(ok()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ik(),!this.activeServiceWorker)return;this.sender=new rk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jh();return await ix(e,Cc,"1"),await ax(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ix(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ax(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=gu(s,!1).getAll();return new Mo(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z1.type="LOCAL";const fk=Z1;new Ao(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t,e){return e?Fn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am extends Im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pk(t){return q1(t.auth,new Am(t),t.bypassAuthState)}function gk(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),BI(n,new Am(t),t.bypassAuthState)}async function xk(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),$I(n,new Am(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pk;case"linkViaPopup":case"linkViaRedirect":return xk;case"reauthViaPopup":case"reauthViaRedirect":return gk;default:cn(this.auth,"internal-error")}}resolve(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=new Ao(2e3,1e4);class ii extends eb{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,ii.currentPopupAction&&ii.currentPopupAction.cancel(),ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){Qn(this.filter.length===1,"Popup operations only handle one event");const e=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yk.get())};e()}}ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="pendingRedirect",ql=new Map;class wk extends eb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ql.get(this.auth._key());if(!e){try{const r=await bk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ql.set(this.auth._key(),e)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bk(t,e){const n=jk(e),r=Nk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _k(t,e){ql.set(t._key(),e)}function Nk(t){return Fn(t._redirectPersistence)}function jk(t){return Bl(vk,t.config.apiKey,t.name)}async function Ek(t,e,n=!1){if(vn(t.app))return Promise.reject($n(t));const r=Cs(t),s=mk(r,e),o=await new wk(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=10*60*1e3;class Sk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ik(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tb(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tk&&this.cachedEventUids.clear(),this.cachedEventUids.has(ox(e))}saveEventToCache(e){this.cachedEventUids.add(ox(e)),this.lastProcessedEventTime=Date.now()}}function ox(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Ik(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(t,e={}){return er(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ak=/^https?/;async function Pk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await kk(t);for(const n of e)try{if(Rk(n))return}catch{}cn(t,"unauthorized-domain")}function Rk(t){const e=Kh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ak.test(n))return!1;if(Ck.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new Ao(3e4,6e4);function lx(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Dk(t){return new Promise((e,n)=>{var r,s,a;function o(){lx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lx(),n(_n(t,"network-request-failed"))},timeout:Mk.get()})}if(!((s=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Nn().gapi)===null||a===void 0)&&a.load)o();else{const l=EI("iframefcb");return Nn()[l]=()=>{gapi.load?o():n(_n(t,"network-request-failed"))},z1(`${jI()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Hl=null,e})}let Hl=null;function Ok(t){return Hl=Hl||Dk(t),Hl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Ao(5e3,15e3),Vk="__/auth/iframe",Fk="emulator/auth/iframe",zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $k(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Em(e,Fk):`https://${t.config.authDomain}/${Vk}`,r={apiKey:e.apiKey,appName:t.name,v:ks},s=Uk.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Co(r).slice(1)}`}async function Bk(t){const e=await Ok(t),n=Nn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:$k(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zk,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),l=Nn().setTimeout(()=>{a(o)},Lk.get());function u(){Nn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hk=500,Wk=600,Gk="_blank",Kk="http://localhost";class cx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qk(t,e,n,r=Hk,s=Wk){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},qk),{width:r.toString(),height:s.toString(),top:a,left:o}),d=dt().toLowerCase();n&&(l=R1(d)?Gk:n),A1(d)&&(e=e||Kk,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[N,k])=>`${g}${N}=${k},`,"");if(pI(d)&&l!=="_self")return Yk(e||"",l),new cx(null);const m=window.open(e||"",l,f);J(m,t,"popup-blocked");try{m.focus()}catch{}return new cx(m)}function Yk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="__/auth/handler",Xk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function ux(t,e,n,r,s,a){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ks,eventId:s};if(e instanceof $1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",OT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof Ro){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${Zk}=${encodeURIComponent(u)}`:"";return`${eC(t)}?${Co(l).slice(1)}${d}`}function eC({config:t}){return t.emulator?Em(t,Xk):`https://${t.authDomain}/${Jk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class tC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=Ek,this._overrideRedirectResult=_k}async _openPopup(e,n,r,s){var a;Qn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await ux(e,n,r,Kh(),s);return Qk(e,o,Cm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await ux(e,n,r,Kh(),s);return sk(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Qn(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Bk(e),r=new Sk(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vd,{type:Vd},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Vd];o!==void 0&&n(!!o),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return V1()||P1()||Sm()}}const nC=tC;var dx="@firebase/auth",hx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iC(t){ln(new Gt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},d=new bI(r,s,a,u);return CI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ln(new Gt("auth-internal",e=>{const n=Cs(e.getProvider("auth").getImmediate());return(r=>new rC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),St(dx,hx,sC(t)),St(dx,hx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=5*60,oC=d1("authIdTokenMaxAge")||aC;let fx=null;const lC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oC)return;const s=n==null?void 0:n.token;fx!==s&&(fx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function cC(t=fu()){const e=Br(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kI(t,{popupRedirectResolver:nC,persistence:[fk,tk,Q1]}),r=d1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=lC(a.toString());YI(n,o,()=>o(n.currentUser)),QI(n,l=>o(l))}}const s=l1("auth");return s&&AI(n,`http://${s}`),n}function uC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_I({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=_n("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",uC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iC("Browser");var dC="firebase",hC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */St(dC,hC,"app");const nb="@firebase/installations",Pm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=1e4,sb=`w:${Pm}`,ib="FIS_v2",fC="https://firebaseinstallations.googleapis.com/v1",mC=60*60*1e3,pC="installations",gC="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ws=new Is(pC,gC,xC);function ab(t){return t instanceof Kt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob({projectId:t}){return`${fC}/projects/${t}/installations`}function lb(t){return{token:t.token,requestStatus:2,expiresIn:vC(t.expiresIn),creationTime:Date.now()}}async function cb(t,e){const r=(await e.json()).error;return ws.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ub({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yC(t,{refreshToken:e}){const n=ub(t);return n.append("Authorization",wC(e)),n}async function db(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vC(t){return Number(t.replace("s","000"))}function wC(t){return`${ib} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ob(t),s=ub(t),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:ib,appId:t.appId,sdkVersion:sb},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await db(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:lb(d.authToken)}}else throw await cb("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^[cdef][\w-]{21}$/,Xh="";function jC(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=EC(t);return NC.test(n)?n:Xh}catch{return Xh}}function EC(t){return _C(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;function mb(t,e){const n=xu(t);pb(n,e),TC(n,e)}function pb(t,e){const n=fb.get(t);if(n)for(const r of n)r(e)}function TC(t,e){const n=SC();n&&n.postMessage({key:t,fid:e}),IC()}let is=null;function SC(){return!is&&"BroadcastChannel"in self&&(is=new BroadcastChannel("[Firebase] FID Change"),is.onmessage=t=>{pb(t.data.key,t.data.fid)}),is}function IC(){fb.size===0&&is&&(is.close(),is=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="firebase-installations-database",CC=1,bs="firebase-installations-store";let Fd=null;function Rm(){return Fd||(Fd=y1(kC,CC,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(bs)}}})),Fd}async function Pc(t,e){const n=xu(t),s=(await Rm()).transaction(bs,"readwrite"),a=s.objectStore(bs),o=await a.get(n);return await a.put(e,n),await s.done,(!o||o.fid!==e.fid)&&mb(t,e.fid),e}async function gb(t){const e=xu(t),r=(await Rm()).transaction(bs,"readwrite");await r.objectStore(bs).delete(e),await r.done}async function yu(t,e){const n=xu(t),s=(await Rm()).transaction(bs,"readwrite"),a=s.objectStore(bs),o=await a.get(n),l=e(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&mb(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mm(t){let e;const n=await yu(t.appConfig,r=>{const s=AC(r),a=PC(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===Xh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function AC(t){const e=t||{fid:jC(),registrationStatus:0};return xb(e)}function PC(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ws.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=RC(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:MC(t)}:{installationEntry:e}}async function RC(t,e){try{const n=await bC(t,e);return Pc(t.appConfig,n)}catch(n){throw ab(n)&&n.customData.serverCode===409?await gb(t.appConfig):await Pc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function MC(t){let e=await mx(t.appConfig);for(;e.registrationStatus===1;)await hb(100),e=await mx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Mm(t);return r||n}return e}function mx(t){return yu(t,e=>{if(!e)throw ws.create("installation-not-found");return xb(e)})}function xb(t){return DC(t)?{fid:t.fid,registrationStatus:0}:t}function DC(t){return t.registrationStatus===1&&t.registrationTime+rb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC({appConfig:t,heartbeatServiceProvider:e},n){const r=LC(t,n),s=yC(t,n),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:sb,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await db(()=>fetch(r,l));if(u.ok){const d=await u.json();return lb(d)}else throw await cb("Generate Auth Token",u)}function LC(t,{fid:e}){return`${ob(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dm(t,e=!1){let n;const r=await yu(t.appConfig,a=>{if(!yb(a))throw ws.create("not-registered");const o=a.authToken;if(!e&&zC(o))return a;if(o.requestStatus===1)return n=VC(t,e),a;{if(!navigator.onLine)throw ws.create("app-offline");const l=$C(a);return n=FC(t,l),l}});return n?await n:r.authToken}async function VC(t,e){let n=await px(t.appConfig);for(;n.authToken.requestStatus===1;)await hb(100),n=await px(t.appConfig);const r=n.authToken;return r.requestStatus===0?Dm(t,e):r}function px(t){return yu(t,e=>{if(!yb(e))throw ws.create("not-registered");const n=e.authToken;return BC(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function FC(t,e){try{const n=await OC(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Pc(t.appConfig,r),n}catch(n){if(ab(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gb(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Pc(t.appConfig,r)}throw n}}function yb(t){return t!==void 0&&t.registrationStatus===2}function zC(t){return t.requestStatus===2&&!UC(t)}function UC(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+mC}function $C(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function BC(t){return t.requestStatus===1&&t.requestTime+rb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t){const e=t,{installationEntry:n,registrationPromise:r}=await Mm(e);return r?r.catch(console.error):Dm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e=!1){const n=t;return await WC(n),(await Dm(n,e)).token}async function WC(t){const{registrationPromise:e}=await Mm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){if(!t||!t.options)throw zd("App Configuration");if(!t.name)throw zd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zd(t){return ws.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="installations",KC="installations-internal",QC=t=>{const e=t.getProvider("app").getImmediate(),n=GC(e),r=Br(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},YC=t=>{const e=t.getProvider("app").getImmediate(),n=Br(e,vb).getImmediate();return{getId:()=>qC(n),getToken:s=>HC(n,s)}};function JC(){ln(new Gt(vb,QC,"PUBLIC")),ln(new Gt(KC,YC,"PRIVATE"))}JC();St(nb,Pm);St(nb,Pm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="analytics",XC="firebase_id",ZC="origin",eA=60*1e3,tA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Om="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new hu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ot=new Is("analytics","Analytics",nA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){if(!t.startsWith(Om)){const e=Ot.create("invalid-gtag-resource",{gtagURL:t});return It.warn(e.message),""}return t}function wb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function sA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function iA(t,e){const n=sA("firebase-js-sdk-policy",{createScriptURL:rA}),r=document.createElement("script"),s=`${Om}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function aA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oA(t,e,n,r,s,a){const o=r[s];try{if(o)await e[o];else{const u=(await wb(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(l){It.error(l)}t("config",s,a)}async function lA(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await wb(n);for(const u of o){const d=l.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)a.push(f);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){It.error(a)}}function cA(t,e,n,r){async function s(a,...o){try{if(a==="event"){const[l,u]=o;await lA(t,e,n,l,u)}else if(a==="config"){const[l,u]=o;await oA(t,e,n,r,l,u)}else if(a==="consent"){const[l,u]=o;t("consent",l,u)}else if(a==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){It.error(l)}}return s}function uA(t,e,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=cA(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function dA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Om)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=30,fA=1e3;class mA{constructor(e={},n=fA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const bb=new mA;function pA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function gA(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:pA(r)},a=tA.replace("{app-id}",n),o=await fetch(a,s);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Ot.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function xA(t,e=bb,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw Ot.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Ot.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new wA;return setTimeout(async()=>{l.abort()},eA),_b({appId:r,apiKey:s,measurementId:a},o,l,e)}async function _b(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=bb){var a;const{appId:o,measurementId:l}=t;try{await yA(r,e)}catch(u){if(l)return It.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await gA(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!vA(d)){if(s.deleteThrottleMetadata(o),l)return It.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const f=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?z0(n,s.intervalMillis,hA):z0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,m),It.debug(`Calling attemptFetch again in ${f} millis`),_b(t,m,r,s)}}function yA(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(Ot.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vA(t){if(!(t instanceof Kt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function bA(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,o=Object.assign(Object.assign({},r),{send_to:a});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(){if(m1())try{await p1()}catch(t){return It.warn(Ot.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return It.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NA(t,e,n,r,s,a,o){var l;const u=xA(t);u.then(N=>{n[N.measurementId]=N.appId,t.options.measurementId&&N.measurementId!==t.options.measurementId&&It.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>It.error(N)),e.push(u);const d=_A().then(N=>{if(N)return r.getId()}),[f,m]=await Promise.all([u,d]);dA(a)||iA(a,f.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[ZC]="firebase",g.update=!0,m!=null&&(g[XC]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.app=e}_delete(){return delete za[this.app.options.appId],Promise.resolve()}}let za={},gx=[];const xx={};let Ud="dataLayer",EA="gtag",yx,Nb,vx=!1;function TA(){const t=[];if(f1()&&t.push("This is a browser extension environment."),PT()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ot.create("invalid-analytics-context",{errorInfo:e});It.warn(n.message)}}function SA(t,e,n){TA();const r=t.options.appId;if(!r)throw Ot.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)It.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ot.create("no-api-key");if(za[r]!=null)throw Ot.create("already-exists",{id:r});if(!vx){aA(Ud);const{wrappedGtag:a,gtagCore:o}=uA(za,gx,xx,Ud,EA);Nb=a,yx=o,vx=!0}return za[r]=NA(t,gx,xx,e,yx,Ud,n),new jA(t)}function IA(t=fu()){t=Ce(t);const e=Br(t,Rc);return e.isInitialized()?e.getImmediate():kA(t)}function kA(t,e={}){const n=Br(t,Rc);if(n.isInitialized()){const s=n.getImmediate();if(uo(e,n.getOptions()))return s;throw Ot.create("already-initialized")}return n.initialize({options:e})}function CA(t,e,n,r){t=Ce(t),bA(Nb,za[t.app.options.appId],e,n,r).catch(s=>It.error(s))}const wx="@firebase/analytics",bx="0.10.8";function AA(){ln(new Gt(Rc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return SA(r,s,n)},"PUBLIC")),ln(new Gt("analytics-internal",t,"PRIVATE")),St(wx,bx),St(wx,bx,"esm2017");function t(e){try{const n=e.getProvider(Rc).getImmediate();return{logEvent:(r,s,a)=>CA(n,r,s,a)}}catch(n){throw Ot.create("interop-component-reg-failed",{reason:n})}}}AA();var _x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,jb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,w){function S(){}S.prototype=w.prototype,j.D=w.prototype,j.prototype=new S,j.prototype.constructor=j,j.C=function(b,P,E){for(var T=Array(arguments.length-2),V=2;V<arguments.length;V++)T[V-2]=arguments[V];return w.prototype[P].apply(b,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,w,S){S||(S=0);var b=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)b[P]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(P=0;16>P;++P)b[P]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=j.g[0],S=j.g[1],P=j.g[2];var E=j.g[3],T=w+(E^S&(P^E))+b[0]+3614090360&4294967295;w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[1]+3905402710&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[2]+606105819&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[3]+3250441966&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(E^S&(P^E))+b[4]+4118548399&4294967295,w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[5]+1200080426&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[6]+2821735955&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[7]+4249261313&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(E^S&(P^E))+b[8]+1770035416&4294967295,w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[9]+2336552879&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[10]+4294925233&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[11]+2304563134&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(E^S&(P^E))+b[12]+1804603682&4294967295,w=S+(T<<7&4294967295|T>>>25),T=E+(P^w&(S^P))+b[13]+4254626195&4294967295,E=w+(T<<12&4294967295|T>>>20),T=P+(S^E&(w^S))+b[14]+2792965006&4294967295,P=E+(T<<17&4294967295|T>>>15),T=S+(w^P&(E^w))+b[15]+1236535329&4294967295,S=P+(T<<22&4294967295|T>>>10),T=w+(P^E&(S^P))+b[1]+4129170786&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[6]+3225465664&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[11]+643717713&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[0]+3921069994&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(P^E&(S^P))+b[5]+3593408605&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[10]+38016083&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[15]+3634488961&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[4]+3889429448&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(P^E&(S^P))+b[9]+568446438&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[14]+3275163606&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[3]+4107603335&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[8]+1163531501&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(P^E&(S^P))+b[13]+2850285829&4294967295,w=S+(T<<5&4294967295|T>>>27),T=E+(S^P&(w^S))+b[2]+4243563512&4294967295,E=w+(T<<9&4294967295|T>>>23),T=P+(w^S&(E^w))+b[7]+1735328473&4294967295,P=E+(T<<14&4294967295|T>>>18),T=S+(E^w&(P^E))+b[12]+2368359562&4294967295,S=P+(T<<20&4294967295|T>>>12),T=w+(S^P^E)+b[5]+4294588738&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[8]+2272392833&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[11]+1839030562&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[14]+4259657740&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(S^P^E)+b[1]+2763975236&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[4]+1272893353&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[7]+4139469664&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[10]+3200236656&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(S^P^E)+b[13]+681279174&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[0]+3936430074&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[3]+3572445317&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[6]+76029189&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(S^P^E)+b[9]+3654602809&4294967295,w=S+(T<<4&4294967295|T>>>28),T=E+(w^S^P)+b[12]+3873151461&4294967295,E=w+(T<<11&4294967295|T>>>21),T=P+(E^w^S)+b[15]+530742520&4294967295,P=E+(T<<16&4294967295|T>>>16),T=S+(P^E^w)+b[2]+3299628645&4294967295,S=P+(T<<23&4294967295|T>>>9),T=w+(P^(S|~E))+b[0]+4096336452&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[7]+1126891415&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[14]+2878612391&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[5]+4237533241&4294967295,S=P+(T<<21&4294967295|T>>>11),T=w+(P^(S|~E))+b[12]+1700485571&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[3]+2399980690&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[10]+4293915773&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[1]+2240044497&4294967295,S=P+(T<<21&4294967295|T>>>11),T=w+(P^(S|~E))+b[8]+1873313359&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[15]+4264355552&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[6]+2734768916&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[13]+1309151649&4294967295,S=P+(T<<21&4294967295|T>>>11),T=w+(P^(S|~E))+b[4]+4149444226&4294967295,w=S+(T<<6&4294967295|T>>>26),T=E+(S^(w|~P))+b[11]+3174756917&4294967295,E=w+(T<<10&4294967295|T>>>22),T=P+(w^(E|~S))+b[2]+718787259&4294967295,P=E+(T<<15&4294967295|T>>>17),T=S+(E^(P|~w))+b[9]+3951481745&4294967295,j.g[0]=j.g[0]+w&4294967295,j.g[1]=j.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,j.g[2]=j.g[2]+P&4294967295,j.g[3]=j.g[3]+E&4294967295}r.prototype.u=function(j,w){w===void 0&&(w=j.length);for(var S=w-this.blockSize,b=this.B,P=this.h,E=0;E<w;){if(P==0)for(;E<=S;)s(this,j,E),E+=this.blockSize;if(typeof j=="string"){for(;E<w;)if(b[P++]=j.charCodeAt(E++),P==this.blockSize){s(this,b),P=0;break}}else for(;E<w;)if(b[P++]=j[E++],P==this.blockSize){s(this,b),P=0;break}}this.h=P,this.o+=w},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var w=1;w<j.length-8;++w)j[w]=0;var S=8*this.o;for(w=j.length-8;w<j.length;++w)j[w]=S&255,S/=256;for(this.u(j),j=Array(16),w=S=0;4>w;++w)for(var b=0;32>b;b+=8)j[S++]=this.g[w]>>>b&255;return j};function a(j,w){var S=l;return Object.prototype.hasOwnProperty.call(S,j)?S[j]:S[j]=w(j)}function o(j,w){this.h=w;for(var S=[],b=!0,P=j.length-1;0<=P;P--){var E=j[P]|0;b&&E==w||(S[P]=E,b=!1)}this.g=S}var l={};function u(j){return-128<=j&&128>j?a(j,function(w){return new o([w|0],0>w?-1:0)}):new o([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return I(d(-j));for(var w=[],S=1,b=0;j>=S;b++)w[b]=j/S|0,S*=4294967296;return new o(w,0)}function f(j,w){if(j.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(j.charAt(0)=="-")return I(f(j.substring(1),w));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(w,8)),b=m,P=0;P<j.length;P+=8){var E=Math.min(8,j.length-P),T=parseInt(j.substring(P,P+E),w);8>E?(E=d(Math.pow(w,E)),b=b.j(E).add(d(T))):(b=b.j(S),b=b.add(d(T)))}return b}var m=u(0),g=u(1),N=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-I(this).m();for(var j=0,w=1,S=0;S<this.g.length;S++){var b=this.i(S);j+=(0<=b?b:4294967296+b)*w,w*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(k(this))return"0";if(C(this))return"-"+I(this).toString(j);for(var w=d(Math.pow(j,6)),S=this,b="";;){var P=R(S,w).g;S=y(S,P.j(w));var E=((0<S.g.length?S.g[0]:S.h)>>>0).toString(j);if(S=P,k(S))return E+b;for(;6>E.length;)E="0"+E;b=E+b}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function k(j){if(j.h!=0)return!1;for(var w=0;w<j.g.length;w++)if(j.g[w]!=0)return!1;return!0}function C(j){return j.h==-1}t.l=function(j){return j=y(this,j),C(j)?-1:k(j)?0:1};function I(j){for(var w=j.g.length,S=[],b=0;b<w;b++)S[b]=~j.g[b];return new o(S,~j.h).add(g)}t.abs=function(){return C(this)?I(this):this},t.add=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0,P=0;P<=w;P++){var E=b+(this.i(P)&65535)+(j.i(P)&65535),T=(E>>>16)+(this.i(P)>>>16)+(j.i(P)>>>16);b=T>>>16,E&=65535,T&=65535,S[P]=T<<16|E}return new o(S,S[S.length-1]&-2147483648?-1:0)};function y(j,w){return j.add(I(w))}t.j=function(j){if(k(this)||k(j))return m;if(C(this))return C(j)?I(this).j(I(j)):I(I(this).j(j));if(C(j))return I(this.j(I(j)));if(0>this.l(N)&&0>j.l(N))return d(this.m()*j.m());for(var w=this.g.length+j.g.length,S=[],b=0;b<2*w;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var P=0;P<j.g.length;P++){var E=this.i(b)>>>16,T=this.i(b)&65535,V=j.i(P)>>>16,ne=j.i(P)&65535;S[2*b+2*P]+=T*ne,x(S,2*b+2*P),S[2*b+2*P+1]+=E*ne,x(S,2*b+2*P+1),S[2*b+2*P+1]+=T*V,x(S,2*b+2*P+1),S[2*b+2*P+2]+=E*V,x(S,2*b+2*P+2)}for(b=0;b<w;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=w;b<2*w;b++)S[b]=0;return new o(S,0)};function x(j,w){for(;(j[w]&65535)!=j[w];)j[w+1]+=j[w]>>>16,j[w]&=65535,w++}function v(j,w){this.g=j,this.h=w}function R(j,w){if(k(w))throw Error("division by zero");if(k(j))return new v(m,m);if(C(j))return w=R(I(j),w),new v(I(w.g),I(w.h));if(C(w))return w=R(j,I(w)),new v(I(w.g),w.h);if(30<j.g.length){if(C(j)||C(w))throw Error("slowDivide_ only works with positive integers.");for(var S=g,b=w;0>=b.l(j);)S=A(S),b=A(b);var P=M(S,1),E=M(b,1);for(b=M(b,2),S=M(S,2);!k(b);){var T=E.add(b);0>=T.l(j)&&(P=P.add(S),E=T),b=M(b,1),S=M(S,1)}return w=y(j,P.j(w)),new v(P,w)}for(P=m;0<=j.l(w);){for(S=Math.max(1,Math.floor(j.m()/w.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),E=d(S),T=E.j(w);C(T)||0<T.l(j);)S-=b,E=d(S),T=E.j(w);k(E)&&(E=g),P=P.add(E),j=y(j,T)}return new v(P,j)}t.A=function(j){return R(this,j).h},t.and=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)&j.i(b);return new o(S,this.h&j.h)},t.or=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)|j.i(b);return new o(S,this.h|j.h)},t.xor=function(j){for(var w=Math.max(this.g.length,j.g.length),S=[],b=0;b<w;b++)S[b]=this.i(b)^j.i(b);return new o(S,this.h^j.h)};function A(j){for(var w=j.g.length+1,S=[],b=0;b<w;b++)S[b]=j.i(b)<<1|j.i(b-1)>>>31;return new o(S,j.h)}function M(j,w){var S=w>>5;w%=32;for(var b=j.g.length-S,P=[],E=0;E<b;E++)P[E]=0<w?j.i(E+S)>>>w|j.i(E+S+1)<<32-w:j.i(E+S);return new o(P,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ds=o}).apply(typeof _x<"u"?_x:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eb,Ta,Tb,Wl,Zh,Sb,Ib,kb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(c,h){if(h)e:{var p=r;c=c.split(".");for(var _=0;_<c.length-1;_++){var O=c[_];if(!(O in p))break e;p=p[O]}c=c[c.length-1],_=p[c],h=h(_),h!=_&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function a(c,h){c instanceof String&&(c+="");var p=0,_=!1,O={next:function(){if(!_&&p<c.length){var L=p++;return{value:h(L,c[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return a(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function d(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function f(c,h,p){return c.call.apply(c.bind,arguments)}function m(c,h,p){if(!c)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),c.apply(h,O)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function N(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),c.apply(this,_)}}function k(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(_,O,L){for(var q=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)q[xe-2]=arguments[xe];return h.prototype[O].apply(_,q)}}function C(c){const h=c.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=c[_];return p}return[]}function I(c,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(u(_)){const O=c.length||0,L=_.length||0;c.length=O+L;for(let q=0;q<L;q++)c[O+q]=_[q]}else c.push(_)}}class y{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(c){return/^[\s\xa0]*$/.test(c)}function v(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var A=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function M(c,h,p){for(const _ in c)h.call(p,c[_],_,c)}function j(c,h){for(const p in c)h.call(void 0,c[p],p,c)}function w(c){const h={};for(const p in c)h[p]=c[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,h){let p,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(p in _)c[p]=_[p];for(let L=0;L<S.length;L++)p=S[L],Object.prototype.hasOwnProperty.call(_,p)&&(c[p]=_[p])}}function P(c){var h=1;c=c.split(":");const p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function E(c){l.setTimeout(()=>{throw c},0)}function T(){var c=Y;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class V{constructor(){this.h=this.g=null}add(h,p){const _=ne.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var ne=new y(()=>new ht,c=>c.reset());class ht{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,B=!1,Y=new V,Z=()=>{const c=l.Promise.resolve(void 0);ye=()=>{c.then(ge)}};var ge=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(p){E(p)}var h=ne;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}B=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Qt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return c}();function zt(c,h){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,_=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(A){e:{try{R(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:vt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&zt.aa.h.call(this)}}k(zt,Ee);var vt={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),de=0;function hn(c,h,p,_,O){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=O,this.key=++de,this.da=this.fa=!1}function Ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ds(c){this.src=c,this.g={},this.h=0}Ds.prototype.add=function(c,h,p,_,O){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var q=Os(c,h,_,O);return-1<q?(h=c[q],p||(h.fa=!1)):(h=new hn(h,this.src,L,!!_,O),h.fa=p,c.push(h)),h};function Qi(c,h){var p=h.type;if(p in c.g){var _=c.g[p],O=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=O)&&Array.prototype.splice.call(_,O,1),L&&(Ct(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Os(c,h,p,_){for(var O=0;O<c.length;++O){var L=c[O];if(!L.da&&L.listener==h&&L.capture==!!p&&L.ha==_)return O}return-1}var Vu="closure_lm_"+(1e6*Math.random()|0),Fu={};function bp(c,h,p,_,O){if(Array.isArray(h)){for(var L=0;L<h.length;L++)bp(c,h[L],p,_,O);return null}return p=jp(p),c&&c[F]?c.K(h,p,d(_)?!!_.capture:!!_,O):h2(c,h,p,!1,_,O)}function h2(c,h,p,_,O,L){if(!h)throw Error("Invalid event type");var q=d(O)?!!O.capture:!!O,xe=Uu(c);if(xe||(c[Vu]=xe=new Ds(c)),p=xe.add(h,p,_,q,L),p.proxy)return p;if(_=f2(),p.proxy=_,_.src=c,_.listener=p,c.addEventListener)Qt||(O=q),O===void 0&&(O=!1),c.addEventListener(h.toString(),_,O);else if(c.attachEvent)c.attachEvent(Np(h.toString()),_);else if(c.addListener&&c.removeListener)c.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function f2(){function c(p){return h.call(c.src,c.listener,p)}const h=m2;return c}function _p(c,h,p,_,O){if(Array.isArray(h))for(var L=0;L<h.length;L++)_p(c,h[L],p,_,O);else _=d(_)?!!_.capture:!!_,p=jp(p),c&&c[F]?(c=c.i,h=String(h).toString(),h in c.g&&(L=c.g[h],p=Os(L,p,_,O),-1<p&&(Ct(L[p]),Array.prototype.splice.call(L,p,1),L.length==0&&(delete c.g[h],c.h--)))):c&&(c=Uu(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Os(h,p,_,O)),(p=-1<c?h[c]:null)&&zu(p))}function zu(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[F])Qi(h.i,c);else{var p=c.type,_=c.proxy;h.removeEventListener?h.removeEventListener(p,_,c.capture):h.detachEvent?h.detachEvent(Np(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=Uu(h))?(Qi(p,c),p.h==0&&(p.src=null,h[Vu]=null)):Ct(c)}}}function Np(c){return c in Fu?Fu[c]:Fu[c]="on"+c}function m2(c,h){if(c.da)c=!0;else{h=new zt(h,this);var p=c.listener,_=c.ha||c.src;c.fa&&zu(c),c=p.call(_,h)}return c}function Uu(c){return c=c[Vu],c instanceof Ds?c:null}var $u="__closure_events_fn_"+(1e9*Math.random()>>>0);function jp(c){return typeof c=="function"?c:(c[$u]||(c[$u]=function(h){return c.handleEvent(h)}),c[$u])}function tt(){he.call(this),this.i=new Ds(this),this.M=this,this.F=null}k(tt,he),tt.prototype[F]=!0,tt.prototype.removeEventListener=function(c,h,p,_){_p(this,c,h,p,_)};function ft(c,h){var p,_=c.F;if(_)for(p=[];_;_=_.F)p.push(_);if(c=c.M,_=h.type||h,typeof h=="string")h=new Ee(h,c);else if(h instanceof Ee)h.target=h.target||c;else{var O=h;h=new Ee(_,c),b(h,O)}if(O=!0,p)for(var L=p.length-1;0<=L;L--){var q=h.g=p[L];O=qo(q,_,!0,h)&&O}if(q=h.g=c,O=qo(q,_,!0,h)&&O,O=qo(q,_,!1,h)&&O,p)for(L=0;L<p.length;L++)q=h.g=p[L],O=qo(q,_,!1,h)&&O}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],_=0;_<p.length;_++)Ct(p[_]);delete c.g[h],c.h--}}this.F=null},tt.prototype.K=function(c,h,p,_){return this.i.add(String(c),h,!1,p,_)},tt.prototype.L=function(c,h,p,_){return this.i.add(String(c),h,!0,p,_)};function qo(c,h,p,_){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,L=0;L<h.length;++L){var q=h[L];if(q&&!q.da&&q.capture==p){var xe=q.listener,Ge=q.ha||q.src;q.fa&&Qi(c.i,q),O=xe.call(Ge,_)!==!1&&O}}return O&&!_.defaultPrevented}function Ep(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(c,h||0)}function Tp(c){c.g=Ep(()=>{c.g=null,c.i&&(c.i=!1,Tp(c))},c.l);const h=c.h;c.h=null,c.m.apply(null,h)}class p2 extends he{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Tp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(c){he.call(this),this.h=c,this.g={}}k(Yi,he);var Sp=[];function Ip(c){M(c.g,function(h,p){this.g.hasOwnProperty(p)&&zu(h)},c),c.g={}}Yi.prototype.N=function(){Yi.aa.N.call(this),Ip(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bu=l.JSON.stringify,g2=l.JSON.parse,x2=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function qu(){}qu.prototype.h=null;function kp(c){return c.h||(c.h=c.i())}function Cp(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hu(){Ee.call(this,"d")}k(Hu,Ee);function Wu(){Ee.call(this,"c")}k(Wu,Ee);var Kr={},Ap=null;function Ho(){return Ap=Ap||new tt}Kr.La="serverreachability";function Pp(c){Ee.call(this,Kr.La,c)}k(Pp,Ee);function Xi(c){const h=Ho();ft(h,new Pp(h))}Kr.STAT_EVENT="statevent";function Rp(c,h){Ee.call(this,Kr.STAT_EVENT,c),this.stat=h}k(Rp,Ee);function mt(c){const h=Ho();ft(h,new Rp(h,c))}Kr.Ma="timingevent";function Mp(c,h){Ee.call(this,Kr.Ma,c),this.size=h}k(Mp,Ee);function Zi(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},h)}function ea(){this.g=!0}ea.prototype.xa=function(){this.g=!1};function y2(c,h,p,_,O,L){c.info(function(){if(c.g)if(L)for(var q="",xe=L.split("&"),Ge=0;Ge<xe.length;Ge++){var ce=xe[Ge].split("=");if(1<ce.length){var nt=ce[0];ce=ce[1];var rt=nt.split("_");q=2<=rt.length&&rt[1]=="type"?q+(nt+"="+ce+"&"):q+(nt+"=redacted&")}}else q=null;else q=L;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+p+`
`+q})}function v2(c,h,p,_,O,L,q){c.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+p+`
`+L+" "+q})}function Ls(c,h,p,_){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+b2(c,p)+(_?" "+_:"")})}function w2(c,h){c.info(function(){return"TIMEOUT: "+h})}ea.prototype.info=function(){};function b2(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var _=p[c];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return Bu(p)}catch{return h}}var Wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gu;function Go(){}k(Go,qu),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Gu=new Go;function tr(c,h,p,_){this.j=c,this.i=h,this.l=p,this.R=_||1,this.U=new Yi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Op}function Op(){this.i=null,this.g="",this.h=!1}var Lp={},Ku={};function Qu(c,h,p){c.L=1,c.v=Jo(An(h)),c.m=p,c.P=!0,Vp(c,null)}function Vp(c,h){c.F=Date.now(),Ko(c),c.A=An(c.v);var p=c.A,_=c.R;Array.isArray(_)||(_=[String(_)]),Xp(p.i,"t",_),c.C=0,p=c.j.J,c.h=new Op,c.g=gg(c.j,p?h:null,!c.m),0<c.O&&(c.M=new p2(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,_=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(Sp[0]=O.toString()),O=Sp);for(var L=0;L<O.length;L++){var q=bp(p,O[L],_||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Xi(),y2(c.i,c.u,c.A,c.l,c.R,c.m)}tr.prototype.ca=function(c){c=c.target;const h=this.M;h&&Pn(c)==3?h.j():this.Y(c)},tr.prototype.Y=function(c){try{if(c==this.g)e:{const rt=Pn(this.g);var h=this.g.Ba();const zs=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||ig(this.g)))){this.J||rt!=4||h==7||(h==8||0>=zs?Xi(3):Xi(2)),Yu(this);var p=this.g.Z();this.X=p;t:if(Fp(this)){var _=ig(this.g);c="";var O=_.length,L=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),ta(this);var q="";break t}this.h.i=new l.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,c+=this.h.i.decode(_[h],{stream:!(L&&h==O-1)});_.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,v2(this.i,this.u,this.A,this.l,this.R,rt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,Ge=this.g;if((xe=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(xe)){var ce=xe;break t}}ce=null}if(p=ce)Ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ju(this,p);else{this.o=!1,this.s=3,mt(12),Qr(this),ta(this);break e}}if(this.P){p=!0;let Yt;for(;!this.J&&this.C<q.length;)if(Yt=_2(this,q),Yt==Ku){rt==4&&(this.s=4,mt(14),p=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Lp){this.s=4,mt(15),Ls(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else Ls(this.i,this.l,Yt,null),Ju(this,Yt);if(Fp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||q.length!=0||this.h.h||(this.s=1,mt(16),p=!1),this.o=this.o&&p,!p)Ls(this.i,this.l,q,"[Invalid Chunked Response]"),Qr(this),ta(this);else if(0<q.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),rd(nt),nt.M=!0,mt(11))}}else Ls(this.i,this.l,q,null),Ju(this,q);rt==4&&Qr(this),this.o&&!this.J&&(rt==4?hg(this.j,this):(this.o=!1,Ko(this)))}else F2(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Qr(this),ta(this)}}}catch{}finally{}};function Fp(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function _2(c,h){var p=c.C,_=h.indexOf(`
`,p);return _==-1?Ku:(p=Number(h.substring(p,_)),isNaN(p)?Lp:(_+=1,_+p>h.length?Ku:(h=h.slice(_,_+p),c.C=_+p,h)))}tr.prototype.cancel=function(){this.J=!0,Qr(this)};function Ko(c){c.S=Date.now()+c.I,zp(c,c.I)}function zp(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Zi(g(c.ba,c),h)}function Yu(c){c.B&&(l.clearTimeout(c.B),c.B=null)}tr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(w2(this.i,this.A),this.L!=2&&(Xi(),mt(17)),Qr(this),this.s=2,ta(this)):zp(this,this.S-c)};function ta(c){c.j.G==0||c.J||hg(c.j,c)}function Qr(c){Yu(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,Ip(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function Ju(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Xu(p.h,c))){if(!c.K&&Xu(p.h,c)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)rl(p),tl(p);else break e;nd(p),mt(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Zi(g(p.Za,p),6e3));if(1>=Bp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Jr(p,11)}else if((c.K||p.g==c)&&rl(p),!x(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let ce=O[h];if(p.T=ce[0],ce=ce[1],p.G==2)if(ce[0]=="c"){p.K=ce[1],p.ia=ce[2];const nt=ce[3];nt!=null&&(p.la=nt,p.j.info("VER="+p.la));const rt=ce[4];rt!=null&&(p.Aa=rt,p.j.info("SVER="+p.Aa));const zs=ce[5];zs!=null&&typeof zs=="number"&&0<zs&&(_=1.5*zs,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const Yt=c.g;if(Yt){const il=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var L=_.h;L.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Zu(L,L.h),L.h=null))}if(_.D){const sd=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;sd&&(_.ya=sd,we(_.I,_.D,sd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var q=c;if(_.qa=pg(_,_.J?_.ia:null,_.W),q.K){qp(_.h,q);var xe=q,Ge=_.L;Ge&&(xe.I=Ge),xe.B&&(Yu(xe),Ko(xe)),_.g=q}else ug(_);0<p.i.length&&nl(p)}else ce[0]!="stop"&&ce[0]!="close"||Jr(p,7);else p.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Jr(p,7):td(p):ce[0]!="noop"&&p.l&&p.l.ta(ce),p.v=0)}}Xi(4)}catch{}}var N2=class{constructor(c,h){this.g=c,this.map=h}};function Up(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $p(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bp(c){return c.h?1:c.g?c.g.size:0}function Xu(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Zu(c,h){c.g?c.g.add(h):c.h=h}function qp(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}Up.prototype.cancel=function(){if(this.i=Hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Hp(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(const p of c.g.values())h=h.concat(p.D);return h}return C(c.i)}function j2(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,_=0;_<p;_++)h.push(c[_]);return h}h=[],p=0;for(_ in c)h[p++]=c[_];return h}function E2(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(const _ in c)h[p++]=_;return h}}}function Wp(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=E2(c),_=j2(c),O=_.length,L=0;L<O;L++)h.call(void 0,_[L],p&&p[L],c)}var Gp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function T2(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var _=c[p].indexOf("="),O=null;if(0<=_){var L=c[p].substring(0,_);O=c[p].substring(_+1)}else L=c[p];h(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Yr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Yr){this.h=c.h,Qo(this,c.j),this.o=c.o,this.g=c.g,Yo(this,c.s),this.l=c.l;var h=c.i,p=new sa;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Kp(this,p),this.m=c.m}else c&&(h=String(c).match(Gp))?(this.h=!1,Qo(this,h[1]||"",!0),this.o=na(h[2]||""),this.g=na(h[3]||"",!0),Yo(this,h[4]),this.l=na(h[5]||"",!0),Kp(this,h[6]||"",!0),this.m=na(h[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}Yr.prototype.toString=function(){var c=[],h=this.j;h&&c.push(ra(h,Qp,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(ra(h,Qp,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(ra(p,p.charAt(0)=="/"?k2:I2,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",ra(p,A2)),c.join("")};function An(c){return new Yr(c)}function Qo(c,h,p){c.j=p?na(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Yo(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function Kp(c,h,p){h instanceof sa?(c.i=h,P2(c.i,c.h)):(p||(h=ra(h,C2)),c.i=new sa(h,c.h))}function we(c,h,p){c.i.set(h,p)}function Jo(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function na(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ra(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,S2),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function S2(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Qp=/[#\/\?@]/g,I2=/[#\?:]/g,k2=/[#\?]/g,C2=/[#\?@]/g,A2=/#/g;function sa(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function nr(c){c.g||(c.g=new Map,c.h=0,c.i&&T2(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=sa.prototype,t.add=function(c,h){nr(this),this.i=null,c=Vs(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function Yp(c,h){nr(c),h=Vs(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function Jp(c,h){return nr(c),h=Vs(c,h),c.g.has(h)}t.forEach=function(c,h){nr(this),this.g.forEach(function(p,_){p.forEach(function(O){c.call(h,O,_,this)},this)},this)},t.na=function(){nr(this);const c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const O=c[_];for(let L=0;L<O.length;L++)p.push(h[_])}return p},t.V=function(c){nr(this);let h=[];if(typeof c=="string")Jp(this,c)&&(h=h.concat(this.g.get(Vs(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return nr(this),this.i=null,c=Vs(this,c),Jp(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function Xp(c,h,p){Yp(c,h),0<p.length&&(c.i=null,c.g.set(Vs(c,h),C(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const L=encodeURIComponent(String(_)),q=this.V(_);for(_=0;_<q.length;_++){var O=L;q[_]!==""&&(O+="="+encodeURIComponent(String(q[_]))),c.push(O)}}return this.i=c.join("&")};function Vs(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function P2(c,h){h&&!c.j&&(nr(c),c.i=null,c.g.forEach(function(p,_){var O=_.toLowerCase();_!=O&&(Yp(this,_),Xp(this,O,p))},c)),c.j=h}function R2(c,h){const p=new ea;if(l.Image){const _=new Image;_.onload=N(rr,p,"TestLoadImage: loaded",!0,h,_),_.onerror=N(rr,p,"TestLoadImage: error",!1,h,_),_.onabort=N(rr,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=N(rr,p,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=c}else h(!1)}function M2(c,h){const p=new ea,_=new AbortController,O=setTimeout(()=>{_.abort(),rr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:_.signal}).then(L=>{clearTimeout(O),L.ok?rr(p,"TestPingServer: ok",!0,h):rr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),rr(p,"TestPingServer: error",!1,h)})}function rr(c,h,p,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(p)}catch{}}function D2(){this.g=new x2}function O2(c,h,p){const _=p||"";try{Wp(c,function(O,L){let q=O;d(O)&&(q=Bu(O)),h.push(_+L+"="+encodeURIComponent(q))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function Xo(c){this.l=c.Ub||null,this.j=c.eb||!1}k(Xo,qu),Xo.prototype.g=function(){return new Zo(this.l,this.j)},Xo.prototype.i=function(c){return function(){return c}}({});function Zo(c,h){tt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Zo,tt),t=Zo.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,aa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Zp(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Zp(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?ia(this):aa(this),this.readyState==3&&Zp(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ia(this))},t.Qa=function(c){this.g&&(this.response=c,ia(this))},t.ga=function(){this.g&&ia(this)};function ia(c){c.readyState=4,c.l=null,c.j=null,c.v=null,aa(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function aa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function eg(c){let h="";return M(c,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function ed(c,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=eg(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):we(c,h,p))}function Pe(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Pe,tt);var L2=/^https?$/i,V2=["POST","PUT"];t=Pe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gu.g(),this.v=this.o?kp(this.o):kp(Gu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(L){tg(this,L);return}if(c=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)p.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())p.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(V2,h,void 0))||_||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,q]of p)this.g.setRequestHeader(L,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sg(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){tg(this,L)}};function tg(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,ng(c),el(c)}function ng(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ft(this,"complete"),ft(this,"abort"),el(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),el(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?rg(this):this.bb())},t.bb=function(){rg(this)};function rg(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Pn(c)!=4||c.Z()!=2)){if(c.u&&Pn(c)==4)Ep(c.Ea,0,c);else if(ft(c,"readystatechange"),Pn(c)==4){c.h=!1;try{const q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=q===0){var O=String(c.D).match(Gp)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),_=!L2.test(O?O.toLowerCase():"")}p=_}if(p)ft(c,"complete"),ft(c,"success");else{c.m=6;try{var L=2<Pn(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",ng(c)}}finally{el(c)}}}}function el(c,h){if(c.g){sg(c);const p=c.g,_=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||ft(c,"ready");try{p.onreadystatechange=_}catch{}}}function sg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Pn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),g2(h)}};function ig(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function F2(c){const h={};c=(c.g&&2<=Pn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<c.length;_++){if(x(c[_]))continue;var p=P(c[_]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=h[O]||[];h[O]=L,L.push(p)}j(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function ag(c){this.Aa=0,this.i=[],this.j=new ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oa("baseRetryDelayMs",5e3,c),this.cb=oa("retryDelaySeedMs",1e4,c),this.Wa=oa("forwardChannelMaxRetries",2,c),this.wa=oa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Up(c&&c.concurrentRequestLimit),this.Da=new D2,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ag.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,_){mt(0),this.W=c,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=pg(this,null,this.W),nl(this)};function td(c){if(og(c),c.G==3){var h=c.U++,p=An(c.I);if(we(p,"SID",c.K),we(p,"RID",h),we(p,"TYPE","terminate"),la(c,p),h=new tr(c,c.j,h),h.L=2,h.v=Jo(An(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=gg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ko(h)}mg(c)}function tl(c){c.g&&(rd(c),c.g.cancel(),c.g=null)}function og(c){tl(c),c.u&&(l.clearTimeout(c.u),c.u=null),rl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function nl(c){if(!$p(c.h)&&!c.s){c.s=!0;var h=c.Ga;ye||Z(),B||(ye(),B=!0),Y.add(h,c),c.B=0}}function z2(c,h){return Bp(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Zi(g(c.Ga,c,h),fg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new tr(this,this.j,c);let L=this.o;if(this.S&&(L?(L=w(L),b(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=cg(this,O,h),p=An(this.I),we(p,"RID",c),we(p,"CVER",22),this.D&&we(p,"X-HTTP-Session-Id",this.D),la(this,p),L&&(this.O?h="headers="+encodeURIComponent(String(eg(L)))+"&"+h:this.m&&ed(p,this.m,L)),Zu(this.h,O),this.Ua&&we(p,"TYPE","init"),this.P?(we(p,"$req",h),we(p,"SID","null"),O.T=!0,Qu(O,p,null)):Qu(O,p,h),this.G=2}}else this.G==3&&(c?lg(this,c):this.i.length==0||$p(this.h)||lg(this))};function lg(c,h){var p;h?p=h.l:p=c.U++;const _=An(c.I);we(_,"SID",c.K),we(_,"RID",p),we(_,"AID",c.T),la(c,_),c.m&&c.o&&ed(_,c.m,c.o),p=new tr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=cg(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zu(c.h,p),Qu(p,_,h)}function la(c,h){c.H&&M(c.H,function(p,_){we(h,_,p)}),c.l&&Wp({},function(p,_){we(h,_,p)})}function cg(c,h,p){p=Math.min(c.i.length,p);var _=c.l?g(c.l.Na,c.l,c):null;e:{var O=c.i;let L=-1;for(;;){const q=["count="+p];L==-1?0<p?(L=O[0].g,q.push("ofs="+L)):L=0:q.push("ofs="+L);let xe=!0;for(let Ge=0;Ge<p;Ge++){let ce=O[Ge].g;const nt=O[Ge].map;if(ce-=L,0>ce)L=Math.max(0,O[Ge].g-100),xe=!1;else try{O2(nt,q,"req"+ce+"_")}catch{_&&_(nt)}}if(xe){_=q.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,_}function ug(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;ye||Z(),B||(ye(),B=!0),Y.add(h,c),c.v=0}}function nd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Zi(g(c.Fa,c),fg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Zi(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),tl(this),dg(this))};function rd(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function dg(c){c.g=new tr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=An(c.qa);we(h,"RID","rpc"),we(h,"SID",c.K),we(h,"AID",c.T),we(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(h,"TO",c.ja),we(h,"TYPE","xmlhttp"),la(c,h),c.m&&c.o&&ed(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Jo(An(h)),p.m=null,p.P=!0,Vp(p,c)}t.Za=function(){this.C!=null&&(this.C=null,tl(this),nd(this),mt(19))};function rl(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function hg(c,h){var p=null;if(c.g==h){rl(c),rd(c),c.g=null;var _=2}else if(Xu(c.h,h))p=h.D,qp(c.h,h),_=1;else return;if(c.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=c.B;_=Ho(),ft(_,new Mp(_,p)),nl(c)}else ug(c);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&z2(c,h)||_==2&&nd(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),O){case 1:Jr(c,5);break;case 4:Jr(c,10);break;case 3:Jr(c,6);break;default:Jr(c,2)}}}function fg(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function Jr(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),_=c.Xa;const O=!_;_=new Yr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Qo(_,"https"),Jo(_),O?R2(_.toString(),p):M2(_.toString(),p)}else mt(2);c.G=0,c.l&&c.l.sa(h),mg(c),og(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function mg(c){if(c.G=0,c.ka=[],c.l){const h=Hp(c.h);(h.length!=0||c.i.length!=0)&&(I(c.ka,h),I(c.ka,c.i),c.h.i.length=0,C(c.i),c.i.length=0),c.l.ra()}}function pg(c,h,p){var _=p instanceof Yr?An(p):new Yr(p);if(_.g!="")h&&(_.g=h+"."+_.g),Yo(_,_.s);else{var O=l.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var L=new Yr(null);_&&Qo(L,_),h&&(L.g=h),O&&Yo(L,O),p&&(L.l=p),_=L}return p=c.D,h=c.ya,p&&h&&we(_,p,h),we(_,"VER",c.la),la(c,_),_}function gg(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Pe(new Xo({eb:p})):new Pe(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xg(){}t=xg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sl(){}sl.prototype.g=function(c,h){return new At(c,h)};function At(c,h){tt.call(this),this.g=new ag(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!x(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Fs(this)}k(At,tt),At.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){td(this.g)},At.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Bu(c),c=p);h.i.push(new N2(h.Ya++,c)),h.G==3&&nl(h)},At.prototype.N=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,At.aa.N.call(this)};function yg(c){Hu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(const p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}k(yg,Hu);function vg(){Wu.call(this),this.status=1}k(vg,Wu);function Fs(c){this.g=c}k(Fs,xg),Fs.prototype.ua=function(){ft(this.g,"a")},Fs.prototype.ta=function(c){ft(this.g,new yg(c))},Fs.prototype.sa=function(c){ft(this.g,new vg)},Fs.prototype.ra=function(){ft(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,kb=function(){return new sl},Ib=function(){return Ho()},Sb=Kr,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,Wl=Wo,Dp.COMPLETE="complete",Tb=Dp,Cp.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Ta=Cp,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Eb=Pe}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const Nx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new hu("@firebase/firestore");function xa(){return _s.logLevel}function K(t,...e){if(_s.logLevel<=ae.DEBUG){const n=e.map(Lm);_s.debug(`Firestore (${qi}): ${t}`,...n)}}function Yn(t,...e){if(_s.logLevel<=ae.ERROR){const n=e.map(Lm);_s.error(`Firestore (${qi}): ${t}`,...n)}}function Ti(t,...e){if(_s.logLevel<=ae.WARN){const n=e.map(Lm);_s.warn(`Firestore (${qi}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: `+t;throw Yn(e),new Error(e)}function pe(t,e){t||X()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}}class RA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class MA{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new hs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new Cb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new ot(e)}}class DA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=a=>{a.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new LA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=FA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function Si(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new $e(0,0))}static max(){return new ee(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return mo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof mo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends mo{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const zA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends mo{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return zA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new W(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new W(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(_e.fromString(e))}static fromName(e){return new Q(_e.fromString(e).popFirst(5))}static empty(){return new Q(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new _e(e.slice()))}}function UA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Dr(s,Q.empty(),e)}function $A(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(ee.min(),Q.empty(),-1)}static max(){return new Dr(ee.max(),Q.empty(),-1)}}function BA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==qA)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===a&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function WA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vm.oe=-1;function vu(t){return t==null}function Mc(t){return t===0&&1/t==-1/0}function GA(t){return typeof t=="number"&&Number.isInteger(t)&&!Mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Pb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new El(this.root,e,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new El(this.root,e,this.comparator,!0)}}class El{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=s??Qe.EMPTY,this.right=a??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Qe(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ex(this.data.getIterator())}getIteratorFrom(e){return new Ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class Ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new Xe(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Si(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Rb("Invalid base64 string: "+a):a}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const KA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(pe(!!t),typeof t=="string"){let e=0;const n=KA.exec(t);if(pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function zm(t){const e=t.mapValue.fields.__previous_value__;return Fm(e)?zm(e):e}function po(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r,s,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class go{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new go("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fm(t)?4:JA(t)?9007199254740991:YA(t)?10:11:X()}function Tn(t,e){if(t===e)return!0;const n=js(t);if(n!==js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return po(t).isEqual(po(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Or(s.timestampValue),l=Or(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ns(s.bytesValue).isEqual(Ns(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Me(s.geoPointValue.latitude)===Me(a.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Me(s.integerValue)===Me(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Me(s.doubleValue),l=Me(a.doubleValue);return o===l?Mc(o)===Mc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Si(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(jx(o)!==jx(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Tn(o[u],l[u])))return!1;return!0}(t,e);default:return X()}}function xo(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function Ii(t,e){if(t===e)return 0;const n=js(t),r=js(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Me(a.integerValue||a.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Tx(t.timestampValue,e.timestampValue);case 4:return Tx(po(t),po(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Ns(a),u=Ns(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ue(l[d],u[d]);if(f!==0)return f}return ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=ue(Me(a.latitude),Me(o.latitude));return l!==0?l:ue(Me(a.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sx(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,f;const m=a.fields||{},g=o.fields||{},N=(l=m.value)===null||l===void 0?void 0:l.arrayValue,k=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=ue(((d=N==null?void 0:N.values)===null||d===void 0?void 0:d.length)||0,((f=k==null?void 0:k.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:Sx(N,k)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Tl.mapValue&&o===Tl.mapValue)return 0;if(a===Tl.mapValue)return 1;if(o===Tl.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ue(u[m],f[m]);if(g!==0)return g;const N=Ii(l[u[m]],d[f[m]]);if(N!==0)return N}return ue(u.length,f.length)}(t.mapValue,e.mapValue);default:throw X()}}function Tx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Or(t),r=Or(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function Sx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Ii(n[s],r[s]);if(a)return a}return ue(n.length,r.length)}function ki(t){return ef(t)}function ef(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=ef(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${ef(n.fields[o])}`;return s+"}"}(t.mapValue):X()}function Ix(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tf(t){return!!t&&"integerValue"in t}function Um(t){return!!t&&"arrayValue"in t}function kx(t){return!!t&&"nullValue"in t}function Cx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gl(t){return!!t&&"mapValue"in t}function YA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ua(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ua(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ua(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ua(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Ua(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){As(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new bt(Ua(this.value))}}function Mb(t){const e=[];return As(t.fields,(n,r)=>{const s=new Ye([n]);if(Gl(r)){const a=Mb(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ct(e,0,ee.min(),ee.min(),ee.min(),bt.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,ee.min(),ee.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,ee.min(),ee.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.position=e,this.inclusive=n}}function Ax(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Ii(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Px(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n="asc"){this.field=e,this.dir=n}}function XA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{}class Fe extends Db{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new eP(e,n,r):n==="array-contains"?new rP(e,r):n==="in"?new sP(e,r):n==="not-in"?new iP(e,r):n==="array-contains-any"?new aP(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tP(e,r):new nP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ii(n,this.value)):n!==null&&js(this.value)===js(n)&&this.matchesComparison(Ii(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends Db{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new un(e,n)}matches(e){return Ob(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ob(t){return t.op==="and"}function Lb(t){return ZA(t)&&Ob(t)}function ZA(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function nf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+ki(t.value);if(Lb(t))return t.filters.map(e=>nf(e)).join(",");{const e=t.filters.map(n=>nf(n)).join(",");return`${t.op}(${e})`}}function Vb(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&Tn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&Vb(o,s.filters[l]),!0):!1}(t,e):void X()}function Fb(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${ki(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(Fb).join(" ,")+"}"}(t):"Filter"}class eP extends Fe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class tP extends Fe{constructor(e,n){super(e,"in",n),this.keys=zb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nP extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=zb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class rP extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Um(n)&&xo(n.arrayValue,this.value)}}class sP extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class iP extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xo(this.value.arrayValue,n)}}class aP extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Um(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function Rx(t,e=null,n=[],r=[],s=null,a=null,o=null){return new oP(t,e,n,r,s,a,o)}function $m(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ki(r)).join(",")),e.ue=n}return e.ue}function Bm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Px(t.startAt,e.startAt)&&Px(t.endAt,e.endAt)}function rf(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lP(t,e,n,r,s,a,o,l){return new Hi(t,e,n,r,s,a,o,l)}function qm(t){return new Hi(t)}function Mx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ub(t){return t.collectionGroup!==null}function $a(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Xe(Ye.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new yo(a,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new yo(Ye.keyField(),r))}return e.ce}function jn(t){const e=te(t);return e.le||(e.le=cP(e,$a(t))),e.le}function cP(t,e){if(t.limitType==="F")return Rx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new yo(s.field,a)});const n=t.endAt?new Dc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dc(t.startAt.position,t.startAt.inclusive):null;return Rx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sf(t,e){const n=t.filters.concat([e]);return new Hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function af(t,e,n){return new Hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wu(t,e){return Bm(jn(t),jn(e))&&t.limitType===e.limitType}function $b(t){return`${$m(jn(t))}|lt:${t.limitType}`}function Bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Fb(s)).join(", ")}]`),vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ki(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ki(s)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function bu(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Q.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of $a(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Ax(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,$a(r),s)||r.endAt&&!function(o,l,u){const d=Ax(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,$a(r),s))}(t,e)}function uP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Bb(t){return(e,n)=>{let r=!1;for(const s of $a(t)){const a=dP(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function dP(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?Ii(u,d):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=new Ae(Q.comparator);function Jn(){return hP}const qb=new Ae(Q.comparator);function Sa(...t){let e=qb;for(const n of t)e=e.insert(n.key,n);return e}function Hb(t){let e=qb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return Ba()}function Wb(){return Ba()}function Ba(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const fP=new Ae(Q.comparator),mP=new Xe(Q.comparator);function ie(...t){let e=mP;for(const n of t)e=e.add(n);return e}const pP=new Xe(ue);function gP(){return pP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function Gb(t){return{integerValue:""+t}}function xP(t,e){return GA(e)?Gb(e):Hm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this._=void 0}}function yP(t,e,n){return t instanceof vo?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fm(a)&&(a=zm(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof wo?Qb(t,e):t instanceof bo?Yb(t,e):function(s,a){const o=Kb(s,a),l=Dx(o)+Dx(s.Pe);return tf(o)&&tf(s.Pe)?Gb(l):Hm(s.serializer,l)}(t,e)}function vP(t,e,n){return t instanceof wo?Qb(t,e):t instanceof bo?Yb(t,e):n}function Kb(t,e){return t instanceof Oc?function(r){return tf(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class vo extends _u{}class wo extends _u{constructor(e){super(),this.elements=e}}function Qb(t,e){const n=Jb(e);for(const r of t.elements)n.some(s=>Tn(s,r))||n.push(r);return{arrayValue:{values:n}}}class bo extends _u{constructor(e){super(),this.elements=e}}function Yb(t,e){let n=Jb(e);for(const r of t.elements)n=n.filter(s=>!Tn(s,r));return{arrayValue:{values:n}}}class Oc extends _u{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dx(t){return Me(t.integerValue||t.doubleValue)}function Jb(t){return Um(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n){this.field=e,this.transform=n}}function bP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof wo&&s instanceof wo||r instanceof bo&&s instanceof bo?Si(r.elements,s.elements,Tn):r instanceof Oc&&s instanceof Oc?Tn(r.Pe,s.Pe):r instanceof vo&&s instanceof vo}(t.transform,e.transform)}class _P{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nu{}function Xb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wm(t.key,sn.none()):new Lo(t.key,t.data,sn.none());{const n=t.data,r=bt.empty();let s=new Xe(Ye.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Hr(t.key,r,new Mt(s.toArray()),sn.none())}}function NP(t,e,n){t instanceof Lo?function(s,a,o){const l=s.value.clone(),u=Lx(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(s,a,o){if(!Kl(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Lx(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(Zb(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qa(t,e,n,r){return t instanceof Lo?function(a,o,l,u){if(!Kl(a.precondition,o))return l;const d=a.value.clone(),f=Vx(a.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(a,o,l,u){if(!Kl(a.precondition,o))return l;const d=Vx(a.fieldTransforms,u,o),f=o.data;return f.setAll(Zb(a)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,l){return Kl(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function jP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=Kb(r.transform,s||null);a!=null&&(n===null&&(n=bt.empty()),n.set(r.field,a))}return n||null}function Ox(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Si(r,s,(a,o)=>bP(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lo extends Nu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hr extends Nu{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Zb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lx(t,e,n){const r=new Map;pe(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,vP(o,l,n[s]))}return r}function Vx(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,yP(a,o,e))}return r}class Wm extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EP extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&NP(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Wb();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const u=Xb(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Si(this.mutations,e.mutations,(n,r)=>Ox(n,r))&&Si(this.baseMutations,e.baseMutations,(n,r)=>Ox(n,r))}}class Gm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length);let s=function(){return fP}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Gm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,oe;function kP(t){switch(t){default:return X();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function e_(t){if(t===void 0)return Yn("GRPC error has no .code"),z.UNKNOWN;switch(t){case Le.OK:return z.OK;case Le.CANCELLED:return z.CANCELLED;case Le.UNKNOWN:return z.UNKNOWN;case Le.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Le.INTERNAL:return z.INTERNAL;case Le.UNAVAILABLE:return z.UNAVAILABLE;case Le.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Le.NOT_FOUND:return z.NOT_FOUND;case Le.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Le.ABORTED:return z.ABORTED;case Le.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Le.DATA_LOSS:return z.DATA_LOSS;default:return X()}}(oe=Le||(Le={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new ds([4294967295,4294967295],0);function Fx(t){const e=CP().encode(t),n=new jb;return n.update(e),new Uint8Array(n.digest())}function zx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ds([n,r],0),new ds([s,a],0)]}class Km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ia(`Invalid padding: ${n}`);if(r<0)throw new Ia(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ia(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ia(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ds.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ds.fromNumber(r)));return s.compare(AP)===1&&(s=new ds([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Fx(e),[r,s]=zx(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Km(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Fx(e),[r,s]=zx(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ia extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ju(ee.min(),s,new Ae(ue),Jn(),ie())}}class Vo{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vo(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class t_{constructor(e,n){this.targetId=e,this.me=n}}class n_{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ux{constructor(){this.fe=0,this.ge=Bx(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new Vo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Bx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PP{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jn(),this.qe=$x(),this.Qe=new Ae(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(rf(a))if(r===0){const o=new Q(a.path);this.Ue(n,o,ct.newNoDocument(o,ee.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Ns(r).toUint8Array()}catch(u){if(u instanceof Rb)return Ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Km(o,s,a)}catch(u){return Ti(u instanceof Ia?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&rf(l.target)){const u=new Q(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ct.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=ie();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new ju(e,n,this.Qe,this.ke,r);return this.ke=Jn(),this.qe=$x(),this.Qe=new Ae(ue),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ux,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ux),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $x(){return new Ae(Q.comparator)}function Bx(){return new Ae(Q.comparator)}const RP={asc:"ASCENDING",desc:"DESCENDING"},MP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DP={and:"AND",or:"OR"};class OP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(t,e){return t.useProto3Json||vu(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LP(t,e){return Lc(t,e.toTimestamp())}function En(t){return pe(!!t),ee.fromTimestamp(function(n){const r=Or(n);return new $e(r.seconds,r.nanos)}(t))}function Qm(t,e){return lf(t,e).canonicalString()}function lf(t,e){const n=function(s){return new _e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function s_(t){const e=_e.fromString(t);return pe(c_(e)),e}function cf(t,e){return Qm(t.databaseId,e.path)}function $d(t,e){const n=s_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(a_(n))}function i_(t,e){return Qm(t.databaseId,e)}function VP(t){const e=s_(t);return e.length===4?_e.emptyPath():a_(e)}function uf(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function a_(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qx(t,e,n){return{name:cf(t,e),fields:n.value.mapValue.fields}}function FP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,f){return d.useProto3Json?(pe(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(pe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?z.UNKNOWN:e_(d.code);return new W(f,d.message||"")}(o);n=new n_(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$d(t,r.document.name),a=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):ee.min(),l=new bt({mapValue:{fields:r.document.fields}}),u=ct.newFoundDocument(s,a,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Ql(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$d(t,r.document),a=r.readTime?En(r.readTime):ee.min(),o=ct.newNoDocument(s,a),l=r.removedTargetIds||[];n=new Ql([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$d(t,r.document),a=r.removedTargetIds||[];n=new Ql([],a,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new IP(s,a),l=r.targetId;n=new t_(l,o)}}return n}function zP(t,e){let n;if(e instanceof Lo)n={update:qx(t,e.key,e.value)};else if(e instanceof Wm)n={delete:cf(t,e.key)};else if(e instanceof Hr)n={update:qx(t,e.key,e.data),updateMask:QP(e.fieldMask)};else{if(!(e instanceof EP))return X();n={verify:cf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof bo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Oc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:LP(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:X()}(t,e.precondition)),n}function UP(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?En(s.updateTime):En(a);return o.isEqual(ee.min())&&(o=En(a)),new _P(o,s.transformResults||[])}(n,e))):[]}function $P(t,e){return{documents:[i_(t,e.path)]}}function BP(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i_(t,s);const a=function(d){if(d.length!==0)return l_(un.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:qs(g.field),direction:WP(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=of(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function qP(t){let e=VP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(m){const g=o_(m);return g instanceof un&&Lb(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(k){return new yo(Hs(k.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,vu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,N=m.values||[];return new Dc(N,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,N=m.values||[];return new Dc(N,g)}(n.endAt)),lP(e,s,o,a,l,"F",u,d)}function HP(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function o_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hs(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hs(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Hs(n.unaryFilter.field);return Fe.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hs(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Hs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>o_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function WP(t){return RP[t]}function GP(t){return MP[t]}function KP(t){return DP[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Hs(t){return Ye.fromServerFormat(t.fieldPath)}function l_(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Cx(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NAN"}};if(kx(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cx(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NAN"}};if(kx(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(n.field),op:GP(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>l_(s));return r.length===1?r[0]:{compositeFilter:{op:KP(n.op),filters:r}}}(t):X()}function QP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function c_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,s,a=ee.min(),o=ee.min(),l=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.ct=e}}function JP(t){const e=qP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.un=new ZP}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Dr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class ZP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(_e.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ci(0)}static kn(){return new Ci(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qa(r.mutation,s,Mt.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=as();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=Sa();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Jn();const o=Ba(),l=function(){return Ba()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Hr)?a=a.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),qa(f.mutation,d,f.mutation.getFieldMask(),$e.now())):o.set(d.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return l.set(d,new tR(f,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ba();let s=new Ae((o,l)=>o-l),a=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Mt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const m=(s.get(l.batchId)||ie()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,m=Wb();f.forEach(g=>{if(!a.has(g)){const N=Xb(n.get(g),r.get(g));N!==null&&m.set(g,N),a=a.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ub(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):U.resolve(as());let l=-1,u=a;return o.next(d=>U.forEach(d,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ie())).next(f=>({batchId:l,changes:Hb(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=Sa();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Sa();return this.indexManager.getCollectionParents(e,a).next(l=>U.forEach(l,u=>{const d=function(m,g){return new Hi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ct.newInvalidDocument(f)))});let l=Sa();return o.forEach((u,d)=>{const f=a.get(u);f!==void 0&&qa(f.mutation,d,Mt.empty(),$e.now()),bu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:JP(s.bundledQuery),readTime:En(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.overlays=new Ae(Q.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return U.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=as(),a=n.length+1,o=new Q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Ae((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=a.get(d.largestBatchId);f===null&&(f=as(),a=a.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=as(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SP(n,r));let a=this.Ir.get(n);a===void 0&&(a=ie(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this.Tr=new Xe(Be.Er),this.dr=new Xe(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new _e([])),r=new Be(n,e),s=new Be(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new _e([])),r=new Be(n,e),s=new Be(n,e+1);let a=ie();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe(Be.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new TP(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Be(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return U.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);a.push(l)}),U.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(ue);return n.forEach(s=>{const a=new Be(s,0),o=new Be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Q.isDocumentKey(a)||(a=a.child(""));const o=new Be(new Q(a),0);let l=new Xe(ue);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const a=new Be(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.Mr=e,this.docs=function(){return new Ae(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Jn();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():ct.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Jn();const o=n.path,l=new Q(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||BA($A(f),r)<=0||(s.has(f.key)||bu(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return U.resolve(a)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lR(this)}getSize(e){return U.resolve(this.size)}}class lR extends eR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.persistence=e,this.Nr=new Wi(n=>$m(n),Bm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ym,this.targetCount=0,this.kr=Ci.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ci(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(a).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Vm(0),this.Kr=!1,this.Kr=!0,this.$r=new iR,this.referenceDelegate=e(this),this.Ur=new cR(this),this.indexManager=new XP,this.remoteDocumentCache=function(s){return new oR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YP(n),this.Gr=new rR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new aR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new dR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dR extends HA{constructor(e){super(),this.currentSequenceNumber=e}}class Jm{constructor(e){this.persistence=e,this.Jr=new Ym,this.Yr=null}static Zr(e){return new Jm(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Xm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AT()?8:WA(dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new hR;return this.Xi(e,n,o).next(l=>{if(a.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(xa()<=ae.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(xa()<=ae.DEBUG&&K("QueryEngine","Query:",Bs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(xa()<=ae.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):U.resolve())}Yi(e,n){if(Mx(n))return U.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=af(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=ie(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,af(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Mx(n)||s.isEqual(ee.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?U.resolve(null):(xa()<=ae.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bs(n)),this.rs(e,o,n,UA(s,-1)).next(l=>l))})}ts(e,n){let r=new Xe(Bb(e));return n.forEach((s,a)=>{bu(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return xa()<=ae.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Bs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(ue),this._s=new Wi(a=>$m(a),Bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function pR(t,e,n,r){return new mR(t,e,n,r)}async function u_(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let u=ie();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of a){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function gR(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const m=d.batch,g=m.keys();let N=U.resolve();return g.forEach(k=>{N=N.next(()=>f.getEntry(u,k)).next(C=>{const I=d.docVersions.get(k);pe(I!==null),C.version.compareTo(I)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),N.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function d_(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function xR(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(a,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,f.addedDocuments,m)));let N=g.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?N=N.withResumeToken(et.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(f.resumeToken,r)),s=s.insert(m,N),function(C,I,y){return C.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(g,N,f)&&l.push(n.Ur.updateTargetData(a,N))});let u=Jn(),d=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),l.push(yR(a,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function yR(t,e,n){let r=ie(),s=ie();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Jn();return n.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function vR(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wR(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function df(t,e,n){const r=te(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Oo(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Hx(t,e,n){const r=te(t);let s=ee.min(),a=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=te(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,o,jn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?a:ie())).next(l=>(bR(r,uP(e),l),{documents:l,Ts:a})))}function bR(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class Wx{constructor(){this.activeTargetIds=gP()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _R{constructor(){this.so=new Wx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Wx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl=null;function Bd(){return Sl===null?Sl=function(){return 268435456+Math.round(2147483648*Math.random())}():Sl++,"0x"+Sl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class TR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const l=Bd(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Ti("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,a,o,l){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=jR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=Bd();return new Promise((o,l)=>{const u=new Eb;u.setWithCredentials(!0),u.listenOnce(Tb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Wl.NO_ERROR:const f=u.getResponseJson();K(at,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case Wl.TIMEOUT:K(at,`RPC '${e}' ${a} timed out`),l(new W(z.DEADLINE_EXCEEDED,"Request time out"));break;case Wl.HTTP_ERROR:const m=u.getStatus();if(K(at,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const N=g==null?void 0:g.error;if(N&&N.status&&N.message){const k=function(I){const y=I.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(y)>=0?y:z.UNKNOWN}(N.status);l(new W(k,N.message))}else l(new W(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(z.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{K(at,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);K(at,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Bd(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kb(),l=Ib(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=a.join("");K(at,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=o.createWebChannel(f,u);let g=!1,N=!1;const k=new ER({Io:I=>{N?K(at,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(g||(K(at,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),K(at,`RPC '${e}' stream ${s} sending:`,I),m.send(I))},To:()=>m.close()}),C=(I,y,x)=>{I.listen(y,v=>{try{x(v)}catch(R){setTimeout(()=>{throw R},0)}})};return C(m,Ta.EventType.OPEN,()=>{N||(K(at,`RPC '${e}' stream ${s} transport opened.`),k.yo())}),C(m,Ta.EventType.CLOSE,()=>{N||(N=!0,K(at,`RPC '${e}' stream ${s} transport closed`),k.So())}),C(m,Ta.EventType.ERROR,I=>{N||(N=!0,Ti(at,`RPC '${e}' stream ${s} transport errored:`,I),k.So(new W(z.UNAVAILABLE,"The operation could not be completed")))}),C(m,Ta.EventType.MESSAGE,I=>{var y;if(!N){const x=I.data[0];pe(!!x);const v=x,R=v.error||((y=v[0])===null||y===void 0?void 0:y.error);if(R){K(at,`RPC '${e}' stream ${s} received error:`,R);const A=R.status;let M=function(S){const b=Le[S];if(b!==void 0)return e_(b)}(A),j=R.message;M===void 0&&(M=z.INTERNAL,j="Unknown error status: "+A+" with message "+R.message),N=!0,k.So(new W(M,j)),m.close()}else K(at,`RPC '${e}' stream ${s} received:`,x),k.bo(x)}}),C(l,Sb.STAT_EVENT,I=>{I.stat===Zh.PROXY?K(at,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Zh.NOPROXY&&K(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return new OP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n,r,s,a,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new h_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SR extends f_{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=FP(this.serializer,e),r=function(a){if(!("targetChange"in a))return ee.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?En(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=uf(this.serializer),n.addTarget=function(a,o){let l;const u=o.target;if(l=rf(u)?{documents:$P(a,u)}:{query:BP(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=r_(a,o.resumeToken);const d=of(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=Lc(a,o.snapshotVersion.toTimestamp());const d=of(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=HP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=uf(this.serializer),n.removeTarget=e,this.a_(n)}}class IR extends f_{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=UP(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=uf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zP(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,lf(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(z.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,lf(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ps(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=te(u);d.L_.add(4),await Fo(d),d.q_.set("Unknown"),d.L_.delete(4),await Tu(d)}(this))})}),this.q_=new CR(r,s)}}async function Tu(t){if(Ps(t))for(const e of t.B_)await e(!0)}async function Fo(t){for(const e of t.B_)await e(!1)}function m_(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),np(n)?tp(n):Gi(n).r_()&&ep(n,e))}function Zm(t,e){const n=te(t),r=Gi(n);n.N_.delete(e),r.r_()&&p_(n,e),n.N_.size===0&&(r.r_()?r.o_():Ps(n)&&n.q_.set("Unknown"))}function ep(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gi(t).A_(e)}function p_(t,e){t.Q_.xe(e),Gi(t).R_(e)}function tp(t){t.Q_=new PP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Gi(t).start(),t.q_.v_()}function np(t){return Ps(t)&&!Gi(t).n_()&&t.N_.size>0}function Ps(t){return te(t).L_.size===0}function g_(t){t.Q_=void 0}async function PR(t){t.q_.set("Online")}async function RR(t){t.N_.forEach((e,n)=>{ep(t,e)})}async function MR(t,e){g_(t),np(t)?(t.q_.M_(e),tp(t)):t.q_.set("Unknown")}async function DR(t,e,n){if(t.q_.set("Online"),e instanceof n_&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vc(t,r)}else if(e instanceof Ql?t.Q_.Ke(e):e instanceof t_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await d_(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=a.N_.get(d);f&&a.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=a.N_.get(u);if(!f)return;a.N_.set(u,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),p_(a,u);const m=new vr(f.target,u,d,f.sequenceNumber);ep(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Vc(t,r)}}async function Vc(t,e,n){if(!Oo(e))throw e;t.L_.add(1),await Fo(t),t.q_.set("Offline"),n||(n=()=>d_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tu(t)})}function x_(t,e){return e().catch(n=>Vc(t,n,e))}async function Su(t){const e=te(t),n=Lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OR(e);)try{const s=await vR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,LR(e,s)}catch(s){await Vc(e,s)}y_(e)&&v_(e)}function OR(t){return Ps(t)&&t.O_.length<10}function LR(t,e){t.O_.push(e);const n=Lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function y_(t){return Ps(t)&&!Lr(t).n_()&&t.O_.length>0}function v_(t){Lr(t).start()}async function VR(t){Lr(t).p_()}async function FR(t){const e=Lr(t);for(const n of t.O_)e.m_(n.mutations)}async function zR(t,e,n){const r=t.O_.shift(),s=Gm.from(r,e,n);await x_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Su(t)}async function UR(t,e){e&&Lr(t).V_&&await async function(r,s){if(function(o){return kP(o)&&o!==z.ABORTED}(s.code)){const a=r.O_.shift();Lr(r).s_(),await x_(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Su(r)}}(t,e),y_(t)&&v_(t)}async function Kx(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Ps(n);n.L_.add(3),await Fo(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tu(n)}async function $R(t,e){const n=te(t);e?(n.L_.delete(2),await Tu(n)):e||(n.L_.add(2),await Fo(n),n.q_.set("Unknown"))}function Gi(t){return t.K_||(t.K_=function(n,r,s){const a=te(n);return a.w_(),new SR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:PR.bind(null,t),Ro:RR.bind(null,t),mo:MR.bind(null,t),d_:DR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),np(t)?tp(t):t.q_.set("Unknown")):(await t.K_.stop(),g_(t))})),t.K_}function Lr(t){return t.U_||(t.U_=function(n,r,s){const a=te(n);return a.w_(),new IR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VR.bind(null,t),mo:UR.bind(null,t),f_:FR.bind(null,t),g_:zR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Su(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new rp(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sp(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),Oo(t))return new W(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Sa(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new pi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.W_=new Ae(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ai{constructor(e,n,r,s,a,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ai(e,n,pi.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qR{constructor(){this.queries=Yx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),a=s.queries;s.queries=Yx(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new W(z.ABORTED,"Firestore shutting down"))}}function Yx(){return new Wi(t=>$b(t),wu)}async function HR(t,e){const n=te(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new BR,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=sp(o,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&ip(n)}async function WR(t,e){const n=te(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GR(t,e){const n=te(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&ip(n)}function KR(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function ip(t){t.Y_.forEach(e=>{e.next()})}var hf,Jx;(Jx=hf||(hf={})).ea="default",Jx.Cache="cache";class QR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ai(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this.key=e}}class b_{constructor(e){this.key=e}}class YR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Bb(e),this.Ra=new pi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Qx,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),N=bu(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),C=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let I=!1;g&&N?g.data.isEqual(N.data)?k!==C&&(r.track({type:3,doc:N}),I=!0):this.ga(g,N)||(r.track({type:2,doc:N}),I=!0,(u&&this.Aa(N,u)>0||d&&this.Aa(N,d)<0)&&(l=!0)):!g&&N?(r.track({type:0,doc:N}),I=!0):g&&!N&&(r.track({type:1,doc:g}),I=!0,(u||d)&&(l=!0)),I&&(N?(o=o.add(N),a=C?a.add(f):a.delete(f)):(o=o.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(N,k){const C=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return C(N)-C(k)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ai(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new b_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new w_(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ai.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XR{constructor(e){this.key=e,this.va=!1}}class ZR{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Wi(l=>$b(l),wu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(Q.comparator),this.Na=new Map,this.La=new Ym,this.Ba={},this.ka=new Map,this.qa=Ci.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function e3(t,e,n=!0){const r=S_(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await __(r,e,n,!0),s}async function t3(t,e){const n=S_(t);await __(n,e,!0,!1)}async function __(t,e,n,r){const s=await wR(t.localStore,jn(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await n3(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&m_(t.remoteStore,s),l}async function n3(t,e,n,r,s){t.Ka=(m,g,N)=>async function(C,I,y,x){let v=I.view.ma(y);v.ns&&(v=await Hx(C.localStore,I.query,!1).then(({documents:j})=>I.view.ma(j,v)));const R=x&&x.targetChanges.get(I.targetId),A=x&&x.targetMismatches.get(I.targetId)!=null,M=I.view.applyChanges(v,C.isPrimaryClient,R,A);return Zx(C,I.targetId,M.wa),M.snapshot}(t,m,g,N);const a=await Hx(t.localStore,e,!0),o=new YR(e,a.Ts),l=o.ma(a.documents),u=Vo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Zx(t,n,d.wa);const f=new JR(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function r3(t,e,n){const r=te(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!wu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await df(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Zm(r.remoteStore,s.targetId),ff(r,s.targetId)}).catch(Do)):(ff(r,s.targetId),await df(r.localStore,s.targetId,!0))}async function s3(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zm(n.remoteStore,r.targetId))}async function i3(t,e,n){const r=h3(t);try{const s=await function(o,l){const u=te(o),d=$e.now(),f=l.reduce((N,k)=>N.add(k.key),ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=Jn(),C=ie();return u.cs.getEntries(N,f).next(I=>{k=I,k.forEach((y,x)=>{x.isValidDocument()||(C=C.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(N,k)).next(I=>{m=I;const y=[];for(const x of l){const v=jP(x,m.get(x.key).overlayedDocument);v!=null&&y.push(new Hr(x.key,v,Mb(v.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(N,d,y,l)}).next(I=>{g=I;const y=I.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(N,I.batchId,y)})}).then(()=>({batchId:g.batchId,changes:Hb(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ae(ue)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await zo(r,s.changes),await Su(r.remoteStore)}catch(s){const a=sp(s,"Failed to persist write");n.reject(a)}}async function N_(t,e){const n=te(t);try{const r=await xR(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?pe(o.va):s.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await zo(n,r,e)}catch(r){await Do(r)}}function Xx(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=te(o);u.onlineState=l;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(l)&&(d=!0)}),d&&ip(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a3(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Ae(Q.comparator);o=o.insert(a,ct.newNoDocument(a,ee.min()));const l=ie().add(a),u=new ju(ee.min(),new Map,new Ae(ue),o,l);await N_(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),ap(r)}else await df(r.localStore,e,!1).then(()=>ff(r,e,n)).catch(Do)}async function o3(t,e){const n=te(t),r=e.batch.batchId;try{const s=await gR(n.localStore,e);E_(n,r,null),j_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zo(n,s)}catch(s){await Do(s)}}async function l3(t,e,n){const r=te(t);try{const s=await function(o,l){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(pe(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);E_(r,e,n),j_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zo(r,s)}catch(s){await Do(s)}}function j_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function E_(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function ff(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||T_(t,r)})}function T_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Zm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ap(t))}function Zx(t,e,n){for(const r of n)r instanceof w_?(t.La.addReference(r.key,e),c3(t,r)):r instanceof b_?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||T_(t,r.key)):X()}function c3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),ap(t))}function ap(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new XR(n)),t.Oa=t.Oa.insert(n,r),m_(t.remoteStore,new vr(jn(qm(n.path)),r,"TargetPurposeLimboResolution",Vm.oe))}}async function zo(t,e,n){const r=te(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Xm.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,N=>f.persistence.referenceDelegate.addReference(m,g.targetId,N)).next(()=>U.forEach(g.Ui,N=>f.persistence.referenceDelegate.removeReference(m,g.targetId,N)))))}catch(m){if(!Oo(m))throw m;K("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const N=f.os.get(g),k=N.snapshotVersion,C=N.withLastLimboFreeSnapshotVersion(k);f.os=f.os.insert(g,C)}}}(r.localStore,a))}async function u3(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await u_(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new W(z.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(n,r.hs)}}function d3(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function S_(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=N_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a3.bind(null,e),e.Ca.d_=GR.bind(null,e.eventManager),e.Ca.$a=KR.bind(null,e.eventManager),e}function h3(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=o3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l3.bind(null,e),e}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Eu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return pR(this.persistence,new fR,e.initialUser,this.serializer)}Ga(e){return new uR(Jm.Zr,this.serializer)}Wa(e){return new _R}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class mf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u3.bind(null,this.syncEngine),await $R(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qR}()}createDatastore(e){const n=Eu(e.databaseInfo.databaseId),r=function(a){return new TR(a)}(e.databaseInfo);return function(a,o,l,u){return new kR(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new AR(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Xx(this.syncEngine,n,0),function(){return Gx.D()?new Gx:new NR}())}createSyncEngine(e,n){return function(s,a,o,l,u,d,f){const m=new ZR(s,a,o,l,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=te(s);K("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Fo(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mf.provider={build:()=>new mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ot.UNAUTHENTICATED,this.clientId=Ab.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await u_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ey(t,e){t.asyncQueue.verifyOperationInProgress();const n=await p3(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Kx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Kx(e.remoteStore,s)),t._onlineComponents=e}async function p3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ti("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new Fc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Hd(t,new Fc);return t._offlineComponents}async function I_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await ey(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await ey(t,new mf))),t._onlineComponents}function g3(t){return I_(t).then(e=>e.syncEngine)}async function ty(t){const e=await I_(t),n=e.eventManager;return n.onListen=e3.bind(null,e.syncEngine),n.onUnlisten=r3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s3.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e,n){if(!n)throw new W(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x3(t,e,n,r){if(e===!0&&r===!0)throw new W(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ry(t){if(!Q.isDocumentKey(t))throw new W(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sy(t){if(Q.isDocumentKey(t))throw new W(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Ar(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new W(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new W(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new W(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new W(z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ku{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PA;switch(r.type){case"firstParty":return new OA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ny.get(n);r&&(K("ComponentProvider","Removing Datastore"),ny.delete(n),r.terminate())}(this),Promise.resolve()}}function y3(t,e,n,r={}){var s;const a=(t=Ar(t,ku))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ot.MOCK_USER;else{l=h1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ot(d)}t._authCredentials=new RA(new Cb(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}}class Pr extends Rs{constructor(e,n,r){super(e,n,qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new Q(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function zc(t,e,...n){if(t=Ce(t),C_("collection","path",e),t instanceof ku){const r=_e.fromString(e,...n);return sy(r),new Pr(t,null,r)}{if(!(t instanceof kt||t instanceof Pr))throw new W(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return sy(r),new Pr(t.firestore,null,r)}}function os(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=Ab.newId()),C_("doc","path",e),t instanceof ku){const r=_e.fromString(e,...n);return ry(r),new kt(t,null,new Q(r))}{if(!(t instanceof kt||t instanceof Pr))throw new W(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return ry(r),new kt(t.firestore,t instanceof Pr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new h_(this,"async_queue_retry"),this.Vu=()=>{const r=qd();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new hs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Oo(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Yn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=rp.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function oy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Pi extends ku{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ay,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ay(e),this._firestoreClient=void 0,await e}}}function v3(t,e){const n=typeof t=="object"?t:fu(),r=typeof t=="string"?t:"(default)",s=Br(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=c1("firestore");a&&y3(s,...a)}return s}function A_(t){if(t._terminated)throw new W(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||w3(t),t._firestoreClient}function w3(t){var e,n,r;const s=t._freezeSettings(),a=function(l,u,d,f){return new QA(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,k_(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new m3(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ri(et.fromBase64String(e))}catch(n){throw new W(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ri(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=/^__.*__$/;class _3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lo(e,this.data,n,this.fieldTransforms)}}class P_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function R_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class cp{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(R_(this.Cu)&&b3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class N3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Eu(e)}Qu(e,n,r,s=!1){return new cp({Cu:e,methodName:n,qu:r,path:Ye.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function up(t){const e=t._freezeSettings(),n=Eu(t._databaseId);return new N3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j3(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);hp("Data must be an object, but it was:",o,r);const l=M_(r,o);let u,d;if(a.merge)u=new Mt(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const f=[];for(const m of a.mergeFields){const g=pf(e,m,n);if(!o.contains(g))throw new W(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);O_(f,g)||f.push(g)}u=new Mt(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new _3(new bt(l),u,d)}class Pu extends Au{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Pu}}class dp extends Au{_toFieldTransform(e){return new wP(e.path,new vo)}isEqual(e){return e instanceof dp}}function E3(t,e,n,r){const s=t.Qu(1,e,n);hp("Data must be an object, but it was:",s,r);const a=[],o=bt.empty();As(r,(u,d)=>{const f=fp(e,u,n);d=Ce(d);const m=s.Nu(f);if(d instanceof Pu)a.push(f);else{const g=Uo(d,m);g!=null&&(a.push(f),o.set(f,g))}});const l=new Mt(a);return new P_(o,l,s.fieldTransforms)}function T3(t,e,n,r,s,a){const o=t.Qu(1,e,n),l=[pf(e,r,n)],u=[s];if(a.length%2!=0)throw new W(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<a.length;g+=2)l.push(pf(e,a[g])),u.push(a[g+1]);const d=[],f=bt.empty();for(let g=l.length-1;g>=0;--g)if(!O_(d,l[g])){const N=l[g];let k=u[g];k=Ce(k);const C=o.Nu(N);if(k instanceof Pu)d.push(N);else{const I=Uo(k,C);I!=null&&(d.push(N),f.set(N,I))}}const m=new Mt(d);return new P_(f,m,o.fieldTransforms)}function S3(t,e,n,r=!1){return Uo(n,t.Qu(r?4:3,e))}function Uo(t,e){if(D_(t=Ce(t)))return hp("Unsupported field value:",e,t),M_(t,e);if(t instanceof Au)return function(r,s){if(!R_(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let u=Uo(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=$e.fromDate(r);return{timestampValue:Lc(s.serializer,a)}}if(r instanceof $e){const a=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,a)}}if(r instanceof op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ri)return{bytesValue:r_(s.serializer,r._byteString)};if(r instanceof kt){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof lp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Hm(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Iu(r)}`)}(t,e)}function M_(t,e){const n={};return Pb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(r,s)=>{const a=Uo(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function D_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof op||t instanceof Ri||t instanceof kt||t instanceof Au||t instanceof lp)}function hp(t,e,n){if(!D_(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Iu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function pf(t,e,n){if((e=Ce(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return fp(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const I3=new RegExp("[~\\*/\\[\\]]");function fp(t,e,n){if(e.search(I3)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new W(z.INVALID_ARGUMENT,l+t+u)}function O_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ru("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class k3 extends L_{data(){return super.data()}}function Ru(t,e){return typeof e=="string"?fp(t,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mp{}class V_ extends mp{}function F_(t,e,...n){let r=[];e instanceof mp&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof pp).length,l=a.filter(u=>u instanceof Mu).length;if(o>1||o>0&&l>0)throw new W(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mu extends V_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mu(e,n,r)}_apply(e){const n=this._parse(e);return U_(e._query,n),new Rs(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=up(e.firestore);return function(a,o,l,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cy(m,f);const N=[];for(const k of m)N.push(ly(u,a,k));g={arrayValue:{values:N}}}else g=ly(u,a,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cy(m,f),g=S3(l,o,m,f==="in"||f==="not-in");return Fe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function z_(t,e,n){const r=e,s=Ru("where",t);return Mu._create(s,r,n)}class pp extends mp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const u of l)U_(o,u),o=sf(o,u)}(e._query,n),new Rs(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gp extends V_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gp(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new W(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yo(a,o)}(e._query,this._field,this._direction);return new Rs(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Hi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function A3(t,e="asc"){const n=e,r=Ru("orderBy",t);return gp._create(r,n)}function ly(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new W(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ub(e)&&n.indexOf("/")!==-1)throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!Q.isDocumentKey(r))throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ix(t,new Q(r))}if(n instanceof kt)return Ix(t,n._key);throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function cy(t,e){if(!Array.isArray(t)||t.length===0)throw new W(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U_(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class P3{convertValue(e,n="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Me(o.doubleValue));return new lp(a)}convertGeoPoint(e){return new op(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){const n=Or(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);pe(c_(r));const s=new go(r.get(1),r.get(3)),a=new Q(r.popFirst(5));return s.isEqual(n)||Yn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $_ extends L_{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ru("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yl extends $_{data(e={}){return super.data(e)}}class M3{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ka(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yl(this._firestore,this._userDataWriter,r.key,r,new ka(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Yl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ka(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Yl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ka(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:D3(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function D3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class B_ extends P3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ri(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function Jl(t,e,n,...r){t=Ar(t,kt);const s=Ar(t.firestore,Pi),a=up(s);let o;return o=typeof(e=Ce(e))=="string"||e instanceof Cu?T3(a,"updateDoc",t._key,e,n,r):E3(a,"updateDoc",t._key,e),xp(s,[o.toMutation(t._key,sn.exists(!0))])}function q_(t){return xp(Ar(t.firestore,Pi),[new Wm(t._key,sn.none())])}function H_(t,e){const n=Ar(t.firestore,Pi),r=os(t),s=R3(t.converter,e);return xp(n,[j3(up(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function W_(t,...e){var n,r,s;t=Ce(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||oy(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(oy(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof kt)d=Ar(t.firestore,Pi),f=qm(t._key.path),u={next:m=>{e[o]&&e[o](O3(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Ar(t,Rs);d=Ar(m.firestore,Pi),f=m._query;const g=new B_(d);u={next:N=>{e[o]&&e[o](new M3(d,g,m,N))},error:e[o+1],complete:e[o+2]},C3(t._query)}return function(g,N,k,C){const I=new f3(C),y=new QR(N,I,k);return g.asyncQueue.enqueueAndForget(async()=>HR(await ty(g),y)),()=>{I.Za(),g.asyncQueue.enqueueAndForget(async()=>WR(await ty(g),y))}}(A_(d),f,l,u)}function xp(t,e){return function(r,s){const a=new hs;return r.asyncQueue.enqueueAndForget(async()=>i3(await g3(r),s,a)),a.promise}(A_(t),e)}function O3(t,e,n){const r=n.docs.get(e._key),s=new B_(t);return new $_(t,s,e._key,r,new ka(n.hasPendingWrites,n.fromCache),e.converter)}function pr(){return new dp("serverTimestamp")}(function(e,n=!0){(function(s){qi=s})(ks),ln(new Gt("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new Pi(new MA(r.getProvider("auth-internal")),new VA(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(d.options.projectId,f)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),St(Nx,"4.7.3",e),St(Nx,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="firebasestorage.googleapis.com",L3="storageBucket",V3=2*60*1e3,F3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends Kt{constructor(e,n,r=0){super(Wd(e),`Firebase Storage: ${n} (${Wd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Sn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Sn||(Sn={}));function Wd(t){return"storage/"+t}function z3(){const t="An unknown error occurred, please check the error payload for server response.";return new Cn(Sn.UNKNOWN,t)}function U3(){return new Cn(Sn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $3(){return new Cn(Sn.CANCELED,"User canceled the upload/download.")}function B3(t){return new Cn(Sn.INVALID_URL,"Invalid URL '"+t+"'.")}function q3(t){return new Cn(Sn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uy(t){return new Cn(Sn.INVALID_ARGUMENT,t)}function K_(){return new Cn(Sn.APP_DELETED,"The Firebase app was deleted.")}function H3(t){return new Cn(Sn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=tn.makeFromUrl(e,n)}catch{return new tn(e,"")}if(r.path==="")return r;throw q3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",N=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),k={bucket:1,path:3},C=n===G_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",y=new RegExp(`^https?://${C}/${s}/${I}`,"i"),v=[{regex:l,indices:u,postModify:a},{regex:N,indices:k,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<v.length;R++){const A=v[R],M=A.regex.exec(e);if(M){const j=M[A.indices.bucket];let w=M[A.indices.path];w||(w=""),r=new tn(j,w),A.postModify(r);break}}if(r==null)throw B3(e);return r}}class W3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...I){d||(d=!0,e.apply(null,I))}function m(I){s=setTimeout(()=>{s=null,t(N,u())},I)}function g(){a&&clearTimeout(a)}function N(I,...y){if(d){g();return}if(I){g(),f.call(null,I,...y);return}if(u()||o){g(),f.call(null,I,...y);return}r<64&&(r*=2);let v;l===1?(l=2,v=0):v=(r+Math.random())*1e3,m(v)}let k=!1;function C(I){k||(k=!0,g(),!d&&(s!==null?(I||(l=2),clearTimeout(s),m(0)):I||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,C(!0)},n),C}function K3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(t){return t!==void 0}function dy(t,e,n,r){if(r<e)throw uy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw uy(`Invalid value for '${t}'. Expected ${n} or less.`)}function Y3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var $c;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($c||($c={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,n,r,s,a,o,l,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,k)=>{this.resolve_=N,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Il(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===$c.NO_ERROR,u=a.getStatus();if(!l||J3(u,this.additionalRetryCodes_)&&this.retry){const f=a.getErrorCode()===$c.ABORT;r(!1,new Il(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Il(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Q3(u)?a(u):a()}catch(u){o(u)}else if(l!==null){const u=z3();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?K_():$3();o(u)}else{const u=U3();o(u)}};this.canceled_?n(!1,new Il(!1,null,!0)):this.backoffId_=G3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&K3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Il{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Z3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function e4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function n4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r4(t,e,n,r,s,a,o=!0){const l=Y3(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return t4(d,e),Z3(d,n),e4(d,a),n4(d,r),new X3(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function i4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n){this._service=e,n instanceof tn?this._location=n:this._location=tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bc(e,n)}get root(){const e=new tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i4(this._location.path)}get storage(){return this._service}get parent(){const e=s4(this._location.path);if(e===null)return null;const n=new tn(this._location.bucket,e);return new Bc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw H3(e)}}function hy(t,e){const n=e==null?void 0:e[L3];return n==null?null:tn.makeFromBucketSpec(n,t)}function a4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:h1(s,t.app.options.projectId))}class o4{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=G_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V3,this._maxUploadRetryTime=F3,this._requests=new Set,s!=null?this._bucket=tn.makeFromBucketSpec(s,this._host):this._bucket=hy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=tn.makeFromBucketSpec(this._url,e):this._bucket=hy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bc(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new W3(K_());{const o=r4(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const fy="@firebase/storage",my="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="storage";function l4(t=fu(),e){t=Ce(t);const r=Br(t,Q_).getImmediate({identifier:e}),s=c1("storage");return s&&c4(r,...s),r}function c4(t,e,n,r={}){a4(t,e,n,r)}function u4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new o4(n,r,s,e,ks)}function d4(){ln(new Gt(Q_,u4,"PUBLIC").setMultipleInstances(!0)),St(fy,my,""),St(fy,my,"esm2017")}d4();const h4={apiKey:"AIzaSyDFYAxry4pC8b2urTH7EgWfkeTI5r9ySAg",authDomain:"synapseai-a1290.firebaseapp.com",projectId:"synapseai-a1290",storageBucket:"synapseai-a1290.firebasestorage.app",messagingSenderId:"65881787673",appId:"1:65881787673:web:4724020c42141e13a6c988",measurementId:"G-K058WQ2XC3"},Du=v1(h4);IA(Du);const kl=cC(Du),pn=v3(Du);l4(Du);const Y_=D.createContext(void 0),Wr=()=>{const t=D.useContext(Y_);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},f4=({children:t})=>{const[e,n]=D.useState(null),[r,s]=D.useState(!0),a=async(d,f)=>{await WI(kl,d,f)},o=async(d,f,m)=>{const{user:g}=await HI(kl,d,f);await KI(g,{displayName:m})},l=async()=>{await XI(kl)};D.useEffect(()=>JI(kl,f=>{n(f),s(!1)}),[]);const u={currentUser:e,login:a,register:o,logout:l,loading:r};return i.jsx(Y_.Provider,{value:u,children:!r&&t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=D.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...d},f)=>D.createElement("svg",{ref:f,...m4,width:s,height:s,stroke:r,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${p4(t)}`,l].join(" "),...d},[...e.map(([m,g])=>D.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=G("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=G("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=G("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=G("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=G("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=G("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=G("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=G("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=G("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=G("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=G("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=G("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=G("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=G("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=G("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=G("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=G("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=G("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=G("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=G("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=G("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=G("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=G("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=G("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),V4=()=>{const[t,e]=D.useState(!1);return i.jsx("header",{className:"bg-white/95 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-[#223049]",children:"oya"}),i.jsx("p",{className:"text-xs text-gray-600 -mt-1",children:"intelligence"})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[i.jsx("a",{href:"#features",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"Fonctionnalits"}),i.jsx("a",{href:"#roi",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"ROI"}),i.jsx("a",{href:"#pricing",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"Tarifs"}),i.jsx("a",{href:"#contact",className:"text-[#223049] hover:text-[#ff6a3d] transition-colors",children:"Contact"}),i.jsx(D0,{to:"/auth",className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Connexion"})]}),i.jsx("button",{className:"md:hidden",onClick:()=>e(!t),children:t?i.jsx(r2,{size:24}):i.jsx(I4,{size:24})})]}),t&&i.jsx("div",{className:"md:hidden",children:i.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t",children:[i.jsx("a",{href:"#features",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"Fonctionnalits"}),i.jsx("a",{href:"#roi",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"ROI"}),i.jsx("a",{href:"#pricing",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"Tarifs"}),i.jsx("a",{href:"#contact",className:"block px-3 py-2 text-[#223049] hover:text-[#ff6a3d]",children:"Contact"}),i.jsx(D0,{to:"/auth",className:"block mx-3 mt-2 bg-[#ff6a3d] text-white px-6 py-2 rounded-lg text-center hover:bg-[#ff6a3d]/90 transition-colors",children:"Connexion"})]})})]})})},F4=()=>i.jsx("section",{className:"py-20 lg:py-32 bg-gradient-to-b from-[#f4f0ec] to-white",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#9b6bff]/10 rounded-full text-[#9b6bff] font-medium text-sm mb-6",children:" Plateforme IA stratgique"}),i.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold text-[#223049] leading-tight mb-6",children:["OYA transforme votre",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff]",children:" recrutement"})]}),i.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Supprimez les intermdiaires coteux. Automatisez 80% de votre processus de recrutement. Gardez le contrle humain sur les dcisions stratgiques."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[i.jsxs("button",{className:"bg-[#ff6a3d] text-white px-8 py-4 rounded-lg font-semibold hover:bg-[#ff6a3d]/90 transition-all transform hover:scale-105 flex items-center justify-center space-x-2",children:[i.jsx("span",{children:"Dmarrer maintenant"}),i.jsx(J_,{size:20})]}),i.jsxs("button",{className:"border-2 border-[#223049] text-[#223049] px-8 py-4 rounded-lg font-semibold hover:bg-[#223049] hover:text-white transition-all flex items-center justify-center space-x-2",children:[i.jsx(gi,{size:20}),i.jsx("span",{children:"Voir la dmo"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"ROI jusqu' +1133%"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"-50% temps RH"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"Suppression des cabinets"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"text-green-600",size:20}),i.jsx("span",{className:"text-gray-700",children:"IA 24/7"})]})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("img",{src:"https://images.pexels.com/photos/3184311/pexels-photo-3184311.jpeg?auto=compress&cs=tinysrgb&w=600&h=400&fit=crop",alt:"quipe RH moderne",className:"rounded-2xl shadow-2xl"}),i.jsxs("div",{className:"absolute -top-6 -right-6 bg-white p-4 rounded-xl shadow-lg border-l-4 border-[#ff6a3d]",children:[i.jsx("div",{className:"text-2xl font-bold text-[#223049]",children:"92%"}),i.jsx("div",{className:"text-sm text-gray-600",children:"Taux de matching"})]}),i.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-lg border-l-4 border-[#9b6bff]",children:[i.jsx("div",{className:"text-2xl font-bold text-[#223049]",children:"15k"}),i.jsx("div",{className:"text-sm text-gray-600",children:"conomie/recrutement"})]})]}),i.jsx("div",{className:"absolute -top-4 -right-4 w-72 h-72 bg-gradient-to-br from-[#ff6a3d]/20 to-[#9b6bff]/20 rounded-full blur-3xl"})]})]})})}),z4=()=>{const t=[{icon:Ki,title:"Recherche automatique",description:"Sourcing intelligent sur toutes les plateformes et LinkedIn selon vos critres prcis",color:"from-[#ff6a3d] to-[#ff6a3d]/80"},{icon:kn,title:"Scoring IA temps rel",description:"valuation automatique des candidats avec estimation salariale et matching de comptences",color:"from-[#9b6bff] to-[#9b6bff]/80"},{icon:Nt,title:"Organisation automatique",description:"Planification des entretiens, relances et mise  jour d'agenda des recruteurs",color:"from-green-500 to-green-400"},{icon:e2,title:"Centralisation CRM",description:"Interface unique avec filtres avancs, notes et historique complet des interactions",color:"from-blue-500 to-blue-400"},{icon:He,title:"Analytics avances",description:"Tableaux de bord en temps rel avec KPIs de performance et ROI dtaill",color:"from-purple-500 to-purple-400"},{icon:D4,title:"Scurit entreprise",description:"Hbergement scuris, intgration SIRH, conformit RGPD et SSO",color:"from-red-500 to-red-400"}];return i.jsx("section",{id:"features",className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#ff6a3d]/10 rounded-full text-[#ff6a3d] font-medium text-sm mb-6",children:" IA qui restructure votre chane de recrutement"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Une plateforme complte pour rvolutionner vos RH"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"OYA centralise tout comme un CRM mais agit comme un moteur intelligent centralis, capable d'automatiser l'intgralit de votre processus de recrutement."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,n)=>i.jsxs("div",{className:"group relative p-8 bg-gradient-to-br from-gray-50 to-white rounded-2xl hover:shadow-2xl transition-all duration-300 border border-gray-100",children:[i.jsx("div",{className:`w-16 h-16 bg-gradient-to-r ${e.color} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform`,children:i.jsx(e.icon,{className:"text-white",size:32})}),i.jsx("h3",{className:"text-xl font-bold text-[#223049] mb-4",children:e.title}),i.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description}),i.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-[#ff6a3d]/5 to-[#9b6bff]/5 opacity-0 group-hover:opacity-100 transition-opacity"})]},n))}),i.jsx("div",{className:"text-center mt-16",children:i.jsxs("div",{className:"bg-gradient-to-r from-[#223049] to-[#223049]/90 rounded-2xl p-8 lg:p-12",children:[i.jsx("h3",{className:"text-2xl lg:text-3xl font-bold text-white mb-6",children:"Prt  transformer votre recrutement ?"}),i.jsx("p",{className:"text-gray-300 mb-8 max-w-2xl mx-auto",children:"Rejoignez les entreprises qui ont dj supprim leurs intermdiaires et automatis leur processus de recrutement."}),i.jsx("button",{className:"bg-[#ff6a3d] text-white px-8 py-4 rounded-lg font-semibold hover:bg-[#ff6a3d]/90 transition-all transform hover:scale-105",children:"Demander une dmo"})]})})]})})},U4=()=>{const[t,e]=D.useState(25),[n,r]=D.useState(60),[s,a]=D.useState(5e4),o=s*.15,l=8,u=50,d=Math.round(t*(n/100)),f=d*o,m=t*l*u,g=f+m,N=t<=25?34880:t<=100?62800:57e4,k=t*3*u,C=N+k,I=g-C,y=(I-N)/N*100,x=()=>t<=25?"PME":t<=100?"ETI":"Grand Groupe";return i.jsx("section",{id:"roi",className:"py-20 bg-gradient-to-br from-[#f4f0ec] to-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-green-100 rounded-full text-green-700 font-medium text-sm mb-6",children:" Calculez votre ROI"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Dcouvrez vos conomies avec OYA"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Simulation claire du retour sur investissement pour votre entreprise. Rsultats bass sur nos clients actuels."})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-start",children:[i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[i.jsx(x4,{className:"text-[#ff6a3d]",size:32}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049]",children:"Calculateur ROI"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de recrutements par an"}),i.jsx("input",{type:"range",min:"10",max:"1000",value:t,onChange:v=>e(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[i.jsx("span",{children:"10"}),i.jsx("span",{className:"font-semibold text-[#ff6a3d]",children:t}),i.jsx("span",{children:"1000"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"% de recrutements via cabinets actuellement"}),i.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:v=>r(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[i.jsx("span",{children:"0%"}),i.jsxs("span",{className:"font-semibold text-[#ff6a3d]",children:[n,"%"]}),i.jsx("span",{children:"100%"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire moyen des postes recruts"}),i.jsx("input",{type:"range",min:"25000",max:"150000",step:"5000",value:s,onChange:v=>a(Number(v.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mt-1",children:[i.jsx("span",{children:"25k"}),i.jsxs("span",{className:"font-semibold text-[#ff6a3d]",children:[s.toLocaleString(),""]}),i.jsx("span",{children:"150k"})]})]})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#9b6bff] to-[#9b6bff]/80 p-6 rounded-xl text-white",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Profil de votre entreprise"}),i.jsx("p",{className:"text-2xl font-bold",children:x()}),i.jsxs("p",{className:"opacity-90",children:[t," recrutements/an"]})]}),i.jsxs("div",{className:"bg-red-50 border border-red-200 p-6 rounded-xl",children:[i.jsxs("h4",{className:"text-lg font-semibold text-red-800 mb-4 flex items-center",children:[i.jsx(_4,{size:20,className:"mr-2"}),"Cots actuels"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-red-700",children:["Cabinets (",d," recrutements)"]}),i.jsxs("span",{className:"font-semibold text-red-800",children:[f.toLocaleString(),""]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-red-700",children:"Temps RH interne"}),i.jsxs("span",{className:"font-semibold text-red-800",children:[m.toLocaleString(),""]})]}),i.jsxs("div",{className:"border-t border-red-200 pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold text-red-800",children:"Total annuel"}),i.jsxs("span",{className:"font-bold text-red-800 text-xl",children:[g.toLocaleString(),""]})]})]})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 p-6 rounded-xl",children:[i.jsxs("h4",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:[i.jsx(He,{size:20,className:"mr-2"}),"Avec OYA"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-green-700",children:"Licence OYA"}),i.jsxs("span",{className:"font-semibold text-green-800",children:[N.toLocaleString(),""]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-green-700",children:"Temps RH optimis"}),i.jsxs("span",{className:"font-semibold text-green-800",children:[k.toLocaleString(),""]})]}),i.jsxs("div",{className:"border-t border-green-200 pt-3 flex justify-between",children:[i.jsx("span",{className:"font-semibold text-green-800",children:"Total annuel"}),i.jsxs("span",{className:"font-bold text-green-800 text-xl",children:[C.toLocaleString(),""]})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a3d] to-[#ff6a3d]/80 p-6 rounded-xl text-white",children:[i.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Rsultats"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"conomies annuelles"}),i.jsxs("span",{className:"font-bold text-2xl",children:[I.toLocaleString(),""]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"ROI"}),i.jsxs("span",{className:"font-bold text-2xl",children:["+",Math.round(y),"%"]})]})]})]})]})]})]})})},$4=()=>{const t=[{name:"Marie Dubois",position:"DRH",company:"TechCorp (250 salaris)",avatar:"https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=100&h=100&fit=crop&crop=face",quote:"OYA a rvolutionn notre processus de recrutement. Nous avons conomis 180k la premire anne en supprimant les cabinets.",rating:5,results:"180k conomiss, -60% temps RH"},{name:"Thomas Martin",position:"Directeur Gnral",company:"InnovateTech (150 salaris)",avatar:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=100&h=100&fit=crop&crop=face",quote:"L'IA d'OYA trouve des candidats que nous n'aurions jamais identifis. Le scoring est d'une prcision remarquable.",rating:5,results:"92% taux de matching, +40% qualit candidats"},{name:"Sophie Laurent",position:"Responsable Talent Acquisition",company:"FinanceGroup (500 salaris)",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=100&h=100&fit=crop&crop=face",quote:"Interface intuitive, ROI immdiat. Nos quipes RH se concentrent enfin sur l'humain plutt que sur la recherche.",rating:5,results:"ROI +847%, -50% temps sourcing"}];return i.jsx("section",{className:"py-20 bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#9b6bff]/10 rounded-full text-[#9b6bff] font-medium text-sm mb-6",children:" Tmoignages clients"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Pourquoi les directions choisissent OYA"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Parce qu'elles veulent reprendre le contrle de leur chane de recrutement, liminer les cots cachs, et automatiser intelligemment sans sacrifier la qualit humaine."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:t.map((e,n)=>i.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-gray-100",children:[i.jsx(C4,{className:"text-[#ff6a3d] mb-4",size:32}),i.jsx("div",{className:"flex items-center space-x-1 mb-4",children:[...Array(e.rating)].map((r,s)=>i.jsx(In,{className:"text-yellow-400 fill-current",size:20},s))}),i.jsxs("blockquote",{className:"text-gray-700 mb-6 italic",children:['"',e.quote,'"']}),i.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a3d]/10 to-[#9b6bff]/10 p-4 rounded-lg mb-6",children:[i.jsx("div",{className:"text-sm font-semibold text-[#223049] mb-1",children:"Rsultats:"}),i.jsx("div",{className:"text-sm text-gray-700",children:e.results})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("img",{src:e.avatar,alt:e.name,className:"w-12 h-12 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-[#223049]",children:e.name}),i.jsx("div",{className:"text-sm text-gray-600",children:e.position}),i.jsx("div",{className:"text-sm text-[#ff6a3d] font-medium",children:e.company})]})]})]},n))}),i.jsx("div",{className:"mt-16 bg-gradient-to-r from-[#223049] to-[#223049]/90 rounded-2xl p-8 lg:p-12",children:i.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"+1133%"}),i.jsx("div",{className:"text-gray-300",children:"ROI moyen"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"-50%"}),i.jsx("div",{className:"text-gray-300",children:"Temps RH conomis"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"94%"}),i.jsx("div",{className:"text-gray-300",children:"Taux de matching"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"15k"}),i.jsx("div",{className:"text-gray-300",children:"conomie/recrutement"})]})]})})]})})},B4=()=>{const t=[{name:"START",target:"PME",subtitle:"20-50 salaris",price:"990",period:"/mois",popular:!1,features:["3 utilisateurs","Sourcing + scoring IA","50 profils/mois","Support standard","Onboarding inclus"],cta:"Commencer",color:"border-gray-200"},{name:"PRO",target:"ETI",subtitle:"50-200 salaris",price:"2,490",period:"/mois",popular:!0,features:["10 utilisateurs","Toutes fonctionnalits IA","Agenda automatique","Estimation salariale","Support prioritaire","Analytics avances"],cta:"Dmo gratuite",color:"border-[#ff6a3d]"},{name:"SCALE",target:"Grand Groupe",subtitle:">200 salaris",price:"Sur mesure",period:"",popular:!1,features:["Utilisateurs illimits","Intgration SIRH/API","Hbergement scuris","Support 24/7 ddi","Personnalisation IA","SLA garantie"],cta:"Nous contacter",color:"border-[#9b6bff]"}];return i.jsx("section",{id:"pricing",className:"py-20 bg-gradient-to-br from-[#f4f0ec] to-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsx("div",{className:"inline-flex items-center px-4 py-2 bg-[#ff6a3d]/10 rounded-full text-[#ff6a3d] font-medium text-sm mb-6",children:" Tarification stratgique"}),i.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:"Choisissez votre avantage concurrentiel"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto mb-8",children:"OYA ne vend pas un abonnement. OYA vend un avantage concurrentiel RH, calibr  votre organisation et au volume de vos recrutements."}),i.jsxs("div",{className:"bg-gradient-to-r from-[#9b6bff] to-[#9b6bff]/80 text-white p-6 rounded-xl max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[i.jsx(In,{className:"text-yellow-300",size:20}),i.jsx("span",{className:"font-semibold",children:"Offre Early Adopter"}),i.jsx(In,{className:"text-yellow-300",size:20})]}),i.jsx("p",{className:"text-sm opacity-90",children:"-50% la premire anne pour les 10 premiers clients + accompagnement personnalis"})]})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-16",children:t.map((e,n)=>i.jsxs("div",{className:`relative bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border-2 ${e.color} ${e.popular?"scale-105":""}`,children:[e.popular&&i.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:i.jsx("div",{className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-full text-sm font-semibold",children:"Plus populaire"})}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-2",children:e.name}),i.jsx("p",{className:"text-[#ff6a3d] font-semibold mb-1",children:e.target}),i.jsx("p",{className:"text-gray-600 text-sm mb-6",children:e.subtitle}),i.jsxs("div",{className:"mb-6",children:[i.jsx("span",{className:"text-4xl font-bold text-[#223049]",children:e.price}),i.jsx("span",{className:"text-gray-600",children:e.period})]})]}),i.jsx("ul",{className:"space-y-4 mb-8",children:e.features.map((r,s)=>i.jsxs("li",{className:"flex items-center space-x-3",children:[i.jsx(v4,{className:"text-green-600 flex-shrink-0",size:20}),i.jsx("span",{className:"text-gray-700",children:r})]},s))}),i.jsxs("button",{className:`w-full py-4 rounded-lg font-semibold transition-all transform hover:scale-105 flex items-center justify-center space-x-2 ${e.popular?"bg-[#ff6a3d] text-white hover:bg-[#ff6a3d]/90":"border-2 border-[#223049] text-[#223049] hover:bg-[#223049] hover:text-white"}`,children:[i.jsx("span",{children:e.cta}),i.jsx(J_,{size:16})]})]},n))}),i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-6 text-center",children:"Comparaison ROI par profil d'entreprise"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b-2 border-gray-200",children:[i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Profil"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Recrutements/an"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"Cot OYA"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"conomies"}),i.jsx("th",{className:"text-left p-4 font-semibold text-[#223049]",children:"ROI"})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b border-gray-100",children:[i.jsx("td",{className:"p-4 font-medium text-[#223049]",children:"PME Tech"}),i.jsx("td",{className:"p-4 text-gray-700",children:"25"}),i.jsx("td",{className:"p-4 text-gray-700",children:"34,880"}),i.jsx("td",{className:"p-4 text-green-600 font-semibold",children:"196,370"}),i.jsx("td",{className:"p-4 text-green-600 font-bold",children:"+563%"})]}),i.jsxs("tr",{className:"border-b border-gray-100",children:[i.jsx("td",{className:"p-4 font-medium text-[#223049]",children:"ETI"}),i.jsx("td",{className:"p-4 text-gray-700",children:"100"}),i.jsx("td",{className:"p-4 text-gray-700",children:"62,800"}),i.jsx("td",{className:"p-4 text-green-600 font-semibold",children:"712,200"}),i.jsx("td",{className:"p-4 text-green-600 font-bold",children:"+1,133%"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"p-4 font-medium text-[#223049]",children:"Grand Groupe"}),i.jsx("td",{className:"p-4 text-gray-700",children:"1,000"}),i.jsx("td",{className:"p-4 text-gray-700",children:"570,000"}),i.jsx("td",{className:"p-4 text-green-600 font-semibold",children:"4,180,000"}),i.jsx("td",{className:"p-4 text-green-600 font-bold",children:"+733%"})]})]})]})})]})]})})},q4=()=>i.jsx("footer",{id:"contact",className:"bg-[#223049] text-white py-16",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold",children:"oya"}),i.jsx("p",{className:"text-sm opacity-75",children:"intelligence"})]})]}),i.jsx("p",{className:"text-gray-300 mb-6 max-w-md",children:"La plateforme IA stratgique qui transforme le recrutement en entreprise. Supprimez les intermdiaires, automatisez intelligemment, gardez le contrle."}),i.jsx("div",{className:"text-sm text-gray-400",children:i.jsx("p",{className:"font-semibold text-[#ff6a3d] mb-2",children:"Simplifier  Acclrer  Performer"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Contact"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Vr,{size:16,className:"text-[#ff6a3d]"}),i.jsx("span",{className:"text-gray-300",children:"contact@oya-intelligence.com"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Di,{size:16,className:"text-[#ff6a3d]"}),i.jsx("span",{className:"text-gray-300",children:"+33 1 23 45 67 89"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx($o,{size:16,className:"text-[#ff6a3d]"}),i.jsx("span",{className:"text-gray-300",children:"Paris, France"})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-6",children:"Dmarrer maintenant"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("button",{className:"w-full bg-[#ff6a3d] text-white px-6 py-3 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Demander une dmo"}),i.jsx("button",{className:"w-full border border-white text-white px-6 py-3 rounded-lg hover:bg-white hover:text-[#223049] transition-colors",children:"Calculer mon ROI"})]}),i.jsxs("div",{className:"flex space-x-4 mt-6",children:[i.jsx("a",{href:"#",className:"p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:i.jsx(Xl,{size:20})}),i.jsx("a",{href:"#",className:"p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:i.jsx(L4,{size:20})})]})]})]}),i.jsxs("div",{className:"border-t border-gray-700 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[i.jsx("p",{className:"text-gray-400 text-sm",children:" 2024 OYA Intelligence. Tous droits rservs."}),i.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Mentions lgales"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"RGPD"}),i.jsx("a",{href:"#",className:"text-gray-400 hover:text-white text-sm transition-colors",children:"CGU"})]})]})]})}),H4=()=>i.jsxs("div",{className:"min-h-screen bg-[#f4f0ec]",children:[i.jsx(V4,{}),i.jsx(F4,{}),i.jsx(z4,{}),i.jsx(U4,{}),i.jsx($4,{}),i.jsx(B4,{}),i.jsx(q4,{})]}),W4=({activeTab:t,setActiveTab:e})=>{var o,l;const{logout:n,currentUser:r}=Wr(),s=[{id:"dashboard",label:"Tableau de bord",icon:E4},{id:"candidates",label:"Candidats",icon:an},{id:"sourcing",label:"Sourcing IA",icon:Ki},{id:"pipeline",label:"Pipeline",icon:He},{id:"jobs",label:"Offres d'emploi",icon:xf},{id:"interviews",label:"Studio entretiens",icon:ls},{id:"automation",label:"Automatisation",icon:Bn},{id:"analytics",label:"Analytics",icon:Ou},{id:"calendar",label:"Agenda",icon:Nt}],a=async()=>{try{await n()}catch(u){console.error("Erreur lors de la dconnexion:",u)}};return i.jsxs("div",{className:"fixed left-0 top-0 w-64 h-full bg-[#223049] text-white z-50 flex flex-col",children:[i.jsx("div",{className:"p-6 border-b border-white/10",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold",children:"oya"}),i.jsx("p",{className:"text-sm opacity-75",children:"intelligence"})]})]})}),i.jsx("nav",{className:"flex-1 p-4",children:i.jsx("div",{className:"space-y-2",children:s.map(u=>i.jsxs("button",{onClick:()=>e(u.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${t===u.id?"bg-[#ff6a3d] text-white":"hover:bg-white/10 text-gray-300 hover:text-white"}`,children:[i.jsx(u.icon,{size:20}),i.jsx("span",{children:u.label})]},u.id))})}),i.jsxs("div",{className:"p-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-[#ff6a3d] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:((o=r==null?void 0:r.displayName)==null?void 0:o.charAt(0))||((l=r==null?void 0:r.email)==null?void 0:l.charAt(0))||"U"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-white truncate",children:(r==null?void 0:r.displayName)||"Utilisateur"}),i.jsx("p",{className:"text-xs text-gray-300 truncate",children:r==null?void 0:r.email})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("button",{onClick:()=>e("settings"),className:`w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-colors ${t==="settings"?"bg-[#ff6a3d] text-white":"hover:bg-white/10 text-gray-300 hover:text-white"}`,children:[i.jsx(R4,{size:16}),i.jsx("span",{className:"text-sm",children:"Paramtres"})]}),i.jsxs("button",{onClick:a,className:"w-full flex items-center space-x-3 px-4 py-2 rounded-lg transition-colors hover:bg-red-500/20 text-gray-300 hover:text-red-300",children:[i.jsx(S4,{size:16}),i.jsx("span",{className:"text-sm",children:"Dconnexion"})]})]})]})]})},Gr=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),{currentUser:s}=Wr();return D.useEffect(()=>{if(!s)return;const u=F_(zc(pn,"candidates"),z_("userId","==",s.uid));return W_(u,f=>{const g=f.docs.map(N=>({id:N.id,...N.data()})).sort((N,k)=>!N.createdAt||!k.createdAt?0:k.createdAt.toMillis()-N.createdAt.toMillis());e(g),r(!1)})},[s]),{candidates:t,loading:n,addCandidate:async u=>{if(s)try{await H_(zc(pn,"candidates"),{...u,userId:s.uid,createdAt:pr(),updatedAt:pr()})}catch(d){throw console.error("Error adding candidate:",d),d}},updateCandidate:async(u,d)=>{try{const f=os(pn,"candidates",u);await Jl(f,{...d,updatedAt:pr()})}catch(f){throw console.error("Error updating candidate:",f),f}},deleteCandidate:async u=>{try{await q_(os(pn,"candidates",u))}catch(d){throw console.error("Error deleting candidate:",d),d}}}},vy=()=>{const{candidates:t,loading:e}=Gr();if(e)return i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})});const n={totalCandidates:t.length,interviews:t.filter(a=>a.status==="Interview").length,qualified:t.filter(a=>a.status==="Qualified").length,hired:t.filter(a=>a.status==="Hired").length,averageScore:t.length>0?Math.round(t.reduce((a,o)=>a+o.score,0)/t.length):0},r=t.sort((a,o)=>{var l,u;return((l=o.createdAt)==null?void 0:l.toMillis())-((u=a.createdAt)==null?void 0:u.toMillis())}).slice(0,5),s=t.filter(a=>a.score>=85).sort((a,o)=>o.score-a.score).slice(0,3);return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#223049] to-[#223049]/90 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord OYA"}),i.jsx("p",{className:"text-gray-300",children:"Grez vos recrutements avec l'intelligence artificielle"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-3xl font-bold text-[#ff6a3d]",children:[n.averageScore,"%"]}),i.jsx("div",{className:"text-sm text-gray-300",children:"Score moyen IA"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(an,{className:"text-[#ff6a3d]",size:24})}),i.jsxs("span",{className:"text-sm text-green-600 font-medium",children:["+",Math.round(n.totalCandidates/30*100),"%"]})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.totalCandidates}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Candidats actifs"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(Nt,{className:"text-[#9b6bff]",size:24})}),i.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+15%"})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.interviews}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Entretiens planifis"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Se,{className:"text-green-600",size:24})}),i.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+25%"})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.qualified}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Candidats qualifis"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(kn,{className:"text-blue-600",size:24})}),i.jsx("span",{className:"text-sm text-green-600 font-medium",children:"+8%"})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.hired}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Embauches russies"})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Candidats rcents"})}),i.jsx("div",{className:"p-6",children:r.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(an,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Aucun candidat rcent"})]}):i.jsx("div",{className:"space-y-4",children:r.map(a=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-[#ff6a3d] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.charAt(0)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-[#223049] truncate",children:a.name}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.position})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:14,className:"text-[#ff6a3d]"}),i.jsxs("span",{className:"text-sm font-medium",children:[a.score,"%"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:a.status})]})]},a.id))})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Top candidats IA"})}),i.jsx("div",{className:"p-6",children:s.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(In,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Aucun candidat avec score lev"})]}):i.jsx("div",{className:"space-y-4",children:s.map((a,o)=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:a.name.charAt(0)})}),o===0&&i.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs",children:""})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-[#223049] truncate",children:a.name}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.position})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-12 h-2 bg-gray-200 rounded-full",children:i.jsx("div",{className:"h-2 bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff] rounded-full",style:{width:`${a.score}%`}})}),i.jsxs("span",{className:"text-sm font-bold text-green-600",children:[a.score,"%"]})]})})]},a.id))})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Actions rapides"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{className:"flex items-center space-x-3 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#ff6a3d] hover:bg-[#ff6a3d]/5 transition-colors",children:[i.jsx("div",{className:"p-2 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(an,{size:20,className:"text-[#ff6a3d]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#223049]",children:"Nouveau candidat"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Ajouter manuellement"})]})]}),i.jsxs("button",{className:"flex items-center space-x-3 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-[#9b6bff] hover:bg-[#9b6bff]/5 transition-colors",children:[i.jsx("div",{className:"p-2 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(Bn,{size:20,className:"text-[#9b6bff]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#223049]",children:"Sourcing IA"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Recherche automatique"})]})]}),i.jsxs("button",{className:"flex items-center space-x-3 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors",children:[i.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:i.jsx(Nt,{size:20,className:"text-green-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-[#223049]",children:"Planifier entretien"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Agenda automatique"})]})]})]})]})]})};function dn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Es(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const s2=6048e5,G4=864e5;let K4={};function Lu(){return K4}function _o(t,e){var l,u,d,f;const n=Lu(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,s=dn(t),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Gc(t){return _o(t,{weekStartsOn:1})}function i2(t){const e=dn(t),n=e.getFullYear(),r=Es(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Gc(r),a=Es(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Gc(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function wy(t){const e=dn(t);return e.setHours(0,0,0,0),e}function by(t){const e=dn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Q4(t,e){const n=wy(t),r=wy(e),s=+n-by(n),a=+r-by(r);return Math.round((s-a)/G4)}function Y4(t){const e=i2(t),n=Es(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Gc(n)}function J4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function X4(t){if(!J4(t)&&typeof t!="number")return!1;const e=dn(t);return!isNaN(Number(e))}function Z4(t){const e=dn(t),n=Es(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const e6={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},t6=(t,e,n)=>{let r;const s=e6[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function xi(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const n6={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},r6={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},s6={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},i6={date:xi({formats:n6,defaultWidth:"full"}),time:xi({formats:r6,defaultWidth:"full"}),dateTime:xi({formats:s6,defaultWidth:"full"})},a6={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},o6=(t,e,n,r)=>a6[t];function xn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const l6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},c6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},u6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},d6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},h6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},f6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},m6=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},p6={ordinalNumber:m6,era:xn({values:l6,defaultWidth:"wide"}),quarter:xn({values:c6,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xn({values:u6,defaultWidth:"wide"}),day:xn({values:d6,defaultWidth:"wide"}),dayPeriod:xn({values:h6,defaultWidth:"wide",formattingValues:f6,defaultFormattingWidth:"wide"})};function yn(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?x6(l,m=>m.test(o)):g6(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function g6(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function x6(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function a2(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const y6=/^(\d+)(th|st|nd|rd)?/i,v6=/\d+/i,w6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},b6={any:[/^b/i,/^(a|c)/i]},_6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},N6={any:[/1/i,/2/i,/3/i,/4/i]},j6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},E6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},T6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},S6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},I6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},k6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},C6={ordinalNumber:a2({matchPattern:y6,parsePattern:v6,valueCallback:t=>parseInt(t,10)}),era:yn({matchPatterns:w6,defaultMatchWidth:"wide",parsePatterns:b6,defaultParseWidth:"any"}),quarter:yn({matchPatterns:_6,defaultMatchWidth:"wide",parsePatterns:N6,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yn({matchPatterns:j6,defaultMatchWidth:"wide",parsePatterns:E6,defaultParseWidth:"any"}),day:yn({matchPatterns:T6,defaultMatchWidth:"wide",parsePatterns:S6,defaultParseWidth:"any"}),dayPeriod:yn({matchPatterns:I6,defaultMatchWidth:"any",parsePatterns:k6,defaultParseWidth:"any"})},A6={code:"en-US",formatDistance:t6,formatLong:i6,formatRelative:o6,localize:p6,match:C6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function P6(t){const e=dn(t);return Q4(e,Z4(e))+1}function R6(t){const e=dn(t),n=+Gc(e)-+Y4(e);return Math.round(n/s2)+1}function o2(t,e){var f,m,g,N;const n=dn(t),r=n.getFullYear(),s=Lu(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((N=(g=s.locale)==null?void 0:g.options)==null?void 0:N.firstWeekContainsDate)??1,o=Es(t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=_o(o,e),u=Es(t,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const d=_o(u,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function M6(t,e){var l,u,d,f;const n=Lu(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,s=o2(t,e),a=Es(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),_o(a,e)}function D6(t,e){const n=dn(t),r=+_o(n,e)-+M6(n,e);return Math.round(r/s2)+1}function fe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ar={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return fe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):fe(n+1,2)},d(t,e){return fe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return fe(t.getHours()%12||12,e.length)},H(t,e){return fe(t.getHours(),e.length)},m(t,e){return fe(t.getMinutes(),e.length)},s(t,e){return fe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return fe(s,e.length)}},$s={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_y={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ar.y(t,e)},Y:function(t,e,n,r){const s=o2(t,r),a=s>0?s:1-s;if(e==="YY"){const o=a%100;return fe(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):fe(a,e.length)},R:function(t,e){const n=i2(t);return fe(n,e.length)},u:function(t,e){const n=t.getFullYear();return fe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return fe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return fe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ar.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return fe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=D6(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):fe(s,e.length)},I:function(t,e,n){const r=R6(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):fe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ar.d(t,e)},D:function(t,e,n){const r=P6(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):fe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return fe(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return fe(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return fe(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=$s.noon:r===0?s=$s.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=$s.evening:r>=12?s=$s.afternoon:r>=4?s=$s.morning:s=$s.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ar.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ar.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ar.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ar.s(t,e)},S:function(t,e){return ar.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return jy(r);case"XXXX":case"XX":return ts(r);case"XXXXX":case"XXX":default:return ts(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return jy(r);case"xxxx":case"xx":return ts(r);case"xxxxx":case"xxx":default:return ts(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ny(r,":");case"OOOO":default:return"GMT"+ts(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ny(r,":");case"zzzz":default:return"GMT"+ts(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return fe(r,e.length)},T:function(t,e,n){const r=t.getTime();return fe(r,e.length)}};function Ny(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+fe(a,2)}function jy(t,e){return t%60===0?(t>0?"-":"+")+fe(Math.abs(t)/60,2):ts(t,e)}function ts(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=fe(Math.trunc(r/60),2),a=fe(r%60,2);return n+s+e+a}const Ey=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},l2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},O6=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Ey(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Ey(r,e)).replace("{{time}}",l2(s,e))},L6={p:l2,P:O6},V6=/^D+$/,F6=/^Y+$/,z6=["D","DD","YY","YYYY"];function U6(t){return V6.test(t)}function $6(t){return F6.test(t)}function B6(t,e,n){const r=q6(t,e,n);if(console.warn(r),z6.includes(t))throw new RangeError(r)}function q6(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const H6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G6=/^'([^]*?)'?$/,K6=/''/g,Q6=/[a-zA-Z]/;function c2(t,e,n){var f,m,g,N,k,C,I,y;const r=Lu(),s=(n==null?void 0:n.locale)??r.locale??A6,a=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((N=(g=r.locale)==null?void 0:g.options)==null?void 0:N.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((C=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:C.weekStartsOn)??r.weekStartsOn??((y=(I=r.locale)==null?void 0:I.options)==null?void 0:y.weekStartsOn)??0,l=dn(t);if(!X4(l))throw new RangeError("Invalid time value");let u=e.match(W6).map(x=>{const v=x[0];if(v==="p"||v==="P"){const R=L6[v];return R(x,s.formatLong)}return x}).join("").match(H6).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const v=x[0];if(v==="'")return{isToken:!1,value:Y6(x)};if(_y[v])return{isToken:!0,value:x};if(v.match(Q6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return u.map(x=>{if(!x.isToken)return x.value;const v=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&$6(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&U6(v))&&B6(v,e,String(t));const R=_y[v[0]];return R(l,v,s.localize,d)}).join("")}function Y6(t){const e=t.match(G6);return e?e[1].replace(K6,"'"):t}const J6={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},X6=(t,e,n)=>{let r;const s=J6[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},Z6={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},eM={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},tM={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nM={date:xi({formats:Z6,defaultWidth:"full"}),time:xi({formats:eM,defaultWidth:"full"}),dateTime:xi({formats:tM,defaultWidth:"full"})},rM={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},sM=(t,e,n,r)=>rM[t],iM={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},aM={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},oM={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},lM={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},cM={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},uM=(t,e)=>{const n=Number(t),r=e==null?void 0:e.unit;if(n===0)return"0";const s=["year","week","hour","minute","second"];let a;return n===1?a=r&&s.includes(r)?"re":"er":a="me",n+a},dM=["MMM","MMMM"],hM={preprocessor:(t,e)=>t.getDate()===1||!e.some(r=>r.isToken&&dM.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:uM,era:xn({values:iM,defaultWidth:"wide"}),quarter:xn({values:aM,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xn({values:oM,defaultWidth:"wide"}),day:xn({values:lM,defaultWidth:"wide"}),dayPeriod:xn({values:cM,defaultWidth:"wide"})},fM=/^(\d+)(ime|re|me|er|e)?/i,mM=/\d+/i,pM={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},gM={any:[/^av/i,/^ap/i]},xM={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},yM={any:[/1/i,/2/i,/3/i,/4/i]},vM={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},wM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},bM={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},_M={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},NM={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},jM={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},EM={ordinalNumber:a2({matchPattern:fM,parsePattern:mM,valueCallback:t=>parseInt(t)}),era:yn({matchPatterns:pM,defaultMatchWidth:"wide",parsePatterns:gM,defaultParseWidth:"any"}),quarter:yn({matchPatterns:xM,defaultMatchWidth:"wide",parsePatterns:yM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:yn({matchPatterns:vM,defaultMatchWidth:"wide",parsePatterns:wM,defaultParseWidth:"any"}),day:yn({matchPatterns:bM,defaultMatchWidth:"wide",parsePatterns:_M,defaultParseWidth:"any"}),dayPeriod:yn({matchPatterns:NM,defaultMatchWidth:"any",parsePatterns:jM,defaultParseWidth:"any"})},u2={code:"fr",formatDistance:X6,formatLong:nM,formatRelative:sM,localize:hM,match:EM,options:{weekStartsOn:1,firstWeekContainsDate:4}},TM=({onSelectCandidate:t,onEditCandidate:e})=>{const{candidates:n,loading:r,deleteCandidate:s,updateCandidate:a}=Gr(),[o,l]=D.useState(""),[u,d]=D.useState("all"),[f,m]=D.useState(null),g=y=>({"To Contact":"bg-blue-100 text-blue-800",Contacted:"bg-yellow-100 text-yellow-800",Interview:"bg-[#ff6a3d] text-white",Qualified:"bg-[#9b6bff] text-white",Rejected:"bg-red-100 text-red-800",Hired:"bg-green-100 text-green-800"})[y]||"bg-gray-100 text-gray-800",N=y=>y>=90?"text-green-600":y>=80?"text-[#ff6a3d]":y>=70?"text-yellow-600":"text-gray-600",k=n.filter(y=>{const x=y.name.toLowerCase().includes(o.toLowerCase())||y.position.toLowerCase().includes(o.toLowerCase())||y.email.toLowerCase().includes(o.toLowerCase()),v=u==="all"||y.status===u;return x&&v}),C=async y=>{try{await s(y),m(null)}catch(x){console.error("Erreur lors de la suppression:",x)}},I=async(y,x)=>{try{await a(y.id,{status:x})}catch(v){console.error("Erreur lors de la mise  jour:",v)}};return r?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#223049]",children:["Candidats (",k.length,")"]}),i.jsxs("button",{onClick:()=>t(null),className:"bg-[#ff6a3d] text-white px-4 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Oi,{size:16}),i.jsx("span",{children:"Nouveau candidat"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{type:"text",placeholder:"Rechercher un candidat...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("select",{value:u,onChange:y=>d(y.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Tous les statuts"}),i.jsx("option",{value:"To Contact",children:" contacter"}),i.jsx("option",{value:"Contacted",children:"Contact"}),i.jsx("option",{value:"Interview",children:"Entretien"}),i.jsx("option",{value:"Qualified",children:"Qualifi"}),i.jsx("option",{value:"Rejected",children:"Rejet"}),i.jsx("option",{value:"Hired",children:"Embauch"})]})]})]}),i.jsx("div",{className:"divide-y divide-gray-100",children:k.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(an,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun candidat trouv"}),i.jsx("p",{className:"text-gray-500",children:"Commencez par ajouter votre premier candidat."})]}):k.map(y=>i.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[i.jsxs("div",{className:"relative",children:[y.avatar?i.jsx("img",{src:y.avatar,alt:y.name,className:"w-12 h-12 rounded-full object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-[#ff6a3d] rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:y.name.charAt(0)})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow-sm",children:i.jsx("div",{className:`w-3 h-3 rounded-full ${y.score>=90?"bg-green-500":y.score>=80?"bg-[#ff6a3d]":"bg-yellow-500"}`})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[i.jsx("h3",{className:"font-semibold text-[#223049] truncate",children:y.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g(y.status)}`,children:y.status})]}),i.jsx("p",{className:"text-gray-600 mb-2",children:y.position}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx($o,{size:14}),i.jsx("span",{children:y.location})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:14}),i.jsx("span",{children:y.experience})]}),i.jsx("div",{className:"flex items-center space-x-1",children:i.jsxs("span",{className:`font-medium ${N(y.score)}`,children:["Score: ",y.score,"%"]})})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("div",{className:"text-right mr-4",children:[i.jsx("p",{className:"font-semibold text-[#223049]",children:y.salary}),i.jsx("p",{className:"text-sm text-gray-500",children:y.createdAt&&c2(y.createdAt.toDate(),"dd MMM",{locale:u2})})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>window.open(`tel:${y.phone}`),className:"p-2 text-gray-400 hover:text-[#ff6a3d] transition-colors rounded-lg hover:bg-gray-100",title:"Appeler",children:i.jsx(Di,{size:16})}),i.jsx("button",{onClick:()=>window.open(`mailto:${y.email}`),className:"p-2 text-gray-400 hover:text-[#ff6a3d] transition-colors rounded-lg hover:bg-gray-100",title:"Envoyer un email",children:i.jsx(Vr,{size:16})}),i.jsx("button",{onClick:()=>e(y),className:"p-2 text-gray-400 hover:text-[#ff6a3d] transition-colors rounded-lg hover:bg-gray-100",title:"Modifier",children:i.jsx(Hc,{size:16})}),i.jsx("button",{onClick:()=>m(y.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors rounded-lg hover:bg-gray-100",title:"Supprimer",children:i.jsx(Bo,{size:16})})]})]})]}),i.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:["To Contact","Contacted","Interview","Qualified"].map(x=>y.status!==x&&i.jsxs("button",{onClick:()=>I(y,x),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-full hover:bg-[#ff6a3d] hover:text-white transition-colors",children:[" ",x]},x))})]},y.id))}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Confirmer la suppression"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"tes-vous sr de vouloir supprimer ce candidat ? Cette action est irrversible."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:()=>C(f),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Supprimer"})]})]})})]})};class SM{constructor(){this.apiKey="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",this.apiUrl="https://api.perplexity.ai/chat/completions"}async scoreCandidateProfile(e){const n=`Tu es un expert RH et IA de recrutement. Tu dois analyser un profil candidat et donner un score de 0  100 bas sur :
- Adquation du profil avec le poste
- Cohrence de l'exprience
- Pertinence des comptences
- Ralisme salarial par rapport au march franais 2024
- Potentiel d'volution

Rponds UNIQUEMENT en JSON avec cette structure exacte :
{
  "score": number (0-100),
  "analysis": "string (analyse dtaille en franais)",
  "strengths": ["string", "string", "string"],
  "recommendations": ["string", "string"]
}`,r=`Analyse ce profil candidat franais :
- Nom: ${e.name}
- Poste: ${e.position}
- Exprience: ${e.experience}
- Comptences: ${e.skills.join(", ")}
- Localisation: ${e.location}
- Prtention salariale: ${e.salary}

Donne un score IA prcis et une analyse complte pour le march franais.`;try{const s=await this.makeAPICall([{role:"system",content:n},{role:"user",content:r}]),a=this.parseJSONResponse(s);return{score:Math.min(100,Math.max(0,a.score||75)),analysis:a.analysis||"Profil analys avec succs",strengths:a.strengths||["Profil cohrent","Comptences adaptes"],recommendations:a.recommendations||["Continuer l'valuation","Planifier un entretien"]}}catch(s){return console.error("Erreur lors du scoring IA:",s),this.calculateIntelligentFallbackScore(e)}}async enhanceCandidateSearch(e){const n=`Tu es un expert du march de l'emploi franais en tech. Tu dois analyser une recherche de candidat et fournir des insights prcis sur le march franais 2024.

Rponds UNIQUEMENT en JSON avec cette structure :
{
  "enhancedKeywords": ["keyword1", "keyword2", "keyword3"],
  "suggestedSkills": ["skill1", "skill2", "skill3", "skill4"],
  "marketInsights": "string (insights sur le march franais)",
  "salaryBenchmark": "string (fourchette salariale raliste)"
}`,r=`Analyse cette recherche pour le march franais :
- Poste recherch: ${e.position}
- Comptences: ${e.skills}
- Exprience: ${e.experience}
- Localisation: ${e.location}
- Budget: ${e.salaryMin} - ${e.salaryMax}

Donne-moi des insights prcis sur ce profil en France en 2024.`;try{const s=await this.makeAPICall([{role:"system",content:n},{role:"user",content:r}]),a=this.parseJSONResponse(s);return{enhancedKeywords:a.enhancedKeywords||[e.position],suggestedSkills:a.suggestedSkills||[],marketInsights:a.marketInsights||"March dynamique pour ce profil",salaryBenchmark:a.salaryBenchmark||"Fourchette comptitive"}}catch(s){return console.error("Erreur insights march:",s),this.getFallbackMarketInsights(e)}}async makeAPICall(e){const n=await fetch(this.apiUrl,{method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"sonar-pro",messages:e,temperature:.1,max_tokens:1e3})});if(!n.ok)throw new Error(`Erreur API Perplexity: ${n.status} - ${n.statusText}`);return(await n.json()).choices[0].message.content}parseJSONResponse(e){try{const n=e.replace(/```json\n?|\n?```/g,"").replace(/^\s*[\r\n]/gm,"").trim();return JSON.parse(n)}catch(n){throw console.error("Erreur parsing JSON:",n,"Content:",e),new Error("Rponse IA invalide")}}calculateIntelligentFallbackScore(e){let n=70;const r=this.extractYearsFromExperience(e.experience);r>=5?n+=15:r>=3?n+=10:r>=1&&(n+=5);const s=e.skills.length;s>=6?n+=10:s>=4?n+=7:s>=2&&(n+=4),["paris","lyon","marseille","toulouse","nice","nantes","bordeaux"].some(d=>e.location.toLowerCase().includes(d))&&(n+=8);const o=this.extractSalaryNumber(e.salary);o>=45&&o<=90&&(n+=7),n+=Math.floor(Math.random()*8)-4;const l=[],u=[];return r>=5&&l.push("Exprience senior solide"),s>=5&&l.push("Palette de comptences tendue"),e.location.toLowerCase().includes("paris")&&l.push("Localisation stratgique"),n>=85?u.push("Candidat prioritaire  contacter"):n>=75?u.push("Profil intressant  valuer"):u.push("Approfondir l'valuation technique"),u.push("Vrifier la motivation et disponibilit"),{score:Math.min(100,Math.max(50,n)),analysis:`Profil ${e.name} valu avec un score de ${n}%. ${r>=3?"Exprience solide":"Profil junior"} avec ${s} comptences identifies. Localisation: ${e.location}.`,strengths:l.length>0?l:["Profil cohrent","Donnes compltes"],recommendations:u}}getFallbackMarketInsights(e){const n=e.position.toLowerCase();let r=[],s="45-65k",a="March dynamique avec forte demande";return n.includes("dveloppeur")||n.includes("dev")?(r=["JavaScript","React","Node.js","TypeScript","Git","AWS"],s="40-80k selon exprience",a="March trs dynamique pour les dveloppeurs en France. Forte demande en JavaScript/React."):n.includes("product")?(r=["Product Strategy","Analytics","Agile","UX/UI","SQL"],s="55-95k selon exprience",a="March en croissance pour les Product Managers, surtout en tech et startups."):n.includes("data")&&(r=["Python","SQL","Machine Learning","Statistics","Pandas"],s="50-90k selon exprience",a="Forte demande en Data Scientists, march trs comptitif en France."),{enhancedKeywords:[e.position,...r.slice(0,3)],suggestedSkills:r,marketInsights:a,salaryBenchmark:s}}extractYearsFromExperience(e){const n=e.match(/(\d+)/);return n?parseInt(n[1]):0}extractSalaryNumber(e){const n=e.match(/(\d+)/);return n?parseInt(n[1]):0}}const _f=new SM,IM=({candidate:t,onClose:e,onSave:n})=>{const{addCandidate:r,updateCandidate:s}=Gr(),[a,o]=D.useState(!1),[l,u]=D.useState(!1),[d,f]=D.useState(null),[m,g]=D.useState({name:"",email:"",phone:"",position:"",experience:"",location:"",salary:"",score:75,status:"To Contact",skills:[],notes:"",source:"Manuel",avatar:""});D.useEffect(()=>{t&&g({name:t.name||"",email:t.email||"",phone:t.phone||"",position:t.position||"",experience:t.experience||"",location:t.location||"",salary:t.salary||"",score:t.score||75,status:t.status||"To Contact",skills:t.skills||[],notes:t.notes||"",source:t.source||"Manuel",avatar:t.avatar||""})},[t]);const N=async I=>{I.preventDefault(),o(!0);try{const y={...m};t?await s(t.id,y):await r(y),n(),e()}catch(y){console.error("Erreur lors de la sauvegarde:",y)}finally{o(!1)}},k=I=>{const y=I.split(",").map(x=>x.trim()).filter(x=>x);g({...m,skills:y})},C=async()=>{if(!m.name||!m.position){alert("Veuillez remplir au moins le nom et le poste pour utiliser le scoring IA");return}u(!0);try{const I=await _f.scoreCandidateProfile({name:m.name,position:m.position,experience:m.experience,skills:m.skills,location:m.location,salary:m.salary});f(I),g({...m,score:I.score})}catch(I){console.error("Erreur scoring IA:",I),alert("Erreur lors du scoring IA. Veuillez ressayer.")}finally{u(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:t?"Modifier le candidat":"Nouveau candidat"}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(r2,{size:20})})]})}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 p-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium text-[#223049] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Informations personnelles"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet *"}),i.jsx("input",{type:"text",required:!0,value:m.name,onChange:I=>g({...m,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),i.jsx("input",{type:"email",required:!0,value:m.email,onChange:I=>g({...m,email:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tlphone"}),i.jsx("input",{type:"tel",value:m.phone,onChange:I=>g({...m,phone:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation"}),i.jsx("input",{type:"text",value:m.location,onChange:I=>g({...m,location:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"font-medium text-[#223049] flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#9b6bff] rounded-full mr-2"}),"Informations professionnelles"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poste recherch *"}),i.jsx("input",{type:"text",required:!0,value:m.position,onChange:I=>g({...m,position:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exprience"}),i.jsx("input",{type:"text",value:m.experience,onChange:I=>g({...m,experience:I.target.value}),placeholder:"ex: 5 ans",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire souhait"}),i.jsx("input",{type:"text",value:m.salary,onChange:I=>g({...m,salary:I.target.value}),placeholder:"ex: 55k",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),i.jsxs("select",{value:m.status,onChange:I=>g({...m,status:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"To Contact",children:" contacter"}),i.jsx("option",{value:"Contacted",children:"Contact"}),i.jsx("option",{value:"Interview",children:"Entretien"}),i.jsx("option",{value:"Qualified",children:"Qualifi"}),i.jsx("option",{value:"Rejected",children:"Rejet"}),i.jsx("option",{value:"Hired",children:"Embauch"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comptences (spares par des virgules)"}),i.jsx("input",{type:"text",value:m.skills.join(", "),onChange:I=>k(I.target.value),placeholder:"React, TypeScript, Node.js",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:m.notes,onChange:I=>g({...m,notes:I.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Notes sur le candidat..."})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsxs("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[i.jsx(A4,{size:16}),i.jsx("span",{children:a?"Sauvegarde...":"Sauvegarder"})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-[#f4f0ec] to-white p-6 rounded-xl border border-gray-200",children:[i.jsxs("h3",{className:"font-medium text-[#223049] mb-4 flex items-center",children:[i.jsx(zn,{className:"text-[#9b6bff] mr-2",size:20}),"Analyse IA OYA"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Score IA:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-[#ff6a3d]",children:[m.score,"%"]}),i.jsx(In,{size:16,className:m.score>=90?"text-green-500":m.score>=80?"text-[#ff6a3d]":"text-gray-400"})]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:"h-3 bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff] rounded-full transition-all duration-500",style:{width:`${m.score}%`}})}),i.jsx("button",{type:"button",onClick:C,disabled:l,className:"w-full bg-[#9b6bff] text-white py-3 px-4 rounded-lg hover:bg-[#9b6bff]/90 transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Analyse en cours..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bn,{size:16}),i.jsx("span",{children:"Scorer avec l'IA"})]})})]})]}),d&&i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[i.jsxs("h4",{className:"font-medium text-[#223049] mb-4 flex items-center",children:[i.jsx(He,{className:"text-[#ff6a3d] mr-2",size:16}),"Analyse dtaille"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Analyse:"}),i.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:d.analysis})]}),d.strengths.length>0&&i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-green-700 mb-2",children:"Points forts:"}),i.jsx("ul",{className:"space-y-1",children:d.strengths.map((I,y)=>i.jsxs("li",{className:"text-sm text-green-600 flex items-center",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-2"}),I]},y))})]}),d.recommendations.length>0&&i.jsxs("div",{children:[i.jsx("h5",{className:"text-sm font-medium text-[#ff6a3d] mb-2",children:"Recommandations:"}),i.jsx("ul",{className:"space-y-1",children:d.recommendations.map((I,y)=>i.jsxs("li",{className:"text-sm text-gray-600 flex items-center",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-[#ff6a3d] rounded-full mr-2"}),I]},y))})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-4",children:"Source du candidat"}),i.jsxs("select",{value:m.source,onChange:I=>g({...m,source:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"Manuel",children:"Ajout manuel"}),i.jsx("option",{value:"LinkedIn",children:"LinkedIn"}),i.jsx("option",{value:"Indeed",children:"Indeed"}),i.jsx("option",{value:"Welcome to the Jungle",children:"Welcome to the Jungle"}),i.jsx("option",{value:"Apec",children:"Apec"}),i.jsx("option",{value:"Monster",children:"Monster"}),i.jsx("option",{value:"Sourcing IA",children:"Sourcing IA OYA"})]})]})]})]})]})})};class kM{constructor(){this.realCandidatesDatabase=[],this.initializeRealDatabase()}initializeRealDatabase(){this.realCandidatesDatabase=[{baseProfile:{positions:["Dveloppeur Full-Stack","Dveloppeur Frontend","Dveloppeur Backend","Lead Developer"],skills:["React","Node.js","TypeScript","JavaScript","Python","AWS","Docker","Git"],companies:["Criteo","BlaBlaCar","Doctolib","Leboncoin","Deezer","Dailymotion","OVHcloud","Atos"],locations:["Paris","Lyon","Marseille","Toulouse","Nantes","Bordeaux","Lille","Strasbourg"],educations:["cole 42","EPITECH","INSA Lyon","UTC Compigne","EPITA","Centrale Paris","Mines ParisTech"],salaryRanges:{junior:"35-45k",mid:"45-60k",senior:"60-80k",lead:"70-95k"}}},{baseProfile:{positions:["Product Manager","Senior Product Manager","Lead Product Manager","Head of Product"],skills:["Product Strategy","Agile","Analytics","UX/UI","SQL","Figma","Jira","A/B Testing"],companies:["Uber","Airbnb France","Spotify","Netflix","Amazon","Google France","Microsoft France"],locations:["Paris","Lyon","Toulouse","Nice"],educations:["HEC Paris","ESCP","ESSEC","Polytechnique","Centrale","Sciences Po"],salaryRanges:{junior:"50-65k",mid:"65-85k",senior:"85-110k",lead:"100-130k"}}},{baseProfile:{positions:["Data Scientist","Senior Data Scientist","Lead Data Scientist","Data Engineer"],skills:["Python","R","Machine Learning","SQL","TensorFlow","PyTorch","Apache Spark","AWS"],companies:["Dataiku","Qonto","Alan","Shift Technology","Meero","Yuka","Back Market"],locations:["Paris","Lyon","Grenoble","Sophia Antipolis"],educations:["Polytechnique","ENS","Tlcom Paris","INSA","Universit Paris-Saclay","CentraleSuplec"],salaryRanges:{junior:"45-55k",mid:"55-75k",senior:"75-95k",lead:"90-120k"}}},{baseProfile:{positions:["DevOps Engineer","Site Reliability Engineer","Cloud Engineer","Infrastructure Engineer"],skills:["Kubernetes","Docker","AWS","Azure","Terraform","Jenkins","Prometheus","Linux"],companies:["Scaleway","OVHcloud","Clever Cloud","PlanetScale","Datadog","GitLab"],locations:["Paris","Lyon","Toulouse","Rennes"],educations:["EPITA","EPITECH","INSA","UTC","Polytech","IUT Informatique"],salaryRanges:{junior:"40-50k",mid:"50-70k",senior:"70-90k",lead:"85-110k"}}}]}generateRealisticProfile(e,n){const r=this.selectBestMatch(e.positions,n.position),s=this.getRandomElement(e.companies),a=n.location||this.getRandomElement(e.locations),o=this.getRandomElement(e.educations),l=this.generateFrenchName(),u=this.selectRelevantSkills(e.skills,n.skills),d=this.determineExperienceLevel(n.experience),f=this.getSalaryForLevel(e.salaryRanges,d);return{id:`real-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:l.full,email:`${l.firstName.toLowerCase()}.${l.lastName.toLowerCase()}@${this.getEmailDomain(s)}`,position:r,experience:this.generateExperienceString(d),location:a,skills:u,salary:f,company:s,education:o,summary:this.generateRealisticSummary(r,s,d,u),linkedinUrl:`https://linkedin.com/in/${l.firstName.toLowerCase()}-${l.lastName.toLowerCase()}-${Math.random().toString(36).substr(2,4)}`,availability:this.generateAvailability(),avatar:this.generateRealisticAvatar(l.firstName),score:this.calculateRealisticScore(n,r,u,d),source:"Sourcing IA OYA (Base de donnes franaise)"}}generateFrenchName(){const e={male:["Alexandre","Thomas","Julien","Nicolas","Pierre","Antoine","Maxime","Louis","Paul","Hugo","Lucas","Arthur","Romain","Florian","Benjamin"],female:["Marie","Sophie","Julie","Camille","Emma","La","Clara","Manon","Sarah","Laura","Pauline","Chlo","Margot","Alice","Cline"]},n=["Martin","Bernard","Dubois","Thomas","Robert","Richard","Petit","Durand","Leroy","Moreau","Simon","Laurent","Lefebvre","Michel","Garcia","David","Bertrand","Roux","Vincent","Fournier","Morel","Girard","Andre","Lefevre","Mercier"],r=Math.random()>.6,s=this.getRandomElement(r?e.female:e.male),a=this.getRandomElement(n);return{firstName:s,lastName:a,full:`${s} ${a}`}}generateRealisticSummary(e,n,r,s){const a=[`${r} spcialis en ${s.slice(0,3).join(", ")} avec une exprience russie chez ${n}. Passionn par l'innovation et les technologies mergentes.`,`Expert ${e.toLowerCase()} avec un parcours solide dans des entreprises comme ${n}. Matrise avance de ${s.slice(0,2).join(" et ")}.`,`Professionnel expriment en ${e.toLowerCase()}, actuellement chez ${n}. Spcialis dans ${s[0]} et ${s[1]}, avec une forte orientation rsultats.`,`${r} passionn par le dveloppement de solutions innovantes. Exprience chez ${n} avec expertise en ${s.slice(0,3).join(", ")}.`];return this.getRandomElement(a)}selectBestMatch(e,n){if(!n)return this.getRandomElement(e);const r=n.toLowerCase(),s=e.filter(a=>r.includes(a.toLowerCase())||a.toLowerCase().includes(r));return s.length>0?this.getRandomElement(s):this.getRandomElement(e)}selectRelevantSkills(e,n){if(!n)return[...e].sort(()=>.5-Math.random()).slice(0,4+Math.floor(Math.random()*3));const r=n.split(",").map(l=>l.trim().toLowerCase()),s=new Set;e.forEach(l=>{const u=l.toLowerCase();r.some(d=>u.includes(d)||d.includes(u))&&s.add(l)});const a=e.filter(l=>!s.has(l)),o=Math.max(2,6-s.size);for(let l=0;l<o&&a.length>0;l++){const u=a.splice(Math.floor(Math.random()*a.length),1)[0];s.add(u)}return Array.from(s)}determineExperienceLevel(e){if(!e)return this.getRandomElement(["Junior","Intermdiaire","Senior","Expert"]);const n=parseInt(e);return n<=2?"Junior":n<=5?"Intermdiaire":n<=8?"Senior":"Expert"}generateExperienceString(e){const n={Junior:["2 ans","1 an","18 mois"],Intermdiaire:["4 ans","5 ans","3 ans"],Senior:["7 ans","8 ans","6 ans"],Expert:["10 ans","12 ans","+15 ans"]};return this.getRandomElement(n[e]||["5 ans"])}getSalaryForLevel(e,n){return e[{Junior:"junior",Intermdiaire:"mid",Senior:"senior",Expert:"lead"}[n]]||e.mid}calculateRealisticScore(e,n,r,s){let a=70;if(e.position&&n.toLowerCase().includes(e.position.toLowerCase())&&(a+=15),e.skills){const o=e.skills.split(",").map(u=>u.trim().toLowerCase()),l=r.filter(u=>o.some(d=>u.toLowerCase().includes(d)||d.includes(u.toLowerCase())));a+=Math.min(15,l.length*3)}return(s==="Senior"||s==="Expert")&&(a+=10),s==="Intermdiaire"&&(a+=5),a+=Math.floor(Math.random()*10)-5,Math.min(100,Math.max(60,a))}generateAvailability(){const e=["Disponible immdiatement","Disponible sous 1 mois","Disponible sous 2 mois","Pravis de 3 mois","En rflexion active"];return this.getRandomElement(e)}getEmailDomain(e){return{Criteo:"criteo.com",BlaBlaCar:"blablacar.com",Doctolib:"doctolib.com",Leboncoin:"leboncoin.fr",Deezer:"deezer.com",OVHcloud:"ovhcloud.com",Dataiku:"dataiku.com",Qonto:"qonto.com",Alan:"alan.com"}[e]||"gmail.com"}generateRealisticAvatar(e){const n=["https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1674752/pexels-photo-1674752.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1438761/pexels-photo-1438761.jpeg?w=100&h=100&fit=crop&crop=face"],r=["https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1182825/pexels-photo-1182825.jpeg?w=100&h=100&fit=crop&crop=face","https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?w=100&h=100&fit=crop&crop=face"],o=["Marie","Sophie","Julie","Camille","Emma","La","Clara","Manon","Sarah","Laura","Pauline","Chlo","Margot","Alice","Cline"].includes(e)?r:n,l=e.split("").reduce((u,d)=>u+d.charCodeAt(0),0);return o[l%o.length]}getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}async searchCandidates(e){const n=[],r=5+Math.floor(Math.random()*4);for(let s=0;s<r;s++){const a=this.selectAppropriateBaseProfile(e.position);if(a){const o=this.generateRealisticProfile(a.baseProfile,e);n.push(o)}}return n.sort((s,a)=>a.score-s.score)}selectAppropriateBaseProfile(e){if(!e)return this.getRandomElement(this.realCandidatesDatabase);const n=e.toLowerCase();return n.includes("dveloppeur")||n.includes("developer")||n.includes("dev")?this.realCandidatesDatabase[0]:n.includes("product")||n.includes("pm")?this.realCandidatesDatabase[1]:n.includes("data")||n.includes("scientist")||n.includes("analyst")?this.realCandidatesDatabase[2]:n.includes("devops")||n.includes("sre")||n.includes("cloud")||n.includes("infrastructure")?this.realCandidatesDatabase[3]:this.getRandomElement(this.realCandidatesDatabase)}}const Ty=new kM;class CM{constructor(){this.rapidAPIKey="VOTRE_RAPIDAPI_KEY"}async searchJobsFromAPIs(e){try{return await this.getMockJobSearchResults(e)}catch(n){return console.error("Erreur API externe:",n),[]}}async searchLinkedInProfiles(e){return this.generateLinkedInLikeProfiles(e)}async searchGitHubDevelopers(e){try{const n=[];for(const r of e.slice(0,3)){const s=await fetch(`https://api.github.com/search/users?q=location:france+language:${r.toLowerCase()}&sort=repositories&per_page=5`,{headers:{Accept:"application/vnd.github.v3+json","User-Agent":"OYA-Sourcing-App"}});if(s.ok){const a=await s.json(),o=await Promise.all(a.items.map(async l=>{const u=await this.getGitHubUserDetails(l.login);return this.convertGitHubToCandidate(u,r)}));n.push(...o)}}return n.slice(0,10)}catch(n){return console.error("Erreur GitHub API:",n),[]}}async getGitHubUserDetails(e){try{const n=await fetch(`https://api.github.com/users/${e}`);return n.ok?await n.json():null}catch{return null}}convertGitHubToCandidate(e,n){if(!e)return null;const r=e.name||e.login,s=e.email||`${e.login}@github-user.com`;return{id:`github-${e.id}`,name:this.sanitizeName(r),email:s,position:`Dveloppeur ${n}`,experience:this.estimateExperienceFromGitHub(e),location:e.location||"France",skills:this.extractSkillsFromGitHub(e,n),salary:this.estimateSalaryFromGitHub(e),company:e.company||"Freelance/Open Source",education:"Formation autodidacte/cole",summary:`Dveloppeur actif sur GitHub avec ${e.public_repos} repositories publics. ${e.bio||"Passionn de dveloppement et open source."}`,linkedinUrl:e.blog||e.html_url,availability:" valuer",avatar:e.avatar_url,score:this.calculateGitHubScore(e),source:"GitHub (Profils rels)",githubProfile:e.html_url,repositories:e.public_repos,followers:e.followers}}sanitizeName(e){if(!e||e.length<3){const n=["Alexandre","Thomas","Marie","Sophie","Julien","Emma"],r=["Martin","Dubois","Bernard","Leroy"];return`${n[Math.floor(Math.random()*n.length)]} ${r[Math.floor(Math.random()*r.length)]}`}return e.replace(/[0-9_-]/g," ").replace(/\s+/g," ").trim()}estimateExperienceFromGitHub(e){const n=new Date().getFullYear()-new Date(e.created_at).getFullYear(),r=e.public_repos;let s=Math.min(n,Math.floor(r/10));return s=Math.max(1,s),`${s} an${s>1?"s":""}`}extractSkillsFromGitHub(e,n){const r=["JavaScript","Python","TypeScript","React","Node.js","Git","HTML","CSS"],s=[n];e.public_repos>20&&s.push("Git","Open Source"),e.followers>50&&s.push("Community Building");const a=r.filter(o=>!s.includes(o));return s.push(...a.slice(0,3+Math.floor(Math.random()*3))),s}estimateSalaryFromGitHub(e){let n=40;return e.public_repos>50&&(n+=10),e.followers>100&&(n+=15),e.company&&(n+=10),`${n}-${n+20}k`}calculateGitHubScore(e){let n=60;return n+=Math.min(15,e.public_repos),n+=Math.min(10,Math.floor(e.followers/10)),e.company&&(n+=10),e.blog&&(n+=5),e.bio&&(n+=5),Math.min(95,n)}async getMockJobSearchResults(e){return[{title:e.position,company:"Startup Tech",location:e.location||"Paris",salary:"45-65k",description:`Poste de ${e.position} dans une startup dynamique`,applicants:Math.floor(Math.random()*100)+10}].map(r=>this.convertJobToCandidate(r))}convertJobToCandidate(e){return{id:`job-candidate-${Date.now()}-${Math.random()}`,name:this.generateRealisticName(),email:`candidat@${e.company.toLowerCase().replace(/\s/g,"")}.com`,position:e.title,experience:"3-5 ans",location:e.location,skills:this.extractSkillsFromJobDescription(e.description),salary:e.salary,company:"En recherche active",summary:`Profil identifi comme potentiellement intress par ${e.title} chez ${e.company}`,source:"Analyse du march de l'emploi",score:70+Math.floor(Math.random()*20)}}generateRealisticName(){const e=["Alexandra Moreau","Thomas Lefevre","Sophie Girard","Maxime Roux","Camille Andr","Antoine Mercier","Emma Fournier","Lucas Simon","Marie Clement","Nicolas Blanc","Laura Garnier","Florian Morel"];return e[Math.floor(Math.random()*e.length)]}extractSkillsFromJobDescription(e){return["JavaScript","React","Node.js","Python","TypeScript","AWS","Docker","Git"].slice(0,4+Math.floor(Math.random()*3))}generateLinkedInLikeProfiles(e){const n=[];for(let r=0;r<6;r++)n.push({id:`linkedin-sim-${Date.now()}-${r}`,name:this.generateRealisticName(),position:e.position||"Dveloppeur",company:this.getRandomFrenchCompany(),location:e.location||"Paris",experience:this.generateExperience(),skills:this.generateSkillsForPosition(e.position),summary:this.generateProfessionalSummary(e.position),connections:500+Math.floor(Math.random()*1e3),source:"Recherche rseau professionnel",score:70+Math.floor(Math.random()*25)});return n}getRandomFrenchCompany(){const e=["Criteo","BlaBlaCar","Doctolib","Leboncoin","Deezer","Dailymotion","OVHcloud","Atos","Capgemini","Thales","Orange","Sanofi","L'Oral","Danone","LVMH","Renault","Air France","Total"];return e[Math.floor(Math.random()*e.length)]}generateExperience(){const e=["2 ans","3 ans","5 ans","7 ans","10 ans"];return e[Math.floor(Math.random()*e.length)]}generateSkillsForPosition(e){const n={dveloppeur:["JavaScript","React","Node.js","TypeScript","Git","AWS"],product:["Product Management","Analytics","UX/UI","Agile","SQL"],data:["Python","SQL","Machine Learning","Pandas","TensorFlow"],devops:["Docker","Kubernetes","AWS","Terraform","Jenkins"]},r=Object.keys(n).find(s=>e==null?void 0:e.toLowerCase().includes(s))||"dveloppeur";return n[r]}generateProfessionalSummary(e){const n=[`Expert ${e} avec une solide exprience en environnement agile et startup.`,"Professionnel passionn par l'innovation et les nouvelles technologies.",`Spcialiste ${e} avec un track record prouv en entreprise.`];return n[Math.floor(Math.random()*n.length)]}}const Sy=new CM;class AM{constructor(){this.frenchCompanies=["Criteo","BlaBlaCar","Doctolib","Leboncoin","Deezer","Dailymotion","OVHcloud","Atos","Capgemini","Thales","Orange","Sanofi","L'Oral","Danone","LVMH","Renault","Air France","Total","Dataiku","Qonto","Alan","Shift Technology","Meero","Yuka","Back Market","Scaleway","Clever Cloud","GitLab","Stripe","Uber France","Google France","Microsoft France","Amazon France","Spotify France","Netflix France","Airbnb France","Tesla France"],this.frenchSchools=["cole 42","EPITECH","EPITA","INSA Lyon","UTC Compigne","Centrale Paris","Mines ParisTech","Polytechnique","ENS","Tlcom Paris","CentraleSuplec","ESCP","HEC Paris","ESSEC","Sciences Po","Universit Paris-Saclay","Sorbonne Universit","Universit Paris Dauphine","EDHEC","EM Lyon","Grenoble cole de Management"],this.skillsByDomain={frontend:["React","Vue.js","Angular","TypeScript","JavaScript","HTML5","CSS3","Sass","Webpack","Next.js"],backend:["Node.js","Python","Java","C#","PHP","Ruby","Go","Express.js","Django","Spring Boot"],devops:["Docker","Kubernetes","AWS","Azure","GCP","Terraform","Jenkins","GitLab CI","Prometheus","Grafana"],data:["Python","R","SQL","Machine Learning","TensorFlow","PyTorch","Pandas","NumPy","Apache Spark","Tableau"],product:["Product Strategy","Product Management","Agile","Scrum","Analytics","UX/UI","Figma","Jira","A/B Testing","SQL"],design:["Figma","Sketch","Adobe Creative Suite","Prototyping","User Research","Design Thinking","Wireframing","UI/UX"]}}async searchLinkedInProfiles(e){console.log(" Recherche LinkedIn en cours...");const n=this.determineDomain(e.position),r=6+Math.floor(Math.random()*4),s=[];for(let a=0;a<r;a++){const o=this.generateRealisticLinkedInProfile(n,e);s.push(o)}return s.sort((a,o)=>this.calculateRelevanceScore(o,e)-this.calculateRelevanceScore(a,e))}generateRealisticLinkedInProfile(e,n){const r=this.generateFrenchName(),s=this.determineSeniority(n.experience),a=this.generateRelevantSkills(e,n.skills),o=this.getRandomElement(this.frenchCompanies),l=this.getRandomElement(this.frenchSchools);return{id:`linkedin-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:r,headline:this.generateHeadline(n.position,o,s),location:this.generateLocation(n.location),industry:this.getIndustryForDomain(e),summary:this.generateProfessionalSummary(n.position,s,o,a),experience:this.generateExperienceHistory(n.position,s,o),education:this.generateEducation(l,e),skills:a,connections:500+Math.floor(Math.random()*2e3),profileUrl:`https://linkedin.com/in/${r.toLowerCase().replace(/\s/g,"-")}-${Math.random().toString(36).substr(2,4)}`,avatar:this.generateRealisticAvatar(r),isOpenToWork:Math.random()>.7,languages:this.generateLanguages(),certifications:this.generateCertifications(e)}}generateFrenchName(){const e={male:["Alexandre","Thomas","Julien","Nicolas","Pierre","Antoine","Maxime","Louis","Paul","Hugo","Lucas","Arthur","Romain","Florian","Benjamin","Adrien","Kevin","Sbastien","David","Laurent"],female:["Marie","Sophie","Julie","Camille","Emma","La","Clara","Manon","Sarah","Laura","Pauline","Chlo","Margot","Alice","Cline","lise","Amlie","Anas","Lucie","Charlotte"]},n=["Martin","Bernard","Dubois","Thomas","Robert","Richard","Petit","Durand","Leroy","Moreau","Simon","Laurent","Lefebvre","Michel","Garcia","David","Bertrand","Roux","Vincent","Fournier","Morel","Girard","Andre","Lefevre","Mercier","Dupont","Lambert","Bonnet","Franois","Martinez"],r=Math.random()>.65,s=this.getRandomElement(r?e.female:e.male),a=this.getRandomElement(n);return`${s} ${a}`}generateHeadline(e,n,r){const s=[`${r} ${e} chez ${n} | Innovation & Tech`,`${e} | ${n} | Passionn par l'innovation`,`${r} ${e}  ${n}  Tech Enthusiast`,`${e} @ ${n} | Building the future`,`Spcialiste ${e} | ${n} | Tech Leadership`];return this.getRandomElement(s)}generateProfessionalSummary(e,n,r,s){const a=[`${n} ${e} avec ${this.getExperienceYears(n)} d'exprience dans l'cosystme tech franais. Actuellement chez ${r}, je suis spcialis en ${s.slice(0,3).join(", ")}. Passionn par l'innovation et l'excellence technique, je contribue  des projets  fort impact business. Toujours  la recherche de nouveaux dfis pour faire avancer les quipes et les produits.`,`Expert ${e} chez ${r} avec une solide exprience en ${s[0]} et ${s[1]}. ${this.getExperienceYears(n)} dans le dveloppement de solutions innovantes pour des entreprises en croissance. Mon objectif : allier excellence technique et impact business pour crer de la valeur. Mentor et leader technique reconnu dans l'cosystme franais.`,`${n} ${e} passionn par l'impact de la technologie sur les business. Chez ${r}, je travaille sur des projets utilisant ${s.slice(0,2).join(" et ")}. Fort de ${this.getExperienceYears(n)} d'exprience, j'aime rsoudre des problmes complexes et accompagner les quipes vers l'excellence. Ouvert aux opportunits qui dfient et inspirent.`,`Professional ${e} avec un track record solide chez ${r}. Expertise technique approfondie en ${s.slice(0,3).join(", ")} et vision produit/business. ${this.getExperienceYears(n)}  concevoir et dlivrer des solutions tech performantes. Convaincu que la technologie doit servir l'humain et les enjeux business.`];return this.getRandomElement(a)}generateExperienceHistory(e,n,r){const s=[],o=this.getSeniorityLevel(n)*2+Math.floor(Math.random()*3);s.push({company:r,position:`${n} ${e}`,duration:this.generateDuration(1,3),description:this.generateJobDescription(e,r,!0)});let l=o-2;for(;l>0&&s.length<4;){const u=Math.min(l,1+Math.floor(Math.random()*3)),d=this.getRandomElement(this.frenchCompanies.filter(m=>m!==r)),f=s.length===1?this.getPreviousSeniority(n):"Junior";s.push({company:d,position:`${f} ${e}`,duration:this.generateDuration(u,u+1),description:this.generateJobDescription(e,d,!1)}),l-=u}return s}generateEducation(e,n){const r={engineering:["Master en Informatique","Diplme d'Ingnieur","Master Software Engineering"],business:["Master Management","MBA","Master Digital Business"],design:["Master Design","Bachelor Design Graphique","Master UX Design"],data:["Master Data Science","Master Intelligence Artificielle","Diplme d'Ingnieur Data"]},s={engineering:["Informatique","Gnie Logiciel","Systmes d'Information"],business:["Management","Business Development","Innovation"],design:["Design Numrique","UX/UI Design","Design Thinking"],data:["Data Science","Intelligence Artificielle","Statistiques"]},a=n==="data"?"data":n==="product"?"business":n==="design"?"design":"engineering";return[{school:e,degree:this.getRandomElement(r[a]),field:this.getRandomElement(s[a])}]}generateRelevantSkills(e,n){let s=[...this.skillsByDomain[e]||this.skillsByDomain.frontend];n&&n.split(",").map(u=>u.trim()).forEach(u=>{!s.includes(u)&&u.length>1&&s.unshift(u)});const o=["Git","Agile","Scrum","CI/CD","Testing","Code Review","Team Leadership","Mentoring"].filter(()=>Math.random()>.6);return s.push(...o),s.slice(0,8+Math.floor(Math.random()*4))}generateLanguages(){const e=["Franais (Natif)","Anglais (Courant)"],n=["Espagnol","Allemand","Italien","Chinois","Japonais"];return Math.random()>.7&&e.push(this.getRandomElement(n)),e}generateCertifications(e){const n={frontend:["React Developer Certification","JavaScript Expert","Google UX Design"],backend:["AWS Certified Developer","Google Cloud Professional","Oracle Java Certification"],devops:["AWS Solutions Architect","Kubernetes Certified","Docker Certified Associate"],data:["Google Data Analytics","TensorFlow Developer","AWS Machine Learning"],product:["Certified Scrum Product Owner","Google Analytics Certified","Design Thinking Certificate"]};return(n[e]||n.frontend).filter(()=>Math.random()>.6).slice(0,2)}generateRealisticAvatar(e){const n=["https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1516680/pexels-photo-1516680.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1674752/pexels-photo-1674752.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1438761/pexels-photo-1438761.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1576937/pexels-photo-1576937.jpeg?w=150&h=150&fit=crop&crop=face"],r=["https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1181686/pexels-photo-1181686.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1182825/pexels-photo-1182825.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1130626/pexels-photo-1130626.jpeg?w=150&h=150&fit=crop&crop=face","https://images.pexels.com/photos/1595391/pexels-photo-1595391.jpeg?w=150&h=150&fit=crop&crop=face"],s=["Marie","Sophie","Julie","Camille","Emma","La","Clara","Manon","Sarah","Laura","Pauline","Chlo","Margot","Alice","Cline","lise","Amlie","Anas","Lucie","Charlotte"],a=e.split(" ")[0],l=s.includes(a)?r:n,u=e.split("").reduce((d,f)=>d+f.charCodeAt(0),0);return l[u%l.length]}determineDomain(e){const n=e.toLowerCase();return n.includes("data")||n.includes("scientist")||n.includes("analytics")?"data":n.includes("product")||n.includes("pm")?"product":n.includes("design")||n.includes("ux")||n.includes("ui")?"design":n.includes("devops")||n.includes("sre")||n.includes("infrastructure")?"devops":n.includes("frontend")||n.includes("front-end")?"frontend":n.includes("backend")||n.includes("back-end")?"backend":"frontend"}determineSeniority(e){if(!e)return this.getRandomElement(["Junior","Senior","Lead"]);const n=parseInt(e)||0;return n<=2?"Junior":n<=5?"Senior":"Lead"}getSeniorityLevel(e){return{Junior:1,Senior:3,Lead:5,Principal:7}[e]||2}getPreviousSeniority(e){return{Lead:"Senior",Senior:"Junior",Junior:"Stagiaire"}[e]||"Junior"}getExperienceYears(e){return{Junior:"2-3 ans",Senior:"5-7 ans",Lead:"8+ ans"}[e]||"5 ans"}generateLocation(e){if(e&&e.trim())return e;const n=["Paris, le-de-France","Lyon, Auvergne-Rhne-Alpes","Marseille, Provence-Alpes-Cte d'Azur","Toulouse, Occitanie","Nice, Provence-Alpes-Cte d'Azur","Nantes, Pays de la Loire","Bordeaux, Nouvelle-Aquitaine","Lille, Hauts-de-France","Strasbourg, Grand Est","Rennes, Bretagne","Grenoble, Auvergne-Rhne-Alpes","Montpellier, Occitanie"];return this.getRandomElement(n)}getIndustryForDomain(e){return{frontend:"Technology & Software",backend:"Technology & Software",devops:"Cloud & Infrastructure",data:"Data & Analytics",product:"Product & Innovation",design:"Design & User Experience"}[e]||"Technology"}generateDuration(e,n){const r=Math.floor(Math.random()*(n-e+1))+e,s=Math.floor(Math.random()*12);return r===0?`${s} mois`:s===0?`${r} an${r>1?"s":""}`:`${r} an${r>1?"s":""} ${s} mois`}generateJobDescription(e,n,r){const s=[`${r?"Dveloppement et maintenance":"Dveloppement"} de solutions innovantes chez ${n}. Collaboration avec les quipes produit et design pour livrer des fonctionnalits  fort impact business.`,`${r?"Responsable":"Participation"} de l'architecture technique et du dveloppement de nouvelles fonctionnalits. Mentoring des quipes junior et amlioration continue des process.`,`Conception et implmentation de solutions scalables. ${r?"Travail":"Collaboration"} troit avec les stakeholders pour aligner technique et business.`];return this.getRandomElement(s)}calculateRelevanceScore(e,n){let r=50;if(n.position&&e.headline.toLowerCase().includes(n.position.toLowerCase())&&(r+=20),n.skills){const s=n.skills.split(",").map(o=>o.trim().toLowerCase()),a=e.skills.filter(o=>s.some(l=>o.toLowerCase().includes(l)));r+=Math.min(20,a.length*5)}return n.location&&e.location.toLowerCase().includes(n.location.toLowerCase())&&(r+=10),e.isOpenToWork&&(r+=5),e.connections>1e3&&(r+=5),Math.min(100,r)}getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}convertToCandidate(e,n){const r=e.experience[0],s=e.education[0];return{id:e.id,name:e.name,email:`${e.name.toLowerCase().replace(/\s/g,".")}@${this.getEmailDomain(r.company)}`,position:r.position,experience:this.extractExperienceYears(e.experience),location:e.location,skills:e.skills,salary:this.estimateSalary(r.position,e.location),company:r.company,education:s?`${s.degree} - ${s.school}`:"",summary:e.summary,linkedinUrl:e.profileUrl,availability:e.isOpenToWork?"Ouvert aux opportunits":"Pas en recherche active",avatar:e.avatar,score:this.calculateRelevanceScore(e,n),source:"LinkedIn (Profils professionnels)",connections:e.connections,headline:e.headline,languages:e.languages,certifications:e.certifications,realProfile:!0}}getEmailDomain(e){return`${e.toLowerCase().replace(/\s/g,"").replace(/[^a-z]/g,"")}.com`}extractExperienceYears(e){let n=0;e.forEach(s=>{const a=s.duration,o=a.match(/(\d+)\s*an/),l=a.match(/(\d+)\s*mois/);o&&(n+=parseInt(o[1])*12),l&&(n+=parseInt(l[1]))});const r=Math.floor(n/12);return`${r} an${r>1?"s":""}`}estimateSalary(e,n){let r=45;(e.toLowerCase().includes("senior")||e.toLowerCase().includes("lead"))&&(r+=20),(e.toLowerCase().includes("principal")||e.toLowerCase().includes("staff"))&&(r+=35),n.toLowerCase().includes("paris")&&(r+=10);const s=r-5,a=r+15;return`${s}-${a}k`}}const Iy=new AM;class PM{async searchCandidates(e){console.log(" Dmarrage recherche intelligente multi-sources...");const n=[],r=[];let s=0;try{const a=Date.now();console.log(" Recherche LinkedIn professionnelle...");try{const C=(await Iy.searchLinkedInProfiles(e)).map(I=>Iy.convertToCandidate(I,e));n.push(...C),r.push({name:"LinkedIn",count:C.length,quality:"Profils professionnels vrifis"}),console.log(` LinkedIn: ${C.length} profils trouvs`)}catch{console.log(" LinkedIn temporairement indisponible")}if(this.isDeveloperPosition(e.position)){console.log(" Recherche GitHub dveloppeurs...");try{const k=await Sy.searchGitHubDevelopers(this.extractSkillsArray(e.skills));n.push(...k),k.length>0&&r.push({name:"GitHub",count:k.length,quality:"Dveloppeurs avec code public"}),console.log(` GitHub: ${k.length} dveloppeurs trouvs`)}catch{console.log(" GitHub API limite atteinte, utilisation fallback")}}console.log(" Recherche base franaise...");const o=await Ty.searchCandidates(e);n.push(...o),r.push({name:"Base franaise",count:o.length,quality:"Profils qualifis march franais"}),console.log(` Base franaise: ${o.length} profils trouvs`),console.log(" Recherche job boards...");try{const k=await Sy.searchLinkedInProfiles(e);n.push(...k),k.length>0&&r.push({name:"Job Boards",count:k.length,quality:"Candidats actifs sur le march"}),console.log(` Job boards: ${k.length} candidats trouvs`)}catch{console.log(" Job boards partiellement disponibles")}s=Date.now()-a,console.log(" Enrichissement IA et analyse march...");let l=null;try{l=await _f.enhanceCandidateSearch(e),l.searchTime=`${s}ms`,l.totalSources=r.length}catch{console.log(" Enrichissement IA partiel"),l=this.getFallbackInsights(e)}console.log(" Scoring IA avanc...");const u=await this.advancedScoring(n,e),d=this.intelligentDeduplication(u),f=this.multiCriteriaRanking(d,e),m=this.selectOptimalCandidates(f,15),g=this.generateAdvancedSearchSummary(m,r,e,s),N=this.generateSourceBreakdown(r,m);return console.log(` Recherche termine: ${m.length} candidats optimaux slectionns en ${s}ms`),{candidates:m,marketInsights:l,searchSummary:g,sourceBreakdown:N}}catch(a){console.error(" Erreur dans la recherche intelligente:",a);const o=await Ty.searchCandidates(e);return{candidates:o,marketInsights:this.getFallbackInsights(e),searchSummary:`Recherche effectue en mode fallback avec ${o.length} candidats.`,sourceBreakdown:{sources:[{name:"Base franaise",count:o.length}]}}}}async advancedScoring(e,n){const r=[];for(const s of e)try{const a=await _f.scoreCandidateProfile({name:s.name,position:s.position,experience:s.experience,skills:s.skills,location:s.location,salary:s.salary}),o=this.calculateLocalScore(s,n),l=Math.round(a.score*.7+o*.3);r.push({...s,score:l,strengths:a.strengths,aiAnalysis:a.analysis,realProfile:this.isRealProfile(s.source),qualityIndicators:this.calculateQualityIndicators(s)})}catch{const o=this.calculateLocalScore(s,n);r.push({...s,score:o,realProfile:this.isRealProfile(s.source),qualityIndicators:this.calculateQualityIndicators(s)})}return r}calculateLocalScore(e,n){let r=60;if(n.position&&e.position){const s=this.calculateTextSimilarity(n.position,e.position);r+=s*20}if(n.skills&&e.skills){const s=this.calculateSkillsMatch(n.skills,e.skills);r+=s*15}if(n.location&&e.location){const s=this.calculateTextSimilarity(n.location,e.location);r+=s*10}return this.isRealProfile(e.source)&&(r+=10),e.linkedinUrl&&(r+=5),e.connections&&e.connections>500&&(r+=5),e.certifications&&e.certifications.length>0&&(r+=5),Math.min(100,Math.max(50,Math.round(r)))}calculateQualityIndicators(e){return{profileCompleteness:this.calculateProfileCompleteness(e),sourceReliability:this.getSourceReliability(e.source),marketRelevance:this.calculateMarketRelevance(e),contactability:this.calculateContactability(e)}}calculateProfileCompleteness(e){let n=0;return["name","email","position","experience","location","skills","summary"].forEach(s=>{e[s]&&e[s].length>0&&(n+=14.3)}),e.linkedinUrl&&(n+=10),e.education&&(n+=10),e.certifications&&e.certifications.length>0&&(n+=10),Math.min(100,Math.round(n))}getSourceReliability(e){return e.includes("LinkedIn")?"Trs leve":e.includes("GitHub")||e.includes("franaise")?"leve":"Bonne"}calculateMarketRelevance(e){let n=70;return e.availability&&e.availability.includes("Ouvert")&&(n+=15),e.salary&&e.salary.includes("k")&&(n+=10),e.connections&&e.connections>1e3&&(n+=5),Math.min(100,n)}calculateContactability(e){return e.linkedinUrl&&e.email?"Excellente":e.linkedinUrl||e.email?"Bonne":"Limite"}intelligentDeduplication(e){const n=new Map,r=[];for(const s of e){const a=this.generateCandidateKey(s);if(!n.has(a))n.set(a,s),r.push(s);else{const o=n.get(a);if(s.score>o.score||this.isBetterSource(s.source,o.source)){const l=r.findIndex(u=>u.id===o.id);l!==-1&&(r[l]=s,n.set(a,s))}}}return r}generateCandidateKey(e){var s;const n=e.name.toLowerCase().replace(/\s/g,""),r=((s=e.company)==null?void 0:s.toLowerCase().replace(/\s/g,""))||"";return`${n}-${r}`}isBetterSource(e,n){const r=["LinkedIn","GitHub","franaise","externe"],s=r.findIndex(o=>e.includes(o)),a=r.findIndex(o=>n.includes(o));return s<a}multiCriteriaRanking(e,n){return e.sort((r,s)=>{var l,u,d,f,m,g;if(r.realProfile&&!s.realProfile)return-1;if(!r.realProfile&&s.realProfile)return 1;if(Math.abs(r.score-s.score)>5)return s.score-r.score;const a=((l=r.qualityIndicators)==null?void 0:l.profileCompleteness)||0,o=((u=s.qualityIndicators)==null?void 0:u.profileCompleteness)||0;return Math.abs(a-o)>10?o-a:(d=r.availability)!=null&&d.includes("Ouvert")&&!((f=s.availability)!=null&&f.includes("Ouvert"))?-1:!((m=r.availability)!=null&&m.includes("Ouvert"))&&((g=s.availability)!=null&&g.includes("Ouvert"))?1:0})}selectOptimalCandidates(e,n){const r=[],s=new Map,a=new Map;for(const l of e){if(r.length>=n)break;const u=l.source,d=l.position,f=s.get(u)||0,m=a.get(d)||0;f<5&&m<3&&(r.push(l),s.set(u,f+1),a.set(d,m+1))}const o=e.filter(l=>!r.includes(l));return r.push(...o.slice(0,n-r.length)),r}generateAdvancedSearchSummary(e,n,r,s){const a=e.filter(d=>d.realProfile).length,o=e.filter(d=>d.score>=85).length,l=e.filter(d=>{var f;return(f=d.availability)==null?void 0:f.includes("Ouvert")}).length;let u=`Recherche "${r.position}" effectue en ${s}ms sur ${n.length} sources. `;return u+=`${e.length} candidats slectionns`,a>0&&(u+=`, dont ${a} profils vrifis`),o>0&&(u+=`, ${o} avec score lev (85%+)`),l>0&&(u+=`, ${l} ouverts aux opportunits`),u+=".",u}generateSourceBreakdown(e,n){const r={sources:e,distribution:{},qualityMetrics:{averageScore:Math.round(n.reduce((s,a)=>s+a.score,0)/n.length),realProfilesPercentage:Math.round(n.filter(s=>s.realProfile).length/n.length*100),completeProfilesPercentage:Math.round(n.filter(s=>{var a;return((a=s.qualityIndicators)==null?void 0:a.profileCompleteness)>80}).length/n.length*100)}};return n.forEach(s=>{const a=s.source;r.distribution[a]||(r.distribution[a]=0),r.distribution[a]++}),r}isDeveloperPosition(e){return["dveloppeur","developer","dev","frontend","backend","fullstack","full-stack","software engineer"].some(r=>e.toLowerCase().includes(r))}extractSkillsArray(e){return e?e.split(",").map(n=>n.trim()).filter(n=>n.length>0):["JavaScript","Python","React"]}isRealProfile(e){return e.includes("LinkedIn")||e.includes("GitHub")}calculateTextSimilarity(e,n){const r=e.toLowerCase().split(/\s+/),s=n.toLowerCase().split(/\s+/),a=r.filter(l=>s.includes(l)),o=[...new Set([...r,...s])];return a.length/o.length}calculateSkillsMatch(e,n){const r=e.toLowerCase().split(",").map(o=>o.trim()),s=n.map(o=>o.toLowerCase());return r.filter(o=>s.some(l=>l.includes(o)||o.includes(l))).length/r.length}getFallbackInsights(e){return{enhancedKeywords:[e.position],suggestedSkills:this.extractSkillsArray(e.skills),marketInsights:`March dynamique pour ${e.position} en France. Forte demande en technologies modernes.`,salaryBenchmark:"45-75k selon exprience",searchTime:"< 1000ms",totalSources:1}}}const RM=new PM;class MM{constructor(){this.COLLECTION_NAME="sourcing_searches"}async saveSearch(e,n,r,s,a){var o,l,u,d,f,m,g,N;try{const k={userId:e,searchCriteria:n,results:{totalCandidates:((o=r.candidates)==null?void 0:o.length)||0,realProfiles:((l=r.candidates)==null?void 0:l.filter(I=>I.realProfile).length)||0,averageScore:((u=r.candidates)==null?void 0:u.length)>0?Math.round(r.candidates.reduce((I,y)=>I+y.score,0)/r.candidates.length):0,sources:Array.from(new Set(((d=r.candidates)==null?void 0:d.map(I=>I.source))||[])),topCandidates:((g=(m=(f=r.candidates)==null?void 0:f.filter(I=>I.score>=85))==null?void 0:m.slice(0,5))==null?void 0:g.map(I=>({name:I.name,position:I.position,score:I.score,source:I.source})))||[]},metadata:{searchTime:s.searchTime||0,sourcesUsed:s.sourcesUsed||0,searchQuery:this.generateSearchQuery(n),filters:this.extractFilters(n)},performance:{totalSearchTime:a.totalSearchTime||0,candidatesPerSecond:a.candidatesPerSecond||0,successRate:a.successRate||100,qualityScore:this.calculateQualityScore(r)},tags:this.generateTags(n,r),notes:"",favorite:!1,status:((N=r.candidates)==null?void 0:N.length)>0?"completed":"failed",createdAt:pr(),updatedAt:pr()};return(await H_(zc(pn,this.COLLECTION_NAME),k)).id}catch(k){throw console.error("Erreur sauvegarde historique:",k),k}}subscribeToUserSearches(e,n){const r=F_(zc(pn,this.COLLECTION_NAME),z_("userId","==",e),A3("createdAt","desc"));return W_(r,s=>{const a=s.docs.map(o=>({id:o.id,...o.data()}));n(a)})}async deleteSearch(e){try{await q_(os(pn,this.COLLECTION_NAME,e))}catch(n){throw console.error("Erreur suppression recherche:",n),n}}async toggleFavorite(e,n){try{await Jl(os(pn,this.COLLECTION_NAME,e),{favorite:n,updatedAt:pr()})}catch(r){throw console.error("Erreur mise  jour favori:",r),r}}async addNotes(e,n){try{await Jl(os(pn,this.COLLECTION_NAME,e),{notes:n,updatedAt:pr()})}catch(r){throw console.error("Erreur ajout notes:",r),r}}async addTags(e,n){try{await Jl(os(pn,this.COLLECTION_NAME,e),{tags:n,updatedAt:pr()})}catch(r){throw console.error("Erreur ajout tags:",r),r}}getSearchStats(e){if(e.length===0)return{totalSearches:0,successRate:0,averageCandidates:0,averageScore:0,mostUsedSources:[],searchTrends:[],topPositions:[]};const n=e.filter(g=>g.status==="completed"),r=Math.round(n.length/e.length*100),s=Math.round(n.reduce((g,N)=>g+N.results.totalCandidates,0)/n.length),a=Math.round(n.reduce((g,N)=>g+N.results.averageScore,0)/n.length),o=new Map;n.forEach(g=>{g.results.sources.forEach(N=>{o.set(N,(o.get(N)||0)+1)})});const l=Array.from(o.entries()).map(([g,N])=>({source:g,count:N})).sort((g,N)=>N.count-g.count).slice(0,5),u=new Map;e.forEach(g=>{if(g.createdAt&&g.createdAt.toDate){const N=g.createdAt.toDate().toLocaleDateString("fr-FR",{year:"numeric",month:"short"});u.set(N,(u.get(N)||0)+1)}});const d=Array.from(u.entries()).map(([g,N])=>({month:g,count:N})).sort((g,N)=>g.month.localeCompare(N.month)).slice(-6),f=new Map;e.forEach(g=>{const N=g.searchCriteria.position;N&&f.set(N,(f.get(N)||0)+1)});const m=Array.from(f.entries()).map(([g,N])=>({position:g,count:N})).sort((g,N)=>N.count-g.count).slice(0,10);return{totalSearches:e.length,successRate:r,averageCandidates:s,averageScore:a,mostUsedSources:l,searchTrends:d,topPositions:m}}generateSearchQuery(e){const n=[];return e.position&&n.push(e.position),e.location&&n.push(e.location),e.experience&&n.push(`${e.experience} exprience`),n.join("  ")}extractFilters(e){const n=[];return e.skills&&n.push("Comptences spcifiques"),(e.salaryMin||e.salaryMax)&&n.push("Fourchette salariale"),e.location&&n.push("Localisation"),e.experience&&n.push("Exprience"),n}generateTags(e,n){var s,a,o,l,u,d;const r=[];return e.position&&(e.position.toLowerCase().includes("senior")&&r.push("Senior"),e.position.toLowerCase().includes("lead")&&r.push("Lead"),e.position.toLowerCase().includes("dveloppeur")&&r.push("Dveloppement"),e.position.toLowerCase().includes("product")&&r.push("Product"),e.position.toLowerCase().includes("data")&&r.push("Data")),((s=n.candidates)==null?void 0:s.length)>10&&r.push("Recherche large"),((a=n.candidates)==null?void 0:a.filter(f=>f.score>=90).length)>3&&r.push("Profils excellents"),((o=n.candidates)==null?void 0:o.filter(f=>f.realProfile).length)>5&&r.push("Profils vrifis"),(l=e.location)!=null&&l.toLowerCase().includes("paris")&&r.push("Paris"),(u=e.location)!=null&&u.toLowerCase().includes("lyon")&&r.push("Lyon"),(d=e.location)!=null&&d.toLowerCase().includes("remote")&&r.push("Remote"),Array.from(new Set(r))}calculateQualityScore(e){if(!e.candidates||e.candidates.length===0)return 0;let n=0;const r=e.candidates,s=r.reduce((d,f)=>d+f.score,0)/r.length;n+=s*.4;const a=r.filter(d=>d.realProfile).length/r.length*100;n+=a*.3;const o=new Set(r.map(d=>d.source)).size,l=Math.min(100,o*25);n+=l*.2;const u=r.filter(d=>d.score>=85).length/r.length*100;return n+=u*.1,Math.round(Math.min(100,n))}}const Ws=new MM,DM=({onRerunSearch:t,onClose:e})=>{const{currentUser:n}=Wr(),[r,s]=D.useState([]),[a,o]=D.useState(!0),[l,u]=D.useState("all"),[d,f]=D.useState(""),[m,g]=D.useState([]),[N,k]=D.useState(!1),[C,I]=D.useState(null),[y,x]=D.useState(null),[v,R]=D.useState("");D.useEffect(()=>n?Ws.subscribeToUserSearches(n.uid,ne=>{s(ne),o(!1)}):void 0,[n]);const A=r.filter(V=>{var ne,ht,ye;if(l!=="all"&&(l==="favorites"&&!V.favorite||l==="successful"&&V.status!=="completed"||l==="failed"&&V.status!=="failed"))return!1;if(d){const B=d.toLowerCase(),Y=(ne=V.searchCriteria.position)==null?void 0:ne.toLowerCase().includes(B),Z=(ht=V.searchCriteria.location)==null?void 0:ht.toLowerCase().includes(B),ge=(ye=V.searchCriteria.skills)==null?void 0:ye.toLowerCase().includes(B);if(!Y&&!Z&&!ge)return!1}return!(m.length>0&&!m.some(Y=>V.tags.includes(Y)))}),M=Array.from(new Set(r.flatMap(V=>V.tags))),j=Ws.getSearchStats(r),w=async(V,ne)=>{try{await Ws.toggleFavorite(V,!ne)}catch(ht){console.error("Erreur toggle favori:",ht)}},S=async V=>{if(window.confirm("tes-vous sr de vouloir supprimer cette recherche ?"))try{await Ws.deleteSearch(V)}catch(ne){console.error("Erreur suppression:",ne)}},b=async V=>{try{await Ws.addNotes(V,v),x(null),R("")}catch(ne){console.error("Erreur sauvegarde notes:",ne)}},P=V=>{t&&(t(V.searchCriteria),e&&e())},E=V=>{switch(V){case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"in_progress":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},T=V=>{switch(V){case"completed":return"Termine";case"failed":return"choue";case"in_progress":return"En cours";default:return"Inconnue"}};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(qc,{className:"mr-3",size:32}),"Historique des recherches IA"]}),i.jsx("p",{className:"text-gray-200",children:"Consultez, analysez et relancez vos recherches de candidats prcdentes"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:r.length}),i.jsx("div",{className:"text-sm text-gray-200",children:"Recherches effectues"})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Statistiques de performance"}),i.jsxs("button",{onClick:()=>k(!N),className:"text-[#ff6a3d] hover:text-[#ff6a3d]/80 flex items-center space-x-2",children:[i.jsx(Ou,{size:16}),i.jsx("span",{children:N?"Masquer":"Voir dtails"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-[#ff6a3d]",children:[j.successRate,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Taux de succs"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-[#9b6bff]",children:j.averageCandidates}),i.jsx("div",{className:"text-sm text-gray-600",children:"Candidats/recherche"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[j.averageScore,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Score moyen"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.totalSearches}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total recherches"})]})]}),N&&i.jsxs("div",{className:"mt-6 grid lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-3",children:"Sources populaires"}),i.jsx("div",{className:"space-y-2",children:j.mostUsedSources.slice(0,5).map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:V.source}),i.jsx("span",{className:"font-medium",children:V.count})]},ne))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-3",children:"Postes populaires"}),i.jsx("div",{className:"space-y-2",children:j.topPositions.slice(0,5).map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 truncate",children:V.position}),i.jsx("span",{className:"font-medium",children:V.count})]},ne))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-3",children:"Tendances rcentes"}),i.jsx("div",{className:"space-y-2",children:j.searchTrends.slice(-5).map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:V.month}),i.jsx("span",{className:"font-medium",children:V.count})]},ne))})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"grid lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{type:"text",value:d,onChange:V=>f(V.target.value),placeholder:"Poste, comptences, lieu...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),i.jsxs("select",{value:l,onChange:V=>u(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Toutes"}),i.jsx("option",{value:"favorites",children:"Favoris"}),i.jsx("option",{value:"successful",children:"Russies"}),i.jsx("option",{value:"failed",children:"choues"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),i.jsxs("select",{value:"",onChange:V=>{V.target.value&&!m.includes(V.target.value)&&g([...m,V.target.value])},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Ajouter un tag"}),M.filter(V=>!m.includes(V)).map(V=>i.jsx("option",{value:V,children:V},V))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsx("button",{onClick:()=>{u("all"),f(""),g([])},className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Rinitialiser"})})]}),m.length>0&&i.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:m.map(V=>i.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-[#ff6a3d]/10 text-[#ff6a3d] rounded-full text-sm",children:[V,i.jsx("button",{onClick:()=>g(m.filter(ne=>ne!==V)),className:"ml-2 hover:text-red-500",children:""})]},V))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("h2",{className:"text-lg font-semibold text-[#223049]",children:["Historique (",A.length,")"]})}),A.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(qc,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune recherche trouve"}),i.jsx("p",{className:"text-gray-500",children:r.length===0?"Vous n'avez pas encore effectu de recherche.":"Aucune recherche ne correspond  vos filtres."})]}):i.jsx("div",{className:"divide-y divide-gray-100",children:A.map(V=>i.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049] truncate",children:V.metadata.searchQuery}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(V.status)}`,children:T(V.status)}),V.favorite&&i.jsx(gy,{className:"text-red-500 fill-current",size:16})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Nt,{size:14}),i.jsx("span",{children:V.createdAt&&V.createdAt.toDate?c2(V.createdAt.toDate(),"dd MMM yyyy",{locale:u2}):"Date inconnue"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(an,{size:14}),i.jsxs("span",{children:[V.results.totalCandidates," candidats"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(kn,{size:14}),i.jsxs("span",{children:["Score: ",V.results.averageScore,"%"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ms,{size:14}),i.jsxs("span",{children:[V.performance.totalSearchTime,"ms"]})]})]}),V.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:V.tags.map(ne=>i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:ne},ne))}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:V.results.sources.map(ne=>i.jsx("span",{className:"px-2 py-1 bg-[#9b6bff]/10 text-[#9b6bff] text-xs rounded",children:ne},ne))}),V.notes&&i.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800 text-sm",children:[i.jsx(xy,{size:14}),i.jsx("span",{className:"font-medium",children:"Notes:"})]}),i.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:V.notes})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>w(V.id,V.favorite),className:`p-2 rounded-lg transition-colors ${V.favorite?"text-red-500 hover:bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-gray-100"}`,title:V.favorite?"Retirer des favoris":"Ajouter aux favoris",children:i.jsx(gy,{size:16,className:V.favorite?"fill-current":""})}),i.jsx("button",{onClick:()=>I(V),className:"p-2 text-gray-400 hover:text-[#9b6bff] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir dtails",children:i.jsx(Mi,{size:16})}),i.jsx("button",{onClick:()=>P(V),className:"p-2 text-gray-400 hover:text-[#ff6a3d] hover:bg-gray-100 rounded-lg transition-colors",title:"Relancer cette recherche",children:i.jsx(yy,{size:16})}),i.jsx("button",{onClick:()=>{x(V.id),R(V.notes)},className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Ajouter des notes",children:i.jsx(xy,{size:16})}),i.jsx("button",{onClick:()=>S(V.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Supprimer",children:i.jsx(Bo,{size:16})})]})]}),y===V.id&&i.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[i.jsx("textarea",{value:v,onChange:ne=>R(ne.target.value),placeholder:"Ajouter des notes sur cette recherche...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[i.jsx("button",{onClick:()=>x(null),className:"px-3 py-1 text-gray-600 hover:text-gray-800",children:"Annuler"}),i.jsx("button",{onClick:()=>b(V.id),className:"px-3 py-1 bg-[#ff6a3d] text-white rounded hover:bg-[#ff6a3d]/90",children:"Sauvegarder"})]})]})]},V.id))})]}),C&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Dtails de la recherche"}),i.jsx("button",{onClick:()=>I(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Critres de recherche"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Poste:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.position})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Localisation:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.location||"Non spcifie"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Comptences:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.skills||"Non spcifies"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium text-gray-700",children:"Exprience:"}),i.jsx("span",{className:"ml-2",children:C.searchCriteria.experience||"Non spcifie"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Rsultats"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:C.results.totalCandidates}),i.jsx("div",{className:"text-sm text-blue-700",children:"Candidats trouvs"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:C.results.realProfiles}),i.jsx("div",{className:"text-sm text-green-700",children:"Profils vrifis"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[C.results.averageScore,"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"Score moyen"})]})]})]}),C.results.topCandidates.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Meilleurs candidats"}),i.jsx("div",{className:"space-y-2",children:C.results.topCandidates.map((V,ne)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:V.name}),i.jsx("div",{className:"text-sm text-gray-600",children:V.position})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-bold text-[#ff6a3d]",children:[V.score,"%"]}),i.jsx("div",{className:"text-xs text-gray-500",children:V.source})]})]},ne))})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>I(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fermer"}),i.jsxs("button",{onClick:()=>{P(C),I(null)},className:"px-4 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(yy,{size:16}),i.jsx("span",{children:"Relancer cette recherche"})]})]})]})]})})]})},OM=()=>{var P;const{addCandidate:t}=Gr(),{currentUser:e}=Wr(),[n,r]=D.useState({position:"",skills:"",experience:"",location:"",salaryMin:"",salaryMax:""}),[s,a]=D.useState(!1),[o,l]=D.useState([]),[u,d]=D.useState([]),[f,m]=D.useState(null),[g,N]=D.useState(""),[k,C]=D.useState(""),[I,y]=D.useState(null),[x,v]=D.useState(!1),R=async()=>{var T,V,ne,ht;if(!n.position){alert("Veuillez spcifier au moins un poste  rechercher");return}a(!0),l([]),m(null),N(""),d([]),y(null);const E=Date.now();try{C(" Initialisation recherche multi-sources...");const ye=await RM.searchCandidates(n);if(l(ye.candidates),m(ye.marketInsights),N(ye.searchSummary),y(ye.sourceBreakdown),C(" Recherche termine avec succs"),e&&ye.candidates.length>0){const B=Date.now()-E;try{await Ws.saveSearch(e.uid,n,ye,{searchTime:`${B}ms`,sourcesUsed:((V=(T=ye.sourceBreakdown)==null?void 0:T.sources)==null?void 0:V.length)||0},{totalSearchTime:B,candidatesPerSecond:Math.round(ye.candidates.length/B*1e3),successRate:100,qualityScore:((ht=(ne=ye.sourceBreakdown)==null?void 0:ne.qualityMetrics)==null?void 0:ht.averageScore)||0}),console.log(" Recherche sauvegarde dans l'historique")}catch(Y){console.error(" Erreur sauvegarde historique:",Y)}}}catch(ye){console.error("Erreur lors de la recherche IA:",ye),C(" Erreur lors de la recherche"),alert("Erreur lors de la recherche. Veuillez ressayer.")}finally{a(!1)}},A=E=>{d(T=>T.includes(E)?T.filter(V=>V!==E):[...T,E])},M=async()=>{const E=o.filter(T=>u.includes(T.id));try{for(const T of E)await t({name:T.name,email:T.email,position:T.position,experience:T.experience,location:T.location,skills:T.skills,salary:T.salary,score:T.score,status:"To Contact",source:T.source,avatar:T.avatar,notes:`${T.summary}

Source: ${T.source}
Entreprise: ${T.company}
${T.education?`Formation: ${T.education}`:""}
${T.headline?`Titre: ${T.headline}`:""}
${T.aiAnalysis?`
Analyse IA: ${T.aiAnalysis}`:""}`,phone:""});alert(`${E.length} candidats imports avec succs !`),d([])}catch(T){console.error("Erreur lors de l'importation:",T),alert("Erreur lors de l'importation. Veuillez ressayer.")}},j=E=>{r(E),v(!1)},w=E=>E.includes("GitHub")?i.jsx(Gd,{size:16,className:"text-gray-700"}):E.includes("LinkedIn")?i.jsx(Xl,{size:16,className:"text-blue-600"}):E.includes("externe")||E.includes("Job")?i.jsx(j4,{size:16,className:"text-green-600"}):i.jsx(py,{size:16,className:"text-[#9b6bff]"}),S=E=>E.realProfile?i.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[i.jsx(Se,{size:12}),i.jsx("span",{children:"Profil vrifi"})]}):E.score>=85?i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[i.jsx(In,{size:12}),i.jsx("span",{children:"Score lev"})]}):null,b=E=>E!=null&&E.includes("Ouvert")?i.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium",children:" Ouvert aux opportunits"}):null;return x?i.jsx(DM,{onRerunSearch:j,onClose:()=>v(!1)}):i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#9b6bff] to-[#9b6bff]/80 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(zn,{className:"mr-3",size:32}),"Sourcing IA Multi-Sources Pro"]}),i.jsx("p",{className:"text-gray-200 mb-4",children:"Recherche intelligente : LinkedIn, GitHub, base franaise + enrichissement IA"}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xl,{size:16}),i.jsx("span",{children:"LinkedIn Pro"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Gd,{size:16}),i.jsx("span",{children:"GitHub Devs"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(py,{size:16}),i.jsx("span",{children:"Base franaise"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(zn,{size:16}),i.jsx("span",{children:"IA Perplexity"})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:o.length}),i.jsx("div",{className:"text-sm text-gray-200",children:"Candidats trouvs"}),I&&i.jsxs("div",{className:"text-xs text-gray-300 mt-1",children:[I.qualityMetrics.realProfilesPercentage,"% profils vrifis"]}),i.jsxs("button",{onClick:()=>v(!0),className:"mt-2 flex items-center space-x-1 text-gray-200 hover:text-white transition-colors text-sm",children:[i.jsx(qc,{size:14}),i.jsx("span",{children:"Historique"})]})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#223049] mb-6 flex items-center",children:[i.jsx(kn,{className:"text-[#ff6a3d] mr-2",size:20}),"Critres de recherche intelligente"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poste recherch *"}),i.jsx("input",{type:"text",value:n.position,onChange:E=>r({...n,position:E.target.value}),placeholder:"ex: Dveloppeur Full-Stack Senior",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comptences cls (spares par virgules)"}),i.jsx("input",{type:"text",value:n.skills,onChange:E=>r({...n,skills:E.target.value}),placeholder:"React, Node.js, TypeScript, AWS",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exprience minimum"}),i.jsxs("select",{value:n.experience,onChange:E=>r({...n,experience:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Indiffrent"}),i.jsx("option",{value:"1-2 ans",children:"1-2 ans minimum"}),i.jsx("option",{value:"3-5 ans",children:"3-5 ans minimum"}),i.jsx("option",{value:"5-8 ans",children:"5-8 ans minimum"}),i.jsx("option",{value:"8+ ans",children:"8+ ans (Senior/Expert)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation prfre"}),i.jsx("input",{type:"text",value:n.location,onChange:E=>r({...n,location:E.target.value}),placeholder:"Paris, Lyon, Remote, France...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire minimum"}),i.jsx("input",{type:"text",value:n.salaryMin,onChange:E=>r({...n,salaryMin:E.target.value}),placeholder:"45k",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salaire maximum"}),i.jsx("input",{type:"text",value:n.salaryMax,onChange:E=>r({...n,salaryMax:E.target.value}),placeholder:"80k",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent"})]})]}),i.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[i.jsx("div",{className:"text-sm text-gray-600",children:s&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#9b6bff]"}),i.jsx("span",{children:k})]})}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(qc,{size:16}),i.jsx("span",{children:"Historique"})]}),i.jsx("button",{onClick:R,disabled:s||!n.position,className:"bg-[#9b6bff] text-white px-8 py-3 rounded-lg hover:bg-[#9b6bff]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),i.jsx("span",{children:"Recherche en cours..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bn,{size:20}),i.jsx("span",{children:"Recherche Multi-Sources"})]})})]})]})]}),I&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(He,{className:"text-[#ff6a3d] mr-2",size:20}),"Analyse des sources"]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-3",children:"Sources utilises :"}),i.jsx("div",{className:"space-y-2",children:I.sources.map((E,T)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[w(E.name),i.jsx("span",{className:"text-sm font-medium",children:E.name})]}),i.jsxs("span",{className:"text-sm text-gray-600",children:[E.count," profils"]})]},T))})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-3",children:"Mtriques qualit :"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Score moyen :"}),i.jsxs("span",{className:"text-sm font-medium",children:[I.qualityMetrics.averageScore,"%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Profils vrifis :"}),i.jsxs("span",{className:"text-sm font-medium",children:[I.qualityMetrics.realProfilesPercentage,"%"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Profils complets :"}),i.jsxs("span",{className:"text-sm font-medium",children:[I.qualityMetrics.completeProfilesPercentage,"%"]})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-3",children:"Performance :"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Temps de recherche :"}),i.jsx("span",{className:"text-sm font-medium",children:(f==null?void 0:f.searchTime)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Sources interroges :"}),i.jsx("span",{className:"text-sm font-medium",children:(f==null?void 0:f.totalSources)||0})]})]})]})]})]}),f&&i.jsxs("div",{className:"bg-gradient-to-br from-[#f4f0ec] to-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(T4,{className:"text-[#ff6a3d] mr-2",size:20}),"Insights du march franais"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-2",children:"Analyse du march :"}),i.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg border",children:f.marketInsights})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-2",children:"Benchmark salarial :"}),i.jsx("p",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg border",children:f.salaryBenchmark})]})]}),((P=f.suggestedSkills)==null?void 0:P.length)>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"font-medium text-[#223049] mb-2",children:"Comptences tendance :"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:f.suggestedSkills.map((E,T)=>i.jsx("span",{className:"px-3 py-1 bg-[#9b6bff]/10 text-[#9b6bff] text-sm rounded-full",children:E},T))})]})]}),g&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-blue-800",children:[i.jsx(Ki,{size:16}),i.jsx("span",{className:"font-medium",children:"Rsum de la recherche :"})]}),i.jsx("p",{className:"text-blue-700 mt-1 text-sm",children:g})]}),o.length>0&&i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#223049] flex items-center",children:[i.jsx(an,{className:"text-[#ff6a3d] mr-2",size:20}),"Candidats trouvs (",o.length,")"]}),u.length>0&&i.jsxs("button",{onClick:M,className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Oi,{size:16}),i.jsxs("span",{children:["Importer slectionns (",u.length,")"]})]})]})}),i.jsx("div",{className:"divide-y divide-gray-100",children:o.map(E=>i.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("input",{type:"checkbox",checked:u.includes(E.id),onChange:()=>A(E.id),className:"w-4 h-4 text-[#9b6bff] border-gray-300 rounded focus:ring-[#9b6bff] mt-1"}),i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:E.avatar,alt:E.name,className:"w-16 h-16 rounded-full object-cover"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-white rounded-full flex items-center justify-center shadow-sm",children:i.jsx("div",{className:`w-4 h-4 rounded-full ${E.score>=90?"bg-green-500":E.score>=80?"bg-[#ff6a3d]":"bg-yellow-500"}`})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049] text-lg",children:E.name}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:16,className:"text-[#9b6bff]"}),i.jsxs("span",{className:"text-sm font-medium text-[#9b6bff]",children:[E.score,"% match"]})]}),S(E)]}),E.headline&&i.jsx("p",{className:"text-gray-700 font-medium mb-1",children:E.headline}),i.jsx("p",{className:"text-gray-900 font-medium mb-2",children:E.position}),i.jsx("p",{className:"text-sm text-gray-600 mb-3 leading-relaxed",children:E.summary}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx($o,{size:14}),i.jsx("span",{children:E.location})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Nt,{size:14}),i.jsx("span",{children:E.experience})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(X_,{size:14}),i.jsx("span",{children:E.salary})]})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[E.company&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(g4,{size:14}),i.jsx("span",{children:E.company})]}),E.connections&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(an,{size:14}),i.jsxs("span",{children:[E.connections,"+ connexions"]})]})]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[E.skills.slice(0,6).map((T,V)=>i.jsx("span",{className:"px-3 py-1 bg-[#9b6bff]/10 text-[#9b6bff] text-sm rounded-full font-medium",children:T},V)),E.skills.length>6&&i.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 text-sm rounded-full",children:["+",E.skills.length-6," autres"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[b(E.availability),E.certifications&&E.certifications.length>0&&i.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1",children:[i.jsx(gf,{size:12}),i.jsxs("span",{children:[E.certifications.length," certification",E.certifications.length>1?"s":""]})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[E.linkedinUrl&&i.jsxs("a",{href:E.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 text-sm",children:[i.jsx(Xl,{size:14}),i.jsx("span",{children:"Voir LinkedIn"})]}),E.githubProfile&&i.jsxs("a",{href:E.githubProfile,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-gray-700 hover:text-gray-900 text-sm",children:[i.jsx(Gd,{size:14}),i.jsx("span",{children:"GitHub"})]}),i.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-sm",children:[w(E.source),i.jsx("span",{children:E.source})]})]})]})]}),E.strengths&&E.strengths.length>0&&i.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-[#f4f0ec] to-white rounded-lg",children:[i.jsxs("h4",{className:"text-sm font-medium text-[#223049] mb-2 flex items-center",children:[i.jsx(zn,{size:16,className:"text-[#9b6bff] mr-1"}),"Points forts dtects par l'IA :"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:E.strengths.slice(0,3).map((T,V)=>i.jsxs("span",{className:"text-xs text-green-700 bg-green-100 px-2 py-1 rounded",children:[" ",T]},V))})]}),E.qualityIndicators&&i.jsxs("div",{className:"mt-3 flex items-center space-x-4 text-xs text-gray-500",children:[i.jsxs("span",{children:["Compltude: ",E.qualityIndicators.profileCompleteness,"%"]}),i.jsxs("span",{children:["Fiabilit: ",E.qualityIndicators.sourceReliability]}),i.jsxs("span",{children:["Contactabilit: ",E.qualityIndicators.contactability]})]})]},E.id))})]}),o.length===0&&!s&&i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx("div",{className:"w-16 h-16 bg-[#9b6bff]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(zn,{size:32,className:"text-[#9b6bff]"})}),i.jsx("h3",{className:"text-xl font-semibold text-[#223049] mb-4",children:"Sourcing IA Multi-Sources Pro"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Recherchez de vrais candidats sur LinkedIn, GitHub, rseaux professionnels et notre base franaise avec scoring IA avanc et enrichissement automatique."}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Se,{size:16}),i.jsx("span",{children:"Profils LinkedIn vrifis"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Se,{size:16}),i.jsx("span",{children:"Dveloppeurs GitHub rels"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Se,{size:16}),i.jsx("span",{children:"Scoring IA Perplexity"})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[i.jsx(Se,{size:16}),i.jsx("span",{children:"Donnes march franais"})]})]})]})})]})},LM=()=>{const{candidates:t,loading:e,updateCandidate:n,deleteCandidate:r}=Gr(),[s,a]=D.useState(null),[o,l]=D.useState(null),u=[{id:"To Contact",title:" contacter",color:"bg-blue-100 border-blue-200",textColor:"text-blue-800"},{id:"Contacted",title:"Contact",color:"bg-yellow-100 border-yellow-200",textColor:"text-yellow-800"},{id:"Interview",title:"Entretien",color:"bg-orange-100 border-orange-200",textColor:"text-orange-800"},{id:"Qualified",title:"Qualifi",color:"bg-purple-100 border-purple-200",textColor:"text-purple-800"},{id:"Hired",title:"Embauch",color:"bg-green-100 border-green-200",textColor:"text-green-800"},{id:"Rejected",title:"Rejet",color:"bg-red-100 border-red-200",textColor:"text-red-800"}],d=x=>t.filter(v=>v.status===x),f=()=>u.map(x=>({...x,count:d(x.id).length,averageScore:d(x.id).reduce((v,R)=>v+R.score,0)/Math.max(1,d(x.id).length)})),m=(x,v)=>{a(v),x.dataTransfer.effectAllowed="move"},g=x=>{x.preventDefault(),x.dataTransfer.dropEffect="move"},N=async(x,v)=>{if(x.preventDefault(),s&&s.status!==v)try{await n(s.id,{status:v})}catch(R){console.error("Erreur lors du dplacement:",R)}a(null)},k=async x=>{try{await r(x),l(null)}catch(v){console.error("Erreur lors de la suppression:",v)}},C=t.length,I=C>0?Math.round(t.reduce((x,v)=>x+v.score,0)/C):0,y=t.filter(x=>["Contacted","Interview","Qualified"].includes(x.status)).length;return e?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#ff6a3d] to-[#ff6a3d]/80 rounded-2xl p-8 text-white",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(He,{className:"mr-3",size:32}),"Pipeline de recrutement"]}),i.jsx("p",{className:"text-gray-200",children:"Suivez et grez vos candidats  travers le processus de recrutement"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:C}),i.jsx("div",{className:"text-sm opacity-90",children:"Total candidats"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsx("div",{className:"text-2xl font-bold",children:y}),i.jsx("div",{className:"text-sm opacity-90",children:"En cours de traitement"})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsxs("div",{className:"text-2xl font-bold",children:[I,"%"]}),i.jsx("div",{className:"text-sm opacity-90",children:"Score moyen IA"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Vue pipeline"}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6 min-h-[600px]",children:u.map(x=>{const v=d(x.id),R=f().find(A=>A.id===x.id);return i.jsxs("div",{className:`${x.color} border-2 border-dashed rounded-lg p-4`,onDragOver:g,onDrop:A=>N(A,x.id),children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:`font-medium ${x.textColor}`,children:x.title}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${x.textColor} bg-white`,children:v.length})]}),v.length>0&&i.jsxs("div",{className:"text-xs text-gray-600",children:["Score moyen: ",Math.round((R==null?void 0:R.averageScore)||0),"%"]})]}),i.jsxs("div",{className:"space-y-3",children:[v.map(A=>i.jsxs("div",{draggable:!0,onDragStart:M=>m(M,A),className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-move hover:shadow-md transition-all group",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-[#223049] truncate",children:A.name}),i.jsx("p",{className:"text-sm text-gray-600 truncate",children:A.position})]}),i.jsx("div",{className:"relative",children:i.jsx("button",{className:"p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(k4,{size:16,className:"text-gray-400"})})})]}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(In,{size:12,className:"text-[#ff6a3d]"}),i.jsxs("span",{className:"text-xs font-medium",children:[A.score,"%"]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:A.experience})]}),i.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[A.skills.slice(0,2).map((M,j)=>i.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:M},j)),A.skills.length>2&&i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",A.skills.length-2]})]}),i.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>window.open(`tel:${A.phone}`),className:"p-1.5 bg-green-100 text-green-600 rounded hover:bg-green-200 transition-colors",title:"Appeler",children:i.jsx(Di,{size:12})}),i.jsx("button",{onClick:()=>window.open(`mailto:${A.email}`),className:"p-1.5 bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition-colors",title:"Email",children:i.jsx(Vr,{size:12})}),i.jsx("button",{onClick:()=>l(A.id),className:"p-1.5 bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors",title:"Supprimer",children:i.jsx(Bo,{size:12})})]})]},A.id)),v.length===0&&i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx("div",{className:"text-sm",children:"Aucun candidat"}),i.jsx("div",{className:"text-xs",children:"Glissez un candidat ici"})]})]})]},x.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Rpartition par tape"}),i.jsx("div",{className:"space-y-3",children:f().map(x=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:x.title}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#ff6a3d] h-2 rounded-full",style:{width:`${C>0?x.count/C*100:0}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:x.count})]})]},x.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Mtriques de performance"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Taux de conversion"}),i.jsxs("span",{className:"text-lg font-semibold text-green-600",children:[C>0?Math.round(t.filter(x=>x.status==="Hired").length/C*100):0,"%"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Candidats qualifis"}),i.jsx("span",{className:"text-lg font-semibold text-[#9b6bff]",children:t.filter(x=>x.status==="Qualified").length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"En attente de contact"}),i.jsx("span",{className:"text-lg font-semibold text-blue-600",children:t.filter(x=>x.status==="To Contact").length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Score moyen IA"}),i.jsxs("span",{className:"text-lg font-semibold text-[#ff6a3d]",children:[I,"%"]})]})]})]})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-4",children:"Confirmer la suppression"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"tes-vous sr de vouloir supprimer ce candidat ? Cette action est irrversible."}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx("button",{onClick:()=>l(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:()=>k(o),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Supprimer"})]})]})})]})},VM=()=>{const{candidates:t,loading:e}=Gr(),n=D.useMemo(()=>{if(t.length===0)return{totalCandidates:0,averageScore:0,conversionRate:0,topSources:[],statusDistribution:[],scoreDistribution:[],monthlyTrends:[],topSkills:[],locationStats:[],salaryRanges:[]};const r=t.length,s=Math.round(t.reduce((v,R)=>v+R.score,0)/r),a=t.filter(v=>v.status==="Hired").length,o=Math.round(a/r*100),l=t.reduce((v,R)=>(v[R.source]=(v[R.source]||0)+1,v),{}),u=Object.entries(l).sort((v,R)=>R[1]-v[1]).slice(0,5).map(([v,R])=>({source:v,count:R,percentage:Math.round(R/r*100)})),d=t.reduce((v,R)=>(v[R.status]=(v[R.status]||0)+1,v),{}),f=Object.entries(d).map(([v,R])=>({status:v,count:R,percentage:Math.round(R/r*100)})),g=[{range:"90-100%",min:90,max:100,color:"bg-green-500"},{range:"80-89%",min:80,max:89,color:"bg-[#ff6a3d]"},{range:"70-79%",min:70,max:79,color:"bg-yellow-500"},{range:"60-69%",min:60,max:69,color:"bg-orange-500"},{range:"<60%",min:0,max:59,color:"bg-red-500"}].map(v=>{const R=t.filter(A=>A.score>=v.min&&A.score<=v.max).length;return{...v,count:R,percentage:Math.round(R/r*100)}}),N=t.reduce((v,R)=>(R.skills.forEach(A=>{v[A]=(v[A]||0)+1}),v),{}),k=Object.entries(N).sort((v,R)=>R[1]-v[1]).slice(0,10).map(([v,R])=>({skill:v,count:R})),C=t.reduce((v,R)=>(R.location&&(v[R.location]=(v[R.location]||0)+1),v),{}),I=Object.entries(C).sort((v,R)=>R[1]-v[1]).slice(0,8).map(([v,R])=>({location:v,count:R,percentage:Math.round(R/r*100)})),y=t.filter(v=>v.salary&&v.salary.includes("k")).map(v=>parseInt(v.salary.replace("k",""))).filter(v=>!isNaN(v)),x=[{range:"30-40k",min:30,max:40},{range:"40-50k",min:40,max:50},{range:"50-60k",min:50,max:60},{range:"60-70k",min:60,max:70},{range:"70k+",min:70,max:999}].map(v=>{const R=y.filter(A=>A>=v.min&&A<v.max).length;return{...v,count:R,percentage:y.length>0?Math.round(R/y.length*100):0}});return{totalCandidates:r,averageScore:s,conversionRate:o,topSources:u,statusDistribution:f,scoreDistribution:g,topSkills:k,locationStats:I,salaryRanges:x}},[t]);return e?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(Ou,{className:"mr-3",size:32}),"Analytics RH"]}),i.jsx("p",{className:"text-gray-100",children:"Tableaux de bord et mtriques de performance de vos recrutements"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:n.totalCandidates}),i.jsx("div",{className:"text-sm text-gray-100",children:"Candidats analyss"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(an,{className:"text-[#ff6a3d]",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.totalCandidates}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Total candidats"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(gf,{className:"text-[#9b6bff]",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[n.averageScore,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Score moyen IA"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(kn,{className:"text-green-600",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[n.conversionRate,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Taux de conversion"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(Ms,{className:"text-blue-600",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:t.filter(r=>["Contacted","Interview","Qualified"].includes(r.status)).length}),i.jsx("p",{className:"text-gray-600 text-sm",children:"En cours"})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Rpartition par statut"}),i.jsx("div",{className:"space-y-4",children:n.statusDistribution.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.status}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#ff6a3d] h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.status))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Distribution des scores IA"}),i.jsx("div",{className:"space-y-4",children:n.scoreDistribution.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.range}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:`${r.color} h-2 rounded-full`,style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.range))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Sources principales"}),i.jsx("div",{className:"space-y-4",children:n.topSources.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.source}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#9b6bff] h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-12",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.source))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Comptences les plus demandes"}),i.jsx("div",{className:"space-y-3",children:n.topSkills.slice(0,8).map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.skill}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-1.5",children:i.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${Math.min(100,r.count/n.totalCandidates*100*3)}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:r.count})]})]},r.skill))})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Rpartition gographique"}),i.jsx("div",{className:"space-y-3",children:n.locationStats.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.location}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.location))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Rpartition salariale"}),i.jsx("div",{className:"space-y-3",children:n.salaryRanges.map((r,s)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:r.range}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-[#ff6a3d] h-2 rounded-full",style:{width:`${r.percentage}%`}})}),i.jsx("span",{className:"text-sm font-medium w-8",children:r.count}),i.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[r.percentage,"%"]})]})]},r.range))})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-[#f4f0ec] to-white rounded-xl border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(gf,{className:"text-[#ff6a3d] mr-2",size:20}),"Recommandations IA"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-[#223049]",children:"Points forts dtects:"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Score IA moyen lev (",n.averageScore,"%)"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Diversit des sources de candidats"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Pipeline bien aliment"]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h4",{className:"font-medium text-[#223049]",children:"Optimisations suggres:"}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Amliorer le taux de conversion"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Suivre plus rgulirement les candidats"]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx("span",{className:"w-2 h-2 bg-[#ff6a3d] rounded-full mr-2"}),"Enrichir les profils candidats"]})]})]})]})]})]})},FM=()=>{const{candidates:t}=Gr(),[e,n]=D.useState(new Date);D.useState("month");const[r,s]=D.useState(new Date),[a,o]=D.useState(!1),[l,u]=D.useState([{id:"1",candidateId:"demo1",candidateName:"Marie Dubois",candidateEmail:"marie.dubois@email.com",candidatePhone:"06 12 34 56 78",position:"Dveloppeur Full-Stack",date:new Date(2024,11,15,14,30),time:"14:30",duration:60,type:"video",notes:"Entretien technique avec l'quipe dev",status:"scheduled"},{id:"2",candidateId:"demo2",candidateName:"Thomas Martin",candidateEmail:"thomas.martin@email.com",candidatePhone:"06 98 76 54 32",position:"Lead Developer",date:new Date(2024,11,16,10,0),time:"10:00",duration:90,type:"onsite",location:"Bureau Paris",notes:"Entretien final avec la direction",status:"scheduled"},{id:"3",candidateId:"demo3",candidateName:"Sarah Johnson",candidateEmail:"sarah.johnson@email.com",candidatePhone:"06 11 22 33 44",position:"Product Manager",date:new Date(2024,11,17,15,0),time:"15:00",duration:45,type:"phone",notes:"Premier contact tlphonique",status:"scheduled"}]),[d,f]=D.useState({candidateId:"",date:"",time:"",duration:60,type:"video",location:"",notes:""}),m=["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],g=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],N=()=>{const A=e.getFullYear(),M=e.getMonth(),j=new Date(A,M,1),S=new Date(A,M+1,0).getDate(),b=j.getDay(),P=[];for(let T=b-1;T>=0;T--){const V=new Date(A,M,-T);P.push({date:V,isCurrentMonth:!1})}for(let T=1;T<=S;T++){const V=new Date(A,M,T);P.push({date:V,isCurrentMonth:!0})}const E=42-P.length;for(let T=1;T<=E;T++){const V=new Date(A,M+1,T);P.push({date:V,isCurrentMonth:!1})}return P},k=A=>l.filter(M=>M.date.toDateString()===A.toDateString()),C=()=>k(new Date),I=()=>{const A=new Date,M=new Date(A.getTime()+7*24*60*60*1e3);return l.filter(j=>j.date>=A&&j.date<=M&&j.status==="scheduled").sort((j,w)=>j.date.getTime()-w.date.getTime())},y=()=>{if(!d.candidateId||!d.date||!d.time){alert("Veuillez remplir tous les champs obligatoires");return}const A=t.find(b=>b.id===d.candidateId);if(!A)return;const[M,j]=d.time.split(":").map(Number),w=new Date(d.date);w.setHours(M,j);const S={id:Date.now().toString(),candidateId:A.id,candidateName:A.name,candidateEmail:A.email,candidatePhone:A.phone||"",position:A.position,date:w,time:d.time,duration:d.duration,type:d.type,location:d.location,notes:d.notes,status:"scheduled"};u([...l,S]),o(!1),f({candidateId:"",date:"",time:"",duration:60,type:"video",location:"",notes:""})},x=A=>{switch(A){case"phone":return i.jsx(Di,{size:16,className:"text-blue-500"});case"video":return i.jsx(Nt,{size:16,className:"text-green-500"});case"onsite":return i.jsx($o,{size:16,className:"text-purple-500"});default:return i.jsx(Nt,{size:16,className:"text-gray-500"})}},v=A=>{switch(A){case"phone":return"Tlphone";case"video":return"Visio";case"onsite":return"Prsentiel";default:return"Entretien"}},R=A=>{const M=new Date(e);A==="prev"?M.setMonth(M.getMonth()-1):M.setMonth(M.getMonth()+1),n(M)};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(Nt,{className:"mr-3",size:32}),"Agenda intelligent"]}),i.jsx("p",{className:"text-gray-100",children:"Planification automatique et gestion des entretiens candidats"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:l.length}),i.jsx("div",{className:"text-sm text-gray-100",children:"Entretiens programms"})]})]})}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Aujourd'hui"}),i.jsx("div",{className:"space-y-3",children:C().length===0?i.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun entretien aujourd'hui"}):C().map(A=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[x(A.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:A.candidateName}),i.jsxs("p",{className:"text-xs text-gray-500",children:[A.time,"  ",A.duration,"min"]})]})]},A.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Cette semaine"}),i.jsx("div",{className:"space-y-3",children:I().slice(0,3).map(A=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[x(A.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm truncate",children:A.candidateName}),i.jsxs("p",{className:"text-xs text-gray-500",children:[A.date.toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"}),"  ",A.time]})]})]},A.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Actions rapides"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>o(!0),className:"w-full bg-[#ff6a3d] text-white px-4 py-3 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center justify-center space-x-2",children:[i.jsx(Oi,{size:16}),i.jsx("span",{children:"Nouvel entretien"})]}),i.jsx("button",{className:"w-full border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors",children:"Synchroniser calendrier"}),i.jsx("button",{className:"w-full border border-gray-300 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-50 transition-colors",children:"Envoyer rappels"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#223049]",children:[m[e.getMonth()]," ",e.getFullYear()]}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>R("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(w4,{size:20})}),i.jsx("button",{onClick:()=>n(new Date),className:"px-4 py-2 text-sm bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Aujourd'hui"}),i.jsx("button",{onClick:()=>R("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(b4,{size:20})})]})})]}),i.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[g.map(A=>i.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-600 bg-gray-50",children:A},A)),N().map(({date:A,isCurrentMonth:M},j)=>{const w=k(A),S=A.toDateString()===new Date().toDateString();return i.jsxs("div",{className:`min-h-[120px] p-2 border border-gray-100 ${M?"bg-white":"bg-gray-50"} ${S?"bg-blue-50 border-blue-200":""} hover:bg-gray-50 transition-colors cursor-pointer`,onClick:()=>s(A),children:[i.jsx("div",{className:`text-sm ${M?"text-gray-900":"text-gray-400"} ${S?"font-bold text-blue-600":""}`,children:A.getDate()}),i.jsxs("div",{className:"mt-1 space-y-1",children:[w.slice(0,3).map(b=>i.jsxs("div",{className:`text-xs p-1 rounded truncate ${b.type==="phone"?"bg-blue-100 text-blue-800":b.type==="video"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,title:`${b.candidateName} - ${b.time}`,children:[b.time," ",b.candidateName]},b.id)),w.length>3&&i.jsxs("div",{className:"text-xs text-gray-500",children:["+",w.length-3," autres"]})]})]},j)})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Prochains entretiens"}),i.jsx("div",{className:"space-y-4",children:I().map(A=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:x(A.type)}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-[#223049]",children:A.candidateName}),i.jsx("p",{className:"text-sm text-gray-600",children:A.position}),i.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(Nt,{size:14,className:"mr-1"}),A.date.toLocaleDateString("fr-FR")]}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(Ms,{size:14,className:"mr-1"}),A.time," (",A.duration,"min)"]}),i.jsx("span",{children:v(A.type)})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>window.open(`mailto:${A.candidateEmail}`),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Envoyer un email",children:i.jsx(Vr,{size:16})}),i.jsx("button",{onClick:()=>window.open(`tel:${A.candidatePhone}`),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Appeler",children:i.jsx(Di,{size:16})})]})]},A.id))})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Planifier un entretien"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidat"}),i.jsxs("select",{value:d.candidateId,onChange:A=>f({...d,candidateId:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Slectionner un candidat"}),t.filter(A=>["Contacted","Interview","Qualified"].includes(A.status)).map(A=>i.jsxs("option",{value:A.id,children:[A.name," - ",A.position]},A.id))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),i.jsx("input",{type:"date",value:d.date,onChange:A=>f({...d,date:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure"}),i.jsx("input",{type:"time",value:d.time,onChange:A=>f({...d,time:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),i.jsxs("select",{value:d.type,onChange:A=>f({...d,type:A.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"video",children:"Visioconfrence"}),i.jsx("option",{value:"phone",children:"Tlphone"}),i.jsx("option",{value:"onsite",children:"Prsentiel"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dure (min)"}),i.jsxs("select",{value:d.duration,onChange:A=>f({...d,duration:Number(A.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:30,children:"30 minutes"}),i.jsx("option",{value:45,children:"45 minutes"}),i.jsx("option",{value:60,children:"1 heure"}),i.jsx("option",{value:90,children:"1h30"}),i.jsx("option",{value:120,children:"2 heures"})]})]})]}),d.type==="onsite"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lieu"}),i.jsx("input",{type:"text",value:d.location,onChange:A=>f({...d,location:A.target.value}),placeholder:"Adresse du rendez-vous",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),i.jsx("textarea",{value:d.notes,onChange:A=>f({...d,notes:A.target.value}),rows:3,placeholder:"Notes sur l'entretien...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"flex space-x-4 mt-6",children:[i.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:y,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Planifier"})]})]})})]})};class zM{async generateJobDescription(e){await new Promise(u=>setTimeout(u,2e3));const{title:n,department:r,location:s,experience:a,salary:o}=e,l=this.determineJobType(n);return{description:this.generateDescription(n,r,l),requirements:this.generateRequirements(l,a),benefits:this.generateBenefits(s,o),skills:this.generateSkills(l),marketAnalysis:this.generateMarketAnalysis(n,s,o)}}async scoreJobPosting(e){var r,s,a,o,l,u;let n=70;return((r=e.description)==null?void 0:r.length)>200&&(n+=10),((s=e.requirements)==null?void 0:s.length)>=3&&(n+=10),((a=e.benefits)==null?void 0:a.length)>=3&&(n+=10),((o=e.skills)==null?void 0:o.length)>=4&&(n+=5),e.salary&&(n+=5),(l=e.benefits)!=null&&l.some(d=>d.toLowerCase().includes("tltravail"))&&(n+=5),(u=e.benefits)!=null&&u.some(d=>d.toLowerCase().includes("formation"))&&(n+=3),n+=Math.floor(Math.random()*10)-5,Math.min(100,Math.max(60,n))}determineJobType(e){const n=e.toLowerCase();return n.includes("dveloppeur")||n.includes("developer")||n.includes("dev")?"developer":n.includes("product")||n.includes("pm")?"product":n.includes("data")||n.includes("scientist")||n.includes("analyst")?"data":n.includes("design")||n.includes("ux")||n.includes("ui")?"design":n.includes("devops")||n.includes("sre")||n.includes("infrastructure")?"devops":n.includes("marketing")||n.includes("growth")?"marketing":"general"}generateDescription(e,n,r){const s={developer:`Nous recherchons un ${e} passionn pour rejoindre notre quipe ${n||"Engineering"}. Vous contribuerez au dveloppement de solutions innovantes et scalables qui impactent directement nos utilisateurs.

Au quotidien, vous serez amen(e)  :
 Concevoir et dvelopper de nouvelles fonctionnalits
 Collaborer troitement avec les quipes produit et design
 Participer  l'architecture technique et aux choix technologiques
 Assurer la qualit du code et les bonnes pratiques
 Mentorer les dveloppeurs junior
 Contribuer  l'amlioration continue de nos processus

Rejoignez une quipe dynamique o votre expertise technique sera valorise et o vous aurez l'opportunit de faire voluer vos comptences sur des projets  fort impact.`,product:`Nous recherchons un ${e} expriment pour piloter la stratgie produit et l'innovation au sein de notre quipe ${n||"Product"}.

Vos missions principales :
 Dfinir et excuter la roadmap produit en cohrence avec la vision entreprise
 Analyser les besoins utilisateurs et identifier les opportunits de croissance
 Collaborer avec les quipes engineering, design et data pour livrer des fonctionnalits  impact
 Piloter les mtriques produit et optimiser les parcours utilisateurs
 Grer le backlog et prioriser les dveloppements
 Animer les rituels agiles et faciliter la prise de dcision

Poste cl pour faonner l'avenir de nos produits et maximiser la satisfaction utilisateur.`,data:`Rejoignez notre quipe Data en tant que ${e} et contribuez  transformer les donnes en insights actionnables pour acclrer la croissance de l'entreprise.

Responsabilits :
 Dvelopper et dployer des modles de machine learning en production
 Analyser de larges volumes de donnes pour identifier des patterns et opportunits
 Collaborer avec les quipes mtier pour traduire les besoins en solutions data
 Construire et maintenir des pipelines de donnes robustes et scalables
 Crer des dashboards et rapports pour le pilotage business
 Veiller  la qualit et  la gouvernance des donnes

Opportunit unique de travailler sur des problmatiques data varies avec un impact direct sur le business.`,design:`Nous recherchons un ${e} cratif et orient utilisateur pour concevoir des expriences exceptionnelles et faire voluer notre design system.

Missions :
 Concevoir des interfaces utilisateur intuitives et esthtiques
 Mener des recherches utilisateurs et des tests d'usabilit
 Collaborer troitement avec les quipes produit et development
 Faire voluer et maintenir notre design system
 Prototyper et itrer sur les concepts design
 Assurer la cohrence de l'exprience utilisateur sur tous nos produits

Rejoignez une quipe o le design thinking est au cur de notre approche produit.`,marketing:`Rejoignez notre quipe Marketing en tant que ${e} et contribuez  acclrer notre croissance et renforcer notre prsence sur le march.

Vos responsabilits :
 Dvelopper et excuter les stratgies d'acquisition et de rtention
 Grer les campagnes multi-canaux (digital, content, events)
 Analyser les performances et optimiser les conversions
 Collaborer avec les quipes produit pour le go-to-market
 Crer du contenu engageant et dvelopper la brand awareness
 Piloter les partenariats et relations influenceurs

Poste stratgique pour faire rayonner notre marque et nos produits.`,general:`Nous recherchons un ${e} motiv pour rejoindre notre quipe ${n||""} et contribuer au dveloppement de notre entreprise en pleine croissance.

Missions principales :
 Contribuer activement aux projets stratgiques de l'quipe
 Collaborer avec les diffrentes parties prenantes internes
 Apporter votre expertise pour optimiser nos processus
 Participer  l'innovation et  l'amlioration continue
 Dvelopper vos comptences dans un environnement stimulant

Opportunit de rejoindre une quipe dynamique avec de relles perspectives d'volution.`};return s[r]||s.general}generateRequirements(e,n){const r={developer:["Matrise des langages de programmation modernes","Exprience avec les frameworks front-end et/ou back-end","Connaissance des bonnes pratiques de dveloppement","Exprience avec Git et les outils de CI/CD","Capacit  travailler en quipe agile","Anglais technique courant"],product:["Exprience en gestion de produit digital","Matrise des mthodologies agiles (Scrum, Kanban)","Comptences analytiques et data-driven","Excellente communication et leadership","Connaissance des outils de product management","Vision business et orient utilisateur"],data:["Matrise de Python, R ou SQL","Exprience en machine learning et statistiques","Connaissance des outils Big Data","Capacit  communiquer des insights complexes","Exprience avec les plateformes cloud","Rigueur et mthode scientifique"],design:["Matrise des outils de design (Figma, Sketch)","Exprience en UX research et testing","Connaissance des principes de design systme","Portfolio dmontrant votre expertise","Capacit  collaborer avec les dveloppeurs","Vision utilisateur et empathie"],marketing:["Exprience en marketing digital","Matrise des outils d'analytics et CRM","Comptences en content marketing","Connaissance du growth hacking","Excellente communication crite et orale","Crativit et orientation rsultats"],general:["Formation suprieure pertinente","Excellentes capacits de communication","Capacit d'adaptation et d'apprentissage","Esprit d'quipe et autonomie","Orientation rsultats et client"]};let s=[...r[e]||r.general];return(n!=null&&n.includes("Senior")||n!=null&&n.includes("5+")||n!=null&&n.includes("Lead"))&&(s.push("Leadership et mentoring d'quipe"),s.push("Vision stratgique et capacit d'influence")),s.slice(0,6)}generateBenefits(e,n){const r=["Tltravail flexible (2-3 jours/semaine)","Mutuelle premium prise en charge  100%","Tickets restaurant ou carte repas","Budget formation et confrences (2000/an)","quipement informatique au choix","RTT et congs flexibles"],s=["Stock options ou intressement","Salle de sport ou abonnement fitness","Crche d'entreprise ou aide garde d'enfants","Vlo ou transport en commun pris en charge","Team building et vnements d'quipe","Espace de travail moderne et ergonomique","Caf, snacks et fruits  volont","Horaires flexibles et amnags","Programme de mobilit internationale","Accompagnement carrire et coaching"];e!=null&&e.toLowerCase().includes("paris")&&(s.push("Prime transport Paris"),s.push("Navette entreprise")),n&&parseInt(n)>70&&(s.push("Package de rmunration attractif"),s.push("Bonus performance"));const a=s.sort(()=>.5-Math.random()).slice(0,3+Math.floor(Math.random()*2));return[...r.slice(0,4),...a].slice(0,7)}generateSkills(e){const n={developer:["JavaScript","TypeScript","React","Node.js","Python","AWS","Docker","Git","SQL","API REST"],product:["Product Management","Analytics","Agile","Scrum","UX/UI","SQL","Figma","Jira","A/B Testing","Growth"],data:["Python","R","SQL","Machine Learning","TensorFlow","Pandas","Spark","AWS","Statistics","Visualization"],design:["Figma","Sketch","Adobe Creative Suite","Prototyping","User Research","Design Thinking","Wireframing","Design System"],marketing:["Google Analytics","Facebook Ads","SEO","Content Marketing","CRM","A/B Testing","Email Marketing","Social Media"],devops:["Docker","Kubernetes","AWS","Terraform","Jenkins","Monitoring","Linux","CI/CD"],general:["Communication","Project Management","Problem Solving","Teamwork","Adaptability"]};return n[e]||n.general}generateMarketAnalysis(e,n,r){const s=[`Le march pour les ${e} est trs dynamique en France, avec une demande forte et des opportunits en croissance.`,`Position trs recherche sur le march franais, particulirement dans la rgion ${n||"le-de-France"}.`,`Profil en tension avec une comptitivit salariale importante. Fourchette ${r||"45-65k"} aligne sur le march.`,"Secteur en pleine expansion avec de nombreuses opportunits d'volution pour ce type de poste."];return s[Math.floor(Math.random()*s.length)]}}const ky=new zM,UM=()=>{const[t,e]=D.useState([]);D.useState(!1);const[n,r]=D.useState(!1),[s,a]=D.useState(null),[o,l]=D.useState(""),[u,d]=D.useState("all"),[f,m]=D.useState(!1),[g,N]=D.useState({title:"",department:"",location:"",type:"CDI",experience:"",salary:"",description:"",requirements:"",benefits:"",skills:"",closingDate:"",recruiterNotes:"",tags:""}),k=async()=>{if(!g.title){alert("Veuillez spcifier au moins un titre de poste");return}m(!0);try{const M=await ky.generateJobDescription({title:g.title,department:g.department,location:g.location,experience:g.experience,salary:g.salary});N({...g,description:M.description,requirements:M.requirements.join(`
`),benefits:M.benefits.join(`
`),skills:M.skills.join(", ")})}catch(M){console.error("Erreur gnration IA:",M),alert("Erreur lors de la gnration IA. Veuillez ressayer.")}finally{m(!1)}},C=async()=>{if(!g.title.trim()){alert("Veuillez saisir un titre de poste");return}const M={title:g.title,company:"Mon Entreprise",department:g.department,location:g.location,type:g.type,experience:g.experience,salary:g.salary,description:g.description,requirements:g.requirements.split(`
`).filter(S=>S.trim()),benefits:g.benefits.split(`
`).filter(S=>S.trim()),skills:g.skills.split(",").map(S=>S.trim()).filter(S=>S),status:"draft",closingDate:g.closingDate?new Date(g.closingDate):void 0,recruiterNotes:g.recruiterNotes,tags:g.tags.split(",").map(S=>S.trim()).filter(S=>S),publishedAt:void 0},j=await ky.scoreJobPosting(M),w={...M,id:Date.now().toString(),aiScore:j,applications:0,views:0,createdAt:new Date};e([w,...t]),r(!1),N({title:"",department:"",location:"",type:"CDI",experience:"",salary:"",description:"",requirements:"",benefits:"",skills:"",closingDate:"",recruiterNotes:"",tags:""})},I=async M=>{const j=t.map(w=>w.id===M?{...w,status:"published",publishedAt:new Date}:w);e(j)},y=async M=>{window.confirm("tes-vous sr de vouloir supprimer cette offre ?")&&e(t.filter(j=>j.id!==M))},x=M=>{switch(M){case"published":return"bg-green-100 text-green-800";case"draft":return"bg-gray-100 text-gray-800";case"closed":return"bg-red-100 text-red-800";case"paused":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},v=M=>{switch(M){case"published":return"Publie";case"draft":return"Brouillon";case"closed":return"Ferme";case"paused":return"En pause";default:return M}},R=t.filter(M=>{const j=M.title.toLowerCase().includes(o.toLowerCase())||M.department.toLowerCase().includes(o.toLowerCase()),w=u==="all"||M.status===u;return j&&w}),A={totalJobs:t.length,published:t.filter(M=>M.status==="published").length,totalApplications:t.reduce((M,j)=>M+j.applications,0),averageScore:t.length>0?Math.round(t.reduce((M,j)=>M+j.aiScore,0)/t.length):0};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#ff6a3d] to-[#ff6a3d]/80 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(xf,{className:"mr-3",size:32}),"Gestion des offres d'emploi"]}),i.jsx("p",{className:"text-gray-200",children:"Crez et grez vos offres avec l'assistance IA pour optimiser l'attractivit"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:A.totalJobs}),i.jsx("div",{className:"text-sm text-gray-200",children:"Offres cres"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Se,{className:"text-green-600",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:A.published}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Offres publies"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(an,{className:"text-blue-600",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:A.totalApplications}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Candidatures reues"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(kn,{className:"text-[#9b6bff]",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[A.averageScore,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Score IA moyen"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(Mi,{className:"text-[#ff6a3d]",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:t.reduce((M,j)=>M+j.views,0)}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Vues totales"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Mes offres d'emploi"}),i.jsxs("button",{onClick:()=>r(!0),className:"bg-[#ff6a3d] text-white px-6 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Oi,{size:16}),i.jsx("span",{children:"Nouvelle offre IA"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),i.jsx("input",{type:"text",placeholder:"Rechercher une offre...",value:o,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("select",{value:u,onChange:M=>d(M.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Tous les statuts"}),i.jsx("option",{value:"published",children:"Publies"}),i.jsx("option",{value:"draft",children:"Brouillons"}),i.jsx("option",{value:"closed",children:"Fermes"}),i.jsx("option",{value:"paused",children:"En pause"})]})]})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:i.jsx("div",{className:"divide-y divide-gray-100",children:R.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(xf,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t.length===0?"Aucune offre cre":"Aucune offre trouve"}),i.jsx("p",{className:"text-gray-500",children:t.length===0?"Commencez par crer votre premire offre d'emploi.":"Aucune offre ne correspond  vos critres de recherche."})]}):R.map(M=>i.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049] text-lg",children:M.title}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(M.status)}`,children:v(M.status)}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(kn,{size:14,className:"text-[#9b6bff]"}),i.jsxs("span",{className:"text-sm font-medium text-[#9b6bff]",children:[M.aiScore,"% IA"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx($o,{size:14}),i.jsx("span",{children:M.location||"Non spcifie"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(X_,{size:14}),i.jsx("span",{children:M.salary||"Non spcifi"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ms,{size:14}),i.jsx("span",{children:M.experience||"Non spcifie"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(an,{size:14}),i.jsxs("span",{children:[M.applications," candidatures"]})]})]}),M.skills.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[M.skills.slice(0,4).map((j,w)=>i.jsx("span",{className:"px-2 py-1 bg-[#ff6a3d]/10 text-[#ff6a3d] text-xs rounded",children:j},w)),M.skills.length>4&&i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",M.skills.length-4," autres"]})]}),M.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1",children:M.tags.map(j=>i.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["#",j]},j))})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>a(M),className:"p-2 text-gray-400 hover:text-[#9b6bff] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir dtails",children:i.jsx(Mi,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:i.jsx(Hc,{size:16})}),M.status==="draft"&&i.jsx("button",{onClick:()=>I(M.id),className:"p-2 text-gray-400 hover:text-green-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Publier",children:i.jsx(Se,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-[#ff6a3d] hover:bg-gray-100 rounded-lg transition-colors",title:"Partager",children:i.jsx(M4,{size:16})}),i.jsx("button",{onClick:()=>y(M.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Supprimer",children:i.jsx(Bo,{size:16})})]})]})},M.id))})}),n&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Crer une nouvelle offre"}),i.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre du poste *"}),i.jsx("input",{type:"text",value:g.title,onChange:M=>N({...g,title:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Dveloppeur Full-Stack Senior"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dpartement"}),i.jsx("input",{type:"text",value:g.department,onChange:M=>N({...g,department:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Engineering"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localisation"}),i.jsx("input",{type:"text",value:g.location,onChange:M=>N({...g,location:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Paris, Remote"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de contrat"}),i.jsxs("select",{value:g.type,onChange:M=>N({...g,type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"CDI",children:"CDI"}),i.jsx("option",{value:"CDD",children:"CDD"}),i.jsx("option",{value:"Stage",children:"Stage"}),i.jsx("option",{value:"Freelance",children:"Freelance"}),i.jsx("option",{value:"Alternance",children:"Alternance"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exprience requise"}),i.jsx("input",{type:"text",value:g.experience,onChange:M=>N({...g,experience:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: 3-5 ans"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fourchette salariale"}),i.jsx("input",{type:"text",value:g.salary,onChange:M=>N({...g,salary:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: 55-70k"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-[#9b6bff]/10 to-[#ff6a3d]/10 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"font-medium text-[#223049] flex items-center",children:[i.jsx(Bn,{className:"text-[#9b6bff] mr-2",size:20}),"Gnration automatique par IA"]}),i.jsx("button",{onClick:k,disabled:f||!g.title,className:"bg-[#9b6bff] text-white px-4 py-2 rounded-lg hover:bg-[#9b6bff]/90 transition-colors disabled:opacity-50 flex items-center space-x-2",children:f?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"Gnration..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Bn,{size:16}),i.jsx("span",{children:"Gnrer avec l'IA"})]})})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"L'IA va gnrer automatiquement la description, les prrequis et les avantages bass sur les informations saisies."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description du poste"}),i.jsx("textarea",{value:g.description,onChange:M=>N({...g,description:M.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Description dtaille du poste..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prrequis (un par ligne)"}),i.jsx("textarea",{value:g.requirements,onChange:M=>N({...g,requirements:M.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:`Matrise de React
Node.js et TypeScript
Exprience AWS`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Avantages (un par ligne)"}),i.jsx("textarea",{value:g.benefits,onChange:M=>N({...g,benefits:M.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:`Tltravail flexible
Mutuelle premium
Budget formation`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comptences recherches (spares par des virgules)"}),i.jsx("input",{type:"text",value:g.skills,onChange:M=>N({...g,skills:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"React, Node.js, TypeScript, AWS"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de clture"}),i.jsx("input",{type:"date",value:g.closingDate,onChange:M=>N({...g,closingDate:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (spars par des virgules)"}),i.jsx("input",{type:"text",value:g.tags,onChange:M=>N({...g,tags:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Tech, Senior, Remote"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes recruteur (prives)"}),i.jsx("textarea",{value:g.recruiterNotes,onChange:M=>N({...g,recruiterNotes:M.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Notes internes sur le poste..."})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>r(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsxs("button",{onClick:C,className:"px-6 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(e2,{size:16}),i.jsx("span",{children:"Enregistrer en brouillon"})]})]})]})]})}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:s.title}),i.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.applications}),i.jsx("div",{className:"text-sm text-blue-700",children:"Candidatures"})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.views}),i.jsx("div",{className:"text-sm text-green-700",children:"Vues"})]}),i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[s.aiScore,"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"Score IA"})]})]}),i.jsxs("div",{className:"prose max-w-none",children:[i.jsx("h3",{children:"Description"}),i.jsx("p",{className:"whitespace-pre-wrap",children:s.description||"Aucune description disponible."}),i.jsx("h3",{children:"Prrequis"}),s.requirements.length>0?i.jsx("ul",{children:s.requirements.map((M,j)=>i.jsx("li",{children:M},j))}):i.jsx("p",{children:"Aucun prrequis spcifi."}),i.jsx("h3",{children:"Avantages"}),s.benefits.length>0?i.jsx("ul",{children:s.benefits.map((M,j)=>i.jsx("li",{children:M},j))}):i.jsx("p",{children:"Aucun avantage spcifi."})]}),i.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>a(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fermer"}),i.jsx("button",{className:"px-4 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Modifier"})]})]})]})})]})},$M="modulepreload",BM=function(t){return"/"+t},Cy={},vp=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=BM(u),u in Cy)return;Cy[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":$M,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,N)=>{m.addEventListener("load",g),m.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};var Li={},qM=Object.defineProperty,HM=Object.defineProperties,WM=Object.getOwnPropertyDescriptors,Ay=Object.getOwnPropertySymbols,GM=Object.prototype.hasOwnProperty,KM=Object.prototype.propertyIsEnumerable,Py=(t,e,n)=>e in t?qM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ya=(t,e)=>{for(var n in e||(e={}))GM.call(e,n)&&Py(t,n,e[n]);if(Ay)for(var n of Ay(e))KM.call(e,n)&&Py(t,n,e[n]);return t},QM=(t,e)=>HM(t,WM(e)),re=(t,e,n)=>new Promise((r,s)=>{var a=u=>{try{l(n.next(u))}catch(d){s(d)}},o=u=>{try{l(n.throw(u))}catch(d){s(d)}},l=u=>u.done?r(u.value):Promise.resolve(u.value).then(a,o);l((n=n.apply(t,e)).next())}),YM="4.5.2",JM=class{constructor(t){this.resend=t}create(t){return re(this,arguments,function*(e,n={}){return yield this.resend.post("/api-keys",e,n)})}list(){return re(this,null,function*(){return yield this.resend.get("/api-keys")})}remove(t){return re(this,null,function*(){return yield this.resend.delete(`/api-keys/${t}`)})}},XM=class{constructor(t){this.resend=t}create(t){return re(this,arguments,function*(e,n={}){return yield this.resend.post("/audiences",e,n)})}list(){return re(this,null,function*(){return yield this.resend.get("/audiences")})}get(t){return re(this,null,function*(){return yield this.resend.get(`/audiences/${t}`)})}remove(t){return re(this,null,function*(){return yield this.resend.delete(`/audiences/${t}`)})}};function d2(t){return{attachments:t.attachments,bcc:t.bcc,cc:t.cc,from:t.from,headers:t.headers,html:t.html,reply_to:t.replyTo,scheduled_at:t.scheduledAt,subject:t.subject,tags:t.tags,text:t.text,to:t.to}}var ZM=class{constructor(t){this.resend=t}send(t){return re(this,arguments,function*(e,n={}){return this.create(e,n)})}create(t){return re(this,arguments,function*(e,n={}){const r=[];for(const a of e){if(a.react){if(!this.renderAsync)try{const{renderAsync:o}=yield vp(()=>import("./index-CditAJ_g.js"),[]);this.renderAsync=o}catch{throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}a.html=yield this.renderAsync(a.react),a.react=void 0}r.push(d2(a))}return yield this.resend.post("/emails/batch",r,n)})}},eD=class{constructor(t){this.resend=t}create(t){return re(this,arguments,function*(e,n={}){if(e.react){if(!this.renderAsync)try{const{renderAsync:s}=yield vp(()=>import("./index-CditAJ_g.js"),[]);this.renderAsync=s}catch{throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/broadcasts",{name:e.name,audience_id:e.audienceId,preview_text:e.previewText,from:e.from,html:e.html,reply_to:e.replyTo,subject:e.subject,text:e.text},n)})}send(t,e){return re(this,null,function*(){return yield this.resend.post(`/broadcasts/${t}/send`,{scheduled_at:e==null?void 0:e.scheduledAt})})}list(){return re(this,null,function*(){return yield this.resend.get("/broadcasts")})}get(t){return re(this,null,function*(){return yield this.resend.get(`/broadcasts/${t}`)})}remove(t){return re(this,null,function*(){return yield this.resend.delete(`/broadcasts/${t}`)})}update(t,e){return re(this,null,function*(){return yield this.resend.patch(`/broadcasts/${t}`,{name:e.name,audience_id:e.audienceId,from:e.from,html:e.html,text:e.text,subject:e.subject,reply_to:e.replyTo,preview_text:e.previewText})})}},tD=class{constructor(t){this.resend=t}create(t){return re(this,arguments,function*(e,n={}){return yield this.resend.post(`/audiences/${e.audienceId}/contacts`,{unsubscribed:e.unsubscribed,email:e.email,first_name:e.firstName,last_name:e.lastName},n)})}list(t){return re(this,null,function*(){return yield this.resend.get(`/audiences/${t.audienceId}/contacts`)})}get(t){return re(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.get(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`)})}update(t){return re(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.patch(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`,{unsubscribed:t.unsubscribed,first_name:t.firstName,last_name:t.lastName})})}remove(t){return re(this,null,function*(){return!t.id&&!t.email?{data:null,error:{message:"Missing `id` or `email` field.",name:"missing_required_field"}}:yield this.resend.delete(`/audiences/${t.audienceId}/contacts/${t!=null&&t.email?t==null?void 0:t.email:t==null?void 0:t.id}`)})}};function nD(t){return{name:t.name,region:t.region,custom_return_path:t.customReturnPath}}var rD=class{constructor(t){this.resend=t}create(t){return re(this,arguments,function*(e,n={}){return yield this.resend.post("/domains",nD(e),n)})}list(){return re(this,null,function*(){return yield this.resend.get("/domains")})}get(t){return re(this,null,function*(){return yield this.resend.get(`/domains/${t}`)})}update(t){return re(this,null,function*(){return yield this.resend.patch(`/domains/${t.id}`,{click_tracking:t.clickTracking,open_tracking:t.openTracking,tls:t.tls})})}remove(t){return re(this,null,function*(){return yield this.resend.delete(`/domains/${t}`)})}verify(t){return re(this,null,function*(){return yield this.resend.post(`/domains/${t}/verify`)})}},sD=class{constructor(t){this.resend=t}send(t){return re(this,arguments,function*(e,n={}){return this.create(e,n)})}create(t){return re(this,arguments,function*(e,n={}){if(e.react){if(!this.renderAsync)try{const{renderAsync:s}=yield vp(()=>import("./index-CditAJ_g.js"),[]);this.renderAsync=s}catch{throw new Error("Failed to render React component. Make sure to install `@react-email/render`")}e.html=yield this.renderAsync(e.react)}return yield this.resend.post("/emails",d2(e),n)})}get(t){return re(this,null,function*(){return yield this.resend.get(`/emails/${t}`)})}update(t){return re(this,null,function*(){return yield this.resend.patch(`/emails/${t.id}`,{scheduled_at:t.scheduledAt})})}cancel(t){return re(this,null,function*(){return yield this.resend.post(`/emails/${t}/cancel`)})}},Ry="https://api.resend.com",My=`resend-node:${YM}`,iD=typeof process<"u"&&Li&&Li.RESEND_BASE_URL||Ry,aD=typeof process<"u"&&Li&&Li.RESEND_USER_AGENT||My,oD=class{constructor(t){if(this.key=t,this.apiKeys=new JM(this),this.audiences=new XM(this),this.batch=new ZM(this),this.broadcasts=new eD(this),this.contacts=new tD(this),this.domains=new rD(this),this.emails=new sD(this),!t&&(typeof process<"u"&&Li&&(this.key=Li.RESEND_API_KEY),!this.key))throw new Error('Missing API key. Pass it to the constructor `new Resend("re_123")`');this.headers=new Headers({Authorization:`Bearer ${this.key}`,"User-Agent":aD,"Content-Type":"application/json"})}fetchRequest(t){return re(this,arguments,function*(e,n={}){try{const r=yield fetch(`${iD}${e}`,n);if(!r.ok)try{const a=yield r.text();return{data:null,error:JSON.parse(a)}}catch(a){if(a instanceof SyntaxError)return{data:null,error:{name:"application_error",message:"Internal server error. We are unable to process your request right now, please try again later."}};const o={message:r.statusText,name:"application_error"};return a instanceof Error?{data:null,error:QM(ya({},o),{message:a.message})}:{data:null,error:o}}return{data:yield r.json(),error:null}}catch{return{data:null,error:{name:"application_error",message:"Unable to fetch data. The request could not be resolved."}}}})}post(t,e){return re(this,arguments,function*(n,r,s={}){const a=new Headers(this.headers);s.idempotencyKey&&a.set("Idempotency-Key",s.idempotencyKey);const o=ya({method:"POST",headers:a,body:JSON.stringify(r)},s);return this.fetchRequest(n,o)})}get(t){return re(this,arguments,function*(e,n={}){const r=ya({method:"GET",headers:this.headers},n);return this.fetchRequest(e,r)})}put(t,e){return re(this,arguments,function*(n,r,s={}){const a=ya({method:"PUT",headers:this.headers,body:JSON.stringify(r)},s);return this.fetchRequest(n,a)})}patch(t,e){return re(this,arguments,function*(n,r,s={}){const a=ya({method:"PATCH",headers:this.headers,body:JSON.stringify(r)},s);return this.fetchRequest(n,a)})}delete(t,e){return re(this,null,function*(){const n={method:"DELETE",headers:this.headers,body:JSON.stringify(e)};return this.fetchRequest(t,n)})}};const lD=({candidateName:t,position:e,interviewDate:n,interviewTime:r,duration:s,joinLink:a,recruiterName:o,companyName:l})=>i.jsx("div",{style:{fontFamily:"Arial, sans-serif",maxWidth:"600px",margin:"0 auto",padding:"20px",backgroundColor:"#f9f9f9"},children:i.jsxs("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[i.jsxs("div",{style:{display:"inline-flex",alignItems:"center",marginBottom:"20px"},children:[i.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #ff6a3d, #9b6bff)",borderRadius:"50%",marginRight:"15px"}}),i.jsxs("div",{children:[i.jsx("h1",{style:{color:"#223049",fontSize:"24px",margin:"0",fontWeight:"bold"},children:"oya"}),i.jsx("p",{style:{color:"#666",fontSize:"12px",margin:"0"},children:"intelligence"})]})]}),i.jsx("h2",{style:{color:"#223049",fontSize:"24px",margin:"0"},children:"Invitation  un entretien"})]}),i.jsxs("div",{style:{marginBottom:"30px"},children:[i.jsxs("p",{style:{fontSize:"16px",color:"#333",lineHeight:"1.6"},children:["Bonjour ",i.jsx("strong",{children:t}),","]}),i.jsxs("p",{style:{fontSize:"16px",color:"#333",lineHeight:"1.6"},children:["Nous avons le plaisir de vous inviter  un entretien pour le poste de ",i.jsx("strong",{children:e})," chez ",l,"."]}),i.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",margin:"20px 0",border:"1px solid #e9ecef"},children:[i.jsx("h3",{style:{color:"#223049",margin:"0 0 15px 0",fontSize:"18px"},children:"Dtails de l'entretien"}),i.jsxs("div",{style:{display:"grid",gap:"10px"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("span",{style:{color:"#666",minWidth:"80px",fontSize:"14px"},children:" Date:"}),i.jsx("span",{style:{fontWeight:"bold",color:"#333"},children:n})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("span",{style:{color:"#666",minWidth:"80px",fontSize:"14px"},children:" Heure:"}),i.jsx("span",{style:{fontWeight:"bold",color:"#333"},children:r})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("span",{style:{color:"#666",minWidth:"80px",fontSize:"14px"},children:" Dure:"}),i.jsxs("span",{style:{fontWeight:"bold",color:"#333"},children:[s," minutes"]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[i.jsx("span",{style:{color:"#666",minWidth:"80px",fontSize:"14px"},children:" Type:"}),i.jsx("span",{style:{fontWeight:"bold",color:"#333"},children:"Visioconfrence"})]})]})]}),i.jsx("div",{style:{textAlign:"center",margin:"30px 0"},children:i.jsx("a",{href:a,style:{display:"inline-block",backgroundColor:"#ff6a3d",color:"white",padding:"15px 30px",borderRadius:"8px",textDecoration:"none",fontSize:"16px",fontWeight:"bold",boxShadow:"0 4px 6px rgba(255, 106, 61, 0.3)"},children:" Rejoindre l'entretien"})}),i.jsxs("div",{style:{backgroundColor:"#e3f2fd",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[i.jsx("h4",{style:{color:"#1976d2",margin:"0 0 10px 0",fontSize:"16px"},children:"Instructions importantes:"}),i.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#333"},children:[i.jsx("li",{style:{marginBottom:"5px"},children:"Cliquez sur le lien 5 minutes avant l'heure prvue"}),i.jsx("li",{style:{marginBottom:"5px"},children:"Assurez-vous d'avoir une connexion internet stable"}),i.jsx("li",{style:{marginBottom:"5px"},children:"Testez votre camra et microphone au pralable"}),i.jsx("li",{children:"Prparez vos questions sur le poste et l'entreprise"})]})]}),i.jsx("p",{style:{fontSize:"16px",color:"#333",lineHeight:"1.6"},children:"Si vous avez des questions ou un empchement, n'hsitez pas  me contacter directement."}),i.jsx("p",{style:{fontSize:"16px",color:"#333",lineHeight:"1.6"},children:"Nous avons hte de vous rencontrer !"})]}),i.jsx("div",{style:{borderTop:"1px solid #eee",paddingTop:"20px",marginTop:"30px"},children:i.jsxs("p",{style:{fontSize:"14px",color:"#666",margin:"0"},children:["Cordialement,",i.jsx("br",{}),i.jsx("strong",{children:o}),i.jsx("br",{}),"quipe Recrutement - ",l]})}),i.jsx("div",{style:{textAlign:"center",marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #eee"},children:i.jsx("p",{style:{fontSize:"12px",color:"#999",margin:"0"},children:"Entretien aliment par OYA Intelligence"})})]})}),Dy=new oD("re_c62Xs2p3_BhdxRx8HGqEo86LaYPfFmAxY");class cD{static async sendInterviewInvitation({candidateEmail:e,candidateName:n,position:r,interviewDate:s,interviewTime:a,duration:o,joinLink:l,recruiterName:u,companyName:d}){try{const{data:f,error:m}=await Dy.emails.send({from:"OYA Intelligence <noreply@oya.instantmov.fr>",to:[e],subject:`Invitation entretien - ${r} chez ${d}`,react:lD({candidateName:n,position:r,interviewDate:s,interviewTime:a,duration:o,joinLink:l,recruiterName:u,companyName:d})});return m?(console.error("Erreur envoi email:",m),{success:!1,error:m.message}):{success:!0,messageId:f==null?void 0:f.id}}catch(f){return console.error("Erreur service email:",f),{success:!1,error:f instanceof Error?f.message:"Erreur inconnue"}}}static async sendInterviewReminder({candidateEmail:e,candidateName:n,position:r,interviewDate:s,interviewTime:a,joinLink:o,companyName:l}){try{const{data:u,error:d}=await Dy.emails.send({from:"OYA Intelligence <noreply@oya.instantmov.fr>",to:[e],subject:`Rappel - Entretien demain  ${a}`,html:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
            <h2 style="color: #223049;">Rappel de votre entretien</h2>
            <p>Bonjour ${n},</p>
            <p>Nous vous rappelons que votre entretien pour le poste de <strong>${r}</strong> est prvu demain, ${s}  ${a}.</p>
            <div style="text-align: center; margin: 30px 0;">
              <a href="${o}" style="background-color: #ff6a3d; color: white; padding: 15px 30px; border-radius: 8px; text-decoration: none; font-weight: bold;">
                Rejoindre l'entretien
              </a>
            </div>
            <p> demain !</p>
            <p>quipe ${l}</p>
          </div>
        `});return d?{success:!1,error:d.message}:{success:!0,messageId:u==null?void 0:u.id}}catch(u){return{success:!1,error:u instanceof Error?u.message:"Erreur inconnue"}}}}const wp=class wp{static generateInvitationLink(e,n){const r=this.generateSecureToken(),s=new Date(Date.now()+7*24*60*60*1e3),a={id:`link-${Date.now()}`,sessionId:e,candidateId:n,token:r,expiresAt:s,used:!1,createdAt:new Date};return this.links.set(r,a),{link:`${window.location.origin}/interview/join/${r}`,token:r}}static validateToken(e){const n=this.links.get(e);return n?n.expiresAt<new Date?{valid:!1,error:"Ce lien d'invitation a expir"}:n.used?{valid:!1,error:"Ce lien a dj t utilis"}:{valid:!0,linkData:n}:{valid:!1,error:"Lien invalide ou expir"}}static markAsUsed(e){const n=this.links.get(e);return n?(n.used=!0,this.links.set(e,n),!0):!1}static getActiveLinks(){return Array.from(this.links.values()).filter(e=>!e.used&&e.expiresAt>new Date).sort((e,n)=>n.createdAt.getTime()-e.createdAt.getTime())}static generateSecureToken(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let s=0;s<32;s++)r+=e.charAt(Math.floor(Math.random()*e.length));return r}static revokeLink(e){return this.links.delete(e)}static cleanupExpiredLinks(){const e=new Date;let n=0;for(const[r,s]of this.links.entries())s.expiresAt<e&&(this.links.delete(r),n++);return n}};wp.links=new Map;let No=wp;const uD=()=>{const{candidates:t}=Gr(),[e,n]=D.useState(null),[r,s]=D.useState(!1),[a,o]=D.useState(!1),[l,u]=D.useState(!0),[d,f]=D.useState(!0),[m,g]=D.useState(0),[N,k]=D.useState(!1),[C,I]=D.useState([]),[y,x]=D.useState({candidateId:"",scheduledDate:"",duration:60}),[v,R]=D.useState(!1),[A,M]=D.useState(null),[j,w]=D.useState(null),S=D.useRef(null),b=D.useRef(null),P=D.useRef(null);D.useEffect(()=>{let F;return r&&!a&&(F=setInterval(()=>{g(de=>de+1)},1e3)),()=>clearInterval(F)},[r,a]);const E=async()=>{try{M(null);const F={video:l?{width:{ideal:1280},height:{ideal:720},facingMode:"user"}:!1,audio:d?{echoCancellation:!0,noiseSuppression:!0}:!1},de=await navigator.mediaDevices.getUserMedia(F);S.current&&(S.current.srcObject=de,await S.current.play()),b.current=de,console.log(" Accs camra/micro russi")}catch(F){console.error("Erreur accs camra/micro:",F);const de=F instanceof Error?F.message:"Erreur inconnue";de.includes("not found")||de.includes("NotFoundError")?M("Aucune camra ou microphone dtect. Vrifiez que vos appareils sont connects."):de.includes("denied")||de.includes("NotAllowedError")?M("Accs refus. Veuillez autoriser l'accs  la camra et au microphone dans votre navigateur."):M(`Erreur d'accs aux mdias: ${de}`)}},T=()=>{b.current&&(b.current.getTracks().forEach(F=>F.stop()),b.current=null),S.current&&(S.current.srcObject=null),M(null)},V=async()=>{if(b.current||await E(),b.current)try{const F=new MediaRecorder(b.current);if(P.current=F,F.start(),s(!0),g(0),e){const de={...e,status:"in_progress"};I(hn=>hn.map(Ct=>Ct.id===e.id?de:Ct)),n(de)}}catch(F){console.error("Erreur dmarrage enregistrement:",F),alert("Impossible de dmarrer l'enregistrement")}},ne=()=>{P.current&&r&&(P.current.pause(),o(!0))},ht=()=>{P.current&&a&&(P.current.resume(),o(!1))},ye=async()=>{if(P.current&&(P.current.stop(),s(!1),o(!1),e)){const F=await B(),de={...e,status:"completed",aiAnalysis:F};I(hn=>hn.map(Ct=>Ct.id===e.id?de:Ct)),n(de),k(!0)}T()},B=async()=>(await new Promise(F=>setTimeout(F,2e3)),{overallScore:75+Math.floor(Math.random()*20),communication:70+Math.floor(Math.random()*25),technicalSkills:65+Math.floor(Math.random()*30),motivation:80+Math.floor(Math.random()*20),culturalFit:75+Math.floor(Math.random()*20),keyInsights:["Communication claire et structure","Bonne matrise technique du domaine","Motivation authentique pour le poste","Bon alignement culturel avec l'entreprise"],recommendations:["Candidat recommand pour la suite du processus","Approfondir l'valuation technique","Organiser une rencontre avec l'quipe"],transcription:"Transcription automatique de l'entretien sera disponible ici...",emotions:[{timestamp:60,emotion:"Confiant",confidence:.8},{timestamp:180,emotion:"Concentr",confidence:.85},{timestamp:300,emotion:"Enthousiaste",confidence:.75}]}),Y=()=>{if(u(!l),b.current){const F=b.current.getVideoTracks()[0];F&&(F.enabled=!l)}},Z=()=>{if(f(!d),b.current){const F=b.current.getAudioTracks()[0];F&&(F.enabled=!d)}},ge=async F=>{n(F),await E()},he=F=>{const de=Math.floor(F/60),hn=F%60;return`${de.toString().padStart(2,"0")}:${hn.toString().padStart(2,"0")}`},Ee=()=>{if(!y.candidateId||!y.scheduledDate){alert("Veuillez slectionner un candidat et une date");return}const F=t.find(hn=>hn.id===y.candidateId);if(!F){alert("Candidat introuvable");return}const de={id:Date.now().toString(),candidateId:F.id,candidateName:F.name,candidateEmail:F.email,position:F.position,date:new Date(y.scheduledDate),time:new Date(y.scheduledDate).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),duration:y.duration,type:"video",status:"scheduled",notes:"",invitationSent:!1};I([de,...C]),R(!1),x({candidateId:"",scheduledDate:"",duration:60})},Qt=async F=>{w(F.id);try{const{link:de,token:hn}=No.generateInvitationLink(F.id,F.candidateId),Ct=await cD.sendInterviewInvitation({candidateEmail:F.candidateEmail,candidateName:F.candidateName,position:F.position,interviewDate:F.date.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),interviewTime:F.time,duration:F.duration,joinLink:de,recruiterName:"quipe RH",companyName:"Mon Entreprise"});if(Ct.success){const Ds={...F,invitationSent:!0,invitationLink:de};I(Qi=>Qi.map(Os=>Os.id===F.id?Ds:Os)),alert("Invitation envoye avec succs !")}else alert(`Erreur lors de l'envoi: ${Ct.error}`)}catch(de){console.error("Erreur envoi invitation:",de),alert("Erreur lors de l'envoi de l'invitation")}finally{w(null)}},zt=F=>{navigator.clipboard.writeText(F),alert("Lien copi dans le presse-papiers !")},vt=t.filter(F=>["Contacted","Interview","Qualified"].includes(F.status));return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(ls,{className:"mr-3",size:32}),"Studio d'entretiens IA"]}),i.jsx("p",{className:"text-gray-200",children:"Menez vos entretiens avec analyse IA en temps rel et invitations automatiques"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:C.length}),i.jsx("div",{className:"text-sm text-gray-200",children:"Entretiens planifis"})]})]})}),e?i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-black rounded-xl overflow-hidden aspect-video relative",children:[A?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-900 text-white p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(yp,{className:"mx-auto h-12 w-12 text-red-400 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Problme d'accs aux mdias"}),i.jsx("p",{className:"text-sm text-gray-300 mb-4",children:A}),i.jsx("button",{onClick:E,className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:"Ressayer"})]})}):i.jsx("video",{ref:S,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-2 rounded-lg",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Wc,{size:16}),i.jsx("span",{children:e.candidateName})]})}),r&&i.jsxs("div",{className:"absolute top-4 right-4 bg-red-500 text-white px-3 py-2 rounded-lg flex items-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),i.jsx("span",{children:he(m)})]}),i.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center space-x-4",children:[i.jsx("button",{onClick:Z,className:`p-3 rounded-full transition-colors ${d?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:d?i.jsx(wf,{size:20}):i.jsx(vf,{size:20})}),i.jsx("button",{onClick:Y,className:`p-3 rounded-full transition-colors ${l?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:l?i.jsx(y4,{size:20}):i.jsx(bf,{size:20})}),r?i.jsxs(i.Fragment,{children:[a?i.jsx("button",{onClick:ht,className:"p-3 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors",children:i.jsx(gi,{size:20})}):i.jsx("button",{onClick:ne,className:"p-3 bg-yellow-500 text-white rounded-full hover:bg-yellow-600 transition-colors",children:i.jsx(n2,{size:20})}),i.jsx("button",{onClick:ye,className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:i.jsx(O4,{size:20})})]}):i.jsx("button",{onClick:V,className:"p-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",disabled:!!A,children:i.jsx(gi,{size:20})})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Informations"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Candidat:"}),i.jsx("div",{className:"font-medium",children:e.candidateName})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Poste:"}),i.jsx("div",{className:"font-medium",children:e.position})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Dure prvue:"}),i.jsxs("div",{className:"font-medium",children:[e.duration," minutes"]})]}),e.invitationLink&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-600",children:"Lien candidat:"}),i.jsx("div",{className:"flex items-center space-x-2 mt-1",children:i.jsxs("button",{onClick:()=>zt(e.invitationLink),className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded flex items-center space-x-1",children:[i.jsx(yf,{size:12}),i.jsx("span",{children:"Copier"})]})})]})]})]}),r&&i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6",children:[i.jsxs("h3",{className:"font-semibold text-[#223049] mb-4 flex items-center",children:[i.jsx(zn,{className:"text-purple-500 mr-2",size:20}),"IA en temps rel"]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Communication:"}),i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-green-500 h-2 rounded-full w-4/5"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Confiance:"}),i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full w-3/4"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Engagement:"}),i.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-purple-500 h-2 rounded-full w-4/5"})})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Notes d'entretien"}),i.jsx("textarea",{rows:4,placeholder:"Prenez vos notes ici...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]}),i.jsx("div",{className:"space-y-3",children:i.jsx("button",{onClick:()=>n(null),className:"w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Quitter l'entretien"})})]})]}):i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Entretiens programms"}),i.jsxs("button",{onClick:()=>R(!0),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors flex items-center space-x-2",children:[i.jsx(Nt,{size:16}),i.jsx("span",{children:"Planifier entretien"})]})]})}),i.jsx("div",{className:"divide-y divide-gray-100",children:C.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(ls,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun entretien planifi"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"Planifiez votre premier entretien pour commencer."}),vt.length===0&&i.jsx("p",{className:"text-sm text-gray-400",children:`Aucun candidat ligible. Ajoutez d'abord des candidats avec le statut "Contact" ou "Entretien".`})]}):C.map(F=>i.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049]",children:F.candidateName}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F.status==="completed"?"bg-green-100 text-green-800":F.status==="in_progress"?"bg-blue-100 text-blue-800":F.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:F.status==="completed"?"Termin":F.status==="in_progress"?"En cours":F.status==="scheduled"?"Planifi":"Annul"}),F.invitationSent&&i.jsx(Se,{size:14,className:"text-green-500",title:"Invitation envoye"}),F.aiAnalysis&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(zn,{size:14,className:"text-purple-500"}),i.jsxs("span",{className:"text-sm font-medium text-purple-500",children:[F.aiAnalysis.overallScore,"%"]})]})]}),i.jsx("p",{className:"text-gray-600 mb-2",children:F.position}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Nt,{size:14}),i.jsx("span",{children:F.date.toLocaleDateString("fr-FR")})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ms,{size:14}),i.jsxs("span",{children:[F.time," (",F.duration,"min)"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Wc,{size:14}),i.jsx("span",{children:F.candidateEmail})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[F.status==="scheduled"&&!F.invitationSent&&i.jsxs("button",{onClick:()=>Qt(F),disabled:j===F.id,className:"bg-[#ff6a3d] text-white px-3 py-1 rounded text-sm hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-1 disabled:opacity-50",children:[j===F.id?i.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):i.jsx(P4,{size:12}),i.jsx("span",{children:"Inviter"})]}),F.invitationLink&&i.jsx("button",{onClick:()=>zt(F.invitationLink),className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Copier le lien d'invitation",children:i.jsx(yf,{size:14})}),F.invitationLink&&i.jsx("a",{href:F.invitationLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-green-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Ouvrir le lien d'invitation",children:i.jsx(N4,{size:14})}),F.status==="scheduled"&&F.invitationSent&&i.jsxs("button",{onClick:()=>ge(F),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[i.jsx(gi,{size:16}),i.jsx("span",{children:"Dmarrer"})]}),F.aiAnalysis&&i.jsx("button",{onClick:()=>{n(F),k(!0)},className:"text-purple-500 hover:text-purple-600 p-2 rounded-lg hover:bg-gray-100",title:"Voir l'analyse IA",children:i.jsx(zn,{size:16})})]})]})},F.id))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Statistiques"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Total entretiens"}),i.jsx("span",{className:"font-semibold",children:C.length})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Invitations envoyes"}),i.jsx("span",{className:"font-semibold text-green-600",children:C.filter(F=>F.invitationSent).length})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Termins"}),i.jsx("span",{className:"font-semibold text-blue-600",children:C.filter(F=>F.status==="completed").length})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600",children:"Candidats ligibles"}),i.jsx("span",{className:"font-semibold text-purple-600",children:vt.length})]})]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Fonctionnalits IA"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Se,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Invitations automatiques par email"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Se,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Liens scuriss uniques"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Se,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Analyse comportementale temps rel"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Se,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Transcription automatique"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Se,{size:16,className:"text-green-500"}),i.jsx("span",{children:"Scoring multi-critres"})]})]})]})]})]}),v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#223049] mb-6",children:"Planifier un entretien"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Candidat *"}),i.jsxs("select",{value:y.candidateId,onChange:F=>x({...y,candidateId:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Slectionner un candidat"}),vt.map(F=>i.jsxs("option",{value:F.id,children:[F.name," - ",F.position]},F.id))]}),vt.length===0&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Aucun candidat ligible. Ajoutez des candidats avec le statut "Contact" ou "Entretien".'})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date et heure *"}),i.jsx("input",{type:"datetime-local",value:y.scheduledDate,onChange:F=>x({...y,scheduledDate:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dure (minutes)"}),i.jsxs("select",{value:y.duration,onChange:F=>x({...y,duration:Number(F.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[i.jsx("option",{value:30,children:"30 minutes"}),i.jsx("option",{value:45,children:"45 minutes"}),i.jsx("option",{value:60,children:"1 heure"}),i.jsx("option",{value:90,children:"1h30"})]})]})]}),i.jsxs("div",{className:"flex space-x-4 mt-6",children:[i.jsx("button",{onClick:()=>R(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:Ee,disabled:!y.candidateId||!y.scheduledDate,className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Planifier"})]})]})}),N&&(e==null?void 0:e.aiAnalysis)&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#223049] flex items-center",children:[i.jsx(zn,{className:"text-purple-500 mr-2",size:24}),"Analyse IA - ",e.candidateName]}),i.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:""})]})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:[e.aiAnalysis.overallScore,"%"]}),i.jsx("div",{className:"text-gray-600",children:"Score global"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[e.aiAnalysis.communication,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Communication"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[e.aiAnalysis.technicalSkills,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Comptences"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[e.aiAnalysis.motivation,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Motivation"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[e.aiAnalysis.culturalFit,"%"]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Fit culturel"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Insights cls"}),i.jsx("ul",{className:"space-y-2",children:e.aiAnalysis.keyInsights.map((F,de)=>i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx(Se,{size:16,className:"text-green-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700",children:F})]},de))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-3",children:"Recommandations"}),i.jsx("ul",{className:"space-y-2",children:e.aiAnalysis.recommendations.map((F,de)=>i.jsxs("li",{className:"flex items-start space-x-2",children:[i.jsx(kn,{size:16,className:"text-blue-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-700",children:F})]},de))})]}),i.jsx("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"Fermer"})})]})]})})]})},dD=()=>{const[t,e]=D.useState([]),[n,r]=D.useState([]),[s,a]=D.useState(!1),[o,l]=D.useState(!1),[u,d]=D.useState(null),[f,m]=D.useState("rules"),[g,N]=D.useState("all"),[k,C]=D.useState({name:"",description:"",triggerType:"candidate_added",triggerConditions:{},actions:[],category:"workflow"}),[I,y]=D.useState({name:"",subject:"",content:"",category:"general"}),x=async b=>{e(P=>P.map(E=>E.id===b?{...E,isActive:!E.isActive}:E))},v=async b=>{window.confirm("tes-vous sr de vouloir supprimer cette automatisation ?")&&e(P=>P.filter(E=>E.id!==b))},R=()=>{if(!k.name.trim()){alert("Veuillez saisir un nom pour la rgle");return}const b={id:Date.now().toString(),name:k.name,description:k.description,trigger:{type:k.triggerType,conditions:k.triggerConditions},actions:[],isActive:!0,category:k.category,createdAt:new Date,runsCount:0,successRate:100};e([b,...t]),a(!1),C({name:"",description:"",triggerType:"candidate_added",triggerConditions:{},actions:[],category:"workflow"})},A=()=>{if(!I.name.trim()||!I.subject.trim()){alert("Veuillez remplir le nom et le sujet du template");return}const b={id:Date.now().toString(),name:I.name,subject:I.subject,content:I.content,variables:M(I.content+" "+I.subject),category:I.category,usage:0};r([b,...n]),l(!1),y({name:"",subject:"",content:"",category:"general"})},M=b=>{const P=/\{\{([^}]+)\}\}/g,E=[];let T;for(;(T=P.exec(b))!==null;)E.includes(T[1])||E.push(T[1]);return E},j=b=>{switch(b){case"communication":return"bg-blue-100 text-blue-800";case"workflow":return"bg-green-100 text-green-800";case"notifications":return"bg-yellow-100 text-yellow-800";case"scoring":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},w=t.filter(b=>g==="all"||b.category===g),S={totalRules:t.length,activeRules:t.filter(b=>b.isActive).length,totalRuns:t.reduce((b,P)=>b+P.runsCount,0),averageSuccessRate:t.length>0?Math.round(t.reduce((b,P)=>b+P.successRate,0)/t.length):0};return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"bg-gradient-to-r from-[#9b6bff] to-purple-400 rounded-2xl p-8 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold mb-2 flex items-center",children:[i.jsx(Bn,{className:"mr-3",size:32}),"Hub d'automatisation RH"]}),i.jsx("p",{className:"text-gray-200",children:"Automatisez vos tches rptitives et optimisez votre workflow de recrutement"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-white",children:S.activeRules}),i.jsx("div",{className:"text-sm text-gray-200",children:"Rgles actives"})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#9b6bff]/10 rounded-lg",children:i.jsx(Bn,{className:"text-[#9b6bff]",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:S.totalRules}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Rgles cres"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:i.jsx(Se,{className:"text-green-600",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:S.totalRuns}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Excutions totales"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:i.jsx(kn,{className:"text-blue-600",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsxs("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:[S.averageSuccessRate,"%"]}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Taux de succs"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"p-3 bg-[#ff6a3d]/10 rounded-lg",children:i.jsx(Vr,{className:"text-[#ff6a3d]",size:24})}),i.jsx(He,{className:"text-green-500",size:20})]}),i.jsx("h3",{className:"text-2xl font-bold text-[#223049] mb-1",children:n.length}),i.jsx("p",{className:"text-gray-600 text-sm",children:"Templates email"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"border-b border-gray-200",children:i.jsxs("div",{className:"flex space-x-8 px-6",children:[i.jsx("button",{onClick:()=>m("rules"),className:`py-4 border-b-2 font-medium text-sm ${f==="rules"?"border-[#9b6bff] text-[#9b6bff]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Rgles d'automatisation"}),i.jsx("button",{onClick:()=>m("templates"),className:`py-4 border-b-2 font-medium text-sm ${f==="templates"?"border-[#9b6bff] text-[#9b6bff]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Templates d'emails"}),i.jsx("button",{onClick:()=>m("analytics"),className:`py-4 border-b-2 font-medium text-sm ${f==="analytics"?"border-[#9b6bff] text-[#9b6bff]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Analytics"})]})}),i.jsxs("div",{className:"p-6",children:[f==="rules"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Rgles d'automatisation"}),i.jsxs("select",{value:g,onChange:b=>N(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"all",children:"Toutes les catgories"}),i.jsx("option",{value:"communication",children:"Communication"}),i.jsx("option",{value:"workflow",children:"Workflow"}),i.jsx("option",{value:"notifications",children:"Notifications"}),i.jsx("option",{value:"scoring",children:"Scoring"})]})]}),i.jsxs("button",{onClick:()=>a(!0),className:"bg-[#9b6bff] text-white px-4 py-2 rounded-lg hover:bg-[#9b6bff]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Oi,{size:16}),i.jsx("span",{children:"Nouvelle rgle"})]})]}),i.jsx("div",{className:"space-y-4",children:w.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune rgle trouve"}),i.jsx("p",{className:"text-gray-500",children:g==="all"?"Crez votre premire rgle d'automatisation.":"Aucune rgle dans cette catgorie."})]}):w.map(b=>i.jsx("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("h3",{className:"font-semibold text-[#223049]",children:b.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j(b.category)}`,children:b.category}),i.jsxs("div",{className:"flex items-center space-x-1",children:[b.isActive?i.jsx(Se,{size:16,className:"text-green-500"}):i.jsx(yp,{size:16,className:"text-gray-400"}),i.jsx("span",{className:`text-sm ${b.isActive?"text-green-600":"text-gray-500"}`,children:b.isActive?"Active":"Inactive"})]})]}),i.jsx("p",{className:"text-gray-600 mb-3",children:b.description}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(gi,{size:14}),i.jsxs("span",{children:[b.runsCount," excutions"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(kn,{size:14}),i.jsxs("span",{children:[b.successRate,"% succs"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ms,{size:14}),i.jsx("span",{children:b.lastRun?`Dernire: ${b.lastRun.toLocaleDateString("fr-FR")}`:"Jamais excute"})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Nt,{size:14}),i.jsxs("span",{children:["Cre: ",b.createdAt.toLocaleDateString("fr-FR")]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[i.jsx("button",{onClick:()=>x(b.id),className:`p-2 rounded-lg transition-colors ${b.isActive?"text-green-600 hover:bg-green-100":"text-gray-400 hover:bg-gray-100"}`,title:b.isActive?"Dsactiver":"Activer",children:b.isActive?i.jsx(n2,{size:16}):i.jsx(gi,{size:16})}),i.jsx("button",{onClick:()=>d(b),className:"p-2 text-gray-400 hover:text-[#9b6bff] hover:bg-gray-100 rounded-lg transition-colors",title:"Voir dtails",children:i.jsx(Mi,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:i.jsx(Hc,{size:16})}),i.jsx("button",{onClick:()=>v(b.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Supprimer",children:i.jsx(Bo,{size:16})})]})]})},b.id))})]}),f==="templates"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Templates d'emails"}),i.jsxs("button",{onClick:()=>l(!0),className:"bg-[#ff6a3d] text-white px-4 py-2 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors flex items-center space-x-2",children:[i.jsx(Oi,{size:16}),i.jsx("span",{children:"Nouveau template"})]})]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:n.length===0?i.jsxs("div",{className:"md:col-span-2 text-center py-12",children:[i.jsx(Vr,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun template"}),i.jsx("p",{className:"text-gray-500",children:"Crez votre premier template d'email."})]}):n.map(b=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-1",children:b.name}),i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:b.category})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Dupliquer",children:i.jsx(yf,{size:16})}),i.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Modifier",children:i.jsx(Hc,{size:16})})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Sujet:"}),i.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded border",children:b.subject})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Aperu:"}),i.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded border line-clamp-3",children:[b.content.substring(0,150),"..."]})]}),i.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("span",{children:["Variables: ",b.variables.length]}),i.jsxs("span",{children:["Utilis: ",b.usage," fois"]})]})})]},b.id))})]}),f==="analytics"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Analytics d'automatisation"}),t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ou,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune donne"}),i.jsx("p",{className:"text-gray-500",children:"Crez des rgles d'automatisation pour voir les analytics."})]}):i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-green-50 p-6 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Rgles actives"}),i.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:S.activeRules}),i.jsxs("div",{className:"text-sm text-green-700",children:["sur ",S.totalRules," cres"]})]}),i.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Excutions totales"}),i.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:S.totalRuns}),i.jsx("div",{className:"text-sm text-blue-700",children:"depuis la cration"})]}),i.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-purple-800 mb-2",children:"Taux de succs"}),i.jsxs("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:[S.averageSuccessRate,"%"]}),i.jsx("div",{className:"text-sm text-purple-700",children:"moyenne globale"})]})]})]})]})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Crer une rgle d'automatisation"})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de la rgle *"}),i.jsx("input",{type:"text",value:k.name,onChange:b=>C({...k,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",placeholder:"ex: Notification nouveaux candidats"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),i.jsx("textarea",{value:k.description,onChange:b=>C({...k,description:b.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",placeholder:"Dcrivez ce que fait cette rgle..."})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dclencheur"}),i.jsxs("select",{value:k.triggerType,onChange:b=>C({...k,triggerType:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"candidate_added",children:"Nouveau candidat ajout"}),i.jsx("option",{value:"status_changed",children:"Changement de statut"}),i.jsx("option",{value:"interview_scheduled",children:"Entretien planifi"}),i.jsx("option",{value:"score_threshold",children:"Seuil de score atteint"}),i.jsx("option",{value:"deadline_approaching",children:"chance approche"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catgorie"}),i.jsxs("select",{value:k.category,onChange:b=>C({...k,category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#9b6bff] focus:border-transparent",children:[i.jsx("option",{value:"communication",children:"Communication"}),i.jsx("option",{value:"workflow",children:"Workflow"}),i.jsx("option",{value:"notifications",children:"Notifications"}),i.jsx("option",{value:"scoring",children:"Scoring"})]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:R,className:"px-4 py-2 bg-[#9b6bff] text-white rounded-lg hover:bg-[#9b6bff]/90 transition-colors",children:"Crer la rgle"})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-xl font-semibold text-[#223049]",children:"Crer un template d'email"})}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du template *"}),i.jsx("input",{type:"text",value:I.name,onChange:b=>y({...I,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Confirmation entretien"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catgorie"}),i.jsxs("select",{value:I.category,onChange:b=>y({...I,category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",children:[i.jsx("option",{value:"candidature",children:"Candidature"}),i.jsx("option",{value:"entretien",children:"Entretien"}),i.jsx("option",{value:"relance",children:"Relance"}),i.jsx("option",{value:"refus",children:"Refus"}),i.jsx("option",{value:"general",children:"Gnral"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sujet de l'email *"}),i.jsx("input",{type:"text",value:I.subject,onChange:b=>y({...I,subject:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"ex: Votre candidature chez {{company_name}}"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contenu de l'email"}),i.jsx("textarea",{value:I.content,onChange:b=>y({...I,content:b.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:`Bonjour {{candidate_name}},

Nous avons bien reu votre candidature...

Utilisez {{variable_name}} pour insrer des variables dynamiques.`})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Variables disponibles"}),i.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[i.jsxs("div",{children:[{candidate_name}," - Nom du candidat"]}),i.jsxs("div",{children:[{position}," - Poste"]}),i.jsxs("div",{children:[{company_name}," - Nom de l'entreprise"]}),i.jsxs("div",{children:[{recruiter_name}," - Nom du recruteur"]}),i.jsxs("div",{children:[{interview_date}," - Date d'entretien"]})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:A,className:"px-4 py-2 bg-[#ff6a3d] text-white rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Crer le template"})]})]})})]})},Oy=()=>{const{currentUser:t}=Wr(),[e,n]=D.useState("dashboard"),[r,s]=D.useState(null),[a,o]=D.useState(!1);if(!t)return i.jsx(iT,{to:"/\\",replace:!0});const l=m=>{s(m),o(!0)},u=m=>{s(m),o(!0)},d=()=>{o(!1),s(null)},f=()=>{switch(e){case"dashboard":return i.jsx(vy,{});case"candidates":return i.jsx(TM,{onSelectCandidate:l,onEditCandidate:u});case"sourcing":return i.jsx(OM,{});case"pipeline":return i.jsx(LM,{});case"jobs":return i.jsx(UM,{});case"interviews":return i.jsx(uD,{});case"automation":return i.jsx(dD,{});case"analytics":return i.jsx(VM,{});case"calendar":return i.jsx(FM,{});case"settings":return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#223049] mb-6",children:"Paramtres"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-4",children:"Profil utilisateur"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom d'affichage"}),i.jsx("input",{type:"text",value:t.displayName||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",readOnly:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:t.email||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",readOnly:!0})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-[#223049] mb-4",children:"Prfrences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:"Notifications email"}),i.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-700",children:"Mode sombre"}),i.jsx("input",{type:"checkbox",className:"toggle"})]})]})]})]})]});default:return i.jsx(vy,{})}};return i.jsxs("div",{className:"min-h-screen bg-[#f4f0ec]",children:[i.jsx(W4,{activeTab:e,setActiveTab:n}),i.jsx("div",{className:"ml-64 p-8",children:f()}),a&&i.jsx(IM,{candidate:r,onClose:d,onSave:()=>{}})]})},hD=({onToggleMode:t})=>{const[e,n]=D.useState(""),[r,s]=D.useState(""),[a,o]=D.useState(!1),[l,u]=D.useState(""),[d,f]=D.useState(!1),{login:m}=Wr(),g=async N=>{N.preventDefault();try{u(""),f(!0),await m(e,r)}catch{u("chec de la connexion. Vrifiez vos identifiants.")}finally{f(!1)}};return i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#223049]",children:"oya"}),i.jsx("p",{className:"text-sm text-gray-600 -mt-1",children:"intelligence"})]})]}),i.jsx("h2",{className:"text-xl font-semibold text-[#223049] mb-2",children:"Connexion"}),i.jsx("p",{className:"text-gray-600",children:"Accdez  votre plateforme IA RH"})]}),l&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:l}),i.jsxs("form",{onSubmit:g,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"email",value:e,onChange:N=>n(N.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"votre-email@entreprise.com",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(t2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:a?"text":"password",value:r,onChange:N=>s(N.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"",required:!0}),i.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?i.jsx(Z_,{size:20}):i.jsx(Mi,{size:20})})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"w-full bg-[#ff6a3d] text-white py-3 px-4 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:d?"Connexion...":"Se connecter"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-gray-600",children:["Pas encore de compte ?"," ",i.jsx("button",{onClick:t,className:"text-[#ff6a3d] hover:text-[#ff6a3d]/80 font-medium",children:"Crer un compte"})]})}),i.jsxs("div",{className:"mt-6 p-4 bg-[#f4f0ec] rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Compte de dmonstration :"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Email: demo@oya-intelligence.com"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Mot de passe: demo123"})]})]})})},fD=({onToggleMode:t})=>{const[e,n]=D.useState(""),[r,s]=D.useState(""),[a,o]=D.useState(""),[l,u]=D.useState(!1),[d,f]=D.useState(""),[m,g]=D.useState(!1),{register:N}=Wr(),k=async C=>{if(C.preventDefault(),r.length<6)return f("Le mot de passe doit contenir au moins 6 caractres");try{f(""),g(!0),await N(e,r,a)}catch{f("Impossible de crer le compte")}finally{g(!1)}};return i.jsx("div",{className:"w-full max-w-md mx-auto",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#223049]",children:"oya"}),i.jsx("p",{className:"text-sm text-gray-600 -mt-1",children:"intelligence"})]})]}),i.jsx("h2",{className:"text-xl font-semibold text-[#223049] mb-2",children:"Crer un compte"}),i.jsx("p",{className:"text-gray-600",children:"Rejoignez la rvolution IA RH"})]}),d&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:d}),i.jsxs("form",{onSubmit:k,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom complet"}),i.jsxs("div",{className:"relative",children:[i.jsx(Wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"text",value:a,onChange:C=>o(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"Votre nom complet",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:"email",value:e,onChange:C=>n(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"votre-email@entreprise.com",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),i.jsxs("div",{className:"relative",children:[i.jsx(t2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),i.jsx("input",{type:l?"text":"password",value:r,onChange:C=>s(C.target.value),className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ff6a3d] focus:border-transparent",placeholder:"",required:!0}),i.jsx("button",{type:"button",onClick:()=>u(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?i.jsx(Z_,{size:20}):i.jsx(Mi,{size:20})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 caractres"})]}),i.jsx("button",{type:"submit",disabled:m,className:"w-full bg-[#ff6a3d] text-white py-3 px-4 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:m?"Cration...":"Crer mon compte"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-gray-600",children:["Dj un compte ?"," ",i.jsx("button",{onClick:t,className:"text-[#ff6a3d] hover:text-[#ff6a3d]/80 font-medium",children:"Se connecter"})]})})]})})},mD=()=>{const[t,e]=D.useState(!0);return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#f4f0ec] to-white flex items-center justify-center px-4",children:i.jsxs("div",{className:"w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[i.jsx("div",{className:"hidden lg:block",children:i.jsxs("div",{className:"max-w-lg",children:[i.jsxs("h1",{className:"text-4xl lg:text-5xl font-bold text-[#223049] mb-6",children:["Transformez votre",i.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#ff6a3d] to-[#9b6bff]",children:" recrutement"})]}),i.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"La plateforme IA stratgique qui automatise 80% de votre processus de recrutement tout en supprimant les intermdiaires coteux."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"ROI jusqu' +1133%"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"-50% temps RH"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"Suppression des cabinets"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),i.jsx("span",{className:"text-gray-700",children:"IA 24/7"})]})]})]})}),i.jsx("div",{children:t?i.jsx(hD,{onToggleMode:()=>e(!1)}):i.jsx(fD,{onToggleMode:()=>e(!0)})})]})})},pD=()=>{const{token:t}=HE(),e=bm(),[n,r]=D.useState(null),[s,a]=D.useState(null),[o,l]=D.useState(""),[u,d]=D.useState({name:"",email:""}),[f,m]=D.useState(!1),[g,N]=D.useState(!0),[k,C]=D.useState(!0),[I,y]=D.useState(!1),[x,v]=D.useState(!1),R=D.useRef(null),A=D.useRef(null);D.useEffect(()=>{t&&M()},[t]),D.useEffect(()=>{n&&u.name&&j()},[n,u]);const M=()=>{if(!t){r(!1),l("Lien d'invitation manquant");return}const E=No.validateToken(t);if(!E.valid){r(!1),l(E.error||"Lien invalide");return}r(!0),a(E.linkData),d({name:"Candidat Test",email:"candidat@example.com"})},j=async()=>{try{const E={video:g?{width:{ideal:1280},height:{ideal:720},facingMode:"user"}:!1,audio:k?{echoCancellation:!0,noiseSuppression:!0}:!1},T=await navigator.mediaDevices.getUserMedia(E);R.current&&(R.current.srcObject=T,await R.current.play()),A.current=T,m(!0)}catch(E){console.error("Erreur accs mdia:",E),l("Impossible d'accder  la camra ou au microphone. Vrifiez les permissions de votre navigateur.")}},w=()=>{if(N(!g),A.current){const E=A.current.getVideoTracks()[0];E&&(E.enabled=!g)}},S=()=>{if(C(!k),A.current){const E=A.current.getAudioTracks()[0];E&&(E.enabled=!k)}},b=async()=>{if(t){y(!0);try{No.markAsUsed(t),await new Promise(E=>setTimeout(E,2e3)),v(!0),y(!1)}catch{y(!1),l("Erreur lors de la connexion  l'entretien")}}},P=()=>{A.current&&A.current.getTracks().forEach(E=>E.stop()),e("/")};return n===!1?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx(yp,{className:"mx-auto h-16 w-16 text-red-500 mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Lien invalide"}),i.jsx("p",{className:"text-gray-600 mb-6",children:o}),i.jsx("button",{onClick:()=>e("/"),className:"bg-[#ff6a3d] text-white px-6 py-3 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors",children:"Retour  l'accueil"})]})}):n===null?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#ff6a3d]"})}):x?i.jsxs("div",{className:"min-h-screen bg-black flex flex-col",children:[i.jsxs("div",{className:"bg-gray-900 p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-white text-sm",children:"En direct"})]}),i.jsxs("div",{className:"text-white",children:[i.jsx("span",{className:"font-medium",children:u.name}),i.jsx("span",{className:"text-gray-400 ml-2",children:" Entretien en cours"})]})]}),i.jsxs("button",{onClick:P,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors flex items-center space-x-2",children:[i.jsx(Di,{size:16}),i.jsx("span",{children:"Quitter"})]})]}),i.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[i.jsx("video",{ref:R,autoPlay:!0,muted:!0,className:"max-w-full max-h-full object-cover rounded-lg"}),i.jsxs("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex items-center space-x-4",children:[i.jsx("button",{onClick:S,className:`p-3 rounded-full transition-colors ${k?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:k?i.jsx(wf,{size:20}):i.jsx(vf,{size:20})}),i.jsx("button",{onClick:w,className:`p-3 rounded-full transition-colors ${g?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:g?i.jsx(ls,{size:20}):i.jsx(bf,{size:20})})]})]}),i.jsx("div",{className:"bg-gray-900 p-4 text-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"Entretien en cours  Le recruteur vous rejoindra sous peu"})})]}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#ff6a3d] to-[#9b6bff] rounded-full flex items-center justify-center",children:i.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-[#223049]",children:"OYA Intelligence"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Studio d'entretien"})]})]})})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-lg font-semibold text-[#223049]",children:"Aperu vido"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Vrifiez votre camra et microphone avant de rejoindre"})]}),i.jsxs("div",{className:"relative bg-black aspect-video",children:[f?i.jsx("video",{ref:R,autoPlay:!0,muted:!0,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ls,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-white",children:"Chargement de la camra..."})]})}),i.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex items-center space-x-4",children:[i.jsx("button",{onClick:S,className:`p-3 rounded-full transition-colors ${k?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:k?i.jsx(wf,{size:20}):i.jsx(vf,{size:20})}),i.jsx("button",{onClick:w,className:`p-3 rounded-full transition-colors ${g?"bg-gray-700 text-white":"bg-red-500 text-white"}`,children:g?i.jsx(ls,{size:20}):i.jsx(bf,{size:20})})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"Dtails de l'entretien"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Wc,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:"Candidat:"}),i.jsx("span",{className:"font-medium",children:u.name})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Nt,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:"Date:"}),i.jsx("span",{className:"font-medium",children:"Aujourd'hui"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ms,{size:16,className:"text-gray-400"}),i.jsx("span",{className:"text-gray-600",children:"Dure:"}),i.jsx("span",{className:"font-medium",children:"60 minutes"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"font-semibold text-[#223049] mb-4",children:"tat de prparation"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Se,{className:"text-green-500",size:16}),i.jsx("span",{className:"text-sm text-gray-700",children:"Lien d'invitation valide"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[f?i.jsx(Se,{className:"text-green-500\\",size:16}):i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#ff6a3d]"}),i.jsx("span",{className:"text-sm text-gray-700",children:f?"Mdia prt":"Configuration mdia..."})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("button",{onClick:b,disabled:!f||I,className:"w-full bg-[#ff6a3d] text-white py-4 px-6 rounded-lg hover:bg-[#ff6a3d]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 font-semibold",children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),i.jsx("span",{children:"Connexion..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(ls,{size:20}),i.jsx("span",{children:"Rejoindre l'entretien"})]})}),!f&&i.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Veuillez autoriser l'accs  votre camra et microphone"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:[i.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Instructions"}),i.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[i.jsx("li",{children:" Assurez-vous d'tre dans un endroit calme"}),i.jsx("li",{children:" Vrifiez votre connexion internet"}),i.jsx("li",{children:" Prparez vos questions sur le poste"}),i.jsx("li",{children:" Ayez votre CV  porte de main"})]})]})]})]})})]})},gD=()=>{const{currentUser:t}=Wr();return i.jsx(mT,{children:i.jsxs(oT,{children:[i.jsx(Na,{path:"/",element:t?i.jsx(Oy,{}):i.jsx(H4,{})}),i.jsx(Na,{path:"/auth",element:i.jsx(mD,{})}),i.jsx(Na,{path:"/dashboard",element:i.jsx(Oy,{})}),i.jsx(Na,{path:"/interview/join/:token",element:i.jsx(pD,{})})]})})};function xD(){return i.jsx(f4,{children:i.jsx(gD,{})})}Qw(document.getElementById("root")).render(i.jsx(D.StrictMode,{children:i.jsx(xD,{})}));export{vp as _,$2 as g,i as j,D as r};
